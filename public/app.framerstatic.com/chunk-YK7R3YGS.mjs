import{a as Te,b as xe}from"https://app.framerstatic.com/chunk-TUJTSB5Y.mjs";import{a as q}from"https://app.framerstatic.com/chunk-T5TFDL2K.mjs";import{j as $}from"https://app.framerstatic.com/chunk-QBRDYVUO.mjs";import{ca as Re}from"https://app.framerstatic.com/chunk-I24ABD3P.mjs";import{a as ke}from"https://app.framerstatic.com/chunk-7Y7LME3V.mjs";import{e as he}from"https://app.framerstatic.com/chunk-OOEWJVJW.mjs";import{Df as Ce,Le,vb as Se,wg as ve}from"https://app.framerstatic.com/chunk-OMLUVIS3.mjs";import{ad as Ie,bd as ye,ed as Pe}from"https://app.framerstatic.com/chunk-KMAC4JUD.mjs";import{$b as se,Er as _,Mc as me,Or as E,Sn as pe,Sr as be,Za as ie,ac as le,bc as R,cc as k,hc as ce,kb as ae,ue as de,xl as ue}from"https://app.framerstatic.com/chunk-MEZTIH57.mjs";import{a as fe,b as ge}from"https://app.framerstatic.com/chunk-QLLZMBTC.mjs";import{a as te,b as oe,i as ne,l as re}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as Z,b as ee}from"https://app.framerstatic.com/chunk-JX6NUTD4.mjs";import{A as X,v as T}from"https://app.framerstatic.com/chunk-WWEGIMHT.mjs";import{a as J}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{e as H}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var W=H(Z());var Qe=T("usePreloadedScope");function Ve(e,t){if(!t||!oe(e))return;let o=t.tree.get(e);!he(o)||o.isLoaded()||(Qe.debug("Loading scope node",e),o.load())}function mt(e){let t=ge();(0,W.useEffect)(()=>Ve(e,t),[e])}function Ee(e){let t=(0,W.useContext)(fe);(0,W.useEffect)(()=>Ve(e,t),[e,t])}function Y(e,t,o){return e.replace(ie,(n,i)=>i===t.id?o.slug:`:${t.name.toLowerCase()}`)}function Be(e,t,o,n="Home",i){let a=R(t)&&!i?Te(t):void 0,s=R(t)?xe(e,t):null;if(!t||!se(t)||!s)return;let m="";if(o&&o!==pe){let r=e.root.getNonDefaultLocale(o);r?.slug&&(m="/"+r.slug)}if(s.id===e.root.homePageNodeId)return m?m+"/":n;let l=Pe(e,s);if(l){if(a?.identifier){let r=_(e,a.identifier);if(r){let c=E(e,o),u=r.getItemToSlug(c)[a.collectionItemId];if(u){let P=r.getSlugVariable();if(P){let g={id:a.collectionItemId,slug:u};return m+Y(l,P,g)}}}return}if(de(s)&&s.dataIdentifier){let r=_(e,s.dataIdentifier);if(r&&!a){let c=r.getSlugVariable();if(c){let d=E(e,o),u=r.getItemToSlug(d);return m+Ie(l,u,c)}}}return m+l}}function De(e){Ee(R(e)?e.webPageId:void 0)}var f=H(Z());var Ne="cjpnope";var B=H(ee()),Ge=/\W+/u;function Je(e){return new Set(e.split(Ge))}function Xe(e,t,o){return(0,f.useMemo)(()=>{let n=new Set;if(!e||!t)return n;for(let i of o.keys()){let a=t.get(i);!a||!be(a).every(l=>{if(!l)return!1;for(let r of e)if(r.endsWith(l))return!0;return!1})||n.add(i)}return n},[e,t,o])}var _t=({tree:e,link:t,localeId:o,hideSlugValues:n=!1,homePageName:i="Home",variableInfo:a,...s})=>{De(t);let m=e.getContentManagementNode(),l=E(e,o),r=e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e),c=e.root.getDataIdentifierByWebPageIdMap(),d=m?.getSlugVariableByIdentifierMap(),u=m?.getItemToSlugByIdentifierMap(l),P=ce(t,r),g=le(t)?t.url:"",S=P?"":g,b=Be(e,t,o,i,n)??S,y=a?.ids,h=Xe(y,r,c);return(0,B.jsx)(Ze,{...s,link:t,readableLink:b,homePageName:i,variableInfo:a,hideSlugValues:n,webPageIdToRawPathMap:r,dataIdentifierByWebPageIdMap:c,slugVariableByIdentifierMap:d,itemToSlugByIdentifierMap:u,collectionPagesWithVariablesInScope:h,routerLocale:l,selectedPageMissing:P})},Ze=(0,f.memo)(function({id:t,placeholder:o,link:n,onChange:i,constantChange:a,rightChevron:s,supportsPageLinks:m,hideSlugValues:l,supportsVariables:r,variableInfo:c,autoFocus:d,className:u,enabled:P,readOnly:g,tabIndex:S,onMouseDown:b,homePageName:y,onClear:h,menuOffset:p,menuWidth:I,menuClassName:L,onOpenChange:C,backdropEnabled:v,linkListStickySectionHeaders:x,hasError:z,onBlur:Ue,webPageIdToRawPathMap:D,dataIdentifierByWebPageIdMap:N,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:w,collectionPagesWithVariablesInScope:U,routerLocale:O,readableLink:A,selectedPageMissing:Oe}){let G=Oe||!!z,[K,Ae]=(0,f.useState)(()=>we(A)),j=(0,f.useMemo)(()=>Me({webPageIdToRawPathMap:D,dataIdentifierByWebPageIdMap:N,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:w,collectionPagesWithVariablesInScope:U,routerLocale:O,homePageName:y,variableInfo:c,collectionPageType:l?"noSlugInScope":"showSlugValues"}),[D,N,M,w,U,O,y,c,l]),F=(0,f.useMemo)(()=>Me({webPageIdToRawPathMap:D,dataIdentifierByWebPageIdMap:N,slugVariableByIdentifierMap:M,itemToSlugByIdentifierMap:w,collectionPagesWithVariablesInScope:U,routerLocale:O,homePageName:y,variableInfo:c,collectionPageType:"slugInScope"}),[D,N,M,w,U,O,y,c]),je=(0,f.useCallback)((V,Q)=>{if(Q||a){if(V===A)return;let Ke=j.get(V)??F.get(V)??k({url:V});if(i(Ke,Q),Q)return}let ze=we(V);Ae(ze)},[a,A,j,F,i]),Fe=(0,f.useMemo)(()=>nt(j,F,K),[j,F,K]),He=!!c?.idOfMutableVariableProvider,$e=r&&He,qe=(0,f.useContext)(ve)===null,[Ye]=(0,f.useState)(()=>(re(n)||ne(n)||me(n))&&!$e&&qe);return(0,B.jsx)(Ce,{id:t,clearSelectionOnEmptySearch:!0,autoCompleteEnabled:m,showAllWhenOpened:R(n),tabIndex:S,onMouseDown:b,searchItemValue:!!K,items:Fe,value:A,placeholder:o||et(n,G,m),constantChange:!0,rightChevron:s,onChange:je,autoFocus:te(d)?d:Ye,menuOffset:p,enabled:P,readOnly:g,hasError:G,getSearchTokens:Je,wrapperClassName:u,onBlur:Ue,rightSlot:h?(0,B.jsx)(Le,{variant:"clean",type:"button",className:Ne,onClick:h,title:"Remove Link",children:(0,B.jsx)(Se,{})}):void 0,onOpenChange:C,backdropEnabled:v,menuWidth:I,menuClassName:L,stickySectionHeaders:x,containOverscroll:!0})});function et(e,t,o){return t?"Missing":X(e)?"Multiple\u2026":o?"Page or URL\u2026":"URL\u2026"}function tt(e,t){if(e.variableSourceIdentifiers)for(let o in e.variableSourceIdentifiers){if(e.variableSourceIdentifiers[o]===t)return o;for(let n of e.combined.get(o)||[])if(n.type==="collectionreference"&&n.dataIdentifier===t)return o}}function Me({webPageIdToRawPathMap:e,dataIdentifierByWebPageIdMap:t,slugVariableByIdentifierMap:o,itemToSlugByIdentifierMap:n,collectionPagesWithVariablesInScope:i,routerLocale:a,variableInfo:s,homePageName:m,collectionPageType:l}){let r=new Map;if(!e||l==="slugInScope"&&i.size===0)return r;let c=a.slug?`/${a.slug}`:"";for(let[d,u]of e.entries()){if(u==="/"){if(l==="slugInScope")continue;let p=k({webPageId:d}),I=c?c+u:m??u;r.set(I,p);continue}let g=t.get(d);if(!g){if(l==="slugInScope")continue;let p=k({webPageId:d});r.set(c+u,p);continue}let S=o?.get(g);if(!S)continue;let b=S.id,y=b;if(s&&!s.ids.has(b)){for(let p of s.ids)if(ue(p,b)){y=p;break}}let h=n?.get(g);if(l==="slugInScope"||l==="noSlugInScope"){let p=i.has(d),I=ye(u,S);if(l==="slugInScope"&&p){J(s,"variableInfo should exist when inScope");let L=tt(s,g),C=L?{[b]:ae(y,L)}:void 0,v=k({webPageId:d,pathVariables:C});r.set(c+I,v)}else if(l==="noSlugInScope"&&!p){if(!h)continue;let L=ke(h);if(!L)continue;let[C,v]=L,x={identifier:g,collectionItemId:C,key:b,value:v},z=k({webPageId:d,pathVariables:{[b]:x}});r.set(c+I,z)}continue}if(h)for(let p of Object.keys(h)){let I=h[p];if(!I)continue;let C=Y(u,S,{id:p,slug:I}),v={identifier:g,collectionItemId:p,key:b,value:I},x=k({webPageId:d,pathVariables:{[b]:v}});r.set(c+C,x)}}return r}function we(e){let t=e.trim(),o=t.indexOf("/:");o!==-1&&(t=t.substring(o));let n=t.split("/").filter(Boolean);for(;n.length>0;){let i=n.join("/")+"/",a="/"+i;if(t.startsWith(a)||t.startsWith(i))return a;n.pop()}return null}var ot=/\/$/u;function nt(e,t,o){let n=[],i=Array.from(e.keys()),a=Array.from(t.keys());if(o){let s=[];[...a,...i].forEach(r=>{if(!r.startsWith(o))return;let c=r.replace(o,".../");s.push({type:"option",value:r,title:c})});let l=o.replace(ot,"");return n.push({type:"section",value:l,title:l,items:s}),n}return a.length>0&&n.push({type:"section",value:"CMS",items:a.map(s=>({type:"option",value:s}))}),i.length>0&&n.push({type:"section",value:"Pages",items:i.map(s=>({type:"option",value:s}))}),n}var rt=T("invite");async function oo(e,t){try{let o=await $.post(`/web/projects/${e}/acl`,{...t,permissions:t.permissions??void 0});return{status:0,aclEntry:{...o,kind:o.pending?"invite":"user"}}}catch(o){return q(o)?{status:1,editorLimit:o.data.editorLimit,licenseType:o.data.licenseType,teamId:o.data.teamId,teamName:o.data.teamName}:(rt.reportError(o),{status:o instanceof Re&&o.isTemporary?2:3})}}var it=T("invite");async function so(e,{id:t,role:o,permissions:n}){try{return await $.post(`/web/projects/${e}/acl/${t}`,{role:o,permissions:n??void 0}),{status:0}}catch(i){return q(i)?{status:1,editorLimit:i.data.editorLimit,licenseType:i.data.licenseType,teamId:i.data.teamId,teamName:i.data.teamName}:(it.reportError(i),{status:2})}}var mo=()=>({icon:null,title:void 0,body:"No Search Results"});export{Be as a,mt as b,De as c,_t as d,oo as e,so as f,mo as g};
//# sourceMappingURL=https://app.framerstatic.com/chunk-YK7R3YGS.mjs.map

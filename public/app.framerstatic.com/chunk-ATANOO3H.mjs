import{h as YN}from"https://app.framerstatic.com/chunk-CXEH5VJL.mjs";import{g as ZN,i as KN}from"https://app.framerstatic.com/chunk-UDB4LXQ2.mjs";import{$ as Xx,$a as JP,$b as NV,A as Nx,Aa as vP,Ab as Gf,Ac as Xd,B as xx,Ba as TP,Bb as $f,Bc as Zd,C as Px,Ca as bP,Cb as QP,Cc as Kd,D as Vx,Da as IP,Db as eV,Dc as qd,E as kx,Ea as NP,Eb as tV,Ec as LV,F as Rx,Fa as xP,Fb as oV,Fc as FV,G as wx,Ga as PP,Gb as rV,Gc as EV,H as Dx,Ha as VP,Hb as iV,Hc as AV,I as Jn,Ia as kP,Ib as nV,Ic as MV,J as Lx,Ja as RP,Jb as aV,Jc as OV,K as bf,Ka as wP,Kb as sV,Kc as ml,L as If,La as DP,Lb as lV,Lc as WV,M as Fx,Ma as LP,Mb as cV,Mc as ln,N as Ex,Na as FP,Nb as dV,O as Ax,Oa as EP,Ob as pV,P as Mx,Pa as AP,Pb as uV,Q as Ox,Qa as MP,Qb as mV,R as Wx,Ra as OP,Rb as fV,S as zx,Sa as WP,Sb as hV,T as Bx,Ta as zP,Tb as gV,U as Hx,Ua as BP,Ub as yV,V as Gx,Va as HP,Vb as CV,W as $x,Wa as GP,Wb as SV,X as _x,Xa as $P,Xb as vV,Y as jx,Ya as _P,Yb as TV,Z as Ux,Za as jP,Zb as bV,_ as Jx,_a as UP,_b as IV,aa as Zx,ab as XP,ac as xV,ba as Kx,bb as ZP,bc as PV,ca as qx,cb as KP,cc as Zn,da as Yx,db as Xn,dc as ni,ea as Qx,eb as qP,ec as Kn,f as hx,fa as eP,fb as YP,fc as gr,g as Z,ga as tP,gb as Nf,gc as VV,h as vf,ha as oP,hb as Od,hc as kV,i as gx,ia as rP,ib as xf,ic as RV,j as sn,ja as iP,jb as Pf,jc as wV,k as Tf,ka as nP,kb as Vf,kc as Xa,l as cl,la as aP,lb as kf,lc as dl,m as Oe,ma as sP,mb as Wd,mc as Za,n as yx,na as lP,nb as Rf,nc as zd,o as Ad,oa as cP,ob as wf,oc as pl,p as Md,pa as dP,pb as Df,pc as qn,q as Cx,qa as pP,qb as Lf,qc as ul,r as Sx,ra as uP,rb as Ff,rc as Bd,s as vx,sa as mP,sb as Ef,sc as Hd,ta as fP,tb as Af,tc as Gd,u as Tx,ua as hP,ub as Mf,uc as $d,va as gP,vb as Of,vc as _d,w as bx,wa as yP,wb as Wf,wc as jd,xb as zf,xc as DV,y as Ix,ya as CP,yb as Bf,yc as Ud,za as SP,zb as Hf,zc as Jd}from"https://app.framerstatic.com/chunk-5ETEZDDN.mjs";import{d as ex}from"https://app.framerstatic.com/chunk-CW2QZH3U.mjs";import{b as Ua,c as qN}from"https://app.framerstatic.com/chunk-XXKLA2AS.mjs";import{j as ox}from"https://app.framerstatic.com/chunk-QBRDYVUO.mjs";import{L as XN,e as JN,g as gf}from"https://app.framerstatic.com/chunk-I24ABD3P.mjs";import{d as tx,f as Ja,i as Sf,j as sx,l as Yd}from"https://app.framerstatic.com/chunk-7Y7LME3V.mjs";import{a as rx,b as yf,c as ix,f as Cf,h as nx,k as ax,l as Fd,m as Ed,n as px,o as ux,p as mx,q as fx,r as zV}from"https://app.framerstatic.com/chunk-NDPPBRVU.mjs";import{$ as CT,$f as mf,A as Fa,Ae as vN,Af as LN,Bd as dN,Be as _n,Bf as Un,C as rT,Cb as DI,Cd as pN,Ce as Dr,Cf as FN,D as iT,Dc as UI,Df as EN,Eb as Id,Ec as JI,Ef as AN,G as Mm,Gb as ko,Gc as XI,H as aT,Ha as RT,Hb as Nd,Hf as MN,I as od,Ib as LI,Ic as ZI,If as ON,J as BA,Ja as tl,Jb as FI,Jf as WN,Jg as Dd,K as pT,Kb as EI,Kc as xd,Kf as zN,Kg as $N,L as uT,Lb as AI,Lc as Pd,Lf as BN,Ma as Vi,Mb as MI,Nb as nf,Nf as HN,O as id,Oc as KI,Od as kd,P as Wm,Pa as yI,Pb as OI,Pd as uN,Pe as ja,Pf as uf,Qa as CI,Qb as WI,Qc as qI,Qe as TN,Qf as wd,Rc as YI,Re as bN,Sa as rf,Sb as zI,Se as wi,Sg as _N,Ta as SI,Tb as BI,Tc as QI,Te as IN,Tg as jN,Ua as vI,Ub as af,Ue as NN,Ug as ll,Wc as eN,Wg as Ld,Xc as tN,Xd as mN,Xe as xN,Yb as ki,Yc as oN,Yd as fN,Yg as UN,Zc as Ga,Zd as hN,Ze as cf,_ as yT,_a as TI,_c as Ri,_d as lf,a as Yc,aa as nd,ag as GN,b as Qv,ba as ST,bg as sl,cg as ff,df as jn,eb as II,ed as $a,f as km,fa as bT,ga as IT,gb as NI,gc as HI,gd as rN,hd as iN,ia as NT,ib as xI,id as nN,ie as Rd,if as df,jb as rl,jc as GI,jd as aN,jg as hf,ka as xT,kb as PI,kc as $I,kd as _a,ke as gN,kf as PN,la as VT,lb as VI,lc as _I,lf as VN,mc as sf,md as al,mf as kN,nb as kI,ob as RI,od as Ro,pc as jI,qa as kT,r as wm,ra as Us,s as Dm,sf as RN,t as Wn,ta as Js,td as sN,te as yN,tf as wN,u as Lm,ua as ad,ud as Vd,ue as CN,uf as DN,v as Fm,w as _s,x as Em,xb as il,xf as pf,y as Am,yb as nl,yd as lN,z as js,zd as cN,ze as SN}from"https://app.framerstatic.com/chunk-HABMTUSV.mjs";import{e as Qr,g as Pm,h as Vm,l as ol,q as bI,u as wI,v as ii}from"https://app.framerstatic.com/chunk-OOEWJVJW.mjs";import{a as HA,f as It}from"https://app.framerstatic.com/chunk-XWGDE7KU.mjs";import{a as lx,b as cx,c as dx,f as _f}from"https://app.framerstatic.com/chunk-OOKYJP4H.mjs";import{i as an}from"https://app.framerstatic.com/chunk-TYPTT5TV.mjs";import{$c as zT,$e as yd,$h as jb,Ad as jm,Ag as Nb,Bd as Um,Be as Zm,Bh as Mb,Bi as mI,C as hr,Cf as Km,Ci as fI,Dg as ne,E as ct,Eb as sd,Ee as za,Eg as Kt,Eh as bd,F as rd,Fd as md,Fe as fd,Fh as Ob,Fi as hI,Gb as wT,Gd as YT,Ge as hd,He as rb,Hg as xb,Hh as Wb,Id as QT,Ie as gd,Ii as $n,Jf as uo,Jg as Hn,K as Om,Kd as Xs,Kf as qs,Lc as cd,Lg as Pb,Li as gI,Mg as Gn,Na as ei,Nc as AT,Ng as Vb,Nh as ef,Ni as Ha,Oa as zm,Ob as DT,Pd as eb,Pe as ib,Pf as qm,Ph as zb,Qb as ld,Qe as nb,Qg as jo,R as sT,Re as bt,Rh as Bb,Sc as MT,T as lT,Tc as oi,Te as ab,Tf as vd,U as cT,Ua as mT,Uc as dd,Ue as sb,Uh as tf,V as dT,Va as he,Vc as Ni,Vf as gb,Vg as kb,Vh as Hb,Wa as fT,Wc as xi,We as lb,Wh as Gb,Xc as OT,Xe as Pi,Xh as of,Ya as te,Yh as $b,Za as Ot,Zc as WT,Zf as yb,Zh as _b,_a as zn,_b as FT,ac as Gm,ae as Zs,af as cb,ag as Cb,ah as Rb,ai as Ub,b as eT,bg as Sb,bi as Jb,c as tT,cb as hT,cc as $m,cf as rn,ch as wb,ci as Xb,dd as BT,df as io,e as $s,eb as gT,ed as tn,eg as vb,eh as Db,f as oT,fa as Vo,fb as vT,fe as Jm,fh as Lb,fi as Zb,g as Rm,gd as $T,ge as Xm,gf as Ks,gg as Ys,gi as Kb,hb as TT,hd as ud,he as tb,hf as db,hg as Ym,hi as qb,id as _T,ig as Tb,jd as on,jh as wr,ji as Yb,k as gt,kc as ti,kf as mb,kg as Qm,ki as Qb,l as Ea,li as eI,mb as Bm,md as jT,mf as fb,mg as Qs,mi as tI,n as Qc,nd as UT,nf as hb,nh as Fb,ni as oI,o as vo,oi as rI,p as Vr,pb as Hm,pd as Oa,pe as Wa,pg as Rr,pi as iI,qe as ob,qg as Ba,qh as Eb,qi as nI,r as en,rd as JT,ri as aI,s as ed,sd as XT,si as sI,t as td,td as ZT,ti as lI,u as nT,ud as KT,uf as Sd,ug as bb,ui as cI,v as Aa,vb as PT,vd as qT,wa as kr,wb as Ge,wf as Bn,wg as Ib,wi as dI,xf as ri,xh as Ab,xi as pI,y as fr,yh as Td,yi as uI,zd as _m,zh as el}from"https://app.framerstatic.com/chunk-KMAC4JUD.mjs";import{$a as lC,$b as Oo,$m as zS,$n as Ve,$p as iv,$q as Wc,$u as Zc,Aa as iC,Ad as Rt,Ae as Ie,Af as Ui,Ag as oS,Ak as IS,Ao as JS,Ar as zc,B as tm,Bc as LC,Be as _,Bf as YC,Bg as rS,Bh as xc,Bn as Cm,Bo as Va,Br as An,C as Ne,Cd as zt,Ce as Ue,Ck as Ls,Co as Os,Cr as Iv,Cu as _o,Cv as On,Dd as st,De as _i,Dg as iS,Di as ks,Dj as ws,Do as XS,Dp as Tm,Dr as Nv,Ed as WC,Ee as Mt,Ei as cS,Ek as NS,Eo as Ws,Eq as fv,Er as mr,Eu as Uc,Fd as zC,Fe as Ir,Fk as xS,Fu as Fv,Gc as Hi,Gd as Ns,Ge as He,Gh as cm,Gj as gS,Gw as Ii,He as am,Hg as nS,Hk as yi,Hn as BS,Hq as hv,Hw as HT,I as Yy,Ib as SC,Ie as Sc,Ij as yS,Il as FS,Ip as ev,Iw as pd,J as ae,Jd as ba,Ji as dS,Jj as kc,Jp as tv,Ju as Ev,Jw as GT,K as om,Kd as vt,Kf as QC,Kp as ov,Kv as Nm,Lc as FC,Lj as Nr,Lk as PS,Ln as HS,Lo as ZS,Lt as Ki,Mc as Is,Mj as CS,Ml as ES,Mn as Ho,Mo as KS,Mq as gv,Mt as Vv,Mu as Zt,Mw as Ma,N as rm,Nc as EC,Nf as eS,Nk as VS,Nr as xv,Oe as vc,Om as Fc,Ot as Ti,Pb as vC,Pe as $C,Pi as um,Pm as Xi,Pn as Si,Qa as Vn,Qb as Qt,Qh as wn,Qj as Ds,Qk as kS,Qs as Pv,Qv as xm,Rb as TC,Rc as mi,Rd as BC,Ri as ut,Rm as gm,Ro as En,Rr as Bc,Rt as $c,Rv as _v,Sb as Hr,Sd as hc,Si as xa,Sk as RS,Sn as Es,Sp as rv,Sv as jv,Sw as Cd,Ta as Br,Tb as bC,Td as er,Te as Tc,Th as dm,Tk as ge,Tt as zs,Tu as Jc,Tv as Uv,Tw as nn,Uk as P,Us as Gc,Ut as Bs,Uu as Im,Uv as Yr,Uw as pb,V as go,Vb as IC,Vd as gc,Vk as yo,Vn as As,Vq as Ht,Vt as _c,Vv as Jv,Vw as ub,Wb as NC,Wc as kn,Wd as co,Wk as ee,Wm as WS,Wn as GS,Wo as vi,Wq as yv,Wt as qe,Wu as Av,Xb as xC,Xd as to,Xe as bc,Xj as SS,Xk as Fs,Xq as Cv,Xt as kv,Xu as Mv,Ya as sC,Yb as z,Yd as Xt,Ye as _C,Yj as vS,Yk as mt,Yl as Ln,Yt as Rv,Yu as Ov,Za as cc,Zd as $r,Ze as Ic,Zk as m,Zl as Ci,Zn as $S,Zu as Wv,Zv as ht,_ as Ta,_e as Ia,_h as or,_j as Kr,_k as tt,_m as ym,_q as Sv,_u as zv,ab as dc,ac as Gr,af as oo,ai as sS,al as ft,ao as Co,ar as vv,au as jc,bc as PC,bd as AC,bf as Na,bj as pS,bm as Pe,bo as Mc,bu as Hs,bv as wa,cd as uc,cf as jC,cj as Bt,co as Go,cv as Kc,cw as Qi,d as zi,db as cC,dc as Ts,df as xo,dh as Rn,dj as Vc,dl as Po,dm as ve,dv as Bv,ed as MC,ef as ji,ei as lS,ek as TS,el as pr,em as AS,eu as wv,ev as Hv,ew as qc,fc as ui,ff as Nc,fq as nv,gb as dC,gf as UC,go as Ms,gq as av,gv as Da,gw as Xv,ha as zr,hb as pC,hj as Bo,hk as bS,ho as ur,hq as sv,hv as lt,hw as Zv,i as $y,ib as pi,ic as Bi,ie as _r,if as Jr,in as Ec,io as So,iq as lv,iv as Gv,jb as U,jc as VC,je as jr,jf as tr,jj as uS,jl as wS,jm as MS,jn as Ac,jq as cv,js as Hc,jv as $v,jw as Kv,k as qu,kb as Jt,kc as eo,ke as De,kf as fi,ki as Vs,ko as fe,kq as dv,kv as qi,l as _y,lb as mC,lc as bs,le as br,lf as JC,lh as lm,lj as mS,lm as OS,lq as pv,m as E,ma as Qy,mc as _t,me as HC,mf as Xr,mj as Rs,mk as Rc,mo as Pa,n as we,nb as fC,nd as mc,ne as yc,nf as hi,nj as fS,no as Sm,nr as Tv,oe as Ur,oj as Dn,ol as ro,ou as $o,pe as Cc,pf as Zr,pj as hS,pm as Fn,pp as qS,qe as Et,qf as XC,qg as tS,qh as po,qi as pm,qk as wc,qo as _S,qp as YS,qq as uv,qu as Gs,rb as hC,rc as kC,re as ie,rh as Ps,rj as mm,rm as Pr,rp as Zi,ru as Dv,s as vs,sb as gC,sc as RC,se as Be,sf as ZC,sk as gi,sl as Dc,so as vm,su as Lv,t as Yu,te as zo,tf as KC,tl as DS,tm as Lc,to as jS,tp as ka,ua as eC,ub as yC,uc as wC,ue as W,uf as qC,uh as aS,ul as LS,ur as bm,uu as Mn,uw as qv,va as tC,vd as fc,ve as GC,vk as xr,vl as hm,vq as mv,vv as Yi,vw as Yv,wa as oC,wc as pc,wd as Wo,we as At,wi as Ji,wk as fm,wo as US,wp as QS,wr as Ra,x as jy,xa as rC,xd as Gi,xe as pt,xg as sm,xp as Oc,xu as Le,xw as La,yc as DC,yd as nm,ye as $i,yi as Pc,yw as bi,z as lo,zb as CC,zd as OC,ze as xs,zv as qr}from"https://app.framerstatic.com/chunk-MEZTIH57.mjs";import{d as LT}from"https://app.framerstatic.com/chunk-R3NZHMAQ.mjs";import{K as qy,O as uC,d as Uy,e as sc,g as lc,h as Qu,i as Jy,o as em,s as Xy,u as Zy,v as Ky}from"https://app.framerstatic.com/chunk-4PXICH4C.mjs";import{b as bv}from"https://app.framerstatic.com/chunk-QLLZMBTC.mjs";import{a as ET}from"https://app.framerstatic.com/chunk-4I3XDWXC.mjs";import{a as ho,b as Ut}from"https://app.framerstatic.com/chunk-YSH2VGR3.mjs";import{a as QN}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import{b as Ao}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as et}from"https://app.framerstatic.com/chunk-XB2V7G5R.mjs";import{a as Tr,b as D,d as X,e as ze,f as St,g as nC,h as aC,i as M,j as Mo,l as at,n as im,o as Qo}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{a as zA,ce as Xc}from"https://app.framerstatic.com/chunk-JX6NUTD4.mjs";import{g as Wr}from"https://app.framerstatic.com/chunk-TL2YQ7KN.mjs";import{A as xn,D as Mr,E as fo,F as Ze,H as nc,J as di,L as Pn,M as ce,N as Gy,O as ac,Z as Ke,ba as Or,f as Ku,j as Wi,m as dr,p as Ft,v as nt,z as Hy}from"https://app.framerstatic.com/chunk-WWEGIMHT.mjs";import{a as C,b as $}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as ic}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{d as Zu,e as Ss,j as L,k as A,l as le,m as re,n as kt}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var HV=Ss(HA());var GV=Ss(zA());var X_=GV.default.createContext("not-defined");var BV={store_internal:2,store_browse:2,store_use_installed:2},jf={},Qd=new HV.FramerTracking({sourceName:"framer-x",trackingURL:ic().events+"/track",verbose:window.localStorage&&window.localStorage.getItem("debug-metrics")==="active",addContext:e=>{let t;for(t in jf)e[t]===void 0&&(e[t]=jf[t])}}),GA;(r=>(r.init=function(i){let{appVersion:n,projectId:a}=i;Object.assign(jf,{appVersion:n,projectId:a}),Qd.setUserId(i.userId)},r.push=function(i){let{name:n,type:a,...l}=i;i.type==="store_internal"?(delete l.action,Qd.track({type:"track",event:n,version:2,...l})):Qd.track({type:"track",event:a,version:BV[a],name:n,...l})},r.pushEvent=function(i){let{event:n,...a}=i;Qd.track({...a,type:"track",event:n,version:BV[n]})}))(GA||={});var $A=new Set(dC({fillImageLocalized:!0,formInputPlaceholderLocalized:!0,htmlLocalized:!0,altAttributeLocalized:!0,titleLocalized:!0,descriptionLocalized:!0,linkLocalized:!0}));function Uf(e){return $A.has(e)}function ep(e){return e.map(t=>ze(t)?tp(t):St(t)?ep(t):t)}function _A(e){return e.endsWith("Localized")}function tp(e){let t={};for(let o in e){if(_A(o))continue;let r=e[o];ze(r)?t[o]=tp(r):St(r)?t[o]=ep(r):t[o]=r}return t}function tj(e){let t={},o;for(o in e){if(Uf(o))continue;if(!um(o)){t[o]=e[o];continue}let r=e[o];ze(r)?t[o]=tp(r):St(r)?t[o]=ep(r):t[o]=r}return t}function $V(e){let t={};for(let o in e){if(Uf(o))continue;if(!um(o)){t[o]=e[o];continue}let r=e[o];ze(r)?t[o]=tp(r):St(r)?t[o]=ep(r):t[o]=r}return t}var jA={track:!0};function _V(e){let t={...e,event:"canvas_page_add"};Ao(t,jA)}var UA={track:!0};function jV(e){let t={...e,event:"component_canvas_create"};Ao(t,UA)}var JA={track:!0};function UV(e){let t={...e,event:"component_canvas_enter"};Ao(t,JA)}var XA={track:!0};function JV(e){let t={...e,event:"component_canvas_variant_create"};Ao(t,XA)}var ZA={track:!0};function Jf(e){let t={...e,event:"component_design_instance"};Ao(t,ZA)}var KA={track:!0};function XV(e){let t={...e,event:"property_layout_update"};Ao(t,KA)}var qA={track:!0};function ZV(e){let t={...e,event:"variable_reference_create"};Ao(t,qA)}function KV(e,t){return Tr(t)?t:ve(e)?e.constraintsLocked:!1}function Aj(e,t,o,r){let i=e.tree,n={x:Math.round(o.x-r.width/2),y:Math.round(o.y-r.height/2)},a=i.getNode(t);if(!t||!a)return{left:n.x,top:n.y};let l=jv(e.tree,t),s=l?e.tree.getViewportRect(l):null,c=i.getRect(a),d=i.convertPointToNode(a,n),p={x:d.x,y:d.y,width:r.width,height:r.height},f=p.width/p.height,h=Gm(p,{sizing:c,positioning:c,viewport:s,layout:_r(a)},null,{aspectRatio:f,shouldGuessPinToBottom:_n(i,null,a),shouldGuessPinToRight:Dr(i,null,a)});return h.aspectRatio=f,h}var Xf=(e,t,o,r)=>{let i=t.getGroundNodes().map(n=>e.getRect(n));return r!==void 0&&i.push(...r),i.find(n=>ae.intersects(o,n))===void 0},YA=(e,t,o,r,i)=>{let n=t.getGroundNodes().map(s=>e.getRect(s));r!==void 0&&n.push(...r);let l=n.sort((s,c)=>ae.maxX(s)>ae.maxX(c)?-1:1)[0];return l!==void 0?qf(l,o,i):null},QA=(e,t,o,r,i)=>{let n=t.getGroundNodes().map(c=>e.getRect(c));r!==void 0&&n.push(...r);let s=n.filter(c=>c.width===o.width&&c.height===o.height||c.height===o.width&&c.width===o.height).sort((c,d)=>ae.maxX(c)>ae.maxX(d)?-1:1)[0];return s!==void 0?qf(s,o,i):null},eM=(e,t,o)=>t.map(r=>e.getNode(r)).filter(r=>xc.equals(r.rect(null),o));function Kf({tree:e,activeScope:t,node:o,size:r,filledRects:i,offsetDistance:n}){let a={...e.getRect(o),...r},l=t.getGroundNodes().map(d=>d.rect());i&&l.push(...i);let s=a,c=0;for(;s;){if(M(n.x)||(a.x=Zf("x",s,n.x)),M(n.y)||(a.y=Zf("y",s,n.y)),s=l.find(d=>ae.intersects(d,a)),c>l.length)return a;c++}return a}var YV=(e,t,o,r,i={x:100,y:void 0},n)=>Kf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:i}),fl=(e,t,o,r,i=100,n)=>Kf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:{x:i}}),Mj=(e,t,o,r,i=100,n)=>Kf({tree:e,activeScope:t,node:o,size:r,filledRects:n,offsetDistance:{y:i}});function Zf(e,t,o){return(e==="x"?ae.maxX:ae.maxY)(t)+o}function qf(e,t,o=100){return{...e,x:Zf("x",e,o),...t}}var tM=(e,t,o,r,i,n,a)=>{if(n){let c=e.getNode(n);if(c)return fl(e,t,c,o,a,i)}if(r){let c=eM(e,r,o);if(c.length){let p=c.map(h=>qf(h.rect(),o,a)).find(h=>Xf(e,t,h,i));if(p)return p;let f=c[0];return C(f,"Equal frame must be defined"),fl(e,t,f,o,a,i)}}let l=QA(e,t,o,i,a);if(l!==null&&Xf(e,t,l,i))return l;let s=YA(e,t,o,i,a);return s!==null&&Xf(e,t,s,i)?s:{...o,x:0,y:0}},Oj=(e,t,o,r,i)=>{let n=e.getRect(o),a=e.getParent(o.id),l;He(o)&&(l=Math.min(n.width,100));let s=tM(e,t,n,r,i,o.id,l);return i.push(s),Gm(s,null,Da(o)?qi(o):null,{shouldGuessPinToBottom:!0,shouldGuessPinToRight:Dr(e,o,a)})},Wj=(e,t,o,r)=>{if(o.length>0){let i=o[o.length-1],n=e.getGroundFrameAncestor(i,!0);if(n)return n.id}for(let i of e.sortVisually(e.getNodesAtPoint(t,r)).reverse())if(i instanceof ki&&e.getParent(i.id)===eo){if(st(i))continue;return i.id}return eo},zj=(e,t,o)=>{let i=e.tree.newId(),n={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return n.framePreset=o,e.createFrame(eo,{id:i,...n}),i},Bj=(e,t)=>{let o=e.tree,r=o.newId(),i={top:t.y,left:t.x,width:t.width,height:t.height,overflow:"clip",isScreen:!0};return e.createFrame(eo,{id:r,...i}),e.stores.scopeStore.active.getGroundNodes(a=>{let l=o.getRect(a);return a.id!==r&&ae.containsRect(t,l)}).forEach(a=>{let l=o.getParent(a.id),s=o.getRect(a),c=ae.offset(s,Ne.reverse(t));e.moveNode(a.id,r),e.tree.current(a)?.set(a.updateForRect({rect:c,parentSizeInfo:{sizing:t,positioning:t,viewport:null,layout:_r(l)},constraintsLocked:KV(a),shouldGuessPinToBottom:!0,shouldGuessPinToRight:Dr(e.tree,a,l)}))}),r},qV=["#9ef","#4cf","#3af","#38f","#26f"],Hj=(()=>{let e=-1,t=qV.length;return()=>(e++,qV[e%t])})();function Uj(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!$C(r)&&!vc(r)&&!(!r&&o.added==="RedirectRouteNode"))return!1}return!0}function QV(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);return!r||!xr(r)?!1:"variables"in o.from}return!0}function ek(e,t){if(!e||e.changes.length===0)return!1;for(let o of e.changes){let r=t.get(o.id);if(!jr(r))return!1;let i="locales";return!!(i in o.from||o.from._deleted?.includes(i))}return!0}var tk=class extends ti{constructor(){super(...arguments);L(this,"active",0)}};var oM=nt("EngineChanges");var ok=class{constructor(){L(this,"changes",new Set);L(this,"addChanges",(...t)=>{for(let o of t)this.changes.add(o)});L(this,"changeObserverFlags",[]);L(this,"changeObservers",[]);L(this,"inSignalAllObservers",!1);L(this,"observersToRemove",[])}get flags(){return this.changes}has(...t){for(let o of t)if(this.changes.has(o))return!0;return!1}observe(...t){let o=t.pop(),r=t;return Wr.isDebugBuild&&r.some(i=>i===void 0)&&oM.warn("changes.observe was called with undefined as one of the flags. It might be caused by observing a store that hasn't been instantiated yet."),this.changeObserverFlags.push(r),this.changeObservers.push(o),o}observeWithComponent(t,o,r){this.changeObserverFlags.push(t);let i=()=>{Wr.benchmarkSkipRendering||o.setState(r())};return this.changeObservers.push(i),i}removeObserver(t){if(this.inSignalAllObservers){this.observersToRemove.push(t);return}let o=this.changeObservers.indexOf(t);o!==-1&&(this.changeObserverFlags.splice(o,1),this.changeObservers.splice(o,1))}signalAllObservers(){if(!this.changes)return;let t=this.changes,o=this.changeObserverFlags,r=this.changeObservers;this.inSignalAllObservers=!0;for(let i=0;i<o.length;i++){let n=o[i];for(let a of n)if(t.has(a)){r[i]();break}}if(this.inSignalAllObservers=!1,this.observersToRemove.length>0){for(let i of this.observersToRemove)this.removeObserver(i);this.observersToRemove.length=0}this.changes.clear()}signalObserversFor(...t){let o=new Set(t),r=this.changeObserverFlags,i=this.changeObservers;for(let n=0;n<r.length;n++){let a=r[n];for(let l of a)if(o.has(l)){i[n]();break}}o.forEach(n=>this.changes.delete(n))}};function Qf(e){return e.userIsViewer?gf:Wr.isAutomation||Wr.isTest?JN:e.acl.find(o=>o.user.id===e.userId)?.permissions??gf}var hl=class{constructor(t){this.aclPermissions=t}get canDesign(){return this.aclPermissions.canDesign==="on"}get canEditContent(){return this.aclPermissions.canEditContent==="on"}get canPublish(){return this.aclPermissions.canPublish==="on"}get canEditSiteSettings(){return this.canDesign&&this.canEditContent&&this.canPublish}get canPublishToStaging(){return this.canDesign||this.canEditContent||this.canPublish}get canInviteCollaborators(){return this.canDesign||this.canEditContent||this.canPublish}get canEditVariables(){return this.canDesign}get canAddCollections(){return this.canDesign}get canEditAnalytics(){return this.canDesign||this.canEditContent}get canEditLocales(){return this.canDesign}get canEditLocalizedValues(){return this.canEditContent}get canSendDiffs(){return this.canDesign||this.canEditContent}},sU=LC({canDesign:"Design",canEditContent:"Content",canPublish:"Deploy",canEditSiteSettings:"Design and Content and Deploy",canPublishToStaging:"Design or Content or Deploy",canInviteCollaborators:"Design or Content or Deploy",canEditVariables:"Design",canAddCollections:"Design",canEditAnalytics:"Design or Content",canEditLocales:"Design",canEditLocalizedValues:"Content",canSendDiffs:"Design or Content"});function lU(e){let t=Qf(e);return new hl(t)}var eh=e=>[e.chromeStore,e.projectStore,e.sessionStore],op=([e,t,o])=>({userIsViewer:e.userIsViewer,userIsAccountSharing:e.userIsAccountSharing,acl:t.acl,userId:o.user.id});function cU(e,t,o,{signal:r}){let i=eh(e),n=op(i),a=t.changes.observe(...i,()=>{let l=op(i);Br(n,l)||(n=l,o(l))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}function mU(){let e=bv();return C(th(e),"Expected OnPageEngine"),e}function th(e){return e.name==="OnPageEngine"}var rk=e=>[e.loadingStore,...eh(e)],oh=([e,...t])=>({isReady:e.isReady,...op(t)});function rM(e,t){if(!e.isReady||e.userIsViewer||e.userIsAccountSharing&&t!=="canInviteCollaborators")return!0;let o=Qf(e);return!new hl(o)[t]}function gl(e,t){return Ra(e)?rM(oh(rk(e.stores)),t):!th(e)}function SU(e,t,o,{signal:r}){let i=rk(e),n=oh(i),a=t.changes.observe(...i,()=>{let l=oh(i);Br(n,l)||(n=l,o(l))});r.addEventListener("abort",()=>{t.changes.removeObserver(a)},{once:!0})}var ik=class extends ti{constructor(o,r){super();this.addChanges=o;this.effectsStore=r;L(this,"update",0);L(this,"tooltip");L(this,"shapeToolActive",!1);L(this,"feedbackModeActive",!1);L(this,"handle",null);L(this,"straightLineAnchorIndex",0);L(this,"proseMirrorView",null);L(this,"proseMirrorState",null);L(this,"textLink",null);L(this,"editedTextLink");L(this,"stackInsertionIndicator",null);L(this,"replaceableFloatingPositionNode",null);L(this,"activeTool",0);L(this,"nodeInTextEditorId",eo);L(this,"nodeInPathEditorOffset",null);L(this,"dragAndDropPlaceholders",null);L(this,"codeComponentInProgressInsertionIndicatorNodeIDs",new Set)}get tool(){return this.activeTool}postProcess(o){this.update=o}get isDefaultToolActive(){return this.tool===0||this.tool===1}updateDragAndDropPlaceholder(o){if(o){let r=o.cache.placeholders,i=r?{id:o.id,placeholders:r}:null;if(zr(i,this.dragAndDropPlaceholders))return;this.dragAndDropPlaceholders=i}else this.dragAndDropPlaceholders=null}setTool(o){rd.canEditTree(o)&&o!==6&&this.effectsStore.exitPreview(),this.shapeToolActive=aM(o),sM(o)||(this.feedbackModeActive=!1),this.tool===6&&o!==6&&this.addChanges("ExitMove"),this.tool!==o&&this.addChanges("Tool"),this.activeTool=o}};function nM(e){switch(e){case 32:case 21:case 10:case 22:case 24:case 23:case 25:case 12:case 11:case 20:case 13:case 19:case 14:case 48:case 30:case 31:case 42:case 47:case 28:case 41:case 29:case 26:return!1;case 43:case 44:case 15:case 17:case 16:case 18:case 1:case 39:case 35:case 45:case 0:case 46:case 9:case 40:case 6:case 33:case 3:case 36:case 38:case 7:case 27:case 8:case 37:case 49:case 2:case 50:case 34:case 4:case 5:return!0;default:$(e)}}function aM(e){switch(e){case 32:case 43:case 44:case 21:case 10:case 22:case 24:case 23:case 25:case 12:case 11:case 20:case 13:case 19:case 14:case 48:case 1:case 39:case 35:case 45:case 0:case 46:case 42:case 47:case 40:case 6:case 33:case 3:case 38:case 7:case 27:case 28:case 29:case 30:case 31:case 8:case 37:case 49:case 2:case 41:case 26:case 50:case 34:case 4:case 5:return!1;case 15:case 17:case 16:case 18:case 9:case 36:return!0;default:$(e)}}function sM(e){switch(e){case 43:case 44:case 3:case 4:case 5:return!0;case 0:case 1:case 2:case 6:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 50:case 34:case 46:case 47:return!1;default:$(e)}}function RU(e){switch(e){case 4:case 5:return!0;case 0:case 1:case 2:case 3:case 6:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 50:case 34:case 46:case 47:return!1;default:$(e)}}function nk(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 43:case 44:case 50:case 47:return!0;case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:return!1;default:$(e)}}function wU(e){switch(e){case 3:case 4:case 47:return!0;case 5:case 6:case 0:case 1:case 2:case 43:case 44:case 50:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:return!1;default:$(e)}}function ak(e){switch(e){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 50:return!0;case 43:case 44:case 7:case 49:case 8:case 9:case 32:case 10:case 11:case 12:case 48:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 24:case 23:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 33:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 45:case 34:case 46:case 47:return!1;default:$(e)}}function DU(e,t){return e.stores.historyStore.isLoadingDocument?t===47:gl(e,"canDesign")?nk(t):e.stores.chromeStore.isPreviewingFeaturedTemplate?ak(t):!0}function LU(e,t){return t==="VectorSet"?nM(e):!(t==="WebPage"&&e===42)}function FU(e,t){if(gl(e,"canDesign")&&!nk(t))throw Error("Viewer mode: Tool "+t+" is a forbidden action.");if(e.stores.chromeStore.isPreviewingFeaturedTemplate&&!ak(t))throw Error("Previwing template mode: Tool "+t+" is a forbidden action.")}var EU=e=>e===20||e===21||e===22||e===24||e===23||e===25||e===19;function AU(e){return e===8||e===7||e===49||e===33||e===35}var lM={0:!0,1:!0,2:!0,3:!0,4:!0,6:!0,5:!0};function zU(e){return X(e)&&lM[e]===!0}var rh=new Map;function HU(e,t){rh.set(e,t)}function GU(e){rh.delete(e)}function sk(e){rh.get(e)?.()}var cM="__page_input";function dM(e){return`${cM}_${e}`}function rp(e){let t=dM(e);sk(t)}function ip(e){let t={},o=e.getPresetsListNode();if(!o)return t;for(let r of o.children)if(!Rt(r)){if(oo(r)){let i=iN(r.tag);t[i]??=r.id;continue}if(xo(r)){t.stylePresetLink??=r.id;continue}if(tr(r)){t.stylePresetInlineCode??=r.id;continue}if(Jr(r)){t.stylePresetImage??=r.id;continue}if(ji(r)){t.stylePresetBlockquote??=r.id;continue}if(Nc(r)){t.stylePresetTable??=r.id;continue}if(Ia(r)){let i=Hs(r.componentIdentifier);t[i]??=r.id;continue}$(r)}return t}function nJ(e,t){let o=ip(e),r={};for(let i in o){let n=t[i];e.get(n)||(r[i]=o[i])}Object.keys(r).length>0&&t.set(r)}function aJ(e,t,o="",r={}){let i=document.createElement(t);i.innerText=o;let n=kd(e,t);if(n)Sv(i,n.id);else{let a=xT[t],l=a.fontSize,s;Fc(l)?s=Fn(l):X(l)&&(s=[l,"px"]),gv(i.style,hv.transforms,{...a,fontSize:s})}return new Rd({html:i.outerHTML,...ip(e),...r})}function np(e){return ie(e)||W(e)}function lk(e,t,o,r){let i=`${r}/${o.segment}`;e.add(i);for(let n of o.children)lk(e,t,n,i)}function ck(e){let t=new Set,o=e.getRouteSegmentRootNode();for(let r of o.children)lk(t,e,r,"");return t}function cn(e){return e==="/"?"Home":(e=uM(e),e=pM(e),e=pk(e),e=mM(e),e=e.split(" ").map(uC).join(" "),e)}function pM(e){return e.replace(/-+/gu," ")}function uM(e){return e.replace(cc,"")}var dk=/\s*\/+[/\s]*/gu;function mM(e){return e.replace(dk," / ")}function pk(e){return e.replace(/^[/\s]+|[/\s]+$/gu,"")}var fM=/\s+/gu,hM=/-+/gu;function uk(e){if(e==="Home")return"/";let t=e;return t=pk(t),t=t.replace(dk,"-"),t=t.replace(fM,"-"),t=t.replace(hM,"-"),t=t.toLowerCase(),"/"+t}function ap(e){e=[...e].sort((o,r)=>o[0]-r[0]||o[1]-r[1]);let t=[];for(let o of e){if(o[0]===o[1])continue;let r=t[t.length-1];if(!r){t.push(o);continue}if(o[0]<=r[1]){r[1]<o[1]&&(r[1]=o[1]);continue}t.push(o)}return t}function mk(e,t){let o=[],r=0;for(let[i,n]of e){if(i<=r){r=n;continue}o.push([r,i]),r=n}return t!==void 0&&r<t&&o.push([r,t]),o}var gM=/\/+/gu,yM=/\/{2,}/gu,CM=new RegExp(`-?${sC}-?`,"g"),SM=/\s+/gu,vM=/[?#[\]@!$&'()*+,;="<>%{}|\\^`]/gu;function TM(e){return e.startsWith("/")?e:"/"+e}function bM(e){return e.replace(yM,"/")}function IM(e){return e.toLowerCase().replaceAll(vM,"").replaceAll(SM,"-")}function sp(e){let t=NM(e,gM,CM),o=mk(t,e.length);return e.startsWith("/")?e=fk(e,o,IM):e=fk(e,o,eS),e=TM(e),e=bM(e),e}function NM(e,...t){let o=[];for(let r of t)for(let i of e.matchAll(r))C(i.index!==void 0),o.push([i.index,i.index+i[0].length]);return ap(o)}function fk(e,t,o){let r="",i=0;for(let[n,a]of t)n>i&&(r+=e.substring(i,n)),r+=o(e.substring(n,a)),i=a;return i<e.length&&(r+=e.substring(i)),r}var hk=":missing-slug";function xM(e,t){let o=mr(t,e);if(o)return o.getSlugVariable();let r=E.dataForIdentifier(e);if(!r)return;let i=r.annotations?.framerSlug;if(!i)return;let n=r.properties[i];if(n?.type==="string")return{id:i,name:n.title??"Slug".toLowerCase()}}function ih(e,t,o){if(!t)return"/unknown";let r=xM(e,o),i=0,n=t.replace(cc,(a,l)=>(i++,r?`:${r.id}`:hk));return i>0?n:(n.endsWith("/")||(n+="/"),r?n+`:${r.id}`:n+hk)}function PM(e){let t=e.split("/"),o=t[t.length-1];return o?Bc(o):!1}var nh=(e,t,o,r=!1)=>{e=sp(e);let i=ck(t.tree),n=t.tree.root.homePageNodeId,a=!!o&&o.id===n;e==="/"&&!a&&(e="/page"),o?.dataIdentifier&&(e=ih(o.dataIdentifier,e,t.tree));let l=e.endsWith("/")&&!a,s=e;l&&(s=e.slice(0,-1));let c=tn(t.tree,o);return i.has(e)&&(r||e!==c)&&(i.add(s),PM(s)&&(s+="/copy"),s=Ro(s,i,{withDash:!0})),{path:l?`${s}/`:s,suggestedName:cn(e)}};function VM(e){if(e.length>=255)throw new TypeError("Alphabet too long");let t=new Uint8Array(256);for(let c=0;c<t.length;c++)t[c]=255;for(let c=0;c<e.length;c++){let d=e.charAt(c),p=d.charCodeAt(0);if(t[p]!==255)throw new TypeError(d+" is ambiguous");t[p]=c}let o=e.length,r=e.charAt(0),i=Math.log(o)/Math.log(256),n=Math.log(256)/Math.log(o);function a(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let d=0,p=0,f=0,h=c.length;for(;f!==h&&c[f]===0;)f++,d++;let v=(h-f)*n+1>>>0,T=new Uint8Array(v);for(;f!==h;){let R=c[f],B=0;for(let G=v-1;(R!==0||B<p)&&G!==-1;G--,B++)R+=256*T[G]>>>0,T[G]=R%o>>>0,R=R/o>>>0;if(R!==0)throw new Error("Non-zero carry");p=B,f++}let N=v-p;for(;N!==v&&T[N]===0;)N++;let w=r.repeat(d);for(;N<v;++N)w+=e.charAt(T[N]);return w}function l(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let d=0,p=0,f=0;for(;c[d]===r;)p++,d++;let h=(c.length-d)*i+1>>>0,v=new Uint8Array(h);for(;d<c.length;){let R=c.charCodeAt(d);if(R>255)return;let B=t[R];if(B===255)return;let G=0;for(let K=h-1;(B!==0||G<f)&&K!==-1;K--,G++)B+=o*v[K]>>>0,v[K]=B%256>>>0,B=B/256>>>0;if(B!==0)throw new Error("Non-zero carry");f=G,d++}let T=h-f;for(;T!==h&&v[T]===0;)T++;let N=new Uint8Array(p+(h-T)),w=p;for(;T!==h;)N[w++]=v[T++];return N}function s(c){let d=l(c);if(d)return d;throw new Error("Non-base"+o+" character")}return{encode:a,decodeUnsafe:l,decode:s}}var gk=VM;var ah="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",kM=gk(ah),RM=8/Math.log2(62),MJ=e=>kM.encode(e).padStart(Math.ceil(e.length*RM),"0"),lp=(e=20)=>Array(e).fill(0).map(()=>ah[Math.floor(Math.random()*ah.length)]).join("");var wM=nt("update-tree-cache-for-vekter");function DM(e,t){return t?aC(t)?t.has(e):t===e:!0}var sh=[];Object.freeze(sh);var lh=[];Object.freeze(lh);function LM(e,t,o,r){return ht(e)?Ue(e)?r??o??ct.identity():!o||!t?ct.identity():ct.boundingRectMatrix(o,t):o??ct.identity()}function FM(e,t,o,r,i,n,a,l){let s=e.root,c=s.cache,d=s.getLocale(n);c.visible=!0,c.lockedByParent=!1,c.renderId=s.id,dp(c);let p=s.children;for(let f of p)if(!(l&&!DM(f.id,l))){if(Qr(f)){if(!f.isLoaded())continue;EM(e,f,s,t,o,r,i,d,a)}else ch(e,f,s,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,sh,lh,void 0,void 0,t,o,r,i,d,void 0,void 0,!1,a,void 0);Ka(s,f)}return e}function u1(e,t){return FM(e.treeStore.tree,e.layoutCache,e.treeStore.sandboxCollectionData,e.treeStore.sandboxVisibility,E.activeBundleHash,e.chromeStore.canvasLocaleId,e.effectStore.getState(),t)}function EM(e,t,o,r,i,n,a,l,s){let c=t.cache;c.visible=!0,c.lockedByParent=!1,c.renderId=t.id,c.parentRenderId=o.id,dp(c);let d=t.children,{combinedVariableValueMap:p,combinedVariableControlMap:f}=t.combineVariableValueAndControlMaps(e,void 0,void 0,void 0,E,i,a,l),h=W(t);for(let v of d)ch(e,v,t,!1,!0,!1,new Map,new Map,!1,null,null,null,null,null,null,sh,lh,p,f,r,i,n,a,l,void 0,void 0,!1,s,h),Ka(t,v)}function ch(e,t,o,r,i,n,a,l,s,c,d,p,f,h,v,T,N,w,R,B,G,K,se,oe,pe,Ee,q,We,$e){let Y=t.cache,Dt=Y.activeVekterLocale;Y.activeVekterLocale=oe;let{combinedVariableMapsAreEqual:J}=t.combineVariableValueAndControlMaps(e,void 0,w,R,E,G,se,oe),ue=Et(t),me=ue?G.isEmpty(t.id):!1,[Ae,Ct]=zM(e,t,o,a,l,B,G,K);Y.groundNodeAncestorId=pe?.groundNodeId,Y.masterAncestorId=c,Y.replicaAncestorId=d,Y.overlayAncestorId=p,Y.formContainerAncestorId=h,Y.tickerAncestorId=v;let Pt=i&&!!Ae,_e=!pe||ct.equals(Y.groundNodeMatrix,pe.groundNodeMatrix),Ce=!er(t)||Y.layout===t.layout,no=Dt===Y.activeVekterLocale,bo=xm(t,pe),Yo=!!We?.nodes.has(t.id),sr=Yo===Y.isEffectPreview&&zr(We?.effectIds??null,Y.effectIds)&&(We?.type??null)===Y.effectType&&Y.webPageEffect===$e,$t=Nm(t)||ae.equals(Y.viewportRect,bo);r||=Ve(t);let lr=Ce&&no&&$t&&sr&&J&&Y.insideVariant===r&&Y.visible===Pt&&Y.collectionIsEmpty===me&&Y.lockedByParent===n&&Y.lastUpdate===t.update&&Y.parentDirected===Ee&&Y.parentDirectedRowHeightFitContent===q&&Tk(t.cache.getRenderInstance(t.id),Ae)&&WM(t.cache.secondaryRenderInstances,Ct)&&QS(e,t)===Y.usesLayoutTemplateRectForModuleIdentifier;if(lr&&_e)return;Y.isEffectPreview=Yo,Y.effectIds=We?.effectIds??null,Y.effectType=We?.type??null,Y.webPageEffect=$e,Y.ancestorRepeaterIds=T,Y.repeatedAncestorRepeaterIds=N;let li=!1;li&&li.cacheUpdated(),lr?Y.canvasRect=void 0:(li&&li.cacheReset(),Y.reset(),Y.groundNodeAncestorId=pe?.groundNodeId,Y.masterAncestorId=c,Y.replicaAncestorId=d,Y.overlayAncestorId=p,Y.slotPropertyAncestorId=f,Y.formContainerAncestorId=h,Y.tickerAncestorId=v,Y.activeVekterLocale=oe,Y.visible=Pt,Y.collectionIsEmpty=me,Y.insideVariant=r,Y.lockedByParent=n,Y.lastUpdate=t.update,Y.parentDirected=Ee,Y.parentDirectedRowHeightFitContent=q,Y.viewportRect=bo,Y.layout=er(t)?t.layout:void 0,Y.ancestorRepeaterIds=T,Y.repeatedAncestorRepeaterIds=N,Y.usesLayoutTemplateRectForModuleIdentifier=ka(t)?t.usesLayoutTemplateRectForModuleIdentifier():void 0,Ae&&(Y.renderId=t.id,Object.assign(Y,Ae)),Y.secondaryRenderInstances=Ct);let{parentRectByRenderIdForChildren:hs,parentMatrixByRenderIdForChildren:gs,parentUsesDOMRectForChildren:cr,groundNodeContextForChildren:mo}=vk(e,t,s,pe,B),ga=t.children;if(!ga)return;let Ny=co(t)?t.layout:void 0,ju=Xt(t)&&t.gridRowHeightType==="fit",ya=c;!ya&&Wo(t)&&(ya=t.id);let tc=d;!tc&&Rt(t)&&(tc=t.id);let xy=cp(t,T);for(let Ca of ga){if(!Ce)for(let[,Vy]of Ca.cache.iterateRenderInstances())Vy.parentRect=void 0;let oc=ue&&Ma(e,Ca,t),Uu=oc&&me,rc=et.isOn("visibilityFromSandbox")?Pt:oc?!Uu&&Pt:Pt,{combinedVariableControlMap:Py,combinedVariableValueMap:In}=t.combineVariableValueAndControlMaps(e,Ca,w,R,E,G,se,oe);ch(e,Ca,t,r,rc,ri(t),hs,gs,cr,ya,tc,ht(t)?t.id:p,hi(t)?t.id:f,_o(t)?t.id:h,Ji(t)?t.id:v,xy,oc?cp(t,N):N,In,Py,B,G,K,se,oe,mo,Ny,ju,We,$e),Ka(t,Ca)}}function m1(e,t,o){let r=AM(e,o),i=e.root,n=i.cache;n.visible=!0,n.renderId=i.id,dp(n);let a=i.children;for(let l of a){if(Qr(l)){if(!l.isLoaded())continue;MM(e,l,i,t,r)}else dh(e,l,i,new Map,new Map,!1,t,r,void 0,!1,void 0);Ka(i,l)}return r}function AM(e,t){let o=new Set,r=new Set;function i(a){r.has(a.id)||(o.add(a.id),r.add(a.id),a.children&&a.children.forEach(i))}function n(a){let l=a.id;for(;l&&!o.has(l);)o.add(l),l=e.getNode(l)?.parentid}for(let a of t){let l=e.getNode(a);l&&(n(l),l.children&&l.children.forEach(i))}return o}function cp(e,t){return Et(e)?t.length===0?[e.id]:[...t,e.id]:t}function MM(e,t,o,r,i){let n=t.cache;n.visible=!0,n.renderId=t.id,n.parentRenderId=o.id,dp(n);let a=t.children;for(let l of a)dh(e,l,t,new Map,new Map,!1,r,i,void 0,!1,void 0),Ka(t,l)}function dh(e,t,o,r,i,n,a,l,s,c,d){if(!l.has(t.id))return;let p=t.cache;if(p.parentDirected=s,p.parentDirectedRowHeightFitContent=c,p.viewportRect=xm(t,d),!p.visible)return;for(let[B,G]of p.iterateRenderInstances()){let K=G.parentRenderId;C(K,"Missing `parentRenderId`"),G.parentRect=r.get(K),G.parentMatrix=i.get(K),G.parentDirectedRect=bk(t,B,o,a)}let{parentRectByRenderIdForChildren:f,parentMatrixByRenderIdForChildren:h,parentUsesDOMRectForChildren:v,groundNodeContextForChildren:T}=vk(e,t,n,d,a),N=t.children;if(!N)return;let w=co(t)?t.layout:void 0,R=Xt(t)&&t.gridRowHeightType==="fit";for(let B of N)dh(e,B,t,f,h,v,a,l,w,R,T),Ka(t,B)}function OM(e,t){if(!t||!ve(e)||!fe(e))return;let o=new Map;for(let[r,i]of t){let n=i.originX??qm*i.width,a=i.originY??qm*i.height,l=ct.identity();LT||(l=l.translate(e.left??0,e.top??0));let s=l.translate(n,a).multiplySelf(ct.identity().translate(i.x,i.y).multiplySelf(i.matrix)).translateSelf(-n,-a),c=ct.convertPointsWithClipping(s,ae.pointsAtOrigin({width:i.width,height:i.height}));o.set(r,{domRect:i,canvasCorners:c,canvasRect:ae.boundingRectFromPoints(c)})}return o}function vk(e,t,o,r,i){let n=t.cache,a=i.getRects(t.id);a&&(n.domRects=new Map(a));let l=ka(t)&&!!n.usesLayoutTemplateRectForModuleIdentifier;l&&(n.layoutTemplateRects=OM(t,i.getLayoutTemplateRects(t.id))),n.groundNodeMatrix=r?.groundNodeMatrix??null;let s=ka(t)&&t.usesDOMRectCached(),c=!(s||o),d=!!n.viewportRect||!Nm(t),p,f=new Map,h=new Map;for(let[v,T]of n.iterateRenderInstances()){let{parentRect:N,parentMatrix:w,parentDirectedRect:R}=T,B=e.getParentSizeInfo(t,void 0,c,d,v),G=R??t.rect(B,c,void 0,v);f.set(v,G);let K=t.originAdjustedMatrix(B,G,v),se=LM(t,N,w,r?.groundNodeMatrix),oe;try{oe=se.multiply(K)}catch(We){wM.reportErrorOncePerMinute(We,{parentRect:N,frame:G,parentMatrix:se,transformMatrix:K}),oe=new DOMMatrix}let pe=qs(t)?oe:ct.flatProjectionMatrix(oe);h.set(v,pe),T.matrix=oe;let Ee=e.convertCornerPointsToCanvas(t,!1,void 0,v);T.cornerPoints=Ee;let q=ae.boundingRectFromPoints(Ee);if(T.canvasRect=q,hr(t)&&jo(t)&&t.strokeEnabled){let We=t.resolveValue("strokeWidth")??0;q=ae.inflate(q,We/2)}l?Sk(T,n.getLayoutTemplateContainerRect()?.canvasRect??q):Sk(T,q),rx(v)&&(p=r??_v(t,G,{groundNodeId:t.id,groundNodeMatrix:pe}))}return{parentRectByRenderIdForChildren:f,parentMatrixByRenderIdForChildren:h,parentUsesDOMRectForChildren:s,groundNodeContextForChildren:p}}function yk(e,t,o){if(et.isOn("visibilityFromSandbox"))return o.getVisible(t);let r=ht(e)&&!e.cache.overlayVisible;return e.isVisible()&&!Gi(e)&&!r}function Tk(e,t){return!e&&!t?!0:!e||!t?!1:ae.equals(e.parentRect??null,t.parentRect??null)&&ct.equals(e.parentMatrix??null,t.parentMatrix??null)&&ae.equals(e.parentDirectedRect??null,t.parentDirectedRect??null)&&Br(e.collectionItemIds,t.collectionItemIds)&&e.collectionItemId===t.collectionItemId}function WM(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;for(let[o,r]of t){let i=e.get(o);if(!Tk(r,i))return!1}return!0}function Ck(e,t,o,r,i,n,a,l,s){return{parentRenderId:r,parentRect:n.get(r),parentMatrix:a.get(r),parentDirectedRect:bk(e,t,o,l),matrix:void 0,canvasRect:void 0,cornerPoints:void 0,collectionItemIds:s.getItemIds(t),collectionItemId:i,minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}}function zM(e,t,o,r,i,n,a,l){let s=new Map;if(Et(o)&&Ma(e,t,o))for(let[p,f]of o.cache.iterateRenderInstances()){let h=f.collectionItemIds;if(h)for(let v=0;v<h.length;v++){let T=h[v];if(!T)continue;let N=ix(p,o.id,T,v),w=yf(N,t.id);yk(t,w,l)&&s.set(w,Ck(t,w,o,p,T??f.collectionItemId,r,i,n,a))}}else for(let[p,f]of o.cache.iterateRenderInstances()){let h=yf(p,t.id);yk(t,h,l)&&s.set(h,Ck(t,h,o,p,f.collectionItemId,r,i,n,a))}let c=s.get(t.id);s.delete(t.id);let d=s.size>0?s:void 0;return[c,d]}function dp(e){e.minX=1/0,e.maxX=-1/0,e.minY=1/0,e.maxY=-1/0}function Sk(e,t){e.minX=t.x,e.maxX=t.x+t.width,e.minY=t.y,e.maxY=t.y+t.height}function BM(e,t){e.minX>t.minX&&(e.minX=t.minX),e.maxX<t.maxX&&(e.maxX=t.maxX),e.minY>t.minY&&(e.minY=t.minY),e.maxY<t.maxY&&(e.maxY=t.maxY)}function Ka(e,t){for(let[,o]of t.cache.iterateRenderInstances()){let r=o.parentRenderId;C(r,"Missing `parentRenderId`");let i=e.cache.getRenderInstance(r);i&&BM(i,o)}}function bk(e,t,o,r){if(co(o)&&en(e,o))return r.getRect(t)}function Cl(e,t){if(M(e))return e;let o=[];for(let r of e)o.push(t.get(r)??r);return o.length>0?o:void 0}function ai(e,t){if(!So(t))return null;let o=e.getNode(t.originalid);return C(o,"The original variant node should exist"),o}function HM(e,t,o){let r=Le.inheritedReplicaNode(e,t.replicaInfo.inheritsFrom),i=Mn(t.replicaInfo.overrides,r?.replicaInfo.overrides);for(let n of o.walk()){let a=i[n.id];if(!a)continue;let{_deleted:l,itemsOrder:s,...c}=a;l?.forEach(d=>c[d]=void 0),e.current(n)?.set(c)}}function Ik(e,t){let o=e.getNode(t.originalid),r=Le.getReplicaForTemplateNode(e,t);if(!o||!r||!Ve(r))return[];if(!r.replicaInfo.inheritsFrom)return[o];let i=e.getNode(r.replicaInfo.inheritsFrom);if(!i)return[o];let n=$o(i.id,o.id),a=e.getNode(n);return a?[o,a]:[o]}function P1(e,t,o,r){let i=Le.getReplicaForTemplateNode(e.tree,t);C(i,"replica should exist when moving node out of replica"),C(Ve(i),"replica must be a variant"),HM(e.tree,i,o),t.isVisible()&&!o.isVisible()&&e.tree.current(o)?.set({visible:!0}),r.delete(t.id),r.add(o.id)}function ph(e,t,o,r,i){if(!o||!r)return t.id;C(st(o),"Fail to update variant nodes: parent must be a replica");let n=Le.getReplicaForTemplateNode(e.tree,o);if(C(n,"Fail to update variant nodes: replica should exist"),C(Ve(n),"Fail to update variant nodes: replica must be an variant"),qc(e.tree,o)){e.tree.current(t)?.set({visible:!1});let l={visible:!0};bi(t)&&i&&(l.itemsOrder=Cl(t.itemsOrder,i)),ll(e.tree,n,t.id,l)}return $o(n.id,t.id)}function uh(e,t,o,r,i,n){let a=ph(e,t,o,r,n);return i.delete(t.id),i.add(a),a}function V1(e,t,o){let r=Ik(e.tree,t),i=Ik(e.tree,o),n=r.find((a,l)=>!a.isVisible()||a.cache.visible===!0?!1:i[l]?.cache.visible??!1);n&&(e.tree.get(n.id)?.set({visible:!1}),t.set({visible:!0},e.tree,!0))}function Nk(e,t,o){Qi(e.tree,t).forEach(({replicaRoot:r})=>{if(Object.keys(r.replicaInfo.overrides).every(s=>!o.has(s)))return;let a={...r.replicaInfo},l={...a.overrides};a.overrides=l,o.forEach((s,c)=>{if(c in l){let d={...l[c]},p=d.itemsOrder;"itemsOrder"in d&&Array.isArray(p)&&(d.itemsOrder=Cl(p,o)),l[s]=$V(d)}}),e.tree.get(r.id)?.set({replicaInfo:a})})}var GM={type:{type:vs.type,value:Yu.type},variantId:{type:vs.variantId,value:void 0},pauseOffscreen:{type:vs.pauseOffscreen,value:Yu.pauseOffscreen}},M1={type:"type",variantId:"variantId",pauseOffscreen:"pauseOffscreen"},$M={cycle:!0,set:!0};function xk(e){return D(e)&&e in $M}function Lr(e){return Bi(e)&&e.actionIdentifier==="framer/useSetVariant"}function Pk(e){return e.controls.type?.value!=="set"?null:e.controls.variantId?.value??null}function O1(e){return Array.isArray(e)&&e.some(t=>Lr(t)&&t.controls.type?.value==="set"&&!t.controls.variantId?.value)}function W1(e,t){return Wv(e,Lr,t)}function z1(e,t,o){let r=Ov(t,Lr,o),i=[];return r.forEach(n=>{switch(n.controls.type?.value){case"set":{let l=n.controls.variantId?.value;l&&i.push(l);break}case"cycle":{let l=e.getScopeNodeFor(t);if(!ie(l))return;let s=l.getTopLevelVariants();if(s.length<=1)return;let c=e.getGroundNodeFor(t),d=s.findIndex(v=>v.id===c.id);if(d===-1)return;let p=d+1,f=p>=s.length?0:p,h=s[f];h&&i.push(h.id);break}}}),i}function B1(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]=r?.value}),t}function _M(e,t){return!(e?.inputValue!==t?.inputValue||e?.delay!==t?.delay||e?.key!==t?.key)}function H1(e,t,o){let r=Array.isArray(e)?[...e]:[],i=r.findIndex(Lr),n=r[i];if(Lr(n)&&_M(n.meta,o)){let a={...n.controls,...Vk(t)},l={...n,controls:a,meta:{...n.meta,...o}};r[i]=l}else{let a=jM(t,void 0,o);r.push(a)}return r}function Vk(e){let t={};return Object.entries(e).forEach(([o,r])=>{t[o]={type:vs[o],value:r}}),t}function jM(e,t,o){let r=Vk({...e}),i={identifier:t||Xc(),actionIdentifier:"framer/useSetVariant",controls:{...GM,...r}};return o&&Object.assign(i,{meta:o}),i}function G1(e,t){let o={...e.controls,...t};return{...e,controls:o}}function kk(e,t){let o=t.get(e);return Tc(o)?o:null}function mh(e,t,o="transparent"){if(M(e))return o;if(!Nr(e))return e;let r=kc(e);return(r?kk(r,t):null)?.light??o}function Yn(e,t,o,r=!1){if(iT(t)){e.has(t)||e.ensureEntityTypeRootNode(t);return}let i=r?ad(o):Js(o);if(e.has(i))return;let n=new Us({id:i});e.insertNode(n,t)}function UM(e,t){let o=e.tree.get(t);if(at(o))return;let r=e.tree.get(o.parentid);if(!at(r))return r.children?.findIndex(i=>i.id===t)}function eX(e,t,o){let r=e.tree.getEntityReferenceNode(t);if(at(r))return;let i=Js(o),n=new Us({id:i}),a=UM(e,r.id),l=Mo(a)?a+1:void 0;e.tree.insertNode(n,r.parentid,l)}function tX(e,t){let o=e.tree.get(t);at(o)||(e.tree.removeNode(o),JM(e,t))}function JM(e,t,o){let{isCodeFile:r=!1}=o??{},i=r?ad(t):Js(t);e.tree.remove(i)}function pp(e,t){return e===Wn?ad(t):Js(t)}function XM(e){return t=>Zr(t)&&t.name===e}function Rk(e,t){return e.children.find(XM(t))??null}function pX(e,t){return e.children.find(o=>Zr(o)&&o.getName()===t)??null}function uX(e,t){let r=qM(e.tree,t).map(a=>e.tree.get(a));C(r.length>0,"unreferenced nodes parent node must exist");let i=r.flatMap(a=>a?.children??[]);if(!i||i.length===0)return;let n=ZM[t];e.tree.beginAllowPartialScopeAccess();for(let a of i){if(!n(a))continue;let l=pp(t,a.id);if(e.tree.get(l))continue;let s=new Us({id:l});e.tree.insertNode(s,t)}e.tree.endAllowPartialScopeAccess()}function wk(e){return md(e)&&e.save.type==="codeFile"}var ZM={[wm]:e=>UC(e),[Lm]:e=>tr(e),[Em]:e=>xo(e),[Am]:e=>Na(e),[Dm]:e=>Jr(e)||Nc(e)||Ia(e),[Wn]:e=>wk(e),[_s]:e=>ie(e)||wk(e),[Fm]:e=>Tc(e),[js]:e=>Be(e),[Fa]:e=>zo(e)},KM={[wm]:Ga,[Lm]:Ga,[Em]:Ga,[Am]:Ga,[Dm]:Ga,[Wn]:Um,[Fm]:CI};function qM(e,t){return t===js||t===Fa?[e.root.id]:t===_s?[e.root.id,Um]:[KM[t]]}var YM="__entity_input";function mX(e,t){return`${YM}_${e}_${t?"popout":"panel"}`}function fh(e){return rT(e)||Zr(e)}function fX(e,t,o){let r=o;for(let[i,n]of t.entries()){let a=i===t.length-1,l=e.getNode(r);if(!l||!fh(l))return!1;let s=!1;for(let c of l.children){if(XC(c)&&n===c.getName())return!0;if(Zr(c)&&n===c.getName()){if(a)return!0;s=!0,r=c.id;break}}if(!s)return!1}return!1}function hh(e){if(kT(e))return jm(e.getName());let t=e.resolveValue("name");return sd(e)&&t?jm(t):"Unknown"}function up(e,t,o){let r=St(t)?t:eO(t);if(r.length===0)return o;let i=e.get(o);C(i&&fh(i),"A reference must be in a folder.");for(let n of r){let a=Rk(i,n);if(a){i=a;continue}i=e.insertNode(new vI({name:n}),i.id)}return i.id}function wX(e,t){let o=e.tree.get(t);if(!Zr(o))return"";let r=[o.name];for(let i of o.ancestors()){if(!Zr(i))break;r.unshift(i.name)}return`/${r.join("/")}`}function QM(e,t,o){let r=e.tree.get(t);C(r,"Node must exist");let i=pp(o,t),n=e.tree.get(i),a=[hh(r)];if(n)for(let l of n.ancestors()){if(!Zr(l))break;a.unshift(hh(l))}return a}function DX(e,t,o){return`/${QM(e,t,o).join("/")}`}function eO(e){return _m(e).slice(0,-1)}function LX(e,t,o,r){let i=_m(o);if(i.length===0)return;let n=i.pop(),a=up(e.tree,o,r),l=r===Wn;return Yn(e.tree,a,t.id,l),t.set({name:n}),a}function qa(e){return Ps(e)}function Dk(e,t){if(!Bo(t))return!1;let o=Rm(t.codeComponentIdentifier);if(!o)return!1;let r=e.getNode(o);return!!(r&&W(r))}function BX(e,t){let o=Rm(t.codeComponentIdentifier);C(o,"WebPageInstance should have a local canvas component id");let r=e.getNode(o);return C(r,"SmartComponentInstance should have a local WebPageNode"),C(W(r),"WebPageInstance its WebPageNode should be a web page"),r}var Sl=(e,t)=>e.length===0?[]:typeof e[0]=="string"?t.withoutDescendants(t.getNodes(e)):e;function mp(e,t){let o=t.reactComponentForIdentifier(e.codeComponentIdentifier);return o?ZT(o.properties,e.getControlProps(o.properties)):{}}var tO={type:"None",source:"undefined"},Lk=class extends ti{constructor(){super(...arguments);L(this,"_stack",[]);L(this,"dismiss",()=>{this._stack=Or.pop(this._stack)});L(this,"isVisible",()=>this.active.type!=="None");L(this,"shouldBlockUndoRedo",(o,r)=>{switch(this.active.type){case"None":return!1;case"Variables":return!QV(o,r);case"LocaleSettings":return!ek(o,r);default:return!0}})}get stack(){return this._stack}get active(){return this._stack[this._stack.length-1]??tO}trackModalOpen({type:o,source:r}){It("modal_open",{modalType:o,source:r})}push(o){this._stack=Or.push(this._stack,o),this.trackModalOpen(o)}set(o){this._stack=[o],this.trackModalOpen(o)}dismissAll(){this._stack.length!==0&&(this._stack=[])}dismissModal(o){this._stack=Or.filter(this._stack,r=>r.type!==o)}displayComponentIsolationModal({source:o}){let r="componentIsolationModal",i="1";Wr.isAutomation||Wr.isE2E||Wr.isTest||localStorage.getItem(r)!==i&&(localStorage.setItem(r,i),setTimeout(()=>{this.scheduler.processWhenReady(()=>{this.set({type:"ComponentIsolationModal",source:o})})},0))}};function Fk(e){if(D(e))return[e];if("id"in e)return[e.id];let t=[];for(let o of e)D(o)?t.push(o):t.push(o.id);return t}function vl(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0}var Ek=class extends ti{constructor(o,r,i){super();this.guides=o;this.chromeStore=r;this.overlayStore=i;L(this,"_previousIds",[]);L(this,"_ids",[]);L(this,"_nodes",[]);L(this,"_isSticky",!1);L(this,"_commonGroundNode");L(this,"gradientStopId")}get ids(){return this._ids}get nodes(){return this._nodes}get isSticky(){return this._isSticky}get commonGroundNode(){return this._commonGroundNode}get commonGroundNodeId(){return this._commonGroundNode?.id??null}get previousIds(){return this._previousIds}set(o,r={}){let i=Fk(o);if(vl(this._ids,i))return;this._previousIds=this._ids,this._ids=i,this._isSticky=r.sticky??i.length>1,i.length>0&&this.guides.clearSelected();let{switchToLayers:a=!1,tree:l}=r;this.chromeStore.onCanvasSelectionChange(i,a),this.overlayStore.onCanvasSelectionChange(i,{tree:l})}toggle(o,{switchToLayers:r=!1}={}){let i=Fk(o),n=new Set(this.ids);for(let a of i)n.has(a)?n.delete(a):n.add(a);this._ids=Array.from(n),this.chromeStore.onCanvasSelectionChange(this.ids,r),this.overlayStore.onCanvasSelectionChange(n,{toggle:!0})}clear(){this.set([])}updateNodes(o){let r=o.getNodes(this.ids),i=!Vn(this.nodes,r);i&&(this._nodes=r),(i||this.commonGroundNode&&!o.isGroundNode(this.commonGroundNode))&&this.updateCommonGroundNode(o)}updateCommonGroundNode(o){let r;for(let i of this.nodes){let n=o.getGroundNodeFor(i);if(!r)r=n;else if(r!==n){r=void 0;break}}this._commonGroundNode=r}postProcess(o,r,i,n=this.gradientStopId,a=this._ids){this.gradientStopId=n;let l=[];for(let s of a){let c=o.getNode(s);if(c){o.isAncestorOfNode(c,r.id)&&l.push(s);continue}let d=i.getNode(s);if(!Ir(d))continue;let p=o.getNode(d.parentid);if(Mt(p)){l.splice(0,l.length,p.id);break}}this.set(l,{tree:o}),this.updateNodes(o)}};function oO(e){let t=E.componentForIdentifier(e.codeComponentIdentifier);if(!t?.properties)return null;let o=Object.entries(t.properties).find(([,a])=>a&&a.title==="Variant"&&a.type==="enum");if(!o)return null;let[r,i]=o;if(i.options.length<=1)return null;let n=i.defaultValue??i.options[0];return D(n)?{key:r,control:i,defaultVariant:n}:null}function rO(e,{control:t}){let o=e.toLowerCase().trim(),i=(t.optionTitles??t.options).findIndex(a=>D(a)&&a.toLowerCase()===o);if(i===-1)return null;let n=t.options[i];return D(n)?n:null}function Ak(e,t,o){let r={};for(let i of o.walk()){if(!_(i))continue;let n=oO(i);if(!n)continue;let a=rO(t,n);if(!a)continue;let l=i;if(zt(i)&&(l=e.tree.getNode(i.originalid)),!l||(l.getRawControlProp(n.key)??n.defaultVariant)===a)continue;let c={type:"enum",value:a};r[l.id]={[ut(n.key)]:c}}return Object.keys(r).length>0?r:null}var Mk=["blur","backgroundBlur","brightness","contrast","grayscale","hueRotate","invert","saturate","sepia"];var hp={left:"position",right:"position",top:"position",bottom:"position",centerAnchorX:"position",centerAnchorY:"position",constraintsLocked:"position",x:"position",y:"position",width:"size",widthType:"size",height:"size",heightType:"size",aspectRatio:"size",itemsOrder:"itemsOrder",layout:"layout",gap:"layout",gridAlignment:"layout",gridColumnCount:"layout",gridColumnWidthType:"layout",gridColumnWidth:"layout",gridColumnMinWidth:"layout",gridRowHeightType:"layout",gridRowHeight:"layout",gridRowCount:"layout",stackDirection:"layout",stackDistribution:"layout",stackAlignment:"layout",stackWrapEnabled:"layout",gridType:"layout",gridItemFillCellWidth:"size",gridItemFillCellHeight:"size",gridItemHorizontalAlignment:"position",gridItemVerticalAlignment:"position",gridItemColumnSpan:"size",gridItemRowSpan:"size",minHeight:"sizeConstraints",minWidth:"sizeConstraints",maxHeight:"sizeConstraints",maxWidth:"sizeConstraints",paragraphSpacing:"paragraphSpacing",position:"positionType",positionStickyTop:"positionType",positionStickyRight:"positionType",positionStickyBottom:"positionType",positionStickyLeft:"positionType",intrinsicWidth:"intrinsicSize",intrinsicHeight:"intrinsicSize",fillColor:"fill",fillEnabled:"fill",fillImage:"fill",fillImageOriginalName:"fill",fillImagePixelHeight:"fill",fillImagePixelWidth:"fill",fillImageResize:"fill",fillImagePositionX:"fill",fillImagePositionY:"fill",fillImageTileSize:"fill",fillImageAlts:"fillImageAlts",fillType:"fill",fillRadialGradient:"fill",fillLinearGradient:"fill",fillConicGradient:"fill",tapHighlightColor:"tapHighlight",textSelection:"textSelection",masks:"mask",radius:"radius",radiusBottomLeft:"radius",radiusBottomRight:"radius",radiusIsRelative:"radius",radiusPerCorner:"radius",radiusTopLeft:"radius",radiusTopRight:"radius",cornerShape:"cornerShape",borderTop:"border",borderBottom:"border",borderLeft:"border",borderRight:"border",borderEnabled:"border",borderWidth:"border",borderStyle:"border",borderColor:"border",borderPerSide:"border",rotation:"rotation",rotate3d:"rotation",rotateX:"rotation",rotateY:"rotation",blendingMode:"blending",opacity:"opacity",backgroundBlur:"backgroundBlur",overflow:"overflow",overflowY:"overflowY",overflowX:"overflowX",overscrollBehavior:"overscroll",visible:"visibility",brightness:"brightness",contrast:"contrast",grayscale:"grayscale",hueRotate:"hueRotate",invert:"invert",saturate:"saturate",sepia:"sepia",blur:"blur",boxShadows:"shadows",shadows:"shadows",guidesX:"canvasSettings",guidesY:"canvasSettings",exportOptions:"canvasSettings",overlayGrid:"canvasSettings",gesture:"canvasSettings",sizeToFit:"canvasSettings",framePreset:"canvasSettings",isVariant:"canvasSettings",onTap:"action",onTapStart:"action",onClick:"action",onMouseUp:"action",onMouseDown:"action",onMouseEnter:"action",onMouseLeave:"action",onAppear:"action",onKeyDown:"action",padding:"padding",paddingPerSide:"padding",paddingTop:"padding",paddingRight:"padding",paddingBottom:"padding",paddingLeft:"padding",name:"name",strokeEnabled:"stroke",strokeAlignment:"stroke",strokeWidth:"stroke",strokeColor:"stroke",lineJoin:"stroke",lineCap:"stroke",strokeMiterLimit:"stroke",strokeDashArray:"stroke",strokeDashOffset:"stroke",html:"richText",htmlLocalized:"richText",htmlContent:"richText",textFitScale:"richText",textFitViewBoxSize:"richText",textFitViewBoxSizeLocalized:"richText",stylePresetHeading1:"stylePresets",stylePresetHeading2:"stylePresets",stylePresetHeading3:"stylePresets",stylePresetHeading4:"stylePresets",stylePresetHeading5:"stylePresets",stylePresetHeading6:"stylePresets",stylePresetParagraph:"stylePresets",stylePresetLink:"stylePresets",stylePresetAnchorLink:"stylePresets",stylePresetBlockquote:"stylePresets",stylePresetTable:"stylePresets",stylePresetInlineCode:"stylePresets",stylePresetImage:"stylePresets",anchorLinkOffsetY:"anchorLinkOffsetY",styledText:"styledText",getStyledText:"styledText",font:"font",rootFontSize:"rootFontSize",textColor:"textColor",textBackgroundColor:"textBackgroundColor",textBackgroundRadius:"textBackgroundRadius",textBackgroundCornerShape:"textBackgroundCornerShape",textBackgroundPadding:"textBackgroundPadding",fontSize:"fontSize",letterSpacing:"letterSpacing",textTransform:"textTransform",textDecoration:"textDecoration",textDecorationColor:"textDecoration",textDecorationThickness:"textDecoration",textDecorationStyle:"textDecoration",textDecorationSkipInk:"textDecoration",textDecorationOffset:"textDecoration",lineHeight:"lineHeight",textAlignment:"textAlignment",textStrokeWidth:"textStroke",textStrokeColor:"textStroke",textWrapBalance:"textWrapBalance",openTypeFontFeatures:"openTypeFontFeatures",link:"link",linkOpenInNewTab:"link",linkSmoothScroll:"link",linkClickTrackingId:"link",linkLocalized:"link",linkRelValues:"link",linkPreserveParams:"link",getLink:"link",linkFont:"linkStyle",linkTextColor:"linkStyle",linkFontSize:"linkStyle",linkTextTransform:"linkStyle",linkTextDecoration:"linkStyle",linkTextDecorationColor:"linkStyle",linkTextDecorationThickness:"linkStyle",linkTextDecorationStyle:"linkStyle",linkTextDecorationSkipInk:"linkStyle",linkTextDecorationOffset:"linkStyle",linkTextBackgroundColor:"linkStyle",linkTextBackgroundRadius:"linkStyle",linkTextBackgroundCornerShape:"linkStyle",linkTextBackgroundPadding:"linkStyle",linkHoverFont:"linkStyle",linkHoverTextColor:"linkStyle",linkHoverFontSize:"linkStyle",linkHoverTextTransform:"linkStyle",linkHoverTextDecoration:"linkStyle",linkHoverTextDecorationColor:"linkStyle",linkHoverTextDecorationThickness:"linkStyle",linkHoverTextDecorationStyle:"linkStyle",linkHoverTextDecorationSkipInk:"linkStyle",linkHoverTextDecorationOffset:"linkStyle",linkHoverTextBackgroundColor:"linkStyle",linkHoverTextBackgroundRadius:"linkStyle",linkHoverTextBackgroundCornerShape:"linkStyle",linkHoverTextBackgroundPadding:"linkStyle",linkCurrentFont:"linkStyle",linkCurrentTextColor:"linkStyle",linkCurrentFontSize:"linkStyle",linkCurrentTextTransform:"linkStyle",linkCurrentTextDecoration:"linkStyle",linkCurrentTextDecorationColor:"linkStyle",linkCurrentTextDecorationThickness:"linkStyle",linkCurrentTextDecorationStyle:"linkStyle",linkCurrentTextDecorationSkipInk:"linkStyle",linkCurrentTextDecorationOffset:"linkStyle",linkCurrentTextBackgroundColor:"linkStyle",linkCurrentTextBackgroundRadius:"linkStyle",linkCurrentTextBackgroundCornerShape:"linkStyle",linkCurrentTextBackgroundPadding:"linkStyle",textContent:"textContent",textVerticalAlignment:"textVerticalAlignment",variantTransition:"transition",pathSegments:"vectorPath",pathClosed:"vectorPath",spikeCount:"vectorPath",spikeDepth:"vectorPath",polygonSides:"vectorPath",elementId:"scrollTarget",scrollMarginTop:"scrollTarget",scrollTargetEnabled:"scrollTarget",altAttribute:"accessibility",altAttributeLocalized:"accessibility",cursor:"cursor",customCursorSmartComponentId:"customCursor",customCursorFollow:"customCursor",customCursorOffsetX:"customCursor",customCursorOffsetY:"customCursor",customCursorVariant:"customCursor",customCursorType:"customCursor",customCursorTransitionEnabled:"customCursor",customCursorTransition:"customCursor",customCursorPlacement:"customCursor",customCursorAlignment:"customCursor",pointerEvents:"pointerEvents",userSelect:"userSelect",zIndex:"zIndex",draggable:"draggable",imageRendering:"imageRendering",viewportHeight:"canvasSettings",isBreakpoint:"canvasSettings",backdropFill:"overlay",backdropFillEnabled:"overlay",backdropDismissible:"overlay",blockDocumentScrolling:"overlay",backdropExitTransition:"overlayTransition",backdropEnterTransition:"overlayTransition",backdropTransitionLocked:"overlayTransition",hideScrollbars:"scrollbars",customizations:"customizations",customizationsDescription:"customizations",customizationsSectionId:"customizations",customizationsCategory:"customizations",customizationsRules:"customizations",isApplyingCustomizations:"customizations",translateZ:"translateZ",scale:"scale",skewX:"skew",skewY:"skew",backfaceVisibility:"backfaceVisibility",perspective:"perspective",transformStylePreserve3d:"transformStylePreserve3d",transformOriginX:"transformOrigin",transformOriginY:"transformOrigin",transition:"transition",formInputFontSize:"formInputFont",formInputFontFamily:"formInputFont",formInputFontSelector:"formInputFont",formInputFontWeight:"formInputFont",formInputFontStyle:"formInputFont",formInputPlaceholderColor:"formPlaceholderColor",formInputFontColor:"formInputColor",formInputFontLetterSpacing:"formInputFont",formInputFontLetterSpacingUnit:"formInputFont",formInputFontLineHeight:"formInputFont",formInputFontLineHeightUnit:"formInputFont",formInputFontTextAlignment:"formInputFont",formInputOpenTypeFontFeatures:"formInputFont",formTextInputType:"formTextInputType",formTextAreaResizable:"formInputTextAreaResize",formTextInputMinNumber:"formTextInputTypeMin",formTextInputMaxNumber:"formTextInputTypeMax",formInputMaxLength:"formInputMaxLength",formInputStep:"formInputStep",formBooleanInputType:"formBooleanInputType",formBooleanInputValue:"formBooleanInputValue",formBooleanInputCheckedBorderColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderWidth:"formBooleanInputCheckedEffect",formBooleanInputCheckedBorderStyle:"formBooleanInputCheckedEffect",formBooleanInputCheckedBoxShadow:"formBooleanInputCheckedEffect",formBooleanInputCheckedFillColor:"formBooleanInputCheckedEffect",formBooleanInputCheckedTransition:"formBooleanInputCheckedEffect",formInputFocusedBackgroundColor:"formInputFocusedFill",formInputFocusedBorderColor:"formInputFocusedBorder",formInputFocusedBorderStyle:"formInputFocusedBorder",formInputFocusedBorderWidth:"formInputFocusedBorder",formInputFocusedBoxShadow:"formInputFocusedBoxShadow",formInputFocusedTransition:"formInputFocusedTransition",formInputInvalidTextColor:"formInputInvalidTextColor",formInputIconImage:"formInputIcon",formInputIconColor:"formInputIcon",viewTransitionNone:"viewTransitionNone"};function hZ(e){let t=[],o;for(o in hp){let r=hp[o];e.includes(r)&&t.push(o)}return t}function Ok(e,t){let o=E.componentForIdentifier(t.codeComponentIdentifier);if(!o?.properties)return{};let r={};return Object.entries(o.properties).forEach(([i,n])=>{if(!n||ur(t)&&n.type==="slot")return;let a=ut(i),l=e[a];uc(l)&&l.type&&ov(n.type,l.type)&&(n.type==="enum"&&!MC(n,l.value)||(r[a]=l))}),r}function Q(e,t){return t?new Set(St(t)?t:[t]).has(e):!0}function gp(e,t,o,r,i,n){let a=e.getScopeNodeFor(o);function l(c){return!U(c)||a&&xr(a)&&a.hasVariable(c.id)?c:i?.[c.id]??c}let s={};if(Uv(e,o)||qe(t)&&(t.widthType===4&&(s.widthType=1),t.heightType===4&&(s.heightType=1)),Q("visibility",n)&&Rr(t)&&Rr(o)&&(s.visible=l(t.visible)),Q("border",n)&&kr(t)&&kr(o)&&(s.borderEnabled=t.borderEnabled,s.borderWidth=t.borderWidth,s.borderColor=t.borderColor,s.borderStyle=t.borderStyle,s.borderPerSide=t.borderPerSide,s.borderLeft=t.borderLeft,s.borderTop=t.borderTop,s.borderRight=t.borderRight,s.borderBottom=t.borderBottom),Q("border",n)&&kr(t)&&jo(o))if(z(t.borderEnabled)){let c=t.resolveValue("borderEnabled");kn(c)?(s.strokeEnabled=!0,s.strokeWidth=c.borderWidth,s.strokeColor=c.borderColor):s.strokeEnabled=!1}else s.strokeEnabled=t.borderEnabled,s.strokeWidth=t.borderWidth,s.strokeColor=t.borderColor;if(Q("stroke",n)&&jo(t)&&jo(o)&&(s.strokeEnabled=t.strokeEnabled,s.strokeColor=t.strokeColor,s.strokeWidth=t.strokeWidth,s.strokeAlignment=t.strokeAlignment,s.lineJoin=t.lineJoin,s.lineCap=t.lineCap,s.strokeMiterLimit=t.strokeMiterLimit,s.strokeDashArray=t.strokeDashArray,s.strokeDashOffset=t.strokeDashOffset),Q("stroke",n)&&jo(t)&&kr(o)&&(s.borderEnabled=t.strokeEnabled,s.borderWidth=t.resolveValue("strokeWidth"),s.borderColor=t.resolveValue("strokeColor")),Q("formInputTextAreaResize",n)&&dS(t)&&(s.formTextAreaResizable=t.formTextAreaResizable),Q("formInputFocusedFill",n)&&vi(t)&&vi(o)&&(s.formInputFocusedBackgroundColor=t.formInputFocusedBackgroundColor),Q("formInputFocusedBorder",n)&&vi(t)&&vi(o)&&(s.formInputFocusedBorderColor=t.formInputFocusedBorderColor,s.formInputFocusedBorderWidth=t.formInputFocusedBorderWidth,s.formInputFocusedBorderStyle=t.formInputFocusedBorderStyle),Q("formInputFocusedBoxShadow",n)&&vi(t)&&vi(o)&&(s.formInputFocusedBoxShadow=t.formInputFocusedBoxShadow?[...t.formInputFocusedBoxShadow]:void 0),Q("formInputFocusedTransition",n)&&vi(t)&&vi(o)&&(s.formInputFocusedTransition=t.formInputFocusedTransition),Q("formInputColor",n)&&Un(t)&&Un(o)&&(s.formInputFontColor=t.formInputFontColor),Q("formPlaceholderColor",n)&&pf(t)&&pf(o)&&(s.formInputPlaceholderColor=t.formInputPlaceholderColor),Q("formInputPadding",n)&&Ho(t)&&Ho(o)&&(s.padding=t.padding,s.paddingPerSide=t.paddingPerSide,s.paddingTop=t.paddingTop,s.paddingRight=t.paddingRight,s.paddingBottom=t.paddingBottom,s.paddingLeft=t.paddingLeft),Q("shadows",n)&&Dn(t)&&Dn(o)){let c=l(t.boxShadows);fS(o)?s.boxShadows=c:z(c)||(s.boxShadows=c?.filter(d=>d.type!=="realistic"))}if(Q("shadows",n)&&mm(t)&&mm(o)&&(s.shadows=t.shadows),Q("rotation",n)&&fr(t)&&fr(o)&&(s.rotation=t.rotation,uo(o)&&uo(t)&&(s.rotate3d=t.rotate3d,s.rotateX=t.rotateX,s.rotateY=t.rotateY)),Q("overflow",n)&&or(t)&&or(o)&&(s.overflow=l(t.overflow)),Q("overscroll",n)&&Vs(t)&&Vs(o)&&(s.overscrollBehavior=l(t.overscrollBehavior)),Q("cursor",n)&&En(t)&&En(o)&&(s.cursor=l(t.cursor)),Q("customCursor",n)&&En(t)&&En(o)&&(s.customCursorType=t.customCursorType,s.customCursorSmartComponentId=t.customCursorSmartComponentId,s.customCursorVariant=t.customCursorVariant,s.customCursorFollow=t.customCursorFollow,s.customCursorOffsetX=t.customCursorOffsetX,s.customCursorOffsetY=t.customCursorOffsetY,s.customCursorTransitionEnabled=t.customCursorTransitionEnabled,s.customCursorTransition=t.customCursorTransition,s.customCursorPlacement=t.customCursorPlacement,s.customCursorAlignment=t.customCursorAlignment),Zs(t)&&Zs(o))for(let c of Mk){let d=hp[c];Q(d,n)&&(s[c]=l(t[c]))}if(Q("blending",n)&&cm(t)&&cm(o)&&(s.blendingMode=l(t.blendingMode)),Q("transition",n)&&Ys(t)&&Ys(o)){let c=Ve(t)?t.variantTransition:t.transition;Ve(o)?s.variantTransition=c:s.transition=c}if(Q("fill",n)&&Po(t)&&Po(o)){s.fillColor=l(t.fillColor),s.fillType=t.fillType,s.fillLinearGradient=t.fillLinearGradient,s.fillRadialGradient=t.fillRadialGradient,s.fillConicGradient=t.fillConicGradient,s.fillType==="conic-gradient"&&!wS(o)&&(s.fillType=o.fillType??"color");let c=l(t.fillImage);z(c)?z(c)&&o.supportsDynamicValues()&&(s.fillImage=c):s.fillImage=c,Q("fillImageAlts",n)&&DS(e,o)&&Dc(t)&&(s.fillImageAlts=t.fillImageAlts?[...t.fillImageAlts]:void 0),s.fillImageResize=t.fillImageResize,s.fillImagePixelWidth=t.fillImagePixelWidth,s.fillImagePixelHeight=t.fillImagePixelHeight,s.fillImagePositionX=t.fillImagePositionX,s.fillImagePositionY=t.fillImagePositionY,s.fillImageTileSize=t.fillImageTileSize}if(Q("fill",n)&&pr(t)&&pr(o)&&(s.fillEnabled=t.fillEnabled),(Q("size",n)||Q("fill",n))&&qe(t)&&qe(o)){let c=s.fillType??(Po(o)?o.fillType:void 0),d=s.heightType??o.heightType;(s.widthType??o.widthType)===5&&c!=="image"&&(s.width=o.rect().width,s.widthType=0),d===5&&c!=="image"&&(s.height=o.rect().height,s.heightType=0)}if(Q("opacity",n)&&Km(t)&&Km(o)&&(s.opacity=l(t.opacity)),Q("radius",n)&&ei(t)&&ei(o)&&(s.radius=l(t.radius),zm(t)&&zm(o)&&(s.radiusIsRelative=t.radiusIsRelative),Si(t)&&Si(o)&&(s.radiusPerCorner=t.radiusPerCorner,s.radiusBottomLeft=t.radiusBottomLeft,s.radiusBottomRight=t.radiusBottomRight,s.radiusTopLeft=t.radiusTopLeft,s.radiusTopRight=t.radiusTopRight)),Q("cornerShape",n)&&Cm(t)&&Cm(o)&&(s.cornerShape=t.cornerShape),Q("pointerEvents",n)&&pm(t)&&pm(o)&&!pt(a)&&(s.pointerEvents=l(t.pointerEvents)),Q("draggable",n)&&Ks(t)&&Ks(o)&&(s.draggable=l(t.draggable)),Q("userSelect",n)&&ks(t)&&ks(o)&&(s.userSelect=l(t.userSelect)),Q("imageRendering",n)&&dm(t)&&dm(o)&&(s.imageRendering=l(t.imageRendering)),Q("overflowX",n)&&or(t)&&or(o)&&(s.overflowX=l(t.overflowX)),Q("overflowY",n)&&or(t)&&or(o)&&(s.overflowY=l(t.overflowY)),Q("zIndex",n)&&vm(t)&&vm(o)&&(s.zIndex=l(t.zIndex)),Q("scrollbars",n)&&nl(t)&&nl(o)&&(s.hideScrollbars=l(t.hideScrollbars)),Q("textVerticalAlignment",n)&&al(t)&&al(o)&&(s.textVerticalAlignment=t.textVerticalAlignment),Q("textWrapBalance",n)&&Hm(t)&&Hm(o)&&(s.textWrapBalance=t.textWrapBalance),Q("styledText",n)&&Ge(t)&&jc(o)){s.font=t.getFonts(!1)[0],s.textColor=t.getTextColors(!1)[0];let c=t.getFontSizes(!1)[0];s.fontSize=Xi(c)?c[0]:c;let d=t.getLetterSpacings(!1)[0];s.letterSpacing=M(d)?d:WS(d),s.textTransform=t.getTextTransforms(!1)[0],s.textDecoration=t.getTextDecorations(!1)[0],s.lineHeight=t.getLineHeights(!1)[0],s.textAlignment=t.getTextAlignments(!1)[0],s.styledText=o.styledText.setFont(void 0,!1).setTextColor(void 0,!1).setFontSize(void 0,!1).setLetterSpacing(void 0,!1).setTextTransform(void 0,!1).setTextDecoration(void 0,!1).setLineHeight(void 0).setTextAlignment(void 0)}if(Q("link",n)&&Ge(t)&&Ge(o)&&(s.linkFont=t.linkFont,s.linkTextColor=t.linkTextColor,s.linkFontSize=t.linkFontSize,s.linkTextTransform=t.linkTextTransform,s.linkTextDecoration=t.linkTextDecoration,s.linkHoverFont=t.linkHoverFont,s.linkHoverTextColor=t.linkHoverTextColor,s.linkHoverFontSize=t.linkHoverFontSize,s.linkHoverTextTransform=t.linkHoverTextTransform,s.linkHoverTextDecoration=t.linkHoverTextDecoration,s.linkCurrentFont=t.linkCurrentFont,s.linkCurrentTextColor=t.linkCurrentTextColor,s.linkCurrentFontSize=t.linkCurrentFontSize,s.linkCurrentTextTransform=t.linkCurrentTextTransform,s.linkCurrentTextDecoration=t.linkCurrentTextDecoration),Q("mask",n)&&Om(t)&&Om(o)&&(s.masks=t.masks),Ie(t)&&Ie(o)){if(Q("fontSize",n)&&(s.textFitScale=t.textFitScale,s.textFitViewBoxSize=t.textFitViewBoxSize),Q("paragraphSpacing",n)&&(s.paragraphSpacing=t.paragraphSpacing),Q("styledText",n)){let c=t.getTextStrokeWidths(!1)[0],d=t.getTextStrokeColors(!1)[0];M(c)||(s.textStrokeWidth=c),d&&(s.textStrokeColor=d)}if(Q("richText",n))for(let c of _a){let d=t[c];e.has(d)&&(s[c]=d)}}if(Q("codeComponentProps",n)&&Bo(t)&&Bo(o)){let c=Ok(t,o);Object.assign(s,c)}if(Q("codeOverride",n)&&Ki(t)&&Ki(o)&&(s.codeOverrideEnabled=t.codeOverrideEnabled,s.codeOverrideIdentifier=t.codeOverrideIdentifier),Q("formInputFont",n)&&Un(t)&&Un(o)&&(s.formInputFontFamily=t.formInputFontFamily,s.formInputFontWeight=t.formInputFontWeight,s.formInputFontStyle=t.formInputFontStyle,s.formInputFontSize=t.formInputFontSize,s.formInputFontSelector=t.formInputFontSelector,s.formInputFontLetterSpacing=t.formInputFontLetterSpacing,s.formInputFontLetterSpacingUnit=t.formInputFontLetterSpacingUnit,s.formInputFontLineHeight=t.formInputFontLineHeight,s.formInputFontLineHeightUnit=t.formInputFontLineHeightUnit,s.formInputFontTextAlignment=t.formInputFontTextAlignment,s.formInputOpenTypeFontFeatures=t.formInputOpenTypeFontFeatures),Q("layout",n)&&De(o)){let c=br(t),d=HC(t);(c||d)&&(So(o)||(s.layout=t.layout),s.gap=t.gap,s.padding=t.padding,s.paddingPerSide=t.paddingPerSide,s.paddingTop=t.paddingTop,s.paddingRight=t.paddingRight,s.paddingBottom=t.paddingBottom,s.paddingLeft=t.paddingLeft,c&&(s.stackDirection=t.stackDirection,s.stackDistribution=t.stackDistribution,s.stackAlignment=t.stackAlignment),d&&(s.gridAlignment=t.gridAlignment,s.gridColumnCount=t.gridColumnCount,s.gridColumnWidthType=t.gridColumnWidthType,s.gridColumnWidth=t.gridColumnWidth,s.gridColumnMinWidth=t.gridColumnMinWidth,s.gridRowHeightType=t.gridRowHeightType,s.gridRowHeight=t.gridRowHeight,s.gridRowCount=t.gridRowCount,s.gridType=t.gridType))}if(Q("position",n)&&Object.assign(s,Aa(t,r)),Q("perspective",n)&&uo(t)&&uo(o)&&(s.perspective=l(t.perspective)),Q("overlay",n)&&lt(t)&&lt(o)&&r){let c=qi(t);Object.assign(s,c)}if(Q("effects",n)&&el(t)&&el(o)&&Object.assign(s,Mb(o,t)),Q("transformOrigin",n)&&uo(t)&&uo(o)&&Object.assign(s,{transformOriginX:t.transformOriginX,transformOriginY:t.transformOriginY}),Q("backfaceVisibility",n)&&uo(t)&&uo(o)&&Object.assign(s,{backfaceVisibility:t.backfaceVisibility}),Q("transformStylePreserve3d",n)&&uo(t)&&uo(o)&&Object.assign(s,{transformStylePreserve3d:t.transformStylePreserve3d}),Q("translateZ",n)&&uo(t)&&uo(o)&&Object.assign(s,{translateZ:t.translateZ}),Q("scale",n)&&uo(t)&&uo(o)&&Object.assign(s,{scale:t.scale}),Q("skew",n)&&uo(t)&&uo(o)&&Object.assign(s,{skewX:t.skewX,skewY:t.skewY}),Q("formBooleanInputType",n)&&jn(t)&&jn(o)&&Object.assign(s,{formBooleanInputType:t.formBooleanInputType}),Q("formBooleanInputValue",n)&&jn(t)&&jn(o)&&Object.assign(s,{formBooleanInputValue:t.formBooleanInputValue}),Q("formBooleanInputCheckedEffect",n)&&jn(t)&&jn(o)){let c={formBooleanInputCheckedBorderColor:t.formBooleanInputCheckedBorderColor,formBooleanInputCheckedBorderWidth:t.formBooleanInputCheckedBorderWidth,formBooleanInputCheckedBorderStyle:t.formBooleanInputCheckedBorderStyle,formBooleanInputCheckedFillColor:t.formBooleanInputCheckedFillColor,formBooleanInputCheckedBoxShadow:t.formBooleanInputCheckedBoxShadow,formBooleanInputCheckedTransition:t.formBooleanInputCheckedTransition};Object.assign(s,c)}return Q("formInputIcon",n)&&df(t)&&df(o)&&Object.assign(s,{formInputIconImage:t.formInputIconImage,formInputIconColor:t.formInputIconColor}),Q("viewTransitionNone",n)&&Qs(t)&&Qs(o)&&(s.viewTransitionNone=t.viewTransitionNone),s}var Wk=e=>{let t=[];return e.forEach((o,r)=>{for(let i=r+1;i<e.length;i++){let n=e[i];t.push([o,n])}}),t};function zk(e,t,o){let r=t.map(p=>e.convertFrameToCanvas(p));if(r.length===2){let[p,f]=r,h=aO(p,f),v=sO(p,f);if(h&&!v)return"vertical";if(v&&!h)return"horizontal"}let i=r.map(p=>ae.center(p));if(i.length<=1){if(r.length===1){let[p]=r,f=o.width/Math.max(1,p.width),h=o.height/Math.max(1,p.height);return f<h?"vertical":"horizontal"}return o.width<o.height?"vertical":"horizontal"}let n=Wk(i),a=[],l=[];n.forEach(([p,f])=>{a.push(Math.abs(p.x-f.x)),l.push(Math.abs(p.y-f.y))});let s=a.reduce((p,f)=>p+f,0),c=l.reduce((p,f)=>p+f,0);return s>c?"horizontal":"vertical"}function Bk(e,t,o){return[...t].sort((r,i)=>{let n=e.tree.getRect(r),a=e.tree.getRect(i);return o==="horizontal"?n.x-a.x:n.y-a.y})}function iO(e){if(z(e))return!0;switch(e){case"start":case"center":case"end":return!0;default:return!1}}function gh(e,t,o){let r=zk(e.tree,t,o),i=e.stores.persistedUserDefaults.layoutGap;return{layout:"stack",stackDirection:r,gap:i,stackDistribution:BC,stackAlignment:hc,stackWrapEnabled:!1,padding:0,paddingPerSide:!1,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0}}function nO(e,t){t.forEach((o,r)=>{e.tree.moveNodeIndex(o,r)})}function Hk(e,t,o,r,i){o==="horizontal"&&t.heightType===2||o==="vertical"&&t.widthType===2||Gk(e,r,o,i,{})}function Gk(e,t,o,r,i){if(o==="horizontal"||z(i.padding))return;let n={...r};if(i.paddingPerSide)i.paddingLeft&&(n.width-=i.paddingLeft),i.paddingRight&&(n.width-=i.paddingRight),i.paddingTop&&(n.height-=i.paddingTop),i.paddingBottom&&(n.height-=i.paddingBottom);else if(i.padding){let l=i.padding*2;n.width-=l,n.height-=l}n.width=Math.max(0,n.width),n.height=Math.max(0,n.height);let a=n.width;a>0&&t.forEach(l=>{if(!ve(l)||He(l)||Vr(l)||vo(l)||l.widthType===2||l.widthType===4)return;if(e.tree.getRect(l).width/a>.96){let d=e.tree.getParent(l.id),p=e.tree.getParentSizeInfo(l);p.sizing&&l.heightType===4&&(p.sizing={...n,height:p.sizing.height});let f=e.tree.getRect(l),h=l.updateForRect({rect:f,parentSizeInfo:p,constraintsLocked:!0,shouldGuessPinToBottom:_n(e.tree,l),shouldGuessPinToRight:Dr(e.tree,l,d)});h.width=1,l.width!==1&&(h.widthType=3),l.set(h)}})}function $k(e,t,o,r,i){if(!e.tree.getNode(t))return;Bk(e,r,i).forEach(l=>{if(pS(l)&&ri(l)||Rs(l))return;let s=e.tree.getParent(l.id),c=e.tree.getRect(l),d=ae.offset(c,Ne.reverse(o));e.moveNode(l.id,t);let p={...o},f=e.tree.getParentSizeInfo(l);kv(l)&&f.sizing&&(p.width=f.sizing.width),Rv(l)&&f.sizing&&(p.height=f.sizing.height),e.tree.current(l)?.set({...l.updateForRect({rect:d,parentSizeInfo:{sizing:p,positioning:o,viewport:f?.viewport??null,layout:_r(s)},constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Dr(e.tree,l,s)}),top:null,left:null,bottom:null,right:null,position:void 0}),Qi(e.tree,l).forEach(({replicaRoot:v,relatedNode:T})=>{Le.resetOverridesByProperty(e.tree,v,T,["position"])})})}function aO(e,t){let o=ae.maxX(e),r=ae.maxX(t);return o>t.x&&r>e.x}function sO(e,t){let o=ae.maxY(e),r=ae.maxY(t);return o>t.y&&r>e.y}function yh(e,t,o){if(!gt(o))return;let r=t==="width"?"widthType":"heightType";o.children.forEach(i=>{if(ve(i)&&(i[r]===3||i[r]===1)){let n=e.getRect(i),a={[r]:0,[t]:n[t]};Yi(i)&&(a.aspectRatio=null),e.current(i)?.set(a)}})}function oq(e,t){if(!gt(t)||!ve(t))return;let o=new Set;t.children.forEach(r=>{if(!ve(r)||!qr(r))return;let i=e.getRect(r),n={};t.widthType===2&&(r.widthType===3||r.widthType===1)&&(n.minWidth=i.width,o.add(r)),t.heightType===2&&(r.heightType===3||r.heightType===1)&&(n.minHeight=i.height),Object.keys(n).length>0&&(o.add(r),e.current(r)?.set(n))}),o.size>0&&lO()}function lO(){Ua({type:"add",variant:"info",key:"setting-stack-direction-causes-children-change",text:"Layers in this stack received min-sizing to prevent a collapse",icon:"thumbnail",duration:5e3,showCloseButton:"always"})}function yp(e,t,o={}){if(!er(t)||!gt(t)||to(t))return;let r={layout:"stack",...o},i=e.tree.getRect(t),n=e.tree.getScopeNodeFor(t),a=wI(t)||Ve(t)&&W(n)||t.__unsafeIsGroundNode(e.tree)&&At(n),l=a?"vertical":zk(e.tree,t.children,i),s=Bk(e,t.children,l);st(t)||nO(e,s);let c=Xt(t),d=t.gap??e.stores.persistedUserDefaults.layoutGap,p=a?"start":"center";r.stackDirection=c?t.stackDirection??l:l,r.stackDistribution=c?t.stackDistribution??p:p,r.gap=c||iO(p)?d:0,r.stackAlignment=c?t.stackAlignment??hc:hc,r.stackWrapEnabled=c?t.stackWrapEnabled??!1:!1;let f=c&&Ho(t)?{padding:t.padding,paddingPerSide:t.paddingPerSide,paddingLeft:t.paddingLeft,paddingRight:t.paddingRight,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom}:{...HS};if(l==="horizontal"&&o.heightType===2||l==="vertical"&&o.widthType===2||Gk(e,t.children,l,i,f),f.paddingPerSide){let{paddingTop:v,paddingRight:T,paddingBottom:N,paddingLeft:w}=f;v===T&&v===N&&v===w&&(f.paddingPerSide=!1,f.padding=v)}t.set({...r,...f})}var Uk=900;function Tq(e){return e.intrinsicWidth>=Uk}function Cp(e,t,o){if(Ge(t))return!1;let r=o??e.getParent(t.id);return!!(r&&fe(r))}function bq(e){return e<=.5}function cO(e,t,o){if(!De(t)||!Co(t)||!fe(t)||co(t)||!Cp(e,o,t))return!1;let r=Pe(o)&&qe(o)&&o.widthType===1&&o.width===1;if(Pe(o)&&o.width<Uk&&!r)return!1;let i=t.children.filter(d=>d.id!==o.id);if(i.length===0)return!0;let a=e.getRect(t).width||1,l=i.map(d=>e.getRect(d));return l.some(d=>d.width/a<.5)?!1:l.every((d,p)=>l.every((f,h)=>p===h?!0:!ae.intersects(d,f)))}function Iq(e,t,o,r){if(!er(t)||!cO(e.tree,t,o))return;let i={};r.height>500&&(i.heightType=2),yp(e,t,i),t.set({gap:0})}function _k(e,t){for(let o of Object.values(e.variables))if(o?.type==="collectionreference"&&o.dataIdentifier===t)return o}function jk(e,t){return Object.values(e.variables).find(o=>o?.type==="multicollectionreference"&&o.dataIdentifier===t)}function dO(e,t){let o=pd(t);if(Ur(o))return{targetDataIdentifier:o.dataIdentifier,targetProviderId:o.id};let r=e.stores.scopeStore.active;if(vt(r))return{targetDataIdentifier:r.dataIdentifier,targetProviderId:r.id}}function Nq(e,t,o){if(!Ur(o))return;let r=dO(e,t);if(!r)return;let{targetDataIdentifier:i,targetProviderId:n}=r,a=mr(e.tree,o.dataIdentifier),l=mr(e.tree,i);if(!a||!l)return;let s=_k(a,i),c=jk(a,i),d=_k(l,o.dataIdentifier),p=jk(l,o.dataIdentifier),f;p?f={id:_t(),itemKey:"id",transforms:[{id:_t(),type:"valueTransform",name:"isIncludedIn",value:Jt(p.id,n)}]}:d?f={id:_t(),itemKey:"id",transforms:[{id:_t(),type:"valueTransform",name:"equals",value:Jt(d.id,n)}]}:c?f={id:_t(),itemKey:c.id,transforms:[{id:_t(),type:"valueTransform",name:"contains",value:Jt("id",n)}]}:s&&(f={id:_t(),itemKey:s.id,transforms:[{id:_t(),type:"valueTransform",name:"equals",value:Jt("id",n)}]}),f&&o.set({collectionFilters:{filters:[f]}})}function xq(e,t,o,r){if(!De(t)||!Co(t)||!fe(t)||!to(t)||t.stackDirection!=="vertical"||!Cp(e.tree,o,t)||t.heightType===2||!KN(e.tree,t).height[2])return;let n=t.children.filter(c=>c.id!==o.id);if(n.length===0)return;let a=e.tree.getRect(t),l=n.map(c=>e.tree.getRect(c));ae.merge(...l).height+r.height<=a.height||(t.set({height:a.height,heightType:2}),n.forEach((c,d)=>{let p=l[d];C(p,"Child rect must be defined"),Pe(c)&&qe(c)&&c.heightType===3&&c.set({height:p.height,heightType:0})}))}var Sp=Ss(BA());function Ch(e){let t=Vo.boundingBox(e),o=e.pathSegments.map(r=>r.merge({x:r.x-t.x,y:r.y-t.y}));return[{pathClosed:e.pathClosed,pathSegments:o},t]}function Jk(e,t,o,r){let i=nt("app:importSVG"),n=e,a,l;if(r&&r.colorable){let T=Rn(e,"image/svg+xml").documentElement;if(!T)throw new Error(`Unsupported SVG: ${e}}`);let N=T.getAttribute("fill"),w=!(N&&N.toLowerCase()==="none");if(w){if(r.fillType==="linear-gradient"&&r.fillLinearGradient instanceof cT)a={fillType:"linear-gradient",fillLinearGradient:r.fillLinearGradient};else if(r.fillType==="image"&&r.fillImage)a={fillType:"image",fillImage:r.fillImage,fillImageResize:r.fillImageResize,fillImagePixelWidth:r.fillImagePixelWidth,fillImagePixelHeight:r.fillImagePixelHeight};else if(r.fillType==="color"&&D(r.fillColor)){let R=(0,Sp.getPaperLazily)(),G=new R.Color(r.fillColor).toCSS(!1);w&&T.setAttribute("style",`fill: ${G}; color: ${G}`);let K=T.getAttribute("stroke");K&&K.toLowerCase()==="currentcolor"&&T.setAttribute("stroke",G)}n=T}}let s=uO(n);n=s.svgElement,l=s.svgSize;let c=!1,p=(0,Sp.getPaperLazily)().project.importSVG(n,{expandShapes:!0,insert:!1,size:o,onError:v=>{i.reportError(v),c=!0;let T=document&&document.getElementsByTagName("body");if(T&&T[0]){let N=T[0].lastElementChild;for(;N&&N.tagName==="svg";)N.remove(),N=T[0].lastElementChild}}});if(c)return null;let f;try{f=Xk({item:p,fillOverrides:a,tree:t()})}catch(v){return i.reportError(v),null}let h=f[0];return h?(Pe(h)&&l&&h.set({width:l.width,height:l.height}),t().insertNodes(f).getNode(h.id)):null}function Xk({item:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:i=Ne(0,0),fillOverrides:n}){let a=(0,Sp.getPaperLazily)();return e instanceof a.Group?hO({group:e,nodes:o,parent:r,parentAbsolutePosition:i,tree:t,fillOverrides:n}):e instanceof a.PathItem?fO({item:e,nodes:o,parent:r,parentAbsolutePosition:i,fillOverrides:n}):(console.warn("Unhandled Paper item:",e),o)}function uO(e){let t=D(e)?Rn(e,"image/svg+xml").documentElement:e;if(!t)throw new Error(`Unsupported SVG: ${e}}`);let o,r=t.getAttribute("viewBox"),i=t.getAttribute("width"),n=t.getAttribute("height");if(r){let[a,l,s,c]=r.split(" ");s&&c&&(t.setAttribute("width",s),t.setAttribute("height",c),o={width:parseInt(s),height:parseInt(c)})}else i&&n&&(o={width:parseInt(i),height:parseInt(n)});return Zk(t),{svgElement:t,svgSize:o}}function Zk(e){mO(e);for(let t of e.children)Zk(t)}function mO(e){let t=e.getAttribute("rx"),o=e.getAttribute("ry");!t&&!o||t&&o||(t?e.setAttribute("ry",t):o&&e.setAttribute("rx",o))}function fO({item:e,nodes:t=[],parent:o=null,parentAbsolutePosition:r=Ne(0,0),fillOverrides:i}){let n=pT({item:e,parentAbsolutePosition:r}),a=uT(e),l=o?o.id:eo;if(n.length===1){let c=n[0];C(c,"Path must be defined");let[{pathSegments:d,pathClosed:p},f]=Ch(c),h=new sl({parentid:l,pathSegments:d,pathClosed:p,...a,...i,...f});t.push(h)}else if(n.length){let c=Kk(e),d=c.x-r.x,p=c.y-r.y,f=e.fillRule==="evenodd"?3:4,h=new wd({parentid:l,pathBoolean:f,...a,...i,x:d,y:p,width:c.width,height:c.height});t.push(h),n.forEach(v=>{let[{pathSegments:T,pathClosed:N},w]=Ch(v),R=new sl({parentid:h.id,pathSegments:T,pathClosed:N,...i,x:w.x-d,y:w.y-p,width:w.width,height:w.height});t.push(R)})}return t}function hO({group:e,tree:t,nodes:o=[],parent:r=null,parentAbsolutePosition:i=Ne(0,0),fillOverrides:n}){let a=Kk(e),l=r?r.id:eo,s,c;return l?(s=new IN({parentid:l,x:a.x-i.x,y:a.y-i.y,width:a.width,height:a.height}),c=Ne(a.x,a.y)):(s=new wi({parentid:l,left:0,top:0,width:a.x+a.width,height:a.y+a.height,fillEnabled:!1}),c=Ne(0,0)),o.push(s),e.children.forEach(d=>{Xk({item:d,nodes:o,parent:s,parentAbsolutePosition:c,tree:t,fillOverrides:n})}),o}function Kk(e){let{x:t,y:o,width:r,height:i}=e.bounds;return{x:t,y:o,width:r,height:i}}function gO(e){return ze(e)&&"iconURL"in e}function jq(e){return ze(e.icon)?e.id==="WorkspacePluginsCategory"?!0:gO(e.icon):!1}var yO={DefaultCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function Uq(e){return D(e)?Object.hasOwn(yO,e):!1}var CO={FindNodesCategory:!0,PluginsCategory:!0,ManagedCollectionPluginsCategory:!0,WorkspacePluginsCategory:!0};function Jq(e){return Object.hasOwn(CO,e)}function Xq(e){return e?.kind==="item"}var qk=e=>e.root.children.reduce((o,r)=>(W(r)&&r.abTestingParentId&&o.add(r.abTestingParentId),o),new Set).size;var SO=(e,t)=>{e.stores.modalStore.set({type:"Confirmation",title:"Increase Limits",description:"You\u2019ve reached the limit for Advanced Analytics. Please contact your account manager to increase your limits and restore access to A/B testing and more.",source:t,confirmLabel:"Contact Us",cancelLabel:"Maybe Later",onConfirm:()=>XN(ex)})},vO=(e,t)=>{e.stores.modalStore.set({type:"UpsellEnterprise",source:t,description:"Sign up for an Enterprise plan to add even more A/B Tests, and get access to other powerful features.",upsell:"advanced-analytics-enterprise-upsell",upsellFeatures:["Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]})},TO=(e,t)=>{C(e.stores.projectStore.project,"Project should be defined");let{usage:o,settings:{resourceLimits:{trackingEventsLimit:r}}}=e.stores.projectStore.project,i=o.advancedAnalytics?Math.max(o.advancedAnalytics.currentMonth,o.advancedAnalytics.previousMonth):1;i>(r===null?1/0:r)?e.stores.modalStore.set({type:"AcquireAddonModal",source:t,addonInfo:{addonLicenseType:"advancedAnalytics",quantity:i}}):e.stores.modalStore.set({type:"AcquireAdvancedAnalyticsTrialModal",source:t,onConfirm:QN})},Yk=(e,t,o)=>{e.stores.modalStore.set({type:"UpsellFeature",upsellFeature:"abTests",title:"Advanced Analytics",description:o,source:t})},bO=()=>{Ua({type:"add",key:"max-ab-test-limit-reached",variant:"info",text:"You\u2019ve reached the limit of 10 A/B tests for this project."})},Qk=(e,t,o)=>{switch(o){case 0:Yk(e,t,"Upgrade your site, add the Advanced Analytics add-on, and add more tests.");break;case 1:Yk(e,t,"Upgrade your site to add the Advanced Analytics add-on and start improving your site with funnels and A/B testing.");break;case 2:TO(e,t);break;case 3:SO(e,t);break;case 5:vO(e,t);break;case 4:bO();break;default:$(o)}},eR=(e,{isAddingTest:t})=>{let{featureFlags:o,usageData:r,resourceLimits:i,projectLicenseType:n}=e.stores.projectStore,a=o?.canUseAdvancedAnalytics||"off",l=Math.max(r?.advancedAnalytics?.currentMonth??1,r?.advancedAnalytics?.previousMonth??1),s=i?.trackingEventsLimit||null,c=qk(e.tree)+(t?1:0),d=i?.abTests??1/0,p=c>d;return a!=="on"&&n==="enterpriseSite"?3:p&&n==="enterpriseSite"?4:a==="off"||p?c>YN?5:n==="freeSite"?0:1:a==="upsell"?2:s!==null&&l>s?n==="enterpriseSite"?3:2:null};var Qn=class extends Error{constructor(o,r,i,n=!1){super(o);this.missing=r;this.error=i;this.wasTimeout=n}};function Sh(e){return e instanceof Qn}var vh=nt("ensureComponentsInLoader"),IO=500,NO=30*1e3;async function vp(e,t,o,r){let i=tR(t,e).length;if(i===0)return;let n=r??NO+i*2e3;vh.debug("modules:",t.length,", new:",i,", timeout:",n),await xO(e,o,n);let a=tR(t,e);if(a.length===0)return;let l=PO(t,e);throw vh.debug("components loaded, but some are missing",{missing:a,errors:l}),new Qn("ensureComponentsInLoader: Some modules are missing.",a,l)}async function xO(e,t,o){let r=performance.now(),i=await VO(async()=>(await Ku(o),"timeout"),async()=>{await t.whenIdle();let n=t.revision;return C(n>=0,"moduleStore.revision cannot be negative"),await t.loadAllLocalModules(),n});if(i==="timeout")throw new Qn("ensureComponentsInLoader: Modules store not ready in time.",[],[],!0);for(let n=0;n<1e3;n++){let a=e.modulesRevision;if(i<=a)break;if(performance.now()-r>o)throw vh.debug("component loader not updated in time: want:",i,"got:",a),new Qn("ensureComponentsInLoader: Component loader not updated in time.",[],[],!0);await Ku(IO)}}function tR(e,t){let o=new Set;for(let r of e)t.componentForIdentifier(r)||o.add(r);return Array.from(o)}function PO(e,t){let o=new Set;for(let r of e)at(t.errorForIdentifier(r))||o.add(r);return Array.from(o)}async function VO(...e){return Promise.race(e.map(async t=>t()))}async function oR(e,t){let o=[];e.forEach(r=>{let i=ce(r);i&&i.kind==="externalModuleExport"&&o.push(i)}),o.length&&await t.preloadExternalModules(o),await vp(E,e,t)}function Tp(e,t,o,r,i){if(U(o.htmlContent))return;let n=e.getScopeNodeFor(t);C(n&&Zi(n),"Can't find scope with breakpoints");let l=n.getTopLevelVariants().map(s=>{let c=Co(s)?o.id:$o(s.id,o.id),d=e.get(c);return C(d&&Ie(d),"Can't find rich text node in breakpoint"),[s,d]});for(let[s,c]of l){C(Pe(s),"Can't read width attribute of node");let d=Vd(r,p=>(p.breakpointWidth??0)>s.width)??i;c.detachTextStylePreset(d,!0)}}var Th=["formButtonSuccessVariant","formButtonPendingVariant","formButtonErrorVariant","formButtonIncompleteVariant","whileOpenEffectVariant","appearEffectVisibleVariantId","appearEffectObscuredVariantId","dataLoaderLoadingVariant","dataLoaderDisabledVariant"];function iR(e,t,o){let r=t.tokenOverrides;!r||Ft(r)||(nR(e,o,r),t.set({tokenOverrides:void 0}))}function nR(e,t,o){kO(e,t.id,o);let r=[];for(let i of t.variables){if(!lR(i)){r.push(i);continue}switch(i.type){case"border":r.push(kn(i.initialValue)?{...i,initialValue:{...i.initialValue,borderColor:ot(i.initialValue.borderColor,o)}}:i);break;case"color":r.push({...i,initialValue:ot(i.initialValue,o)});break;default:$(i,"Unsupported variable type.")}}t.set({variables:r})}function kO(e,t,o){let r=e.tree.get(t);if(r)for(let{node:i,skipChildren:n}of r.walkWithSkipChildren()){if(st(i)){n();continue}if(aR(e,i,o),RO(e,i,o),!_(i)||i.isVectorInstance)continue;let a=i.getLocalSmartComponentNodeId();if(!a){i.set({tokenOverrides:o});continue}let l=e.tree.get(a);ie(l)&&l.isLoaded()&&(nR(e,l,o),e.stores.codeGenerationStore.updateComponent(l.id))}}function RO(e,t,o){let r=Qi(e.tree,t);for(let i of r){let{relatedNode:n,replicaRoot:a}=i;a.replicaInfo.overrides[t.id]&&aR(e,n,o)}}function aR(e,t,o){if(Po(t)){let r=ot(t.fillColor,o);r&&t.set({fillColor:r})}if(kr(t)){let r=ot(t.borderColor,o);r&&t.set({borderColor:r})}if(jo(t)){let r=ot(t.strokeColor,o);r&&t.set({strokeColor:r})}if(Ie(t))if(t.htmlContent)wO(e,t,o);else{let r=new Map;for(let i in o){if(!Tm(i))continue;let n=o[i],a=yS(i);a&&r.set(a,`var(${i}, ${n})`)}t.replaceColorTokenVariables(r),t.hasLinks()&&t.remapLinkStylePresets(i=>{let n=sR(e,i,o);if(xo(n))return n})}else if(_(t)){let r=E.componentForIdentifier(t.codeComponentIdentifier);if(!r)return;let i=t.getControlProps(r.properties);if(!i)return;for(let n in i){let a=i[n];if(!(!a||!lR(a)))switch(a.type){case"border":if(!kn(a.value))break;t.setControlProp(n,{...a,value:{...a.value,borderColor:ot(a.value.borderColor,o)}});break;case"color":t.setControlProp(n,{...a,value:ot(a.value,o)});break;default:$(a,"Unsupported control type.")}}}}function wO(e,t,o){for(let r of _a){let i=t[r];if(!i)continue;let n=sR(e,i,o);ol(n)&&t.set({[r]:n.id})}}function sR(e,t,o){let r=e.tree.getNodeWithTrait(t,ol);if(!r)return;let i=DO(r,o);if(rR(r,i))return r;let n=Ri(e.tree),a=n.getStylePresets().filter(l=>l.id!==t&&rR(l,i));return a.length?a?.[0]:(e.tree.insertNode(i,n.id),e.stores.codeGenerationStore.createModuleFromComponentSource(i).catch(dr),i)}function rR(e,t){return e.__class!==t.__class?!1:oo(e)&&oo(t)||xo(e)&&xo(t)||ji(e)&&ji(t)||tr(e)&&tr(t)||Jr(e)&&Jr(t)?e.equals(t):!1}function DO(e,t){let o=e.clone();return LO(o,t),o}function LO(e,t){oo(e)?(e.textColor=ot(e.textColor,t),e.textStrokeColor=ot(e.textStrokeColor,t),e.textDecorationColor=ot(e.textDecorationColor,t)):xo(e)?(e.linkTextColor=ot(e.linkTextColor,t),e.linkTextDecorationColor=ot(e.linkTextDecorationColor,t),e.linkTextBackgroundColor=ot(e.linkTextBackgroundColor,t),e.linkHoverTextColor=ot(e.linkHoverTextColor,t),e.linkHoverTextDecorationColor=ot(e.linkHoverTextDecorationColor,t),e.linkHoverTextBackgroundColor=ot(e.linkHoverTextBackgroundColor,t),e.linkCurrentTextColor=ot(e.linkCurrentTextColor,t),e.linkCurrentTextDecorationColor=ot(e.linkCurrentTextDecorationColor,t),e.linkCurrentTextBackgroundColor=ot(e.linkCurrentTextBackgroundColor,t)):Jr(e)?e.borderColor=ot(e.borderColor,t):ji(e)?(e.textColor=ot(e.textColor,t),e.textDecorationColor=ot(e.textDecorationColor,t),e.textStrokeColor=ot(e.textStrokeColor,t),e.borderColor=ot(e.borderColor,t),e.fillColor=ot(e.fillColor,t),e.lineColor=ot(e.lineColor,t)):tr(e)&&(e.inlineCodeTextColor=ot(e.inlineCodeTextColor,t),e.inlineCodeFillColor=ot(e.inlineCodeFillColor,t),e.borderColor=ot(e.borderColor,t))}function ot(e,t){if(at(e)||!Nr(e))return e;let{customProperty:o,metadata:r}=gS(e);if(!Tm(o))return e;let i=t[o];if(!i)return e;let n=`var(${o}, ${i})`;return r?`${n} ${r}`:n}function lR(e){switch(e.type){case"color":case"border":return!0;case"array":case"boolean":case"number":case"string":case"richtext":case"eventhandler":case"image":case"file":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"gap":case"padding":case"borderradius":case"collectionreference":case"multicollectionreference":case"trackingid":case"vectorsetitem":case"date":case"enum":case"link":case"linkrelvalues":case"fusednumber":case"object":case"font":case"pagescope":case"slot":case"slug":case"controlReference":case"nodePropertyControlReference":return!1;default:$(e,"Check if we support this variable type.")}}function cR(e){if(!W(e))return!1;for(let t of e.children)if(!fe(t)||gt(t)&&t.children.length>0)return!1;return!0}function dR(e,t,o){if(vt(o))return;let r;e.stores.scopeStore.removeNode(t);let i=yi(e.tree,o.id);i&&e.tree.removeNode(i);let n=e.tree.root.homePageNodeId,a=yi(e.tree,t.id);a&&(t.id===n?e.tree.removeNode(a):a.set({webPageId:o.id})),e.tree.current(o)?.set({name:t.name,pagePath:t.pagePath}),e.tree.has(n)||(r??={},r.homePageNodeId=o.id),r&&e.tree.root.set(r)}function s2(e,t){return FO(e,t).map(o=>o.replicaInfo.overrides[o.originalid]).filter(Mo)}function Tl(e,t){return e.filter(o=>Rt(o)&&o.originalid===t.id).sort((o,r)=>(r.breakpointWidth??0)-(o.breakpointWidth??0))}function FO(e,t){let o=e.getPresetsListNode();C(o,"Can't find PresetsListNode");let r=o.children.filter(oo);return Tl(r,t)}function I2(e,t){let o=t.instanceIdentifier,r=e.getPersistedModuleByLocalIdentifier(o),i=E.dataForIdentifier(o)??void 0;return{identifier:o,module:r,entity:i}}function N2(e){return e.annotations?.framerSlug}function x2(e,t="Collection"){let o=e.resolveValue("name");return o?o.toLowerCase().includes("collection")?o:`${o.trim()} Collection`:t}function EO(e){switch(e.toLowerCase()){case"title":case"name":case"label":return!0;default:return!1}}function AO(e){return bS(e)&&EO(e.name)}function MO(e){return e.variables.find(AO)}function OO(e,t){if(M(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(D(r)&&r.length>0)return r}function bh(e,t){if(M(t))return;let r=e.getControlProp(t.id)?.value||t.initialValue;if(D(r)&&r.length>0)return r}function bp(e,t){let o=MO(e),r=OO(t,o);if(D(r))return r;let i=e.getSlugVariable(),n=bh(t,i);return D(n)?cn(n):"Collection Item"}function Ih(e){let{ids:t}=e.stores.selectionStore,o=t[0];if(!o)return null;let r=e.tree.getNode(o);if(Mt(r))return r;if(Ir(r)){let i=e.tree.getNode(r.parentid);if(Mt(i))return i}return null}function P2(e){let t=Ih(e);return t?t.id:null}function V2(e){let t=Ih(e);return t?t.resolveValue("name"):null}function k2(e){let t=e.getContentManagementNode()?.loaded;return t?t.children.length:0}function R2(e){let t=e.getContentManagementNode()?.loaded;return t?t.children.reduce((o,r)=>o+=r.getItemCount(),0):0}function Nh(e){return e.type==="richtext"&&D(e.value)}function WO(e,t){let o=ce(e);return r=>{let i=ce(r);if(!(!i||!o)&&(i.kind==="localModuleExport"&&o.kind==="localModuleExport"&&i.localId===o.localId||i.kind==="externalModuleExport"&&o.kind==="externalModuleExport"&&i.moduleId===o.moduleId&&i.exportSpecifier===o.exportSpecifier))return t}}function pR(e,t){return e.replaceAll(Gc,(o,r)=>{let i=t(r);return i?`${Pv}="${i}"`:o})}function xh(e,t){let o=e.getControlProps(),r={};for(let[i,n]of Object.entries(o)){if(!Nh(n))continue;let a=n.value,l=pR(a,t),s=Ke(a),c=Ke(l),d;if(n.valueLocalized){d={};for(let f of Object.keys(n.valueLocalized)){let h=n.valueLocalized[f];if(!h)continue;let v=l!==a,T=h.hash===s&&v;if(!h.value){if(T){d[f]={...h,hash:c};continue}d[f]=h;continue}let N=pR(h.value,t);d[f]={...h,value:N,hash:T?c:h.hash}}}if(n.value===l&&zr(n.valueLocalized,d))continue;let p={...n,value:l};d&&(p.valueLocalized=d),r[ut(i)]=p}return Object.keys(r).length>0?r:void 0}function w2(e,t,o){let r=e.getContentManagementNode()?.loaded;if(!r)return;let i=WO(t,o);for(let n of r.children)for(let a of n.getUnsortedChildren()){let l=xh(a,i);l&&a.set(l)}}function zO(e,t){let o=e.getControlProps();for(let r of Object.values(o))if(Nh(r)){if(r.value.includes(t))return!0;if(r.valueLocalized){for(let i of Object.keys(r.valueLocalized))if(r.valueLocalized[i]?.value?.includes(t))return!0}}return!1}function D2(e,t){let o=e.getContentManagementNode()?.loaded;if(!o)return!1;for(let r of o.children)for(let i of r.getUnsortedChildren())if(zO(i,t))return!0;return!1}function L2(e){let t=new Set;for(let o of e.getUnsortedChildren()){let r=Ph(o);for(let i of r)t.add(i)}return[...t]}function Ph(e){let t=new Set,o=e.getControlProps();for(let r of Object.values(o)){if(!Nh(r))continue;let i=r.value.matchAll(Gc);for(let[,n]of i)Ze(n)&&t.add(n);if(r.valueLocalized)for(let n of Object.keys(r.valueLocalized)){let a=r.valueLocalized[n];if(!a?.value)continue;let l=a.value.matchAll(Gc);for(let[,s]of l)Ze(s)&&t.add(s)}}return[...t]}function F2(e,t,o){let r=mr(e.tree,t);if(!r)return;let i=o??r.getUnsortedChildren()[0];e.stores.scopeStore.select(Yc,{keepHistory:!1}),e.stores.selectionStore.set(i??r)}function E2(e){let t=Ih(e);if(!t)return!1;let o=e.stores.contentManagementStore;return o.multiSelectedItems||o.isCreatingNewItem()?!1:!t.managedByPlugin}function uR(e,t){let o=e.stores.scopeStore.active;return C($i(o),"Content management node should be active"),o.children.toSorted((r,i)=>YT(r.resolveValue("name")||"",i.resolveValue("name")||"",t))}function A2(e,t){let o=e.stores.scopeStore.active;uR(e,t).forEach(({id:i},n)=>{e.moveNode(i,o.id,n)})}function M2(e,t){let o=e.stores.scopeStore.active;C($i(o),"Content management node should be active");let r=uR(e,t);return o.children.every(({id:i},n)=>r[n]?.id===i)}function Ip(e){if(!e)return!1;let t=ce(e);return t?t.kind==="externalModuleExport"||t.kind==="localModuleExport":!1}function Np(e,t){_(e)&&Ip(e.codeComponentIdentifier)&&t(e.codeComponentIdentifier),ba(e)&&e.dataIdentifier&&t(e.dataIdentifier),Ki(e)&&Ip(e.codeOverrideIdentifier)&&t(e.codeOverrideIdentifier),rl(e)&&e.codeOverrides?.forEach(o=>{t(o.identifier)}),Ir(e)&&Ph(e).forEach(t)}function xp(e,t){let o={};if(_(e)&&Ip(e.codeComponentIdentifier)){let i=t(e.codeComponentIdentifier);i&&(o.codeComponentIdentifier=i)}if(ba(e)&&e.dataIdentifier){let i=t(e.dataIdentifier);i&&(C(Ze(i)),o.dataIdentifier=i)}if(Ki(e)&&Ip(e.codeOverrideIdentifier)){let i=t(e.codeOverrideIdentifier);i&&(o.codeOverrideIdentifier=i)}if(rl(e)&&e.codeOverrides){let i=!1,n=e.codeOverrides.map(a=>{let l=t(a.identifier);return l?(i=!0,{...a,identifier:l}):a});i&&(o.codeOverrides=n)}if(Ir(e)){let i=xh(e,t);i&&Object.assign(o,i)}if(Object.keys(o).length!==0)return o}function gQ(e,t,o){if(!Ie(o))return;let r=o.getStylePresetsForCodeGeneration(e);for(let i of r){let n=e.getNodes(i.cache.replicaInstances??[]);for(let a of n)t[a.id]??=a.toJS();t[i.id]??=i.toJS()}}function Vh(e,t,o){for(let r of t){let i=e[r];if(!i)continue;let n=o(i);n&&n.id!==i&&e.set({[r]:n.id})}}function fR({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r,shouldDetachTextStyles:i,breakpointVariantIds:n,shouldCreateNewPresets:a,reusePresetWithSameId:l}){if(!r)return;let s={pastedPresetMap:o,stylePresetNodes:r,shouldCreateNewPresets:a,reusePresetWithSameId:l},c=f=>BO(e,f,s);if(Vh(t,rN,c),t.remapTextStylePresets(c),!i)return;let d=Ns(t),p=e.tree.getGroundNodeFor(t);for(let f of t.getStylePresetIdsForCodeGeneration()){let h=r.find(T=>T.id===f);if(!h||!Na(h))continue;let v=Tl(r,h);if(d){Tp(e.tree,d,t,v,h);continue}if(n?.has(p.id)&&Pe(p)){let T=Vd(v,N=>(N.breakpointWidth??0)>p.width)??h;t.detachTextStylePreset(T,!1);continue}t.detachTextStylePreset(h,!1)}}function BO(e,t,{pastedPresetMap:o,stylePresetNodes:r,shouldCreateNewPresets:i,reusePresetWithSameId:n}){if(!r)return;let a=r.find(f=>f.id===t);if(!a)return;let l=e.tree.get(t);if(Na(l)&&(n||l.equals(a)))return o.set(t,l),l;if(!i)return;let s=Ri(e.tree),c=s.getTextStylePresets().find(f=>f.equals(a));if(c&&Na(c))return o.set(t,c),c;let d=l?a.clone():a.cloneWithIds();e.tree.insertNode(d,s.id),o.set(t,d);let p=r.filter(f=>f.originalid===t);for(let f of p){let h=e.tree.get(t);if(h&&jC(h)&&h.equals(f)){o.set(t,h);continue}let T=h?f.clone():f.cloneWithIds();e.tree.insertNode(T,s.id),o.set(t,T)}return d}function hR({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let i={pastedPresetMap:o,stylePresetNodes:r},n=a=>HO(e,a,i);Vh(t,nN,n),t.remapLinkStylePresets(n)}function HO(e,t,{pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let i=r.find(d=>d.id===t);if(!i||!xo(i))return;let n=e.tree.get(t);if(n&&xo(n)&&n.equals(i))return o.set(t,n),n;let l=Ri(e.tree),s=l.getLinkStylePresets().find(d=>d.equals(i));if(s&&xo(s))return o.set(t,s),s;let c=n?i.clone():i.cloneWithIds();return e.tree.insertNode(c,l.id),o.set(t,c),c}function gR({engine:e,node:t,pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let i={pastedPresetMap:o,stylePresetNodes:r},n=a=>GO(e,a,i);Vh(t,aN,n),t.remapInlineCodeStylePresets(n)}function GO(e,t,{pastedPresetMap:o,stylePresetNodes:r}){if(!r)return;let i=r.find(d=>d.id===t);if(!i||!tr(i))return;let n=e.tree.get(t);if(n&&tr(n)&&n.equals(i))return o.set(t,n),n;let l=Ri(e.tree),s=l.getInlineCodeStylePresets().find(d=>d.equals(i));if(s&&tr(s))return o.set(t,s),s;let c=n?i.clone():i.cloneWithIds();return e.tree.insertNode(c,l.id),o.set(t,c),c}function yQ(e){if(W(e))return{id:e.id,pagePath:e.pagePath,webMetadata:e.webMetadata,customHTML:e.customHTML,dataIdentifier:e.dataIdentifier}}function CQ(e,t,o,r,i){let n={},a=new Set;function l(s){Np(s,c=>{if(i.has(c))return;let d=$O(e,c);d&&(n[c]=d);let p=eb(c,t,e,a);p&&Object.assign(n,p)})}for(let s of o.walk())l(s);return W(r)&&l(r),{moduleData:n}}function $O(e,t){let o=ce(t);if(o&&o.kind==="localModuleExport"){let r=e.getPersistedModuleByLocalId(o.localId);return r?(C(r.files.module,"expected module typed file in persisted module"),nc(r.id,r.saveId,r.files.module,o.exportSpecifier)):void 0}if(o&&o.kind==="externalModuleExport")return o}function _O(e,t,o){let r=ce(t);if(fo(r))return C(e.initialized,"Cannot paste modules before modulesStore has been initialized."),e.getPersistedModuleByLocalId(r.localId)?.id===o.moduleId?null:o.value;if(Mr(r)&&r.kind==="externalModuleExport"){let i=e.getPersistedModuleByGlobalId(r.moduleId)?.localId;return i?ac(r,i).value:null}return null}function jO(e,t,o,r,i){let n=r.cloneWithIds();n.set(i),e.removeNode(r),e.insertNode(n,t,o)}function SQ(e,t,o){if(!o)return t;for(let r of t.root.walk())gt(r)&&r.children.forEach((i,n)=>{if(o){let a=xp(i,s=>{let c=o[s];if(!c)return;let d=_O(e,s,c);return d||void 0});if(!a)return;let l=t.current(i);if(!l)return;jO(t,r.id,n,l,a)}});return t.commit()}function UO(e){return Rt(e)&&Pe(e)}function vQ(e,t,o){let r=e.get(o.id);if(!r)return;let i=Ns(r);if(!i||!fe(i))return;let n=e.getNodes(i.cache.replicaInstances??[]).filter(UO);for(let{width:a,replicaInfo:l}of n){let s=t.get(a)??{},c=l.overrides[o.id];c&&(s[o.id]=c),t.set(a,s)}Pe(i)&&!t.get(i.width)&&t.set(i.width,{})}function dt(e,t,o,r){if(t){if(Nr(t)){let i=kc(t),n=e.get(i);if(n&&!(n.id in o)){let a=n.cloneWithIds();o[a.id]=a.toJS(),r&&(r[n.id]=Xc())}return}if(kC(t)){dt(e,t.color,o,r);return}if(lT(t)||sT(t)||dT(t)){for(let i of t.stops)dt(e,i.value,o,r);return}if(St(t)){for(let i of t)dt(e,i,o,r);return}if(kn(t)){dt(e,t.borderColor,o,r);return}}}function TQ(e,t,o,r){for(let i in t)dt(e,t[i],o,r);if(Ie(t)){let i=t.getInlineStyleTokenVariables();if(dt(e,i,o,r),z(t.htmlContent)||z(t.textContent)){JO(e,t,o,r);return}let n=t.getTextStylePresets(!1);for(let a of n)a&&yR(e,a,o,r);if(t.hasLinks()){let a=t.getLinkStylePresets(!0);for(let l of a){let s=e.getNodeWithTrait(l,xo);s&&CR(e,s,o,r)}}}}function yR(e,t,o,r){let i=e.getNodeWithTrait(t,ol);i&&(oo(i)?(dt(e,i.textColor,o,r),dt(e,i.textStrokeColor,o,r),dt(e,i.textDecorationColor,o,r)):xo(i)?CR(e,i,o,r):ji(i)?(dt(e,i.textColor,o,r),dt(e,i.textDecorationColor,o,r),dt(e,i.textStrokeColor,o,r),dt(e,i.borderColor,o,r),dt(e,i.fillColor,o,r),dt(e,i.lineColor,o,r)):tr(i)?(dt(e,i.inlineCodeTextColor,o,r),dt(e,i.inlineCodeFillColor,o,r),dt(e,i.borderColor,o,r)):Jr(i)&&dt(e,i.borderColor,o,r))}function JO(e,t,o,r){for(let i of _a){let n=t[i];n&&yR(e,n,o,r)}}function CR(e,t,o,r){dt(e,t.linkTextColor,o,r),dt(e,t.linkTextDecorationColor,o,r),dt(e,t.linkTextBackgroundColor,o,r),dt(e,t.linkHoverTextColor,o,r),dt(e,t.linkHoverTextDecorationColor,o,r),dt(e,t.linkHoverTextBackgroundColor,o,r),dt(e,t.linkCurrentTextColor,o,r),dt(e,t.linkCurrentTextDecorationColor,o,r),dt(e,t.linkCurrentTextBackgroundColor,o,r)}function bQ(e,t,o){let r=o-t;return Math.ceil(e/100*r+t)}function mR(e,t,o){if(vt(t)){let r=ce(t.dataIdentifier);if(!fo(r))return;let i=e.getNodeWithTrait(r.localIdName,Mt);i&&(o.set(t.dataIdentifier,i),mR(e,i,o))}if(Mt(t))for(let r of t.variables){if(!Rc(r))continue;let i=ce(r.dataIdentifier);if(!fo(i))continue;let n=e.getNodeWithTrait(i.localIdName,Mt);n&&(o.has(r.dataIdentifier)||(o.set(r.dataIdentifier,n),mR(e,n,o)))}}function RQ(e){return pt(e)?e.getGroundNodes().length===0:!1}function wQ(e){if(!W(e))return!1;let t=e.getGroundNodes();return t.length>1?!1:t.length===0?!0:t[0]?.children?.length===0}function DQ(e){return e?!e.children||e.children.length===0:!1}function kh(e,t=!0){let o=e.trim().split("/").filter(Boolean).map(r=>{let i="/"+r,n=sp(i);return n.startsWith("/")?n.slice(1):n});return e.endsWith("/")&&t&&o.push(""),o}function LQ(e){return`/${kh(e).join("/")}`}function XO(e){return e===""}function FQ(e){return!!(e.webPageId&&XO(e.segment))}function ZO(e,t){let o=t.get(e);if(!fi(o))return;let r=t.get(o.webPageId);if(W(r)||o.children.length>0)return;let i=o.parentid;t.removeNode(o),i&&ZO(i,t)}function EQ(e,t){if(!e)return;let o=E.dataForIdentifier(e);if(o)return tx(void 0,o,t??Es)}function SR(e,t,o,r,i){let n=kh(r,W(t,!0));C(n.length>0,"Path must have at least one segment");let a=e.getRouteSegmentRootNode();return n.forEach((l,s)=>{let c=s===n.length-1,d=c?i?.positionInParent:void 0,p=Bc(l)?o:void 0;p&&(l=ih(p,l,e));let f=a.children.find(v=>v.segment===l),h=f&&c&&t;if(!f||h&&f.webPageId){let v=new yN({segment:l,webPageId:c?t?.id:void 0,dataIdentifier:p});e.insertNode(v,a.id,d),a=v}else h&&f.set({webPageId:t.id,dataIdentifier:p}),a=f}),C(fi(a),"Current parent should be the created RouteSegmentNode"),a}function vR(e,t){let o=yi(e,t);return e.get(o?.parentid)?.children.findIndex(i=>i.id===o?.id)}function Ya(e,t,o=!1){let r={};for(let i in e){let n={...e[i]};"itemsOrder"in n&&Array.isArray(n.itemsOrder)&&o&&(n.itemsOrder=Cl(n.itemsOrder,t)),r[t.get(i)??i]=n}return r}var Pp=class extends Map{get(t){let o=super.get(t);for(;o;){let r=super.get(o);if(r===void 0)break;o=r}return o}};function KO(e,t){if(Wa(e)){if(!e.controls.target?.value)return;let o=t.get(e.controls.target.value);return o?{target:{...e.controls.target,value:o}}:void 0}if(Lr(e)){if(!e.controls.variantId?.value)return;let o=t.get(e.controls.variantId.value);return o?{variantId:{...e.controls.variantId,value:o}}:void 0}if(wa(e)){if(!e.controls.overlay?.value)return;let o=t.get(e.controls.overlay.value);return o?{overlay:{...e.controls.overlay,value:o}}:void 0}}function TR(e,t,o,r){let i=_(t),n={},a=!1,l=fd(t);for(let s in l){let c=i?ut(s):s;if(!bt(e,t,c))continue;let d=l[s];if(!St(d))continue;let p=[],f=!1;for(let h of d){if(r&&(wa(h)||Zc(h))){f=!0;continue}let T=KO(h,o);if(!T){p.push(h);continue}p.push({...h,controls:{...h.controls,...T}}),f=!0}f&&(i?n[ut(s)]={type:"eventhandler",value:p}:n[s]=p,a=!0)}a&&t.set(n,e)}function qO(e,t,o){let r={};function i(l){let s=e.get(l);s&&e.linkNodeChangesTo(s,t.id)}let n=$N(t,E);for(let l of n){if(!bt(e,t,ut(l)))continue;let s=t.getRawControlProp(l);if(s){if(s.type==="slot"&&St(s.value)){let c=!1,d=s.value.map(p=>{if(!ze(p))return p;let f="reference";if(!D(p[f]))return p;let h=o.get(p.reference);return h?(c=!0,i(h),{...p,[f]:h}):p});if(!c)continue;r[l]={type:"slot",value:d}}else if((s.type===null||s.type==="componentinstance")&&D(s.value)){let c=o.get(s.value);if(!c)continue;r[l]={type:"slot",value:[{id:"first-item",reference:c}]},i(c)}else if(St(s.value)){let c=!1,d=[];for(let p=0;p<s.value.length;p++){let f=s.value[p];if(!uc(f)||f.type!==null&&f.type!=="componentinstance"||!D(f.value))continue;let h=CS(f)?f.id:_t(),v=o.get(f.value);d.push({id:h,reference:v??f.value}),v&&(i(v),c=!0)}if(!c)continue;r[l]={type:"slot",value:d}}}}if(Ft(r))return;let a=xa(r);t.set(a,e)}function YO(e,t,o){let r={},i=E.componentForIdentifier(t.codeComponentIdentifier)?.properties;for(let n in i){if(!bt(e,t,ut(n)))continue;let a=i[n];if(a?.type!=="scrollsectionref")continue;let l=t.getRawControlProp(n);if(!l)continue;let s=rv(a,l);if(!s||U(s)||!D(s.target))continue;let c=o.get(s.target);c&&(r[n]={type:"scrollsectionref",value:{...s,target:c}})}Ft(r)||t.set(xa(r),e)}function QO(e,t){if(Tb(e)&&St(e.appearEffectScrollTargets)){let o=e.appearEffectScrollTargets.map(r=>{if(!r.target||U(r.target))return r;let i=t.get(r.target);return i?{id:_t(),variant:r.variant,target:i}:r});e.set({appearEffectScrollTargets:o})}if(Cb(e)&&D(e.styleAppearEffectScrollTarget)){let o=t.get(e.styleAppearEffectScrollTarget);o&&e.set({styleAppearEffectScrollTarget:o})}if(vb(e)&&St(e.styleTransformEffectScrollTargets)){let o=e.styleTransformEffectScrollTargets.map(r=>{if(!r.target||U(r.target))return r;let i=t.get(r.target);return i?{id:_t(),style:r.style,target:i}:r});e.set({styleTransformEffectScrollTargets:o})}if(yd(e)&&e.dragEffectConstraintElement){let o=t.get(e.dragEffectConstraintElement);o&&e.set({dragEffectConstraintElement:o})}if(Eb(e)&&D(e.textEffectScrollTarget)){let o=t.get(e.textEffectScrollTarget);o&&e.set({textEffectScrollTarget:o})}}function Di(e,t,o,r){if(t=t.draftOrCurrent(),(Zt(t)||Jc(t))&&TR(e,t,o,r),_(t)&&(TR(e,t,o,r),qO(e,t,o),YO(e,t,o)),el(t)&&QO(t,o),_o(t)&&t.formSubmitButtonId){let n=o.get(t.formSubmitButtonId);n&&t.set({formSubmitButtonId:n})}if(VI(t)&&t.dataSourceLoaderId){let n=o.get(t.dataSourceLoaderId);n&&t.set({dataSourceLoaderId:n})}if(Et(t)&&t.collectionRepeatedItemId){let n=o.get(t.collectionRepeatedItemId);n&&t.set({collectionRepeatedItemId:n})}if(vt(t)){let n=bR(t.dataIdentifier,o);n&&t.set({dataIdentifier:n})}if(Mt(t)){let n=t.variables.map(a=>{if(!Rc(a))return a;let l=bR(a.dataIdentifier,o);return l?{...a,dataIdentifier:l}:a});Vn(t.variables,n)||t.set({variables:n})}Ir(t)&&eW(t,o);let i=UI(e,t,n=>{if(!n.providerId)return;let a=o.get(n.providerId);if(a)return Jt(o.get(n.id)??n.id,a)});if(i&&t.set(i),t.children)for(let n of t.children)Di(e,n,o,r);return t}function bR(e,t){let o=ce(e);if(!fo(o))return null;let r=t.get(o.localIdName);return r?Pn(o.type,r,o.exportSpecifier).value:null}function eW(e,t){let o=e.getControlProps();for(let[r,i]of Object.entries(o)){if(i?.type==="collectionreference"&&D(i.value)){let n=t.get(i.value);n&&e.setControlProp(r,{...i,value:n})}if(i?.type==="multicollectionreference"&&!M(i.value)&&!U(i.value)){let n=i.value.map(a=>t.get(a)??a);Vn(i.value,n)||e.setControlProp(r,{...i,value:n})}}}function IR(e){return np(e)||Mt(e)}var NR=75,rW={mutable:!0,update:0};function bl(e,t,o,r,i=!1){function n(a,l,s=!1){let c=new a.constructor;c.assign(a,rW,{cache:c.cache,id:c.id}),La(c)&&(c.itemsOrder=void 0),a.cache.insideVariant=s;let d=bi(a)?a.getChildrenInVisualOrder():a.children;d&&(c.children=d.map(h=>n(h,c.id,s)));let p={parentid:l},f=xp(a,h=>{let v=ce(h);if(v.kind==="localModuleExport"){let T=t.get(v.localId);if(T)return`${T}:${v.exportSpecifier}`}else if(v?.kind==="externalModuleExport"){let T=o.get(v.moduleId);if(T)return ac(v,T).value}});if(f&&Object.assign(p,f),Rt(a)&&!Ve(a)&&Object.assign(p,{replicaInfo:void 0,originalid:void 0,...a.replicaInfo.overrides[a.replicaInfo.master],_deleted:void 0}),i&&Object.assign(p,{duplicatedFrom:Dv(a.duplicatedFrom,a.id)}),c.assign(p),r){if(r.has(a.id)){let h=r.get(a.id);h&&r.set(h,c.id)}r.set(a.id,c.id),a.originalid&&!r.has(a.originalid)&&r.set(a.originalid,c.id)}return c}return n(e,void 0,Ve(e))}function iW(e){let t=new Map;for(let o of e)if(o.type==="local"){let r=o.moduleId;t.set(o.localId,nc(r,o.saveId,o.file).value)}return t}async function xR(e){let t=new Map;for await(let o of e)if(o.type==="local"&&o.moduleType==="css"){let r=await VR({moduleId:o.moduleId,saveId:o.saveId}),{__treeSerializationVersion:i,...n}=r,a=i||NR,{root:l}=km({root:n,version:a}),s=hf(l);oo(s)&&t.set(s.id,s)}return[...t.values()]}function PR(e,t,o){let r=iW(o.imports),i=new Map,n=[];for(let a of e.walk())Np(a,l=>{let s=ce(l);if(fo(s)){let c=r.get(s.localId);if(!c)return;let{moduleId:d,saveId:p,file:f}=ce(c);s=Gy(s,d,p,f)}if(s.kind==="externalModuleExport"){let c=t.getPersistedModuleByGlobalId(s.moduleId);c?i.set(s.moduleId,c.localId):n.push(s)}});return{identifiers:n,localIdsToExternalIdentifiers:r,externalModuleIdsToLocalIds:i}}async function VR({moduleId:e,saveId:t}){try{return await(await fetch(`${ic().modulesCDN}/${e}/${t}/tree.json`)).json()}catch(o){dr(o)}}async function kR(e,t){let[o,r]=await Promise.all([VR(t),e.stores.modulesStore.getModuleDependencies(t)]);C(o,"Can't get tree.json for module identifier"),C(r,"Can't get dependencies for module identifier");let{__treeSerializationVersion:i,...n}=o,a=i||NR,{root:l}=km({root:n,version:a}),s=hf(l);return C(IR(s),"Node should be un-linkable."),{node:s,dependencies:r}}async function RR(e,t,o){if(e.remoteDocument?.projectId&&t.assets.length>0)try{await e.stores.assetStore.assetService?.duplicateModuleAssets(o.moduleId,o.saveId)}catch{}}function nW(e,t,o){let r=new Set(e.stores.scopeStore.getSmartComponentNodes().map(i=>i.name).filter(D));return o||t===null?Ro(o??"Component",r):Ro(t,r)}function wh(e,t,o,r,{insertionIndex:i,preferredName:n,enterIsolation:a=!0,localIdsToExternalIdentifiers:l=new Map,externalModuleIdsToLocalIds:s=new Map,instance:c,renamedIds:d=new Map,isAutoDetach:p=!1,intrinsicSize:f,textStylePresets:h,linkStylePresets:v,inlineCodeStylePresets:T,pastedPresetMap:N=new Map,shouldPasteTextStyles:w=!1,reusePresetWithSameId:R,abTesting:B=!1,cloneWithScopeIds:G=!1}={}){let K=p?Ld.createWithRouteSegmentRoot():e.tree,se={children:[]};if(W(t)){let J=t.id===e.tree.root.homePageNodeId?"Home":tn(e.tree,t),{suggestedName:ue,path:me}=nh(n??J??"Page",e,t,!0);se.pagePath=me,se.name=ue}else se.name=nW(e,t.resolveValue("name"),n);let oe;G?oe=t.cloneWithIds(se):(oe=t.clone(se),d.set(t.id,oe.id)),ie(t)&&jV({componentId:oe.id,source:r});let pe=oe.instanceIdentifier,Ee=fe(o),q=bl(o,l,s,d,Ee),We=[q];oe.baseVariantId=q.id,oe.addChild(q);for(let J of t.children)if(!(J.id===o.id||Go(J)))if(Rt(J)&&Ve(J)){let ue=Ya(J.replicaInfo.overrides,d,!0);if(ve(J)){ue[q.id]??={};let Ae=ue[q.id];Ae.top=J.top,Ae.left=J.left,Ae.right=J.right,Ae.bottom=J.bottom,Ae.centerAnchorX=J.centerAnchorX,Ae.centerAnchorY=J.centerAnchorY}let me=Le.create(e.tree,q,{overrides:ue,duplicatedFrom:Gs(J)});d.set(J.id,me.id),We.push(me),oe.addChild(me)}else{let ue=bl(J,l,s,void 0,Ee);We.push(ue),d.set(J.id,ue.id),oe.addChild(ue)}K.insertNode(oe,void 0,i);for(let J=0;J<t.children.length;J++){let ue=t.children[J];if(!Go(ue))continue;let me=Le.create(K,q,{overrides:Ya(ue.replicaInfo.overrides,d,!0),inheritsFrom:d.get(ue.replicaInfo.inheritsFrom),duplicatedFrom:Gs(ue)});d.set(ue.id,me.id),We.push(me),K.insertNode(me,oe.id,J)}let $e=ip(K);for(let J of We){if(Di(K,J,d,!1),!h&&!v&&!T)continue;let ue=[];for(let me of J.walk())Ie(me)&&ue.push(me);for(let me of ue){let Ae=me.getStylePresetIdsForCodeGeneration();if(v&&hR({engine:e,node:me,pastedPresetMap:N,stylePresetNodes:v}),T&&gR({engine:e,node:me,pastedPresetMap:N,stylePresetNodes:T}),h){if(w)fR({engine:e,node:me,pastedPresetMap:N,stylePresetNodes:h,shouldDetachTextStyles:!1,shouldCreateNewPresets:w,reusePresetWithSameId:R});else for(let Ct of h)if(Ae.has(Ct.id))if(W(t)&&fe(J)){if(Wo(J)){let Pt=Tl(h,Ct);Tp(K,q,me,Pt,Ct)}}else(Wo(J)||bt(K,me,"html"))&&me.detachTextStylePreset(Ct,!1)}}for(let me of ue){bt(K,me,"html")&&(me.remapTextStylePresets((Ae,Ct)=>{let Pt=NT(Ct)?Ct:"p",_e=me.getNodeTextStylePreset(K,Pt)??kd(K,Pt)??VT.createDefault(Pt);return uN(e,_e),_e}),me.remapLinkStylePresets(()=>{let Ae=me.getNodeLinkStylePreset(K)??dN(K)??QI.createDefault();return pN(e,Ae),Ae}),me.remapInlineCodeStylePresets(()=>{let Ae=me.getNodeInlineCodeStylePreset(K)??lN(K)??new HI;return cN(e,Ae),Ae}));for(let Ae in $e)bt(K,me,Ae)&&me.set({[Ae]:$e[Ae]})}}let{codeGenerationStore:Y}=e.stores;for(let J of N.values())st(J)||Y.createModuleFromComponentSource(J).catch(dr);if(p)return K.commit(),oe.draftOrCurrent();{let J=K.get(oe.baseVariantId);if(J&&Co(J))for(let ue of oe.children)Ms(ue)&&ue.replicaInfo.master===J.id&&Le.registerInInheritedNode(J,ue)}e.scheduler.process(()=>{if(!c)return;let J=e.tree.current(c);if(!J)return;let ue={},me={},Ae=c.getRawControlProps();if(Ae.variant?.value&&D(Ae.variant.value)){let Ct=d.get(Ae.variant.value)??q.id,Pt={type:"enum",value:Ct};ue.variant=Pt}for(let Ct of Th){let Pt=c[Ct];D(Pt)&&(me[Ct]=d.get(Pt)??void 0)}Qi(e.tree,J).forEach(({relatedNode:Ct,replicaRoot:Pt})=>{let _e=Pt.replicaInfo.overrides[Ct.originalid];if(!_e)return;let Ce={};for(let sr of Th){if(!(sr in _e))continue;let $t=_e[sr];D($t)&&(me[sr]=d.get($t)??void 0)}if(Ct.set(Ce),!(ut("variant")in _e))return;let no=Ct.getRawControlProp("variant");if(!no||!D(no.value))return;let bo=d.get(no.value);if(!bo)return;let Yo={type:"enum",value:bo};Ct.set(xa({variant:Yo}))}),J.set({codeComponentIdentifier:pe,...me,...xa(ue)})});let Dt=Y.createModuleFromComponentSource(oe,f);if(c&&Dt.then(e.scheduler.wrapHandler(()=>{if(c=e.tree.get(c?.id),!c)return;let J=e.stores.treeStore.tree.getScopeNodeFor(c)?.loaded;if(!J||!Ti(J))return;let ue=e.stores.treeStore.tree.get(J.baseVariantId);ue&&Co(ue)&&Y.updateComponent(J.id).catch(dr)})).catch(dr),a&&(e.stores.chromeStore.contentPanelTab="Layers",e.stores.scopeStore.select(oe.id,{keepHistory:!0})),W(oe)&&!B){C(D(se.pagePath),"pagePath should be a string");let J=vR(e.tree,t.id),ue=X(J)?J+1:void 0;SR(e.tree,oe,oe.dataIdentifier,se.pagePath,{positionInParent:ue})}return oe.draftOrCurrent()}async function DR(e,{identifier:t,enterIsolation:o,instance:r,isAutoDetach:i,renamedIds:n=new Map,info:a}){let{node:l,dependencies:s}=await kR(e,t);C(np(l),"Should be a generated node.");let c=e.tree.get(r?.getPrimaryId());C(!c||_(c),"instance should be a code component.");let d=l.children.find(w=>w.id===l.baseVariantId);C(d&&Co(d),"Unlink: Can't unlink a tree which doesn't have a Primary Variant node");let{identifiers:p,localIdsToExternalIdentifiers:f,externalModuleIdsToLocalIds:h}=PR(l,e.stores.modulesStore,s);if(await oR(p.map(w=>w.value),e.stores.modulesStore),p.some(w=>{let R=E.dataForIdentifier(w.value);return R?FS(R):!1})){Ua({type:"add",variant:"info",text:"Remove collection references before unlinking"});return}let T=await xR(s.imports);return await RR(e,s,t),await e.stores.modulesStore.addExternalModulesToProject(p,{onTreeUpdate:()=>{let w=e.tree.current(c),R=bm(a.module.metadata.intrinsicWidth)??200,B=bm(a.module.metadata.intrinsicHeight)??200,G=wh(e,l,d,"unlink",{enterIsolation:o,localIdsToExternalIdentifiers:f,externalModuleIdsToLocalIds:h,instance:w,renamedIds:n,isAutoDetach:i,intrinsicSize:{width:R,height:B},textStylePresets:T});return w&&ie(G)&&iR(e,w,G),G}})}async function L6(e,t){let o=await DR(e,t);if(!o)return;C(ie(o),"node should be a smart component");let{isAutoDetach:r}=t;return r||await e.stores.codeGenerationStore.untilCompiled(o.id),o.draftOrCurrent()}async function F6(e,t){let[o]=await e.stores.modulesStore.preloadExternalModules([t]);if(!o)return;let r=await DR(e,{identifier:t,enterIsolation:!1,info:o});C(W(r),"node should be a web page");let{path:i,suggestedName:n}=nh(r.resolveValue("name")??"Page",e,r,!0);return e.scheduler.processWhenReady(()=>{e.tree.current(r)?.set({name:n,pagePath:i});let a=e.stores.scopeStore.active;cR(a)&&dR(e,a,r),e.stores.scopeStore.select(r.id,{keepHistory:!1})}),r}function LR(e,t){let o=t.getAbTestingChildren(e.tree)??Wi(),r;for(let a=0;a<=o.length;a++){let l=a===0?"Variant":`Variant ${a}`;if(o.every(s=>s.name!==l)){r=l;break}}let i=o[o.length-1]??t,n=wh(e,t,t.getPrimaryVariant(),"duplicate",{enterIsolation:!1,preferredName:r,insertionIndex:e.tree.root.children.findIndex(a=>a.id===i.id)+1,abTesting:!0});if(n.set({abTestingParentId:t.abTestingParentId??t.id,isDraft:void 0}),It("ab_variant_create",{pageId:n.id,abTestingParentId:t.abTestingParentId??t.id}),e.stores.scopeStore.select(n.id,{keepHistory:!1}),e.stores.chromeStore.contentPanelTab="Pages",!t.abTestingParentId){let a=yi(e.tree,t.id)?.id??CN;a&&e.stores.chromeStore.expandRouteSegment(a)}}function FR(e,t,o,r){let i=eR(e,{isAddingTest:!1});if(i!==null){Qk(e,r,i);return}let n=t.getAbTestingFunnel(o)?.status===2,a=e.scheduler.wrapHandler(()=>LR(e,t));if(!n)return a();e.stores.modalStore.set({type:"ConfirmUpdatingAbVariants",source:r,title:"Updating Variants",description:"Updating variants while running an A/B test could potentially skew your results.",confirmLabel:"Confirm",onConfirm:a,variant:"destructive"})}function ER(e){if(e!==void 0)switch(e){case 2:return"auto";case 0:return"fixed";case 3:return"fraction";case 1:return"percentage";case 4:return"viewport";case 5:return"fit-image";default:$(e)}}function AR(e,{widthType:t,heightType:o},r){if(!ve(e))return;let i=t!==void 0&&e.widthType!==t,n=o!==void 0&&e.heightType!==o;!i&&!n||XV({widthType:ER(t),heightType:ER(o),source:r,nodeType:e.__class,componentId:_(e)?e.codeComponentIdentifier:void 0})}function Dh(e){if(!gt(e)||He(e))return 0;let t=0,o=e.children.length;return t+=o,e.children.forEach(r=>{t+=Dh(r)}),t}function MR(e,t,o,r){let i=mp(o,E),n=new Map(Object.entries(i)),a=new Map;a.set(r,n);let l={};for(let s of e.walk()){let c=Pd(t,r,s,a);c&&(l[s.getPrimaryId()]=c)}return l}function OR(e){let{left:t,top:o,right:r,bottom:i,centerAnchorX:n,centerAnchorY:a,constraintsLocked:l,width:s,widthType:c,height:d,heightType:p,aspectRatio:f,name:h,...v}=e;return v}function WR(e){let t=E.reactComponentForIdentifier(e.codeComponentIdentifier);if(!t)return;let o={},r=Object.keys(t.properties);for(let i of r){let n=t.properties[i];if(!n||n.type!=="eventhandler")continue;let a=e.getRawControlProp(i);if(!a)continue;let{value:l}=a;!Array.isArray(l)||l.length===0||(o[i]=l)}return o}function Vp(e,{opacity:t,rotation:o}){if(U(t))e.opacity=t;else if(e?.opacity||t){let r=X(t)?t:1;e.opacity=(e.opacity??1)*r}if(U(o))e.rotation=o;else if(e?.rotation||o){let r=X(o)?o:0;e.rotation=(e.rotation??0)+r}}function b5(e){return e.every(t=>De(t)||Ge(t)||_(t))}function I5(e,t){return t?!1:e.every(o=>{if(!De(o)&&!_(o)&&!Ie(o)||fe(o)||De(o)&&Ea(o).length===0)return!1;if(_(o)){let r=o.getSupportedLayout(E);if(!zi(r.width)||!zi(r.height))return!1}return o.widthType!==2||o.heightType!==2})}function zR(e,t,o){for(let r of t)if(Ge(r)||_(r))r.set({widthType:2,heightType:2}),Ge(r)&&o&&It("layout_fit_text",{source:o});else if(De(r)){let i={widthType:2,heightType:2,aspectRatio:null};to(r)||yp(e,r,i),yh(e.tree,"width",r),yh(e.tree,"height",r),II(r)&&(i.framePreset=null),r.set(i),o&&It("layout_stack",{layoutType:"stack",source:o})}}var aW=/([a-z]+)([\dA-Z]+)/gu;function sW(e){return e.replaceAll(aW,(t,o,r)=>`${o}_${r.toLowerCase()}`)}function Lh(e){return Object.fromEntries(Object.entries(e).map(([t,o])=>[sW(t),o]))}var dn=nt("ChatStreamer"),lW="/ai/v2/chat/",BR=-1,cW=_t(),kp=class{constructor(t){this.type=t;L(this,"streamID","");L(this,"subscribers",new Set);L(this,"currentStream");L(this,"abortController");L(this,"cancel",()=>{this.abortController&&(dn.debug("Stream",this.streamID,"cancelled"),this.abortController.abort(),this.abortController=void 0)})}async start({model:t,user:o,messages:r,responseFormat:i,onText:n}){this.cancel(),BR++,this.streamID=`${cW}-${BR}-${this.type}`,this.emitChatEvent({type:"start",streamID:this.streamID,messages:r});let a=!1,l=f=>{let h;ze(f)&&D(f.message)?h=f.message:h=String(f),a||(a=!0,this.emitChatEvent({type:"done",streamID:this.streamID,error:h})),dn.warn("ChatStreamer error:",f)},s=()=>{a||(a=!0,this.emitChatEvent({type:"done",streamID:this.streamID}))};this.abortController=new AbortController;let c="",d=i?Lh(i):void 0,p=Lh({messages:r,model:t,stream:!0,user:o,responseFormat:d});this.currentStream=ox.postStream(lW,{signal:this.abortController.signal,openWhenHidden:!0,onclose:()=>{if(a)return;a=!0;let f="Chat stream closed before done";throw new Error(f)},onerror:f=>{throw a=!0,f},onmessage:f=>{if(dn.trace(f.event,f.id,f.data),f.data==="[DONE]"){dn.debug("ChatStreamer finished with content:",c),s();return}if(f.data.length===0){dn.debug("ChatStreamer stream empty");return}let h=JSON.parse(f.data);if("error"in h){let N=h.error,w=JSON.parse(N.metadata.raw);dn.error(`ChatStreamer error '${N.message}' with code`,N.code,"and raw error",w);return}let v=h.choices[0];if(!v)return;v.finish_reason&&dn.debug("Finishing chat completion with reason:",v.finish_reason);let{content:T}=v.delta;T&&(c+=T,this.emitChatEvent({type:"stream",streamID:this.streamID,content:T}),n(T))}},p);try{await this.currentStream}catch(f){throw l(f),f}finally{this.currentStream=void 0,this.abortController=void 0}return c}get isFinished(){return this.currentStream===void 0}async waitUntilFinished(){await this.currentStream}subscribeChatEvent(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}emitChatEvent(t){this.subscribers.forEach(o=>{try{o(t)}catch(r){dn.error(r)}})}};var Rp=class{constructor(t,o,r,i){this.separator=t;this.parseCommand=o;this.onCommand=r;this.onError=i;L(this,"buffer","");L(this,"commands",[]);L(this,"isFinalized",!1)}addToken(t){C(!this.isFinalized,"Parser has been finalized, cannot add more tokens"),this.buffer+=t,this.processBuffer()}processBuffer(){let t;for(;(t=this.buffer.indexOf(this.separator))!==-1;){let o=this.buffer.slice(0,t);this.buffer=this.buffer.slice(t+1);try{let r=this.parseCommand(o);this.commands.push(r),this.onCommand(r)}catch(r){this.onError?.(o,r)}}}finalize(){return this.isFinalized?this.commands:(this.isFinalized=!0,this.buffer.trim()&&(this.buffer.endsWith(this.separator)||(this.buffer+=this.separator),this.processBuffer()),this.commands)}};var B5={url:"url"};function HR(e){return Bi(e)&&e.actionIdentifier==="framer/useOpenURL"}function H5(e,t){let o={...e.controls,...t};return{...e,controls:o}}function GR(e){return Bi(e)&&e.actionIdentifier==="framer/useSetVariableValue"}function Z5(e){return W(e)||ie(e)}var dW={array:!1,boolean:!0,color:!1,eventhandler:!1,image:!1,number:!0,string:!0,richtext:!1,link:!1,linkrelvalues:!1,date:!1,enum:!1,file:!1,scrollsectionref:!1,customcursor:!1,cursor:!1,transition:!1,border:!1,boxshadow:!1,gap:!1,padding:!1,borderradius:!1,collectionreference:!0,multicollectionreference:!0,trackingid:!1,vectorsetitem:!1,controlReference:!1,nodePropertyControlReference:!1,slug:!1};function pW(e){return D(e)&&dW[e]===!0}function K5(e){return gi(e)&&pW(e.type)}function wp(e,t,o,r){let i=_R(e,r);return KT(t,o,i)}function $R(e,t,o,r){let i=_R(e,r);return qT(t,o,i)}function _R(e,{context:t,repeaterInfo:o}){return{resolveAsset(r,i,n,a){let l,s=Va(i)?i.__defaultAssetReference:void 0;return r!==s&&(l=(a?t.assets.resolveResponsiveImage(r):t.assets.resolve(r))?.src),!vS(n)||!t.localizedValues?l:t.localizedValues.add(l,n.valueLocalized,c=>{let d=n.valueLocalized?.[c]?.value;return Qo(d)?void 0:d===s?m`undefined`:(a?t.assets.resolveResponsiveImage(r):t.assets.resolve(r))?.src})},resolveResponsiveImage(r,i,n){let a,l,s,c;if(Ws(i)&&Os(i.__vekterDefault)?(l=i.__vekterDefault.assetReference,s=i.__vekterDefault.positionX,c=i.__vekterDefault.positionY):Va(i)&&(l=i.__defaultAssetReference),(r!==l||n.positionX!==s||n.positionY!==c)&&(a=P.fromValue(t.assets.resolveResponsiveImage(r,{focalPoint:n}))),t.localizedValues&&(a=t.localizedValues.add(a,n.valueLocalized,p=>{let f=n.valueLocalized?.[p];if(!As(f))return;if(f.value===l&&f.imageFocalPoint?.positionX===s&&f.imageFocalPoint?.positionY===c)return m`undefined`;let h=t.assets.resolveResponsiveImage(f.value,{focalPoint:f.imageFocalPoint});return P.fromValue(h)})),!a)return;if(!t.valueTransforms)return a;let d=n.alt??Oa;return t.localizedValues&&(d=t.localizedValues.add(d,n.altLocalized,p=>n.altLocalized?.[p]?.value)),t.valueTransforms.wrapInAddImageAlt(a,P.fromValue(d))},resolveDynamicValue(r,i){let n;if(U(r))C(t.variables,"Variables are not supported"),n=t.variables.create(r);else if(Qt(r)){if(!t.valueTransforms)return;C(e.cache,"Node cache must be passed in when computed values can be created"),n=t.valueTransforms.createComputedValue(r,e,i)}else{return}if(!t.valueTransforms)return n;switch(i.type){case"image":return t.valueTransforms.wrapInToImageSrc(n);case"responsiveimage":return t.valueTransforms.wrapInToResponsiveImage(n);case"gap":case"padding":case"borderradius":return t.valueTransforms.wrapInNumberToPixelString(n);default:return n}},resolveLink(r,i,n){let a=Ts(i.value);if(Gr(a)&&t.localizedValues){let l=i.valueLocalized;return t.localizedValues.add(a.url,l,s=>l?.[s]?.value)}if(Qt(a)){if(!t.valueTransforms)return;C(e.cache,"Node cache must be passed in when computed values can be created");let l=t.valueTransforms.createComputedValue(a,e,n);return t.links.createResolvedBinding(e,l)}return t.links.resolve(e,a,o)},resolvePageScope(r){return t.links.resolvePageScope(Ts(r))},resolveLocalizedValue(r,i){return t.localizedValues?t.localizedValues.add(r,i,n=>i?.[n]?.value):r},resolveRichText(r,i){let n=an(r,{collectors:t,nodeId:e.getPrimaryId()});return t.localizedValues?t.localizedValues.add(n,i,(a,l)=>{if(!i)return;let s=i[a];if(!s)return;let c=s.value;if(D(c))return an(c,{collectors:{...t,...l},nodeId:e.getPrimaryId()})}):n},resolveFont(r){if(!ev(r))return{};let i=Ec(e);return t.fonts.addFontObjectBySelector(r.fontSelector,i),tv(r)},resolveScrollSectionRef(r,i){if(!M(i)){if(U(i))return t.variables?.create(i);if(D(i.target)){let n=t.elementIds?.scrollTargetInfo(i);if(n?.ref)return n.ref}}},resolveCustomCursor(r,i){if(!M(i))return U(i)?t.variables?.create(i):t.customCursors?.addControl(r,e,i)},resolveVectorSetItem(r,i){if(!M(r))return t.vectorSets?.resolveControl(r,i,e)},resolveColor(r){return D(r)?t.cssVariableDefinitions?.resolveColor(r)??r:r}}}var uW=nt("EventCollector"),mW=Symbol("previous"),q3=m`pathVariables`,jR=m`navigate`,UR=m`setVariant`,Eh=m`overlay`,JR=m`loadMore`,XR={onMouseEnter:{isHovered:!0},onMouseLeave:{isHovered:!1},onTapStart:{isPressed:!0},onTap:{isPressed:!1},onTapCancel:{isPressed:!1}},Fp={visible:"visible",show:"show",hide:"hide",toggle:"toggle"};function Dp(e,t){return new P(`${e}.${t}`)}var Lp=class{constructor(t,o,r,i,n,a,l,s,c,d={type:"canvasComponent"}){this.sourceNode=t;this.treeStore=o;this.variables=r;this.bindings=i;this.imports=n;this.assets=a;this.links=l;this.fonts=s;this.fetches=c;this.options=d;L(this,"handlers",new Map);L(this,"variantOnAppearId",new Map);L(this,"keyBindHooks",new Set);L(this,"navigationTargets",new Set);L(this,"needsPathVariables",!1);L(this,"routeHandlers",new Map);L(this,"overlayState",new Map);L(this,"overlayTriggerOverlayBindings",new Map);L(this,"relativeOverlayPrimaryTriggers",new Set)}addHandler({trigger:t,node:o,actionInfo:r}){r?.forEach(c=>{!Zm(c)||!c.controls.id?.value||this.variables.create(mC(c.controls.id.value,void 0))});let i=t===Fv&&Zt(o),n=t===Uc&&Zt(o),a=YS(this.treeStore.tree,o.id)??this.sourceNode,l=!r||r.length===0;if(i&&l){this.variantOnAppearId.has(a.id)||this.variantOnAppearId.set(a.id,m`undefined`);return}if(l)return;let s=n?this.createKeydownEvents(o,r,this.imports):this.createCombinedEvents(o,r,t);if(i){s&&!this.variantOnAppearId.has(a.id)&&this.variantOnAppearId.set(a.id,s);return}if(!(n||!s))return s}eventHandlersForNode(t){if(!za(t)||Bo(t))return;let o=t.getActions(E),r={};for(let i in o)r[i]=this.addHandler({node:t,trigger:i,actionInfo:o[i]});return this.options.type!=="canvasComponent"||!Ve(t),r}getOverlayIdForNode(t){return st(t)?this.treeStore.tree.get(t.cache.overlayAncestorId)?.originalid:t.cache.overlayAncestorId}transformAction(t,o,r){return i=>{if(!Im(t)||M(o.meta?.inputValue))return i;let n=m`inputValue`;switch(r.bindings.add(m`const ${n} = args[0]?.target?.value?.trim()`),o.meta.inputValue){case"empty":return m`if (!${n}) { ${i} }`;case"set":return m`if (${n}?.length > 0 ) { ${i} }`;default:$(o.meta.inputValue,"All inputValue values should be handled")}}}getRepeaterIdForNode(t){let o=pd(t);return o?st(t)?o.originalid:o.id:null}createCombinedEvents(t,o,r){let i=ZR(),n={},a=this.getOverlayIdForNode(t);r in XR&&this.options.type==="canvasComponent"&&Ve(t)&&i.gestureHandlers.add(P.fn(ne.setGestureState,XR[r]));for(let d of o){if(this.extractActionsToGroups(t,d,i,n,r,this.transformAction(r,d,i)),i.navigationActions.size>0)break;wa(d)&&!Yr(t)&&(a||(a=d.controls.overlay.value))}if(KR.every(d=>i[d].size===0))return m`undefined`;if(i.overlayActions.size>0&&a){let d=this.overlayState.get(a);d&&(n[Eh.toString()]=d)}let l=this.getRepeaterIdForNode(t);if(i.repeaterActions.size>0&&l){let d=this.treeStore.tree.get(l),f=Ur(d)&&wr(d)?this.bindings.createWithNode("loadMore",d):void 0;f&&(n[JR.toString()]=f)}let s=Object.keys(n),c=this.createEventFromGroups(r,i,s);return s.length>0?P.fn(c,n):c}createEventFromGroups(t,o,r){let i=fW(o,r),n=`${t}${Ht(ge(i))}`,a=new P(n),l=m`const ${a} = ${i}`;return this.handlers.set(n,l),a}createKeydownEvents(t,o,r){C(this.options.type==="screen","Smart Components do not support keydown events");for(let i of o){let n=i.meta?.key;if(M(n))continue;let a=ZR(),l={};if(this.extractActionsToGroups(t,i,a,l,"onKeyDown",this.transformAction("onKeyDown",i,a)),Object.keys(a).every(c=>a[c].size===0))continue;let s=this.createEventFromGroups("onKeyDown",a,[]);if(C(r,"An Import collector must be provided to add gamepad or hotkey bindings."),VC(n))this.keyBindHooks.add(P.fn(r.addImport("framer",{exportSpecifier:"useGamepad"}),n.key,s,{mapping:n.mapping}));else{let c=n.key,d=hW(n),p=d.length?d.concat(c).join("+"):c;this.keyBindHooks.add(P.fn(r.addImport("framer",{exportSpecifier:"useHotkey"}),p,s))}}}extractActionsToGroups(t,o,r,i,n,a){if(Lr(o)){if(this.options.type!=="canvasComponent"||!Im(n)&&r.setVariantActions.size>0)return;let l=yW(this.imports,o,n);l&&r.setVariantActions.add(a(l))}else if(Zm(o)){if(this.options.type!=="canvasComponent")return;let l=CW(o);l&&r.eventActions.add(a(l))}else if(Wa(o)){if(this.options.type!=="screen"||r.navigationActions.size>0)return;let l=this.createNavigateAction(o.controls.type.value,o.controls.target.value,o.meta?.delay,o.controls);l&&r.navigationActions.add(a(l))}else if(o.actionIdentifier==="framer/useLog"){if(this.options.type!=="screen")return;let l=vW(o);l&&r.otherActions.add(a(l))}else if(o.actionIdentifier==="framer/useSetLocale"){let l=o.controls.localeId?.value;if(!D(l))return;r.otherActions.add(a(P.fn(ne.setLocale,l)))}else if(GR(o)){let l=this.createSetVariableValueAction(t,o,i);l&&r.otherActions.add(a(l))}else if(HR(o)){let l=Ts(o.controls.url.value);if(M(l)||z(l))return;if(PC(l)){let s=this.createOpenPageAction(l.webPageId,l.hash,o.meta?.delay);s&&r.navigationActions.add(a(s))}else{let s=SW(o,l);s&&r.otherActions.add(a(s))}}else if(!Yr(t)&&wa(o)){if(o.actionIdentifier==="framer/useShowOverlay"&&this.options.type==="canvasComponent")return;let l=o.controls.overlay.value,s=this.createOverlayTriggers(l,t.id);s&&r.overlayActions.add(a(s))}else if(zv(o)){if(!Yr(t))return;let l=this.getOverlayIdForNode(t);if(C(l,"overlayAncestorId must not be null when nodeIsInOverlay is true"),!this.overlayState.has(l))return;r.overlayActions.add(a(this.createDismissOverlayAction(o.meta?.delay)))}else if(ab(o)){let l=this.getRepeaterIdForNode(t),s=this.treeStore.tree.get(l);if(!Ur(s))return;r.repeaterActions.add(P.fn(JR))}}createDismissOverlayAction(t){return Li(P.fn(Dp(Eh,"hide")),t)}createOpenPageAction(t,o,r){if(!this.getNavigationTarget(t))return;let n=`${Ht(t)}${o?Ht(o):""}`,a=new P(`openRoute${n}`),l=[t,m`true`];o&&l.push(o),this.routeHandlers.set(n,m`const ${a} = ${P.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteHandler"}),...l)}`);let s=P.fn(a);return m`return ${Li(s,r)}`}createNavigateAction(t,o,r,i){if(t==="previous")return this.navigationTargets.add(mW),m`return ${Li(P.fn(jR,"previous"),r)}`;if(!o||!this.isValidNavigationTarget(o))return;let n={};for(let a in i){if(a==="target")continue;let l=i[a];n[a]=l.value}return this.navigationTargets.add(o),m`return ${Li(P.fn(jR,o,n),r)}`}createSetVariableValueAction(t,o,r){let i=this.treeStore.tree.getScopeNodeFor(t);if(!xr(i))return;let n=o.controls.variableId.value,a=i.getVariable(n);if(!a)return;let l=Ls(this.treeStore.tree,E,a);if(!l)return;let s=iv(l,o.controls.value);if(!s)return;let c=$R(t,l,s,{context:{imports:this.imports,assets:this.assets,links:this.links,fonts:this.fonts,fetches:this.fetches,variables:this.variables}}),d=this.variables.createSetter(n);if(yo(c)){let p=`arg${Ht(ge(c))}`;return r[p]=c,P.optionalFn(d,new P(p))}return P.optionalFn(d,c)}getNavigationTarget(t){if(!t)return null;let o=this.treeStore.tree.getNode(t);return!o||!(this.treeStore.tree.isGroundNode(o)||W(o))?null:o}isValidNavigationTarget(t){return!!this.getNavigationTarget(t)}createOverlayTriggers(t,o){let r=this.treeStore.tree.get(t);if(!r)return;let i=this.treeStore.tree.get(o);if(!i)return;let n=this.treeStore.tree.get(i.getPrimaryId());if(!n)return;if(!i?.children?.find(c=>c.getPrimaryId()===t&&ht(c))){uW.reportError("EventCollector: Tried to create a event handler to show an overlay which is not a descendant of the trigger.",{triggerId:o,overlayId:t});return}let l=this.overlayState.get(t)??this.bindings.create("overlay");this.overlayState.set(t,l);let s=this.overlayTriggerOverlayBindings.get(n.id)??new Map;return s.set(r.getPrimaryId(),l),this.overlayTriggerOverlayBindings.set(n.id,s),lt(r)&&this.relativeOverlayPrimaryTriggers.add(n.id),P.fn(Dp(Eh,lt(r)?"show":"toggle"))}};function ZR(){return{bindings:new P.Set,gestureHandlers:new P.Set,eventActions:new P.Set,setVariantActions:new P.Set,navigationActions:new P.Set,otherActions:new P.Set,overlayActions:new P.Set,repeaterActions:new P.Set}}var KR=["bindings","gestureHandlers","eventActions","setVariantActions","otherActions","overlayActions","repeaterActions","navigationActions"];function fW(e,t){let o=[];for(let i of KR)for(let n of e[i])o.push(n);let r=m.joinLines(m`activeVariantCallback(async (...args) => {`,...o,m`})`);if(t.length>0){let i=new P(mt.listFrom(t));return m`({${i}}) => ${r}`}return r}function hW(e){let t=[];for(let o in e)if(e[o])switch(o){case"altKey":t.push("alt");break;case"ctrlKey":t.push("ctrl");break;case"metaKey":t.push("meta");break;case"shiftKey":t.push("shift");break;default:break}return t}function gW(e,t,o,r){if(t==="cycle")return P.fn(UR,e.addImport("framer",{exportSpecifier:"CycleVariantState"}),r);if(o)return P.fn(UR,o,r)}function yW(e,t,o){let r=t.controls.type?.value,i=t.controls.variantId?.value,n=t.controls.pauseOffscreen?.value;if(!xk(r))return;let a=gW(e,r,i,o==="onAppear"?n:void 0);if(a)return Li(a,t.meta?.delay)}function CW(e){let t=e.controls.id?.value;if(!D(t))return;let o=new P(t);return m.joinLines(m`if (${o}) {${m.joinLines(e.meta?.delay&&m`await delay(() => {}, ${e.meta?.delay*1e3});`,m`const res = await ${o}(...args);`,m`if (res === false) return false;`)}}`)}function SW(e,t){if(!Gr(t))return;let{href:o,target:r=m`undefined`,rel:i}=iS(t.url);if(!o)return;let n=[o,r??m`undefined`,i??"noopener"];return Li(P.fn(m`window.open`,...n),e.meta?.delay)}function vW(e){let t=e.controls?.type?.value,o=e.controls?.message?.value;if(D(t))switch(t){case"event":return new P(mt.lines('if (args[0] && "persist" in args[0]) args[0].persist()',Li(m`console.log(...args)`,e.meta?.delay)));case"message":return D(o)?Li(m`console.log(${o})`,e.meta?.delay):void 0;case"count":return D(o)?Li(m`console.count(${o})`,e.meta?.delay):void 0}}function Li(e,t){return!M(t)&&t>0?m`await delay(() => ${e}, ${t*1e3})`:e}function Ep(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":return!0;default:return!1}}function yr(e){return _(e)&&!Ep(e)&&!e.isVectorInstance}function qR(e){switch(e.codeComponentIdentifier){case"framer/Page":case"framer/Scroll":case"framer/Prototype":return!0;default:return!1}}function YR(e){switch(e.codeComponentIdentifier){case"framer/Page":return"Page";case"framer/Scroll":return"Scroll";case"framer/Prototype":return"DeviceCodeComponent"}}var QR=di("componentPresets","componentPresets");function ew(e,t){let o=e.getPresetsListNode();return o?o.getComponentPresets().find(r=>r.componentIdentifier===t)??null:null}function tw(e,t){let{treeStore:o}=e.stores;if(o.tree.has(t.id))return;let r=ew(o.tree,t.componentIdentifier),i=Ri(o.tree),n=sN(i.children,l=>Ia(l)&&l.componentIdentifier!==t.componentIdentifier);n!==-1&&(n+=1),o.tree.insertNode(t,i.id,n),Ra(e)&&e.stores.codeGenerationStore.createModuleFromComponentSource(i).catch(dr),Mr(t.componentIdentifier)&&e.stores.modulesStore.addExternalModulesToProject([t.componentIdentifier],{onTreeUpdate(){}});let a=Hs(t.componentIdentifier);r||e.scheduler.runWithFullyLoadedTree(()=>{let l=o.getLoadedIndexes();for(let s of l.richTextNodes)s.htmlContent&&bt(o.tree,s,a)&&s.setComponentPreset(t.componentIdentifier,t.id)},{runInBackground:!0,name:"insertComponentPreset"})}function TW(e,t){if(ew(e.tree,t.componentIdentifier))return;let r=rf.createDefault(t);tw(e,r)}function u8(e,t,o){e.scheduler.processWhenReady(()=>{let i=Ri(e.tree).getComponentPresets(),n=new Set;for(let l of i){let s=l.resolveValue("name");s&&n.add(s)}let a=rf.createDefault(t,{name:Ro(t.name,n)});tw(e,a);try{o&&o(a)}catch{}})}function m8(e,t){return e.getPresetsListNode()?.getComponentPresets().filter(r=>r.componentIdentifier===t)??[]}function f8(e,t,o){let r=ce(t);function i(a){let l=ce(a);return l.kind==="externalModuleExport"&&r.kind==="externalModuleExport"&&l.moduleId===r.moduleId&&l.exportSpecifier===r.exportSpecifier}let n=e.getPresetsListNode();if(n){let a=n.getComponentPresets();for(let l of a)i(l.componentIdentifier)&&l.set({componentIdentifier:o})}C(!e.getService("loader"),"Tree should be fully loaded");for(let a of e.root.walk()){if(!Ie(a))continue;let l=a.getComponentPresets();for(let[s,c]of l){let d=Hs(s);i(s)&&bt(e,a,d)&&(a.setComponentPreset(o,c),a.setComponentPreset(s,void 0))}}}function h8(e,t,o){let r=t.find(i=>i.componentIdentifier===o);r&&TW(e,r)}var bW=e=>[`.${e}[data-border="true"]::after, .${e} [data-border="true"]::after { content: ""; border-width: var(--border-top-width, 0) var(--border-right-width, 0) var(--border-bottom-width, 0) var(--border-left-width, 0); border-color: var(--border-color, none); border-style: var(--border-style, none); width: 100%; height: 100%; position: absolute; box-sizing: border-box; left: 0; top: 0; border-radius: inherit; corner-shape: inherit; pointer-events: none; }`],IW=e=>[`.${e}[data-selection="true"] * ::selection, .${e} [data-selection="true"] * ::selection { color: var(--selection-color, none); background-color: var(--selection-background-color, none); }`],NW=e=>[`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar { width: 0px; height: 0px; }`,`.${e}[data-hide-scrollbars="true"]::-webkit-scrollbar-thumb, .${e} [data-hide-scrollbars="true"]::-webkit-scrollbar-thumb { background: transparent; }`,`.${e}[data-hide-scrollbars="true"], .${e} [data-hide-scrollbars="true"] { scrollbar-width: none; }`],ow="data-layout-template",xW={0:bW,1:NW,2:IW},Ah="-container",Qa,Ap=class{constructor(t,o,r,i){this.entryNode=t;this.sourceNode=o;this.serializationId=r;this.cssVariableDefinitions=i;L(this,"sharedStyleIds",new Set);L(this,"rules",{});L(this,"nodeClassNames",new Map);le(this,Qa,new Set);L(this,"selectorsByNodeId",new Map)}getNodeIdForClassName(t){let o=t.endsWith(Ah)?t.slice(0,-Ah.length):t;return this.nodeClassNames.get(o)}get(t=this.sourceNode.id){return t===this.sourceNode.id&&this.getWideGamutColorRule(),{rules:this.rules[t]??new Map}}createScopingSelector(t,o){if(t){let r=`.${this.serializationId}.${yv}v-${Ht(t)}`;return o?`${r}.${o}`:r}return`.${this.serializationId}`}createSelector(t,o,r,i,n=t===this.sourceNode.id){let a=this.createScopingSelector(r,i);return t===this.entryNode.id?`${a}.${o}, ${a} .${o}`:n?`${a}.${o}`:`${a} .${o}`}addRule(t,o,r={}){let{scope:i,gesture:n,container:a,ruleType:l=0,hasScopingSelector:s}=r,c=o.getPrimaryId(),d=Cv(l,c);this.nodeClassNames.has(d)||this.nodeClassNames.set(d,o.id),a&&(d+=Ah);let p=this.createSelector(c,d,i,n,s);this.selectorsByNodeId.set(c,p);let f=r.variant?.id??this.sourceNode.id;if(this.createRule(p,Bm(t),f),VW(t)){let h=RW(o,this.serializationId);for(let v in h)this.createRule(v,Bm(h[v]),f)}return d}addConditionalRule(t){A(this,Qa).add(t)}hasConditionalRule(t){return A(this,Qa).has(t)}conditionalRules(t){let o=[];return A(this,Qa).forEach(r=>{let i=xW[r],n=i(t);o.push(...n)}),o}addSharedStyle(t){this.sharedStyleIds.add(t)}createRule(t,o,r=this.sourceNode.id){let i=this.rules[r];if(i){i.set(t,o);return}this.rules[r]=new Map([[t,o]])}getWideGamutColorRule(){let t=this.cssVariableDefinitions.getWideGamutColorRules(`.${this.serializationId}`,this.selectorsByNodeId);t.length!==0&&this.createRule("@supports (color: color(display-p3 1 1 1))",t.join(" "))}};Qa=new WeakMap;var PW="viewTransitionName";function VW(e){return PW in e&&kW(e)}var rw="-exclude";function kW(e){return Uy(e.viewTransitionName)&&e.viewTransitionName.endsWith(rw)}function Mh(e,t,o){let r=Ht(e.getPrimaryId());return o?`${t}-${r}${rw}`:r}function RW(e,t){let o=Mh(e,t,!0);return{[`::view-transition-group(${o})`]:{animation:"none !important"},[`::view-transition-new(${o})`]:{animation:"none !important"},[`::view-transition-old(${o})`]:{animation:"none !important"}}}function iw(e,t,o){return!!(Ue(e)||Ue(t)||e.id===o.rootId)}var Mp=class{constructor(t,o){this.repeaterNode=t;this.parent=o;L(this,"subqueries",new Map);L(this,"variableDependencies",new Map);L(this,"childRepeaterIds",new Set)}addSubquery(t,o,r){let i=this.getSubqueries(t);i.set(o,r),this.subqueries.set(t,i),this.childRepeaterIds.add(o)}getSubqueries(t){return this.subqueries.get(t)??new Map}addVariableDependencies(t,o){let r=this.getVariableDependencies(t);r.push(...o),this.variableDependencies.set(t,r)}getVariableDependencies(t){return this.variableDependencies.get(t)??[]}};function Oh(e,t){return!Rr(e)||M(e.visible)?!0:z(e.visible)?t.createDeduplicatedDynamicValueBinding(e.visible,e,"visible"):e.isVisible()}function Wh(e,t,o,r){if(o.inComponentSlot||r||Ie(e)||ro(e)||lt(e)||$r(e)||vo(e)&&et.isOn("layoutScroll")||Zt(e)&&Ev.some(n=>(e[n]?.length??0)>0)||io(e)&&!Ge(e))return!0;switch(t.scopeType){case"CanvasPage":return!0;case"SmartComponent":return!0;case"LayoutTemplate":case"WebPage":case"DesignPage":if(Ve(e)||vd(e))return!0;if(fr(e)){let n=e.rotation;if(z(n)||X(n)&&n!==0)return!0}return Td(e);case"VectorSet":return!1;default:Ut(t.scopeType)}}function Jo(e,t){if(Number.isNaN(e)&&Number.isNaN(t)||e===t)return!0;if(at(e)||at(t)||D(e)||D(t)||M(e)||M(t)||X(e)||X(t)||Tr(e)||Tr(t)||im(e)||im(t))return!1;if(yo(e)||yo(t))return yo(e)&&yo(t)?ge(e)===ge(t):!1;if(St(e)||St(t)){if(St(e)&&St(t)){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!Jo(e[o],t[o]))return!1;return!0}return!1}if(ze(e)||ze(t)){if(ze(e)&&ze(t)){for(let a in e)if(!Jo(e[a],t[a]))return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;let o,r,i,n;return Fs(e)&&(o=ee.spreadsAtStart(e),r=ee.spreadsAtEnd(e)),Fs(t)&&(i=ee.spreadsAtStart(t),n=ee.spreadsAtEnd(t)),!Jo(o,i)||!Jo(r,n)?!1:Fs(e)&&Fs(t)?ee.isSorted(e)===ee.isSorted(t):!0}return!1}throw new Error(`Tried to compare unsupported primitive types. ${typeof e} / ${typeof t}`)}var nw={js:m`undefined`,css:"unset"};function wW(e,t){switch(t){case"js":return nw[t];case"css":return e==="display"?"block":nw[t];default:$(t,`target is not a defined enum: ${t}`)}}function Il(e,t,o){if(!e)return;if(!t)return e;let r={},i=!1;for(let n in e){let a=e[n],l=t[n];Jo(a,l)||(M(a)?n in t&&(r[n]=o?wW(n,o):void 0,i=!0):(r[n]=a,i=!0))}if(i)return r}var Op=(e,t)=>{if(!Ki(e)||!e.codeOverrideEnabled||!e.codeOverrideIdentifier)return;let o=E.componentForIdentifier(e.codeOverrideIdentifier);if(!(o&&qu(o)))return;let r=ce(e.codeOverrideIdentifier);if(!Ze(r))return;let{importSpecifier:i,exportSpecifier:n}=xi(r,t.moduleType,t.modulesStore);if(!(!i||!n))return{importSpecifier:i,exportSpecifier:n}};function Wp(e,t){let o=[];if(et.isOn("overridesWithPropertyControls")&&rl(e)&&e.codeOverrides)for(let r of e.codeOverrides){let i=E.componentForIdentifier(r.identifier);if(!(i&&qu(i)))continue;let n=ce(r.identifier);if(!Ze(n))continue;let a=t.imports.addModuleImport(n);if(!a)continue;let l=PI(r),s=Object.keys(l).length>0&&Kt(l);o.push(s?[a,l]:a)}return o}function aw(e){let t=e.getContentManagementNode();if(t)return C(t.isLoaded(),"ContentManagementNode should be loaded"),t;let o=new Qv;return e.insertNode(o,e.root.id),o}function DW(e){if(e.type!=="controlReference"&&e.type!=="nodePropertyControlReference")return;let{expectedType:t}=e;C(t==="enum"||t==="segmentedenum"||t==="file")}function b7({galleryImageId:e,isSmartComponent:t}){return t?Array(4).fill(null).map(()=>({id:_t(),type:"object",value:{[e]:{type:"image",value:void 0}}})):[]}function Nl(e,t){return C(e.type!=="responsiveimage",`Image variables are compiled to be responsive images. To
        prevent confusion we don't allow creation of type responsive images.
        Because that would mean that two different types represent the same thing.`),DW(e),e.type!=="trackingid"&&e.type!=="vectorsetitem"&&It("variable_create",{scopeType:t,variableType:e.type}),e.type==="image"&&(D(e.initialValue)?em(e.initialValue)||(e.initialValue=void 0):Mo(e.initialValue)&&D(e.initialValue.value)&&(em(e.initialValue.value)||(e.initialValue=void 0))),e.type==="array"&&t==="canvas_component"&&(C(e.minCount===void 0,"minCount should not be lifted to component"),C(e.maxCount===void 0,"maxCount should not be lifted to component")),{id:_t(),...e}}function LW(e,t,o={}){let r=zp(e),i=FW(e,o),n=r.children,a=new Map;for(let s of t.collections)a.set(s.id,s);let l=[];for(let s of n){let c=s.resolveValue("name");if(at(c))continue;let d=s.createdFromKitSchemaId?a.get(s.createdFromKitSchemaId):a.get(s.id),p=[];for(let f of s.variables){if(!gi(f))continue;if(f.type!=="collectionreference"&&f.type!=="multicollectionreference"){p.push({name:f.name,type:f.type});continue}let h=mr(e,f.dataIdentifier);C(h,"Target collection not found for variable");let v=h.resolveValue("name");C(v,"Collection name not found"),p.push({name:f.name,type:f.type,reference:{collection:v,kind:f.type==="collectionreference"?"single":"multi"}})}l.push({name:c,variables:p,items:i.get(c)??[],createdFromKitTemplate:d?.name})}return l}function F7(e){let t=zp(e),o=new Map;for(let r of t.children){let i=r.resolveValue("name");at(i)||o.set(i,r.id)}return o}function zp(e){let t=e.getContentManagementNode();C(t,"Content management node not found");let o=t.loaded;return C(o,"Content management node not loaded"),o}function FW(e,t={}){let o=zp(e),r=new Map,{filterOnItemIds:i}=t;for(let n of o.children){let a=n.resolveValue("name");if(at(a))continue;let l=n.getSlugVariable(),s=[];for(let c of n.getUnsortedChildren()){if(i&&!i.has(c.id))continue;let d=bh(c,l);if(d){if(!t?.fullSnapshot){s.push({slug:d});continue}s.push({...EW(n,c),slug:d})}}r.set(a,s)}return r}function EW(e,t){let o={};for(let r of e.variables){if(!gi(r))continue;let i=t.getControlProp(r.id);o[r.name.toLowerCase()]=i?.value??r.initialValue??null}return o}function sw(e,t){let o=zp(e),r=[];for(let i of o.children){if(at(i.name)||i.id!==t&&i.createdFromKitSchemaId!==t)continue;let n=i.resolveValue("name");C(n,"Collection name not found"),r.push(n)}return r}function E7(e,t){let o=[];for(let r of t.variables){if(!gi(r)||r.type!=="collectionreference"&&r.type!=="multicollectionreference")continue;let i=mr(e,r.dataIdentifier);C(i,`Referenced collection for field "${r.name}" not found`),o.push(i)}return o}function AW(e,t,o,r,i){let n=t.getCollectionTemplate(r.collection);C(n,`Collection with alias ${r.collection} not found`);let l=i.find(c=>c.field===o&&r.collection===c.fromTemplate)?.name;if(!l)return;let s=MW(e,n.id,l);return C(s,`Referenced collection for template "${n.name}" not found. Plan must create it first.`),s}function A7(e,t,o,r,i=[],n){let a=[];for(let l of r.variables){let{defaultValueSuggestions:s,reference:c,...d}=l;if(d.type==="collectionreference"||d.type==="multicollectionreference"){C(c,"Reference is required");let p=n?n(c.collection):AW(e,t,l.name,c,i);if(!p)continue;a.push(Nl({...d,dataIdentifier:p.instanceIdentifier},"collection"));continue}a.push(Nl(d,"collection"))}return new yI({name:o,variables:a,createdFromKitSchemaId:r.id})}function MW(e,t,o){return aw(e).children.find(i=>(i.id===t||i.createdFromKitSchemaId===t)&&i.resolveValue("name")===o)}function M7(e,t,o){let r=new Map;for(let d of t)r.set(d.fromTemplateCollection,{name:d.collectionName,new:d.new});let i=new Map;for(let d of e.fields){if(!d.isCMSConnectedField)continue;let p=o.getCollectionTemplateById(d.collectionId)?.name;if(!p)continue;let f=i.get(p)??new Set;if(d.reference?.collectionId){let h=o.getCollectionTemplateById(d.reference.collectionId)?.name;if(!h)continue;f.add(h),i.has(h)||i.set(h,new Set)}i.set(p,f)}let n=new Map;for(let[d,p]of i)for(let f of p){let h=n.get(f)??new Set;h.add(d),n.set(f,h)}let a=new Map;for(let d of i.keys()){let p=i.get(d);a.set(d,p?.size??0)}let l=[],s=[];for(let[d,p]of a)p===0&&s.push(d);for(;s.length>0;){let d=s.shift();C(d,"Collection ID must exist when the queue is not empty"),l.push(d);let p=n.get(d);if(p)for(let f of p){let h=a.get(f)??0;if(h===0)continue;let v=h-1;a.set(f,v),v===0&&s.push(f)}}let c=[];for(let d of l){let p=r.get(d);p&&c.push({id:d,name:p.name,new:p.new})}return c}function O7(e,t,o,r={}){let i=o.resolveValue("name");C(i,"Collection must have a name");let a=LW(e,t,r).find(l=>l.name===i);return C(a,`Collection snapshot for "${i}" not found`),a}function j7(e){return e.customizationsSectionId??e.id}function lw(e){if(Sd(e)&&e.kitSectionSource)return e.kitSectionSource?.section;if(Xm(e))return e.customizationsSectionId}function cw(e,t){if(!Xm(t))return!1;let o=e.getParent(t.id);if(!fe(o))return!1;let r=e.getScopeNodeFor(o);return GC(r)}var OW="$NEW";function U7(e,t,o){let r=new Map;for(let a of o.fields){if(!a.isCMSConnectedField||r.has(a.collectionId))continue;let l=t.find(s=>s.id===a.collectionId);C(l,"Collection template must be defined"),r.set(a.collectionId,l.name)}let i={};for(let[a,l]of r){let s=sw(e,a);i[l]=[...s,OW]}let n=o.fields.map(a=>{if(!a.isCMSConnectedField)return a;let l=r.get(a.collectionId);C(l,"Alias must be defined");let{collectionId:s,reference:c,...d}=a,p=c?{...c,collection:r.get(c.collectionId)}:void 0;return{...d,collection:l,reference:p}});return{id:o.id,description:o.description,rules:o.rules,supportedCollections:i,singleton:o.moduleIdentifier?!0:void 0,fields:n,detailPageTemplateId:t.find(a=>a.id===o.detailPageCollectionId)?.name,layoutId:o.layoutId}}function WW(e){return!yo(e)&&(D(e)||X(e)||at(e)||M(e))}function zh(e,t){return t.scopeType!=="SmartComponent"?WW(e):Kt(e)}var dw=Ot((e,t,o)=>{if(!_(e)||!e.isVectorInstance||!he(o))return;let r=E.reactComponentForIdentifier(e.codeComponentIdentifier);if(!r)return;let i=wp(e,r.properties,e.getControlProps(r.properties),{context:o,repeaterInfo:void 0});for(let n in i){let a=i[n],l=`--${Ht(n)}`;zh(a,o)&&(t[l]=a??void 0)}});function pw(e,t,o,r,i){let n={...t};uS.has(e.codeComponentIdentifier)&&(n.__fromCodeComponentNode=!0);let a=r.reactComponentForIdentifier(e.codeComponentIdentifier);if(a?.properties){let h=wp(e,a.properties,e.getControlProps(a.properties),{context:o,repeaterInfo:i?o.repeaterInfo.get(i):void 0});if(e.isVectorInstance)for(let v in h){let T=h[v],N=o.scopeType!=="SmartComponent"?!0:void 0;n[v]=zh(T,o)?N:T}else Object.assign(n,h)}let l=gI(r,e.codeComponentIdentifier,n),s=e.getActions(r);for(let h in s)l[h]=o.events?.addHandler({node:e,trigger:h,actionInfo:s[h]});if(e.isVectorInstance)return uf(l);let c=hI(e,r);mS(e)&&Object.assign(l,e.getStylingProps(c,!1));let d=e.id===o.rootId&&o.scopeType!=="SmartComponent",p=c?Object.keys(c):[],f=ze(c)&&p.length>0&&p.some(h=>!M(c[h]));return ze(c)&&(f||d)&&d&&(c.width=m`style?.width`,c.height=m`style?.heigh`,f=!0),f&&(l.style?Object.assign(l.style,c):l.style=c),uf(l)}var zW=/\/assets\/(?:(\d+)\/)?([^?]+)\?/u;function BW(e,t){if(typeof DOMParser>"u"||e.indexOf("image")<0)return;let o=Rn(e),r=o.querySelector("svg");if(!r)return;let i=new Map;if(o.querySelectorAll("image").forEach(n=>{let a=n.getAttribute("xlink:href");if(!a)return;let l=zW.exec(a);if(!l)return;let s=Number.parseInt(l[1],10),c=l[2],d="::ASSET::"+i.size+"::",f=t?.resolveResponsiveImage(c)?.src??lc(c,s);i.set(d,f),n.setAttribute("xlink:href",d)}),i.size!==0)return r.outerHTML.replace(/::ASSET::\d+::/gu,n=>i.get(n)??`missing:${n}`)}function Bp(e,t){let o=e.svg;D(o)&&(e.svg=BW(o,t)??o)}var uw=te((e,t,o)=>{if(!xI(e)||!ja(o?.scopeType))return;if(JT(e)||ro(e)&&z(e.fillImage)){t["aria-label"]=void 0;return}if(he(o)&&z(e.ariaLabel)){t["aria-label"]=o.createDeduplicatedDynamicValueBinding(e.ariaLabel,e,"ariaLabel");return}let r=e.resolveValue("ariaLabel",o?.variableOverrides);if(D(r)&&r!==""){t["aria-label"]=r;return}t["aria-label"]=void 0});var mw=te((e,t,o)=>{let r=io(e),i=!!(e.parentid&&o?.renderAsListNodes?.has(e.parentid));if(!De(e)){if(!Ge(e)&&r&&(t.as="a"),i){t.as="li";return}return}if(!ro(e))return;let n=e;if(r){t.as="a";return}if(i){t.as="li";return}let a=n.htmlTag??Cd;a!=="div"&&(t.as=a)});var fw=te((e,t,o)=>{if(!ZI(e)||!he(o))return;let r=e.getPrimaryId(),i=o.events.overlayState.get(r);i&&(z(e.backdropDismissible)?t.onTap=m`() => ${o.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")} && ${P.fn(m`${i}.hide`)}`:t.onTap=e.resolveValue("backdropDismissible")?m`() => ${P.fn(m`${i}.hide`)}`:void 0,t.initial={opacity:0},t.key=r,e.backdropTransitionLocked?(t.transition=Hi(e.backdropEnterTransition??xd),t.animate={opacity:1},t.exit={opacity:0}):(t.animate={opacity:1,transition:Hi(e.backdropEnterTransition??xd)},t.exit={opacity:0,transition:Hi(e.backdropExitTransition??xd)}))});var hw=te((e,t,o)=>{if(!hr(e)&&Po(e)){if(pr(e)&&!e.fillEnabled){t.background=void 0;return}t.background=fI(e,!0,o),t.background&&qe(e)&&(e.heightType===5?t.fitImageDimension="height":e.widthType===5?t.fitImageDimension="width":t.fitImageDimension=void 0)}});var yw=te((e,t,o)=>{!kr(e)||!e.borderEnabled||hT(e)||(t["data-border"]=!0,he(o)&&o.css.addConditionalRule(0))});var Cw="data-reset",Sw=te((e,t,o)=>{if(he(o)&&!(o.scopeType==="CanvasPage"||o.scopeType==="DesignPage")&&nn(e)){if(!pb(e.htmlTag)){t[Cw]=void 0;return}e.htmlTag==="button"&&(t[Cw]="button")}});function Bh(e,t,o){let r=fo(o)?o.localId:o?.moduleId,i=e.get(r);if(ZC(i))return i.pluginId;if(!md(i))return;if(!M(i.save.pluginId))return i.save.pluginId;let n=t.getPersistedModuleByLocalId(i.id);if(!n)return;let a=n.metadata.pluginId;if(D(a))return a}function mee(e,t,o,r){let i=Bh(e.tree,t,r);if(!M(i))return o.manifestById.get(i)}function fee(e){return`Edit in ${e.name}`}function vw(e,t){if(fo(e))return ce(e).type;if(Mr(e)){let r=t.getExternalModuleNodes().find(i=>i.codeComponentIdentifier===e);return r?r.type:void 0}}var Tw=te((e,t,o)=>{if(!_(e)||!he(o)||!yr(e))return;t.scopeId=o.scopeId,t.nodeId=e.getPrimaryId(),t.isAuthoredByUser=vw(e.codeComponentIdentifier,o.treeStore.tree)==="codeFile"?!0:void 0;let r=Mr(e.codeComponentIdentifier);r&&(t.isModuleExternal=r);let i=o.nodeRendersWithMotion.get(e);i&&(t.rendersWithMotion=i);let n=ce(e.codeComponentIdentifier);t["data-code-component-plugin-id"]=Bh(o.treeStore.tree,o.modulesStore,n)});var bw=te((e,t,o)=>{kI(e)&&ja(o?.scopeType)&&(t["data-nosnippet"]=RI(e)?e.dataNosnippet:void 0)});var Iw=te((e,t,o)=>{if(!Ks(e))return;let r=he(o)&&z(e.draggable)?o.createDeduplicatedDynamicValueBinding(e.draggable,e,"draggable"):e.resolveValue("draggable")??db(e);t.draggable=!M(r)&&!z(e.draggable)?r.toString():r});var Nw=te((e,t,o)=>{if(!he(o)||Bo(e)||!za(e)&&!Jc(e))return;let r=o.treeStore.tree.get(o.scopeId);Qr(r)&&ib(r)&&Object.assign(t,o?.events?.eventHandlersForNode(e))});var xw=te((e,t,o)=>{if(!Ge(e))return;let r=e.getFontsForLoading();if(he(o)){let i=Ec(e);for(let n of r)o.fonts?.addFontObjectBySelector(n,i)}t.fonts=r.length>0?r:void 0});var Pw=te((e,t,o)=>{LN(e)&&(t.step=he(o)&&z(e.formInputStep)?o.createDeduplicatedDynamicValueBinding(e.formInputStep,e,"step"):e.resolveValue("formInputStep"))});var Vw=te((e,t,o)=>{if(nl(e)){if(he(o)){t["data-hide-scrollbars"]=z(e.hideScrollbars)?o.createDeduplicatedDynamicValueBinding(e.hideScrollbars,e,"hideScrollbars"):e.hideScrollbars||void 0,M(e.hideScrollbars)||o.css.addConditionalRule(1);return}t["data-hide-scrollbars"]=e.resolveValue("hideScrollbars",o?.variableOverrides)?!0:void 0}});var kw=te((e,t,o)=>{!Zt(e)||o?.scopeType==="WebPage"||(t["data-highlight"]=Mv(e,E)||void 0)});var Hh=te((e,t,o)=>{if(!he(o)||!o.llmSnapshot)return;let r=GW(e);if(r&&(t["data-type"]=r),_(e)&&!e.isVectorInstance){let i=_W(e);if(!i)return;let{keys:n,labels:a}=i;n.length>0&&(t["data-prop-keys"]=n.join(",")),a.length===n.length&&a.length>0&&(t["data-prop-labels"]=a.join(","))}});function GW(e){if(Ie(e)&&!$W(e))return"text";if(LS(e))return"image";if(_(e))return e.isVectorInstance&&!z(e.dynamicVectorSetIdentifier)?"icon":"component"}function $W(e){return U(e.htmlContent)?!0:z(e.textContent)||U(e.textContent)}function _W(e){let t=E.componentForIdentifier(e.codeComponentIdentifier);if(!t?.properties)return;let o=e.getControlProps(t.properties),r=[],i=[];for(let n in o){let a=o[n];if(!a)continue;let{type:l,value:s}=a;if(l!=="string"&&l!=="vectorsetitem"||z(s)||U(s))continue;r.push(n);let c=t.properties?.[n]?.title;i.push(c??n)}return r.length>0?{keys:r,labels:i}:void 0}var Rw=te((e,t,o)=>{if(!ve(e)||!Pe(e)||!he(o)||o.scopeType!=="LayoutTemplate")return;let r=e.tree()?.getParent(e.id);if(!fe(r))return;let{center:i}=Wb(e);iC(t,Bb(e)?i:void 0)});var ww=te((e,t,o)=>{if(!io(e)||Ge(e))return;if(o?.variables&&U(e.linkOpenInNewTab)){t.openInNewTab=o.variables.create(e.linkOpenInNewTab);return}let r=e.resolveValue("linkOpenInNewTab",o?.variableOverrides);Tr(r)&&(t.openInNewTab=r)}),Dw=te((e,t,o)=>{if(!io(e)||Ge(e))return;if(o?.variables&&U(e.linkSmoothScroll)){t.smoothScroll=o.variables.create(e.linkSmoothScroll);return}let r=e.resolveValue("linkSmoothScroll",o?.variableOverrides);Tr(r)&&(t.smoothScroll=r)}),Lw=te((e,t,o)=>{if(!io(e)||Ge(e))return;if(o?.variables&&U(e.linkClickTrackingId)){t.clickTrackingId=o.variables.create(e.linkClickTrackingId);return}let r=e.resolveValue("linkClickTrackingId",o?.variableOverrides);D(r)&&(t.clickTrackingId=r)}),Fw=te((e,t,o)=>{if(!io(e)||Ge(e))return;let r=e.resolveValue("linkRelValues",o?.variableOverrides);if(o?.variables&&U(e.linkRelValues)){t.relValues=o.variables.create(e.linkRelValues);return}DC(r)&&(t.relValues=r)}),Ew=te((e,t,o)=>{if(!io(e)||Ge(e))return;if(o?.variables&&U(e.linkPreserveParams)){t.preserveParams=o.variables.create(e.linkPreserveParams);return}let r=e.resolveValue("linkPreserveParams",o?.variableOverrides);Tr(r)&&(t.preserveParams=r)}),Aw=te((e,t,o)=>{if(!rn(e)||Ge(e))return;if(!io(e)){t.href=void 0;return}let r=e.getLink();Qt(r)?t.href=o?.valueTransforms?.createComputedValue(r,e,void 0):Gr(r)&&e.linkLocalized&&o?.localizedValues?t.href=o.localizedValues.add(r.url,e.linkLocalized,i=>e.linkLocalized?.[i]?.value):t.href=o?.links?.create(r)}),Mw=te((e,t)=>{if(xs(e)){let o=new Set,r=e.getInlineLinks(!1);D(e.link)&&r.push(e.link),r.forEach(i=>{if(!i||!NC(i))return;let n=xC(i)?.target;n&&o.add(n)}),t.__link=e.link,o.size&&(t.preload=Array.from(o))}}),Ow=te((e,t)=>{t.nodeId=e.getPrimaryId()}),Ww=te((e,t,o)=>{t.scopeId=o?.scopeId});var zw=te((e,t,o)=>{if(!yd(e)||!he(o)||!bd(o.scopeType)||ht(e))return;if(!cb(e)){t.drag=void 0;return}let r,i;!e.dragEffectFreeform&&o.scopeType!=="SmartComponent"?r=o.elementIds.scrollTargetInfo({target:e.dragEffectConstraintElement,collectionItem:e.dragEffectConstraintItem})?.ref:e.dragEffectSnapBack&&(i=!0);let n=e.dragEffectTransition?Hi(e.dragEffectTransition):void 0,a=n?o.declarations.file.dedupe("inertia",n):void 0,l=r||i,s=m`e`,c={drag:!0,dragConstraints:r,dragMomentum:!!e.dragEffectMomentum,dragTransition:l?a:void 0,dragSnapToOrigin:i,onMouseDown:o.declarations.file.dedupe("preventDefault",m`(${s}) => ${s}.preventDefault()`)};Object.assign(t,c)});var jW="--extracted-",UW=["--framer-text-color","--framer-text-stroke-width","--framer-text-stroke-color","--framer-font-variation-axes"];function xl(e,t){let o=Ha(e);return Bw(o,(r,i)=>{for(let n of UW){let a=r.style.getPropertyValue(n);if(!a)continue;let l=JW(i,n),s=XW(l,a);t&&(t[l]=a),r.style.setProperty(n,s)}}),o.innerHTML}function JW(e,t){return jW+Ht(e+t)}function XW(e,t){return`var(${e}, ${t})`}function Bw(e,t,o=""){for(let r=0;r<e.children.length;r++){let i=e.children[r];if(i instanceof HTMLElement){let n=o+i.tagName+r;t(i,n),Bw(i,t,n)}}}var Hw=te((e,t,o)=>{if(!$c(e)||!he(o))return;let r=o.scopeType==="SmartComponent",i=r?xl(e.html):e.html,{assets:n,imports:a,variables:l,links:s,cssVariableDefinitions:c}=o||{};if(C(n&&a&&s,"assets, imports, links must exist at this point"),U(e.htmlContent))C(l,"context.variables should exist if we are dealing with variables references"),t.children=l.create(e.htmlContent);else{let d=an(i,{collectors:{assets:n,imports:a,links:s,variables:l,cssVariableDefinitions:c},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId}),p=Fd(i);t.children=o.localizedValues.add(d,e.htmlLocalized,(f,h)=>{let v=ax(p,e.htmlLocalized?.[f],i);if(!v)return;let T;return v.type==="rich-text"?(T=nx(e.html,v.value),r&&(T=xl(T))):T=XI(i,v.value),an(T,{collectors:{assets:n,...h},useFramerMotion:r,nodeId:e.getPrimaryId(),scopeId:o.scopeId})})}Ie(e)&&Mo(e.anchorLinkOffsetY)&&(t.anchorLinkOffsetY=e.anchorLinkOffsetY),o.metrics?.measureLength("textBytes",t.__htmlStructure),o.metrics?.measureLength("textBytes",t.htmlFromDesign),o.metrics?.measureLength("textBytes",t.children)});var Gw=te((e,t,o)=>{if(!(!_i(e)||!e.colorable)){if(pr(e)&&!e.fillEnabled){t.fill=null;return}if(Po(e)&&!(e.fillType==="linear-gradient"&&e.fillLinearGradient||e.fillType==="radial-gradient"&&e.fillRadialGradient||e.fillType==="conic-gradient"&&e.fillConicGradient)){if(e.fillType==="image"&&e.fillImage){t.fill=mI(e,o,o?.variableOverrides);return}if(e.fillColor){if(z(e.fillColor)&&he(o)){t.fill=o.createDeduplicatedDynamicValueBinding(e.fillColor,e,"fillColor");return}t.fill=e.resolveValue("fillColor",o?.variableOverrides)}}}});var $w=te((e,t,o)=>{if(!jc(e)||!zS(e))return;let r=rn(e)&&D(e.link)?e.link:void 0,i=MS(e)?e.htmlTextTag:void 0,{alignment:n,rawHTML:a}=e.getStyledText().getProps(e,r,i,()=>{});t.alignment=n,t.rawHTML=a?m`${a}`:void 0,o?.metrics?.measureLength("textBytes",t.rawHTML)});var _w=te((e,t,o)=>{if(!PT(e))return;let r=e.textContent;if(!r){t.text=void 0;return}if(he(o)){if(bC(r)){let i=r.transforms[0],n=o.imports.addImport("framer",{exportSpecifier:"RelativeDate"});t.text=ft.tag(n,new ee({date:Hr(r)?o.variables.create(r.startValue):o.fetches.createFetchBinding(e,r.startValue),dateFormat:i.format,dateStyle:i.dateStyle,dateCapitalize:i.capitalize??!1,locale:i.locale}))}else z(r)?t.text=o.createDeduplicatedDynamicValueBinding(r,e,"textContent"):$(r,"text content must be a variable or a computed value");o?.metrics?.measureLength("textBytes",t.text)}});var jw=te((e,t,o)=>{!Id(e)||!e.resolveValue("textSelection")||(t["data-selection"]=!0,he(o)&&o.css.addConditionalRule(2))});var Uw=te((e,t)=>{al(e)&&(t.verticalAlignment=e.textVerticalAlignment)});var Jw=te((e,t)=>{SN(e)&&(t.description=D(e.description)&&e.description!==""?e.description:void 0,t.title=D(e.title)&&e.title!==""?e.title:void 0)});function ZW(e){if(Ve(e))return e.variantTransition;if(Ys(e))return e.transition}var Xw=te((e,t,o)=>{if(o.scopeType!=="SmartComponent")return;let r=ZW(e);if(z(r)){t.value=o.createDeduplicatedDynamicValueBinding(r,e,"transition");return}if(!r){t.value=void 0;return}let i=Hi(r);t.value=o.declarations.file.dedupe("transition",i)});var KW="-container",$h=m`formState`,qW=te((e,t,o)=>{_i(e)&&(t.withExternalLayout=!0,t.intrinsicHeight=e.intrinsicHeight||void 0,t.intrinsicWidth=e.intrinsicWidth||void 0,t.svg=m`${e.svg}`,Bp(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg))}),YW=te((e,t,o)=>{if(!He(e))return;C(t instanceof ee,"");let r=Sf.shared().getSVGStringForNode(e),i=e.contentHash;ee.assign(t,{layout:o?.scopeType==="SmartComponent"?"position":void 0,intrinsicWidth:void 0,intrinsicHeight:void 0,...lf(e),withExternalLayout:!0,svgContentId:i,svg:r});let n=t.style?.opacity;(n||Number.isFinite(Number(n)))&&(t.opacity=n),Bp(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)}),QW=te((e,t,o)=>{if(!Bt(e))return;let r=Sf.shared().getSVGStringForNode(e);Object.assign(t,{intrinsicWidth:void 0,intrinsicHeight:void 0,...lf(e),svg:r,withExternalLayout:!0,requiresOverflowVisible:sx(e)});let i=t.style?.opacity;(i||Number.isFinite(Number(i)))&&(t.opacity=i),Bp(t,o?.assets),o?.metrics?.measureLength("svgBytes",t.svg)});function ez(e){return e.codeComponentIdentifier==="framer/Prototype"}function Gh(e,t,o,r,i){if(!_(e))return;let{lastRepeaterId:n,layoutId:a}=i;if(ee.assign(t,pw(e,void 0,o,E,n)),ez(e))t.scaleTo="dynamic";else if(Ep(e))t.__fromCanvasComponent=!0;else if(!e.isVectorInstance)t.width="100%",t.height="100%",t.id=e.getPrimaryId(),e.name!==null&&!t.name&&!Yv(e.name)&&(t.name=e.name);else{let c=fr(e)&&(z(e.rotation)||X(e.rotation)&&e.rotation!==0);t[Vb]=o.scopeType==="SmartComponent"?!0:vd(e)||c||Td(e)}_b(e,t,o);let l=o.events.overlayTriggerOverlayBindings.get(e.getPrimaryId());if(Ib(e)&&l?.size){let c=new P(Array.from(l.values())?.map(d=>m`${d}.visible`)?.join(" || "));t.variant=m`(${c}) ? ${e.whileOpenEffectVariant} : ${t.variant??m`undefined`}`}hb(o.treeStore.tree,e)&&(t.type="submit",mb(e)&&(t.variant=P.fn(o.declarations.file.dedupe("formVariants",m`(form, variants, currentVariant) => { ${m.joinLines(m`switch(form.state) {${m.joinLines(m`case "success": return variants.success ?? currentVariant`,m`case "pending": return variants.pending ?? currentVariant`,m`case "error": return variants.error ?? currentVariant`,m`case "incomplete": return variants.incomplete ?? currentVariant`,m`default: return currentVariant`)}}`)} }`),$h,{success:e.formButtonSuccessVariantEnabled?e.formButtonSuccessVariant:void 0,error:e.formButtonErrorVariantEnabled?e.formButtonErrorVariant:void 0,pending:e.formButtonPendingVariantEnabled?e.formButtonPendingVariant:void 0,incomplete:e.formButtonIncompleteVariantEnabled?e.formButtonIncompleteVariant:void 0},t.variant??m`undefined`)));let s=o.treeStore.tree.get(i.lastRepeaterId);if(Ur(s)&&wr(s)&&(Pi(e,s)||sb(e))&&(t.variant=s&&lb(e)?P.fn(o.declarations.file.dedupe("loaderVariants",m`(repeaterState, variants, currentVariant) => { ${m.joinLines(m`if (repeaterState.currentPage >= repeaterState.totalPages) return variants.disabled ?? currentVariant`,m`if (repeaterState.isLoading) return variants.loading ?? currentVariant`,m`return currentVariant`)} }`),o.bindings.createWithNode("paginationInfo",s),{disabled:e.dataLoaderDisabledVariantEnabled?e.dataLoaderDisabledVariant:void 0,loading:e.dataLoaderLoadingVariantEnabled?e.dataLoaderLoadingVariant:void 0},t.variant??m`undefined`):void 0),Ui(e)||r.identifiers&&r.identifiers.size>1){let c=ce(e.codeComponentIdentifier);C(Ze(c),`Expected a module export identifier, got ${c}`);let{importSpecifier:d,exportSpecifier:p,importBinding:f}=xi(c,o.moduleType,o.modulesStore);C(d,"A module must have an import specifier."),t.Component=U(e.dynamicVectorSetIdentifier)?o.vectorSets.resolveVariableInstance(e):o.imports.addImport(d,{exportSpecifier:p,importBinding:f})}t.layoutId=a??e.getPrimaryId()}var tz=(e,t,o,r)=>{let i=new ee;return Gh(e,i,t,o,r),Hh(e,i,t),i},oz=zn(uw,mw,fw,hw,yw,Tw,LI,Sw,bw,Iw,Nw,xw,PN,FI,RN,FN,Pw,HN,EN,AN,EI,jb,Vw,kw,Rw,Mw,Ub,zw,Gb,Db,Jb,Xb,Hb,Hw,YW,$w,mN,Gw,qW,TN,_w,fN,hN,jw,Uw,Jw,QW);function rz(e){if(M(e)||e instanceof ee&&ee.hasSpreads(e))return e;for(let t of Object.values(e))if(!M(t))return e}function Hp(e){return e.declarations.component.dedupe("scopingClassNames",P.fn(e.imports.addImport("framer",{exportSpecifier:"cx"}),ne.serializationHash,m`...${ne.sharedStyleClassNames}`))}var iz=(e,t,o,r,{style:i,className:n})=>{let a=new ee;oz(e,a,t),Bo(e)&&yr(e)||Hh(e,a,t);let l=e.getPrimaryId()===t.rootId;if(a.style||i||l){let h={};if(ze(a.style)&&Object.assign(h,a.style),i&&Object.assign(h,i),a.style=rz(h),l){let v=new ee(a.style);ee.addSpreadAtEnd(v,m`style`),a.style=v}}let s=[];a.className&&s.push(a.className),n&&s.push(n),l&&(s.unshift(Hp(t)),s.push(ne.className),a.ref=ne.refBinding,ee.addSpreadAtStart(a,ne.restProps),t.scopeType==="SmartComponent"&&(s.push(ne.classNames),ee.addSpreadAtStart(a,ne.gestureHandlers))),t.scopeType==="WebPage"&&cw(t.treeStore.tree,e)&&(a["data-section-id"]=e.getPrimaryId()),(Ue(e)||Ue(t.treeStore.tree.getParent(e.id)))&&s.unshift(Hp(t)),s.length===1?a.className=s[0]:s.length>1&&(a.className=P.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),...s)),t.scopeType==="LayoutTemplate"&&fe(e)&&(a[ow]=!0);let{withKey:c,layoutId:d}=o,p=d??e.getPrimaryId();c&&(a.key=p),t.scopeType==="SmartComponent"?(a.layoutId=yr(e)?p+KW:p,a.layoutDependency=m`layoutDependency`):t.scopeType==="CanvasPage"&&(a.layoutIdKey=p,e.duplicatedFrom&&e.duplicatedFrom.length>0&&(a.duplicatedFrom=e.duplicatedFrom)),_(e)&&(yr(e)?o.inComponentSlot&&(a.inComponentSlot=o.inComponentSlot):(Ep(e)&&(a.__fromCanvasComponent=!0),Gh(e,a,t,r,o)),vo(e)&&(a.layoutScroll=!0)),Ge(e)&&(a.withExternalLayout=!0,a.__fromCanvasComponent=!0),zc(e)&&t?.scopeType==="WebPage"&&!Ve(e)&&(a.id=e.scrollTargetEnabled?t.elementIds.id(e):void 0),a["data-framer-cursor"]=t.customCursors.add(e),lt(e)?Object.assign(a,{role:"dialog"}):a[sm]=t.elementIds.portalId(e),Fb(e)&&(a.id=a.id??t.elementIds.id(e),a.lightboxClassName=Hp(t));let f=t.treeStore.tree.get(o.lastRepeaterId);return f&&_(e)&&Pi(e,f)&&Object.assign(a,{__paginationInfo:t.bindings.createWithNode("paginationInfo",f),__loadMore:t.bindings.createWithNode("loadMore",f)}),o.isColumnMasonryLayout&&ze(o.itemsOrderOverrides)&&!Ft(o.itemsOrderOverrides)&&(a["data-framer-order-id"]=p),a},nz=zn(Aw,ww,Dw,Lw,Fw,Ew,Ow,Ww);function az(e,t){let o=new ee({motionChild:!0});return nz(e,o,t),o}function sz(e,t){let o=new ee;return Xw(e,o,t),o}var lz=new ee({placement:void 0,alignment:void 0,offsetX:void 0,offsetY:void 0,className:void 0,anchorRef:void 0,floatingRef:void 0,onDismiss:void 0,portalSelector:void 0,safeArea:void 0,collisionDetection:void 0});function cz(e,t){if(!Da(e))return;if(!lt(e))return lz;let o=t.events.overlayState.get(e.getPrimaryId());if(!o)return;let r=t.treeStore.tree.getParent(e.getPrimaryId());if(r)return new ee({placement:e.floatingPlacement,alignment:e.floatingAlignment,offsetX:e.floatingOffsetX,offsetY:e.floatingOffsetY,anchorRef:t.rootId===r.id?m`${ne.refBinding}`:t.elementIds.ref(r),onDismiss:m`${Dp(o,"hide")}`,safeArea:e.floatingSafeArea??!0,zIndex:jS(e)?e.zIndex:void 0,collisionDetection:e.floatingCollisionDetection??!1,collisionDetectionPadding:e.floatingCollisionDetection?e.floatingCollisionPadding??Kc:void 0,[sm]:t.elementIds.portalId(e),className:P.fn(t.imports.addImport("framer",{exportSpecifier:"cx"}),Hp(t),t.scopeType==="SmartComponent"?ne.classNames:void 0)})}function dz(e,t){if(!Ue(e))return;let o=!1;return Kt(e.backdropDismissible)?o=e.backdropDismissible:z(e.backdropDismissible)&&(o=t.createDeduplicatedDynamicValueBinding(e.backdropDismissible,e,"backdropDismissible")??!1),new ee({blockDocumentScrolling:e.blockDocumentScrolling,dismissWithEsc:o})}function Zw(e,t){let o=t.fetches.getFetchesForNode(e);return new ee({requests:o??[],disabled:t.scopeType==="SmartComponent"?ne.isLoading:void 0})}function pz(e,t){if(!_(e))return;let o=new ee;if(E.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerComponentViewportWidth==="true"){let n=t.simulatedDOM.getComponentViewportContext(e);Object.assign(o,n)}return o}function Kw(e){if(!Pc(e)||!qe(e)||!Pe(e))return;let t={width:void 0,height:void 0};return e.widthType===1&&Number.isFinite(e.width)&&(t.width=`${e.width*100}%`),e.widthType===3&&Number.isFinite(e.width)&&(t.width=e.cache.parentDirection==="horizontal"?ef(e.width):Pr(e.width*100,"%")),e.heightType===1&&Number.isFinite(e.height)&&(t.height=`${e.height*100}%`),e.heightType===3&&Number.isFinite(e.height)&&(t.height=e.cache.parentDirection==="vertical"?ef(e.height):Pr(e.height*100,"%")),new ee(t)}function _h(e,t,o,r,{className:i,style:n}={}){let a=iz(e,t,r,o,{style:n,className:i}),l=sz(e,t),s=cz(e,t),c=dz(e,t);if(Bo(e)&&yr(e)){let d=tz(e,t,o,r),p=Zw(e,t);return{container:a,transition:l,floating:s,overlay:c,fetcher:p,element:d,componentViewport:pz(e,t),tickerItem:Kw(e)}}return{element:a,transition:l,floating:s,overlay:c,link:az(e,t),fetcher:Zw(e,t),tickerItem:Kw(e)}}var uz=["onTap","onTapStart","onClick","onMouseDown","onMouseUp"],mz=(e,t)=>{if(!Zt(t)||!nb(e,t))return!1;let o=t.getActions(E);return uz.some(r=>{if(r in o){let i=o[r];return i?i.length>0:!1}return!1})},qw=Ot((e,t,o)=>{if(!En(e)||Go(e))return;if(z(e.cursor)&&he(o)){t.cursor=o.cssVariableDefinitions.create(e,"cursor");return}if(e.cursor&&ZS(e.cursor)){t.cursor=e.resolveValue("cursor",o?.variableOverrides),Ie(e)&&e.hasLinks()&&(t.cursor=void 0,t[KS]=e.cursor);return}if(!he(o))return;let r=Ve(e)&&o.topLevelVariantsWithGestures[e.id];t.cursor=r||mz(o.treeStore.tree,e)?"pointer":void 0});var Yw=Ot((e,t)=>{io(e)&&(t.textDecoration="none")});var Qw=Ot((e,t,o)=>{ve(e)&&nn(e)&&o?.renderAsListNodes?.has(e.id)&&(t.listStyle="none",t.margin=0)});var eD=Ot((e,t,o)=>{if(!(!Vs(e)||!or(e))&&lS(e)){if(z(e.overscrollBehavior)&&he(o)){t.overscrollBehavior=o.cssVariableDefinitions.create(e,"overscrollBehavior");return}t.overscrollBehavior=e.resolveValue("overscrollBehavior",o?.variableOverrides)}});var tD=Ot((e,t)=>{zc(e)&&(t.scrollMarginTop=X(e.scrollMarginTop)&&e.scrollTargetEnabled&&e.scrollMarginTop>0?e.scrollMarginTop:void 0)});var oD=Ot((e,t,o)=>{if(!DI(e))return;if(z(e.tapHighlightColor)&&he(o)){t.WebkitTapHighlightColor=o.cssVariableDefinitions.create(e,"tapHighlightColor");return}let r=e.resolveValue("tapHighlightColor",o?.variableOverrides);if(Nr(r)){t.WebkitTapHighlightColor=ws(r);return}t.WebkitTapHighlightColor=r?Ta.toRgbString(r):void 0});var rD=Ot((e,t,o)=>{if(!Id(e))return;let r=e.resolveValue("textSelection");t["--selection-color"]=r?.color,t["--selection-background-color"]=r?.backgroundColor});var iD=Ot((e,t,o)=>{if(ks(e)){if(z(e.userSelect)&&he(o)){t.userSelect=t.WebkitUserSelect=o.cssVariableDefinitions.create(e,"userSelect");return}t.userSelect=t.WebkitUserSelect=cS(e)?e.resolveValue("userSelect",o?.variableOverrides):void 0}});var nD=Ot((e,t,o)=>{if(!Qs(e)||!he(o)||o.scopeType!=="LayoutTemplate")return;let r=o.treeStore?.tree.getParent(e.id);fe(r)&&(t.viewTransitionName=e.viewTransitionNone===!0?Mh(e,o.serializationId,!0):void 0)});var sD=Ot((e,t,o)=>{let r=hz(e,o);t.willChange=r}),aD=`var(${tC}, transform)`;function hz(e,t){if(bd(t?.scopeType)&&(Ob(e)&&(bb(e)||Nb(e))||t?.scopeType!=="SmartComponent"&&Sb(e)&&gb(e.styleAppearEffectTrigger)==="onMount"))return aD;if(!gt(e)||!or(e)||!sS(e.overflow))return;let o=ei(e)&&e.radius,r=Si(e)&&e.radiusPerCorner&&(e.radiusBottomLeft||e.radiusBottomRight||e.radiusTopLeft||e.radiusTopRight);if(o||r)return`var(${eC}, transform)`;if(Zb(e))return`var(${oC}, filter)`}var gz=zn(tN,wb,kN,qw,AI,wN,MI,qb,OI,WI,ON,zb,Yw,Qw,nI,eD,ST,Qb,tD,rD,zI,tI,oD,MN,oI,dI,lI,iD,nD,sD,uI),jh=zn(eN,gT,rI,VN,yT,iI,Kb,CT,DN,WN,BN,zN,IT,kb,Yb,vT,TT,aI,sI,bT,dw),Uh=zn(cI,eI);function yz(e,t){return at(e)||co(e)||_(e)?"relative":Ue(e)?"fixed":hi(e)||lt(t)?"relative":"absolute"}function Jh(e,t,o,r){let i={position:yz(t,e),zIndex:Ue(t)?pI(t,o):void 0,...r},n=o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate"||o.nodeRendersWithMotion?.get(e)===!1,a={};return o.llmSnapshot&&Object.assign(a,i),gz(e,o.llmSnapshot?a:i,o),jh(e,!o.llmSnapshot&&n?i:a,o),$c(e)&&o.scopeType==="SmartComponent"&&xl(e.html,a),Uh(e,a,o),{css:i,style:Ft(a)?void 0:a}}var es={opacity:1,rotate:0,borderTopLeftRadius:0,borderTopRightRadius:0,borderBottomRightRadius:0,borderBottomLeftRadius:0,cornerShape:`superellipse(${BS})`,backgroundColor:"rgba(0, 0, 0, 0)",boxShadow:"none",filter:"none",WebkitFilter:"none",backdropFilter:"none",WebkitBackdropFilter:"none",mask:"none",WebkitMask:"none",textShadow:"none",scale:1,rotateX:0,rotateY:0,skewX:0,skewY:0,z:0,padding:0};function Cz(){let e={},t={},o={},r={},i={},n={};return[[new ki({fillEnabled:!0,fillType:"color",fillColor:"rgba(0, 0, 0, 0)",borderWidth:0,borderEnabled:!0,borderColor:"rgba(0, 0, 0, 0)",borderStyle:"solid"}),e],[new xN,t],[new Rd,o],[new $n({codeComponentIdentifier:"framer/Page"}),r],[new vN,i],[new wi,n]].forEach(([l,s])=>{jh(l,s,{}),Uh(l,s,{})}),{FrameNode:Object.assign(e,es),TextNode:Object.assign(t,es),RichTextNode:Object.assign(o,es),CodeComponentNode:Object.assign(r,es),SVGNode:Object.assign(i,es),ShapeContainerNode:Object.assign(n,es)}}var lD=Cz();function cD(e,t,o){if(!(!o||M(e.__class)||yo(t.style))&&!(!M(t.style)&&!ze(t.style)))for(let r in o){if(M(t.style?.[r])&&M(o[r])||t.style&&r in t.style&&!M(t.style[r])&&!M(o[r]))continue;let i=lD?.[e.__class];if(!i||!(r in i)){M(o[r])&&(o[r]=m`undefined`);continue}let n=i[r];if(M(t.style?.[r])){let a=t.style??{};a[r]=n,t.style=a}M(o[r])&&(o[r]=n)}}function ea(e,t,o){let r=e.originalid===t?e.id:$o(e.id,t);return o.get(r)}function Sz(e){let t=e.children?.find(i=>Xr(i));if(!t)return;let o=e.itemsOrder?e.itemsOrder.indexOf(t.getPrimaryId()):e.children?.indexOf(t);if(!X(o)||o<0||!e.itemsOrder&&e.children&&o===e.children.length-1)return;let r=new Map;return e.itemsOrder?e.itemsOrder.forEach((i,n)=>{if(i===t.originalid)return;let a=n<o?-1e3:1e3;r.set(i,n+a)}):e.children?.forEach((i,n)=>{if(i===t)return;let a=n<o?-1e3:1e3;r.set(i.getPrimaryId(),n+a)}),r}function dD(e,t){if(t==="LayoutTemplate"&&fe(e))return Sz(e);let o=e.itemsOrder;if(!o||o.length<1)return;let r=new Map;return o.forEach((i,n)=>{r.set(i,n)}),r}var vz=e=>(t,o)=>!o||!e?t:{...t,...o[e]};function fD(e,t,o,r){let{combinedVariableControlMap:i}=e.combineVariableControlMap(o.treeStore.tree,void 0,r.inheritedControlMap,E,E.activeBundleHash);t&&(Cf(t,e),bz(t,e));let n=wr(e),a=r.subqueries;Et(e)&&vt(e)?a=new Mp(e,n?void 0:r.subqueries):il(e)&&(a=void 0);let l=o.scopeType==="WebPage",s=o.scopeType==="SmartComponent",c=r.inCodeOverride||!M(Op(e,o))||Wp(e,o).length>0,d=o.treeStore.tree.get(r.lastRepeaterId),p=o.kitSectionsStructure.addSection(e),f={isAnyVariantAnImage:ro(e),isAnyVariantALink:io(e)&&!Ge(e),isAnyVariantAnEffect:of(e,o.scopeType),isAnyVariantAVariantAppearEffect:Qm(e),isAnyVariantATickerEffect:Ji(e),isAnyVariantARef:l&&An(e)||lt(e)||_(e)&&Et(d)&&Pi(e,d),isAnyVariantATransitionOverride:s&&(Ym(e)||Sm(e)),isAnyVariantOptimizedAppearEffect:tf(e,o),itemsOrderOverrides:{},hiddenInVariants:new Set(r.hiddenInVariants),inCodeOverride:c,inheritedControlMap:i,isAnyVariantFloating:lt(e),isAnyVariantPaginated:n,isAnyVariantColumnMasonryLayout:$r(e),identifiers:_(e)?new Set([uD(e)]):void 0,subqueries:a,kitSectionNodeId:p};o.trackingIds.add(e),o.kitSectionsStructure.addCustomizations(e,r.kitSectionNodeId),_o(e)&&o.formIds.add(e.id),o.scopeType==="LayoutTemplate"&&La(e)&&fe(e)&&(f.itemsOrderOverrides[e.id]=dD(e,o.scopeType));let h=Oh(e,o),v=new Map,T=Wh(e,o,r,c),N=[],w=hm(e);for(let _e of o.variants){let Ce=ea(_e,e.id,o.treeStore.tree);if(!Ce)continue;Ce.combineVariableControlMap(o.treeStore.tree,void 0,r.inheritedControlMap,E,E.activeBundleHash);let no=o.treeStore.tree.getParent(Ce.id);if(f.hiddenInVariants.has(_e.id))continue;no&&Cf(no,Ce);let bo=pD(_e),Yo=Oh(Ce,o);if(!Jo(Yo,v.get(_e.replicaInfo?.inheritsFrom??"")??h)){let lr=Go(_e);v.set(bo,{value:Yo,isGesture:lr})}else(o.scopeType==="WebPage"||o.scopeType==="LayoutTemplate")&&h!==!0&&v.set(bo,{value:h});if(Yo===!1){f.hiddenInVariants.add(_e.id);continue}io(Ce)&&!Ge(Ce)&&(f.isAnyVariantALink=!0),ro(Ce)&&(f.isAnyVariantAnImage=!0),of(Ce,o.scopeType)&&(f.isAnyVariantAnEffect=!0),Qm(Ce)&&(f.isAnyVariantAVariantAppearEffect=!0),tf(Ce,o)&&(f.isAnyVariantOptimizedAppearEffect=!0),Ji(Ce)&&(f.isAnyVariantATickerEffect=!0),wr(Ce)&&(f.isAnyVariantPaginated=!0),_(Ce)&&f.identifiers?.add(uD(Ce)),$r(Ce)&&(f.isAnyVariantColumnMasonryLayout=!0),o.trackingIds.add(Ce);let $t=hm(Ce);if($t){w||=$t;let{stops:lr,info:bn}=$t;w.stops=Math.max(w?.stops,lr??0),w.info||=bn}o.scopeType==="WebPage"?An(Ce)&&(f.isAnyVariantARef=!0):o.scopeType==="SmartComponent"&&($b(Ce)&&(f.isAnyVariantAnEffect=!0),(Ym(Ce)||Sm(Ce))&&(f.isAnyVariantATransitionOverride=!0)),bi(Ce)&&(f.itemsOrderOverrides[_e.id]=dD(Ce,o.scopeType)),T=T||Wh(Ce,o,r,c),N.push({nodeInVariant:Ce,variant:_e})}M(w)||o.nodesWithAnyGradientFill.set(e.id,w);let{condition:R,classNames:B,classNameExpressions:G}=o.renderFunctions.create(h,v);if(R===!1)return;o.nodeRendersWithMotion.set(e,T);let K=e.parentid?o.renderAsListNodes.get(e.parentid):!1;nn(e)&&ub(e.htmlTag)&&!K&&o.renderAsListNodes.set(e.id,!0);let oe=t&&$r(t),pe=r?.itemsOrderOverrides?.[o.rootId],{css:Ee,style:q}=Jh(e,t,o,!oe&&pe?{order:mD(e,pe)}:void 0),We=yr(e),$e=iw(e,t,o),Y=o.css.addRule(Ee,e,{container:We,hasScopingSelector:$e}),Dt=_h(e,o,f,r,{className:Y,style:q});o.hitTargets.recordClassName(e,o.rootId,Y);let J={link:void 0,container:void 0,element:void 0,floating:void 0,overlay:void 0,transition:void 0,fetcher:void 0,componentViewport:void 0,tickerItem:void 0},ue={variants:void 0,css:void 0};if(Ie(e))for(let _e of e.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(_e.id);let me=We?Dt.container:Dt.element;C(!M(me),"Target will always be defined if the node needs a container");for(let{nodeInVariant:_e,variant:Ce}of N){let no=pD(Ce);if(o.hitTargets.recordClassName(_e,Ce.id,Y),Ie(_e))for(let mo of _e.getStylePresetsForCodeGeneration(o.treeStore.tree))o.css.addSharedStyle(mo.id);let bo=o.treeStore.tree.getParent(_e.id),{itemsOrderOverrides:Yo}=r,sr=Yo?.[Ce.id],$t=bo&&$r(bo),lr=Jh(_e,bo,o,!$t&&sr?{order:mD(e,sr)}:void 0),bn=vz(Ce.replicaInfo?.inheritsFrom),li=Il(lr.css,bn(Ee,ue.css),"css");if(li){let mo=Go(Ce);ue.css||(ue.css={}),ue.css[Ce.id]=li,o.css.addRule(li,_e,{variant:Ce,hasScopingSelector:$e,container:We,gesture:mo?Ce.gesture:void 0,scope:mo?Ce.replicaInfo?.inheritsFrom:o.scopeType==="SmartComponent"?Ce.id:void 0})}o.scopeType==="SmartComponent"&&cD(_e,me,lr.style);let hs=_h(_e,o,f,r,{className:Y,style:me.style}),gs=Il(lr.style,bn(q,ue.variants));if(gs)if(o.scopeType==="SmartComponent"||o.llmSnapshot)ue.variants||(ue.variants={}),ue.variants[no]=gs;else{let mo=We?"container":"element";J[mo]=Iz(lr.style,J[mo],no)}let cr;for(cr in hs){let mo=Il(hs[cr],bn(Dt[cr],J[cr]),"js");if(!mo)continue;J[cr]||(J[cr]={[no]:{}});let ga=J[cr][no];J[cr][no]=ze(ga)?Object.assign(ga,mo):mo}}let Ae=new Set(B);f.isAnyVariantALink&&Ae.add(o.linkClassName);let Ct=new P.Set(G),Pt=f.isAnyVariantARef||o.events.relativeOverlayPrimaryTriggers.has(e.id);return ee.assign(me,{variants:ue.variants,className:Tz(me.className,Ae,Ct,o.imports),ref:me.ref??(Pt?o.elementIds.ref(e):me.ref),[tS]:f.isAnyVariantOptimizedAppearEffect?o.appearIds.create(e.id):void 0}),o.renderConditions.set(e.id,R),{...f,propsForLink:{props:Dt.link,overrides:J.link},propsForElement:{props:Dt.element,overrides:J.element},propsForContainer:{props:Dt.container,overrides:J.container},propsForTransition:{props:Dt.transition,overrides:J.transition},propsForFetcher:{props:Dt.fetcher,overrides:J.fetcher},renderCondition:R,propsForFloating:{props:Dt.floating,overrides:J.floating},propsForOverlay:{props:Dt.overlay,overrides:J.overlay},propsForComponentViewport:{props:Dt.componentViewport,overrides:J.componentViewport},propsForTickerItem:{props:Dt.tickerItem,overrides:J.tickerItem}}}function Tz(e,t,o,r){if(t.size===0&&o.size===0)return e;if(o.size===0){let i=Array.from(t).join(" ");return e?tt`${e} ${i}`:i}else{let i=r.addImport("framer",{exportSpecifier:"cx"});return e?P.fn(i,e,...t,...o):P.fn(i,...t,...o)}}function bz(e,t){t.cache.ancestorRepeaterIds=cp(e,e.cache.ancestorRepeaterIds??[])}function pD(e){return Go(e)?`${e.replicaInfo.inheritsFrom}-${e.gesture}`:e.id}function Iz(e,t,o){let r=t??{};return r[o]=r[o]??{},r[o].style=r[o].style??{},Object.assign(r[o].style,e),r}function hD(e,t,o){let r={background:"transparent",height:0,width:0,position:"relative",flexGrow:1,margin:0,marginBottom:nf(t,o)};for(let i of o.variants){let n=ea(i,e.id,o.treeStore.tree);if(!n)continue;let a=Il({...r,marginBottom:nf(i,o)},r);!a||Ft(a)||o.css.addRule(a,n,{variant:i})}return o.css.addRule(r,e)}function uD(e){return Ui(e)?fT:e.codeComponentIdentifier}function mD(e,t){return t.get(e.id)??t.size}var Gp=class{constructor(){L(this,"cssWidthCache",new Map);L(this,"heightCache",new Map);L(this,"yPositionCache",new Map);L(this,"verticalStackLayoutInfoCache",new Map);L(this,"gridLayoutInfoCache",new Map);L(this,"computationCache",new Map);L(this,"testing",{getCSSWidthCache:()=>this.cssWidthCache,getHeightCache:()=>this.heightCache})}getCSSWidth(t){return this.cssWidthCache.get(t)}setCSSWidth(t,o){this.cssWidthCache.set(t,o)}getHeight(t){return this.heightCache.get(t)}setHeight(t,o){this.heightCache.set(t,o)}getYPosition(t){return this.yPositionCache.get(t)}setYPosition(t,o){this.yPositionCache.set(t,o)}getVerticalStackLayoutInfo(t){return this.verticalStackLayoutInfoCache.get(t)}setVerticalStackLayoutInfo(t,o){this.verticalStackLayoutInfoCache.set(t,o)}getGridLayoutInfo(t){return this.gridLayoutInfoCache.get(t)}setGridLayoutInfo(t,o){this.gridLayoutInfoCache.set(t,o)}memo(t,o){if(this.computationCache.has(t))return this.computationCache.get(t);let r=o();return this.computationCache.set(t,r),r}};var Xh=class{constructor(){L(this,"heightNodes",new Set)}startComputingHeightFor(t){this.heightNodes.add(t)}isComputingHeightFor(t){return this.heightNodes.has(t)}finishComputingHeightFor(t){this.heightNodes.delete(t)}};function Nz(e,t){return(o,r,i=void 0)=>{if(Qt(o))return t.createComputedValue(o,r,i);if(U(o))return e.create(o);Ut(o,"all dynamic values should be handled above")}}function gD(e,t,o){return{tree:e,cache:new Gp,workInProgress:new Xh,getVariableBinding:Nz(t,o)}}var Te=class extends Error{};function be(e,t){let o=Math.round(e*1e4)/1e4;return{type:"css-const",expr:t?`${o}${t}`:`${o}`,value:e,unit:t}}var $p={"+":"-","-":"+","*":"/","/":"*"};function Je(e,t,o){if(t.type==="css-const"&&o.type==="css-const"){if(t.unit===o.unit){if(e==="+")return be(t.value+o.value,t.unit);if(e==="-")return be(t.value-o.value,t.unit);if(e==="min")return be(Math.min(t.value,o.value),t.unit);if(e==="max")return be(Math.max(t.value,o.value),t.unit)}else if(ts(e)&&(t.value===0||o.value===0))return o.value!==0?o:t;if(e==="*"&&(!t.unit||!o.unit))return be(t.value*o.value,t.unit||o.unit);if(e==="/"&&!o.unit)return be(t.value/o.value,t.unit)}if(ts(e)){if(o.type==="css-const"&&o.value===0)return t;if(t.type==="css-const"&&t.value===0)return o}else if(_p(e)){if(o.type==="css-const"&&o.value===1)return t;if(t.type==="css-const"&&t.value===1)return o}else if(e==="min"||e==="max"){if(t.type==="css-op"&&t.op===e&&yD(t,o))return t;if(o.type==="css-op"&&o.op===e&&yD(o,t))return o;if(Jo(t.expr,o.expr))return t}t.type==="css-op"&&t.right.type==="css-const"&&(ts(e)&&ts(t.op)?(o=Je(e==="+"?t.op:$p[t.op],o,t.right),t=t.left):_p(e)&&_p(t.op)&&(o=Je(e==="*"?t.op:$p[t.op],o,t.right),t=t.left));let r;if(ts(e))o.type==="css-const"&&o.value<0&&(e=$p[e],o=be(-o.value,o.unit)),e==="+"?r=tt`${ta(t)} + ${o.expr}`:e==="-"?o.type==="css-op"&&!jp(o.op)?r=tt`${ta(t)} - (${o.expr})`:r=tt`${ta(t)} - ${ta(o)}`:Ut(e);else if(_p(e)){if(o.type==="css-const"&&o.value<1){let i=be(1/o.value,o.unit);i.expr.length<o.expr.length&&(e=$p[e],o=i)}e==="/"&&o.type==="css-op"&&!jp(o.op)?r=tt`${ta(t)} / (${o.expr})`:r=tt`${ta(t)} ${e} ${ta(o)}`}else jp(e)?r=tt`${e}(${t.expr}, ${o.expr})`:Ut(e,`unhandled op ${e}`);return{type:"css-op",expr:r,op:e,left:t,right:o}}function Up(e){switch(e.type){case"number-const":return be(e.value,"px");case"number-template":return pn(e.expr);default:Ut(e)}}function pn(e){return{type:"css-template",expr:e}}function ts(e){return e==="+"||e==="-"}function _p(e){return e==="*"||e==="/"}function jp(e){return e==="min"||e==="max"}function yD(e,t){return Jo(e.left.expr,t.expr)||Jo(e.right.expr,t.expr)}function ta(e){return e.type==="css-op"&&ts(e.op)?tt`(${e.expr})`:e.expr}function Jp(e){return e.type==="css-template"||e.type==="css-const"||e.type==="css-op"&&jp(e.op)?e.expr:tt`calc(${e.expr})`}function xz(e,t,o,r,i,n){let a=t??Lb;if(!n)return!0;let l=e.filters.filter(s=>{if(!s.itemKey)return!1;let c=n.properties[s.itemKey];return!(!c||c.type!=="boolean"&&s.transforms.length===0)});return l.length===0?!0:l[a==="all"?"every":"some"](s=>{let c=s.itemKey;C(c!==null,"itemKey should not be null");let d=n.properties[c];C(d,"control should exist");let p=o(c),f=r.getVariableControlByKey(c);return s.transforms.reduce((h,v)=>fv(h,v,r,i,f,void 0,void 0),p)})}function CD(e,t,o,r,i,n){return e?o.filter(a=>xz(e,t,l=>a[l],r,i,n)):o}function Pz(e,t){return t?Array.from(e).reverse():e}function Vz(e,t){if(t===void 0||t===0)return e;let o=Array.from(e);return o.splice(0,t),o}function kz(e,t){return e.length<=t?e:e.slice(0,t)}function SD(e,t,o,r,i=15){if(i&1&&(t=CD(e.collectionFilters,e.collectionFiltersOperator,t,e.cache,o,r)),i&2&&(t=Pz(t,e.collectionReverse)),i&4&&(t=Vz(t,e.collectionStartOffset)),i&8){let n=e.collectionLimit??1/0,a=e.collectionPaginationPageSize??1/0,l=Math.min(n,a);t=kz(t,l)}return t}var rr=1e3,vD=Symbol("Affects Layout: Indeterminate");function Xp(e){return e===vD}function Fi(e,t,o,r){return ht(e)||td(e,t)&&Vr(e)||ed(o,e)&&vo(e)||Rr(e)&&e.visible===!1?!1:Rr(e)&&z(e.visible)?r?e.isVisible():vD:!0}function Gt(e){if(!Ho(e))return 0;if(z(e.padding))throw new Te;return e.paddingPerSide?e.paddingTop??0:e.padding??0}function Lo(e){if(!Ho(e))return 0;if(z(e.padding))throw new Te;return e.paddingPerSide?e.paddingBottom??0:e.padding??0}function Xo(e){return z(e)?0:e??0}var Rz=[];function un(e){let t=(La(e)?e.getChildrenInVisualOrder():e.children)??Rz;if(Et(e)){let o=e.collectionRepeatedItemId?t.findIndex(n=>n.id===e.collectionRepeatedItemId):0,r=t[o];if(!r)return t;let i=wz(e);return t.slice(0,o).concat(Array(i).fill(r)).concat(t.slice(o+1))}return t}function wz(e){if((e.collectionFilters?.filters?.length??0)>0)return 1;let t=E.dataForIdentifier(e.dataIdentifier),o=WT(void 0,t),r=Object.keys(o).length,i=Array(r).fill({});return SD(e,i,void 0,t,14).length}function Pl(e){let t=e.resolveValue("fillImage"),o=IC(t)?t.src:t;if(!o)return;let r=XT(o);if(!(!r||!Number.isFinite(r.width)||!Number.isFinite(r.height)||r.width<=0||r.height<=0))return r.width/r.height}function Zp(e,t){let o=e.widthType===0,r=ka(e)&&e.usesDOMRectCached()&&e.cache.getRawDOMRect(e.id)!==null;if(!(!o&&!r))return t.tree.getRect(e).width}var bD=";";function Kh(e,t){return`${e}${bD}${t}`}function Dz(e){let[t,o]=e.split(bD);return C(o!==void 0,"parseCellCoordinate(), satisfying TypeScript: columnIndex must exist: "+e),[Number(t),Number(o)]}function TD(e,t,o,r){let i=0;for(let n=0;n<o;n++){let a=Kh(t,n);if(e.has(a)){i=0;continue}if(i++,i!==r)continue;let s=n-(r-1);return C(s>=0,"getColumnIndexForItem(), column index should be at least 0"),s}return-1}function Lz(e,t,o,r,i,n,a){let l=r+(n-1);C(a>l,"fillCellsForItem(), column count has to be larger than maxColumnIndex");let s=o+(i-1);for(let c=r;c<=l;c++)for(let d=o;d<=s;d++){let p=Kh(d,c);t.set(p,e)}}function Fz(e,t){return!wn(e)||z(e.gridItemColumnSpan)?1:e.gridItemColumnSpan==="all"?t:Math.min(e.gridItemColumnSpan??1,t)}function Kp(e,t){return!wn(e)||t.gridRowHeightType==="fit"||z(e.gridItemRowSpan)?1:e.gridItemRowSpan??1}var Zh=class{constructor(t,o,r,i){this.gridLayout=t;this.rowCount=o;this.columnCount=r;this.filledRowCount=i;L(this,"coordinateCache")}getGridItem(t,o){let r=Kh(t,o);return this.gridLayout.get(r)??null}findCoordinates(t){if(!this.coordinateCache){this.coordinateCache=new Map;for(let[o,r]of this.gridLayout){let[i,n]=Dz(o),a=this.coordinateCache.get(r);(!a||i<a.rowIndex||n<a.columnIndex)&&this.coordinateCache.set(r,{rowIndex:i,columnIndex:n})}}return this.coordinateCache.get(t)??null}isEmpty(){return this.gridLayout.size===0}};function ID(e,t){let o=e.gridColumnCount;if(!X(o))return null;let r=new Map,i=0,n=-1;for(let s of un(e)){if(!Fi(s,e,t,!0))continue;let c=Fz(s,o),d=Kp(s,e),p=TD(r,i,o,c);for(;p===-1;)i++,p=TD(r,i,o,c);Lz(s.id,r,i,p,d,c,o);let f=i+(d-1);n=Math.max(n,f)}let a=n+1,l=Math.max(e.gridRowCount??0,a);return new Zh(r,l,o,a)}function oa(e,t){let o=t.cache.getGridLayoutInfo(e.id);if(o)return o;let r=ID(e,t.tree);if(r===null)throw new Te;return t.cache.setGridLayoutInfo(e.id,r),r}function Xle(e,t){return ID(e,t)?.filledRowCount}var Ez={type:"number-const",value:0},Az={type:"number-const",value:1/0},Mz={type:"number-const",value:rr};function ye(e){return e===0?Ez:e===1/0?Az:e===rr?Mz:{type:"number-const",value:Bz(e)}}function H(e,...t){return qp(e,0,t.length,t)}function qp(e,t,o,r){ho(0<=t&&t<=o&&o<=r.length,"start and end must be within the bounds of operands");let i=o-t;if(i===0)return null;if(i===1){let c=r[t];return sc(c)?ye(c):c}let{hasTemplateOperands:n,operationResult:a}=Oz(t,o,r,e);if(!n)return ye(a);let l=Wz(t,o,r),s=e==="min"||e==="max"?P.fn(m`Math.${new P(e)}`,...l):new P(`(${mt(l,` ${e} `)})`);return Vl(s,a,!0)}function Oz(e,t,o,r){let i=!1,n;for(let a=e;a<t;a++){let l=o[a],s;sc(l)?s=l:l.type==="number-const"?s=l.value:l.type==="number-template"?(i=!0,s=Fo(l)):Ut(l),M(n)?n=s:n=zz(r,n,s)}return ho(n!==void 0,"resultEstimate must be computed after walking over all operands"),{hasTemplateOperands:i,operationResult:n}}function Wz(e,t,o){let r=[];for(let i=e;i<t;i++){let n=o[i];sc(n)?r.push(m`${n}`):n.type==="number-const"?r.push(m`${n.value}`):r.push(n.expr)}return r}function Vl(e,t,o=!1){return{type:"number-template",expr:o?e:m`(${e})`,impreciseEstimate:t}}function zz(e,t,o){switch(e){case"+":return t+o;case"-":return t-o;case"*":return t*o;case"/":return t/o;case"min":return Math.min(t,o);case"max":return Math.max(t,o);default:Ut(e)}}function Bz(e){return Math.round(e*1e4)/1e4}function Fo(e){return e.type==="number-const"?e.value:e.impreciseEstimate}var qh=class{constructor(t,o,r,i,n){this.columns=t;this.nodeToAccurateCoordinateMap=o;this.nodeToRoughCoordinateMap=r;this.gap=i;this.contentHeight=n;L(this,"frToPxCache",new Map)}walkColumn(t,o){if(this.columns[t])for(let r of this.columns[t])o(r.nodeId)}getStackItem(t,o){return this.columns[t]?.[o]?.nodeId??null}findCoordinates(t){return this.findAccurateCoordinates(t)??this.findRoughCoordinatesOfConditionallyVisibleNode(t)}findAccurateCoordinates(t){return this.nodeToAccurateCoordinateMap.get(t)??null}findRoughCoordinatesOfConditionallyVisibleNode(t){return this.nodeToRoughCoordinateMap.get(t)??null}getFrToPxForColumn(t){let o=this.columns[t];if(!o)return null;if(!this.frToPxCache.has(t)){let r=[],i=[];for(let d of o)d.type==="regular"?r.push(d):d.type==="fr"?i.push(d):Ut(d);let n=r.reduce((d,p)=>H("+",d,p.getHeight()),ye(0)),a=this.gap*(o.length-1),l=H("-",this.contentHeight,H("+",n,a)),s=i.reduce((d,p)=>d+p.frUnits,0),c=H("/",l,Math.max(s,1));for(i=i.sort((d,p)=>Fo(p.getMinHeightPerFr())-Fo(d.getMinHeightPerFr()));i[0]&&Fo(i[0].getMinHeightPerFr())>Fo(c);)l=H("-",l,i[0].getMinHeight()),s-=i[0].frUnits,c=H("/",l,Math.max(s,1)),i.shift();for(i=i.sort((d,p)=>Fo(d.getMaxHeightPerFr())-Fo(p.getMaxHeightPerFr()));i[0]&&Fo(i[0].getMaxHeightPerFr())<Fo(c);)l=H("-",l,i[0].getMaxHeight()),s-=i[0].frUnits,c=H("/",l,Math.max(s,1)),i.shift();this.frToPxCache.set(t,H("max",ye(0),c))}return this.frToPxCache.get(t)??null}};function Yp(e,t,o,r,i){let n=t.cache.getVerticalStackLayoutInfo(e.id);if(n)return n;let a=Hz(e,t,o,r,i);return t.cache.setVerticalStackLayoutInfo(e.id,a),a}function Hz(e,t,o,r,i){let n=Yh(e),a=ko(n),l=H("-",o(e),Gt(e)+Lo(e)),s=Fo(l),c=new Map,d=new Map,p=[],f=0;for(let h of un(e)){if(!(Pe(h)&&qe(h)))continue;let v=Fi(h,e,t.tree,!1);if(v===!1)continue;if(Xp(v)){d.set(h.id,{columnIndex:Math.max(p.length-1,0),columnItemIndex:Math.max(p[p.length-1]?.length??0,0)});continue}let T=Gz(h,t,o,r,i);if(e.stackWrapEnabled){let w=Fo(T.type==="fr"?T.getMinHeight():T.getHeight());Math.ceil(f+a+w)>Math.ceil(s)||p.length===0?(p.push([T]),f=w):(p[p.length-1].push(T),f+=a+w)}else p[0]=p[0]??[],p[0].push(T);c.set(h.id,{columnIndex:p.length-1,columnItemIndex:p[p.length-1].length-1})}return new qh(p,c,d,a,l)}function Gz(e,t,o,r,i){if(e.heightType===3){let n={nodeId:e.id,type:"fr",frUnits:e.height,getMinHeight:()=>t.cache.memo(`stack-getMinHeight-${e.id}`,()=>r(e)),getMaxHeight:()=>t.cache.memo(`stack-getMaxHeight-${e.id}`,()=>i(e)),getMinHeightPerFr:()=>t.cache.memo(`stack-getMinHeightPerFr-${e.id}`,()=>H("/",n.getMinHeight(),n.frUnits)),getMaxHeightPerFr:()=>t.cache.memo(`stack-getMaxHeightPerFr-${e.id}`,()=>H("/",n.getMaxHeight(),n.frUnits))};return n}else return{nodeId:e.id,getHeight:()=>t.cache.memo(`stack-getHeight-${e.id}`,()=>o(e)),type:"regular"}}function Yh(e){return gc(e)?Xo(e.gap):0}function ND(e,t){if(e.textFitViewBoxSize)throw new Te;let o=e.widthType!==2,r=0;for(let[i,n]of e.getProsemirrorTextBlocks(!1).entries()){let a,[l,s]=jz(n,t);if(s==="px")a=l;else{let p=s==="%"?l/100:l;a=$z(n,t)*p}let c=0;i>0&&(c=Uz(n,e,t)??0);let d=1;if(o){let p=n.attrs.tag;p==="h1"||p==="h2"||p==="h3"||p==="h4"||p==="h5"||p==="h6"?d=1:p==="p"||p==="div"?d=5:Ut(p)}r+=c+a*d}return r}function $z(e,t){let o=_z(e,t);return e.descendants(r=>{if(!Tv(r))return;let n=r.marks.find(vv)?.attrs.inlineStyles.fontSize;if(z(n))throw new Te;if(M(n))return;let[a,l="px"]=Xi(n)?n:[n],s=gm(a,l,"px");s>o&&(o=s)}),o}function _z(e,t){if(Wc(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,oo);if(r){let[i,n]=Fc(r.fontSize)?Fn(r.fontSize):[r.fontSize,"px"];return n==="rem"?lo(i*OS,0):i}}if(!M(e.attrs.inlineStyles.fontSize)){let o=e.attrs.inlineStyles.fontSize;if(z(o))throw new Te;let[r,i="px"]=Xi(o)?o:[o];return gm(r,i,"px")}return Fn(ym.fontSize)[0]}function jz(e,t){if(Wc(e)){let o=e.attrs.textStylePreset,r=t.getNodeWithTrait(o,oo);if(r)return r.lineHeight}return M(e.attrs.blockStyles.lineHeight)?ym.lineHeight:e.attrs.blockStyles.lineHeight}function Uz(e,t,o){if(Wc(e)){let r=e.attrs.textStylePreset,i=o.getNodeWithTrait(r,oo);if(i)return i.paragraphSpacing}return t.paragraphSpacing}var xD=nt("simulateHeight"),Jz=200;function PD(e,t){try{let o=rt(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof Te)return;xD.reportWithoutLogging(o,{nodeId:e.id}),xD.warnOncePerMinute(`Can\u2019t simulate the height for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function rt(e,t){let o=t.cache.getHeight(e.id);if(o!==void 0)return o;if(t.workInProgress.isComputingHeightFor(e.id))throw new Error("Detected a circular walk in simulateHeight(): we\u2019re entering a node which is already being computed. This would result in a call stack overflow. Exiting early.");let r;try{t.workInProgress.startComputingHeightFor(e.id),r=Xz(e,t)}finally{t.workInProgress.finishComputingHeightFor(e.id)}return t.cache.setHeight(e.id,r),r}function Xz(e,t){if(!Ba(e))throw new Te;let o=t.tree.getNodeParent(e);if(Ue(e))return ye(rr);if(C(Pe(e)&&qe(e),"Can\u2019t calculate the height on a node when it doesn\u2019t have size information"),Pa(e)){let i=t.tree.getRect(e).height;return Vl(m`${ne.componentViewport}?.height || ${i}`,i)}if(Bs(e))return wt.startFromRowHeightMultipliedBySpan(e,t).getWithConstraints();if(!en(e,o)&&ve(e)&&e.top!==null&&e.bottom!==null)return(vo(e)?wt.startFromFixedValue(ye(rr),e,t):wt.startFromParentOuterHeight(e,t)).op((n,a)=>{let l=a.top,s=a.bottom;return C(l!==null&&s!==null,"Satisfying TypeScript"),H("-",n,ye(l+s))}).getWithConstraints();if(e.heightType===0)return wt.startFromFixedValue(ye(e.height),e,t).getWithConstraints();if(e.heightType===1){C(o,"A node can\u2019t have a % height without a parent");let i;return vo(e)?i=wt.startFromFixedValue(ye(rr),e,t):Vr(e)?i=wt.startFromParentOuterHeight(e,t):Xt(o)&&wn(e)?i=wt.startFromRowHeightMultipliedBySpan(e,t):i=wt.startFromParentInnerHeight(e,t),i.op((n,a)=>H("*",n,ye(a.height))).getWithConstraints()}if(e.heightType===4)return wt.startFromFixedValue(ye(e.height*rr),e,t).getWithConstraints();if(e.heightType===3){if(C(!Vr(e)&&!vo(e),"FractionOfFreeSpace height is not supported for fixed or absolute node"),C(o,"A node can\u2019t have a fractional height without a parent"),!to(o)&&Xt(o)){let i=Qp(e,t);if(!i)throw new Te;return i}if(C(to(o),"A node can have a fractional height only if it\u2019s inside a stack"),C(o.stackDirection,"A stack must have a direction defined"),z(o.stackDirection))throw new Te;if(o.stackDirection==="horizontal")return wt.startFromParentInnerHeight(e,t).op((i,n)=>H("*",i,ye(n.height))).getWithConstraints();if(o.stackDirection==="vertical"){C(Pe(o)&&qe(o),"A stack must have a size and size-dimension type");let i=Yp(o,t,s=>rt(s,t),s=>eu(s,t),s=>tu(s,t)),n=i.findCoordinates(e.id);C(n,"Node must be found in stack");let a=i.getFrToPxForColumn(n.columnIndex);C(a,"frHeight must be available for column");let l=H("*",a,ye(e.height));return wt.startFromFixedValue(l,e,t).getWithConstraints()}$(o.stackDirection)}if(e.heightType===2){let i=Qp(e,t);if(!i)throw new Te;return i}if(e.heightType===5){if(!ro(e))throw new Te;let i=Pl(e),n=Zp(e,t),a=M(n)||M(i)?e.height:Math.round(n*(1/i));return wt.startFromFixedValue(ye(a),e,t).getWithConstraints()}$(e.heightType)}var Ei,kl,os,Rl,ir,Qh,eg,VD,tg,Zo=class Zo{constructor(t,o,r,i){le(this,Ei);le(this,kl);le(this,os);le(this,Rl);re(this,Ei,t),re(this,kl,o),re(this,os,r),re(this,Rl,i)}static startFromFixedValue(t,o,r){return new Zo(t,()=>{var n,a;let i=r.tree.getNodeParent(o);if(C(i,"Can\u2019t calculate the parent height on a node without a parent"),C(Pe(i)&&qe(i),"Can\u2019t calculate the parent height on a node when a parent doesn\u2019t have size information"),Xt(i)){let l=kt(n=Zo,ir,Qh).call(n,o,i,r);return kt(a=Zo,ir,eg).call(a,l,o,i)}else return rt(i,r)},o,r)}static startFromParentOuterHeight(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call startFromParentOuterHeight() on a node without a parent");let i=rt(r,o);return new Zo(i,()=>i,t,o)}static startFromParentInnerHeight(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call startFromParentInnerHeight() on a node without a parent");let i=H("-",rt(r,o),Gt(r)+Lo(r));return new Zo(i,()=>i,t,o)}static startFromRowHeightMultipliedBySpan(t,o){var a,l;let r=o.tree.getNodeParent(t);C(r&&Xt(r),"Can\u2019t call startFromColumnHeightMultipliedBySpan() if the node isn\u2019t inside a grid");let i=kt(a=Zo,ir,Qh).call(a,t,r,o),n=kt(l=Zo,ir,eg).call(l,i,t,r);return new Zo(n,()=>n,t,o)}op(t){return re(this,Ei,t(A(this,Ei),A(this,os))),this}getWithConstraints(){var t;return re(this,Ei,kt(t=Zo,ir,VD).call(t,A(this,Ei),A(this,os),A(this,Rl),A(this,kl))),A(this,Ei)}};Ei=new WeakMap,kl=new WeakMap,os=new WeakMap,Rl=new WeakMap,ir=new WeakSet,Qh=function(t,o,r){if(C(o.gridRowHeightType!==void 0,"A grid node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed")return C(o.gridRowHeight!==void 0,"A fixed-height grid node must have gridRowHeight defined"),ye(o.gridRowHeight);if(o.gridRowHeightType==="fit"){let i=oa(o,r);if(i.isEmpty())return ye(0);let n=i.findCoordinates(t.id);C(n,"Node must be found in the grid layout");let a=n.rowIndex;return kD(r,i,a)}else if(o.gridRowHeightType==="auto"){let i=rt(o,r),n=H("-",i,Gt(o)+Lo(o)),a=oa(o,r).rowCount,l=Xo(o.gap),s=ko(l),c=(a-1)*s;return H("/",H("-",n,c),a)}else $(o.gridRowHeightType)},eg=function(t,o,r){let i=Kp(o,r),n=Xo(r.gap),a=ko(n);return H("+",H("*",t,i),a*(i-1))},VD=function(t,o,r,i){var a,l;let n=t;return qr(o)&&(o.maxHeight&&(n=kt(a=Zo,ir,tg).call(a,"maxHeight",n,o,r,i)),o.minHeight&&(n=kt(l=Zo,ir,tg).call(l,"minHeight",n,o,r,i))),n},tg=function(t,o,r,i,n){let a=t==="minHeight"?"max":"min",[l,s]=On(r[t]);if(s==="%"){let c=i.tree.getNodeParent(r);if(C(c,"parentNode must exist for a node with percentage min-max heights"),qe(c)&&c.heightType===2)return o;let d=n();return H(a,o,H("*",d,l/100))}else{if(s==="px")return H(a,o,l);if(s==="vh")return H(a,o,rr*l/100);$(s)}},le(Zo,ir);var wt=Zo;function Qp(e,t){return t.cache.memo(`autoHeight-${e.id}`,()=>Zz(e,t))}function Zz(e,t){if(Ie(e)){let o=ND(e,t.tree);return wt.startFromFixedValue(ye(o),e,t).getWithConstraints()}if(_(e)){let o=e.getIntrinsicSize(E).height??Jz;return wt.startFromFixedValue(ye(o),e,t).getWithConstraints()}if(to(e)){if(C(e.stackDirection,"A stack must have a direction defined"),z(e.stackDirection))throw new Te;if(e.stackDirection==="horizontal"){if(e.stackWrapEnabled)throw new Te;{let o=Kz(e,t);return wt.startFromFixedValue(o,e,t).op((r,i)=>H("+",r,Gt(i)+Lo(i))).getWithConstraints()}}else if(e.stackDirection==="vertical"){let o=qz(e,t),r=Yz(e,t,o);return wt.startFromFixedValue(r,e,t).op((i,n)=>H("+",i,Gt(n)+Lo(n))).getWithConstraints()}else $(e.stackDirection)}if(Xt(e)){if(C(e.gridColumnCount!==void 0,"A grid node must have gridColumnCount"),e.gridColumnCount==="auto-fill")throw new Te;if(X(e.gridColumnCount)){C(e.gridRowHeightType!==void 0,"A grid must have gridRowHeightType defined");let o=oa(e,t);if(e.gridRowHeightType==="fixed"){C(e.gridRowHeight!==void 0,"A node with gridRowHeightType: fixed must have gridRowHeight defined");let r=o.rowCount,i=Xo(e.gap),n=ko(i),a=(o.rowCount-1)*n,s=e.gridRowHeight*r+a;return wt.startFromFixedValue(ye(s),e,t).op((c,d)=>H("+",c,Gt(d)+Lo(d))).getWithConstraints()}else if(e.gridRowHeightType==="fit"){let r=ye(0);for(let s=0;s<o.rowCount;s++){let c=kD(t,o,s);r=H("+",r,c)}let i=Xo(e.gap),n=ko(i),a=(o.rowCount-1)*n,l=H("+",r,a);return wt.startFromFixedValue(l,e,t).op((s,c)=>H("+",s,Gt(c)+Lo(c))).getWithConstraints()}else if(e.gridRowHeightType==="auto"){let r=ye(0);for(let c=0;c<o.rowCount;c++)for(let d=0;d<o.columnCount;d++){let p=o.getGridItem(c,d);if(!p)continue;let f=t.tree.getNode(p);if(C(f,"Can\u2019t find grid item in the tree"),!Pe(f)||!qe(f))continue;let h;f.heightType===1||Bs(f)?h=Qp(f,t)??ye(0):h=rt(f,t);let v=Kp(f,e);if(v>1){let T=Xo(e.gap),w=ko(T)*(v-1);h=H("/",H("-",h,w),v)}r=H("max",r,h)}let i=H("*",r,o.rowCount),n=Xo(e.gap),a=ko(n),l=(o.rowCount-1)*a,s=H("+",i,l);return wt.startFromFixedValue(s,e,t).op((c,d)=>H("+",c,Gt(d)+Lo(d))).getWithConstraints()}else $(e.gridRowHeightType)}$(e.gridColumnCount)}return null}function Kz(e,t){let o=ye(0);for(let r of e.children??[])!Pe(r)||!qe(r)||Fi(r,e,t.tree,!0)&&(r.heightType===1||r.heightType===3||(o=H("max",o,rt(r,t))));return o}function qz(e,t){if(Pe(e)&&qr(e)&&e.maxHeight!==void 0&&e.stackWrapEnabled){let o=tu(e,t),r=H("-",o,Gt(e)+Lo(e));return Fo(r)}return 1/0}function Yz(e,t,o){let r=Yh(e),i=ko(r),n=[];for(let l of un(e)){if(!Pe(l)||!qe(l)||!Fi(l,e,t.tree,!0))continue;let s;switch(l.heightType){case 3:s=eu(l,t);break;case 1:s=ye(0);break;case 0:case 2:case 4:case 5:s=rt(l,t);break;default:$(l.heightType)}let c=n[n.length-1]??ye(0),d=H("+",c,i,s);Math.ceil(Fo(d))>Math.ceil(o)||n.length===0?n.push(s):n[n.length-1]=d}return H("max",...n)??ye(0)}function kD(e,t,o){let r=ye(0);for(let i=0;i<t.columnCount;i++){let n=t.getGridItem(o,i);if(!n)continue;let a=e.tree.getNode(n);if(C(a,"Can\u2019t find grid item in the tree"),!Pe(a)||!qe(a))continue;let l=a.heightType===1?Qp(a,e)??ye(0):rt(a,e);r=H("max",r,l)}return r}function eu(e,t){let o=ye(0);return Pe(e)?wt.startFromFixedValue(o,e,t).getWithConstraints():o}function tu(e,t){let o=ye(1/0);return Pe(e)?wt.startFromFixedValue(o,e,t).getWithConstraints():o}var RD=nt("simulateCSSWidth");function LD(e,t){try{let o=wl(e,t);return Jp(o)}catch(o){if(o instanceof Te)return;RD.reportWithoutLogging(o,{nodeId:e.id}),RD.warnOncePerMinute(`Can\u2019t simulate the CSS width for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function wl(e,t){let o=t.cache.getCSSWidth(e.id);if(o)return o;let r=Qz(e,t);return t.cache.setCSSWidth(e.id,r),r}function Qz(e,t){if(!Ba(e))throw new Te;let o=t.tree.getNodeParent(e);if(Ue(e))return be(100,"vw");if(C(Pe(e)&&qe(e),`Can\u2019t calculate the width on a node ${e.id} when it doesn\u2019t have size information`),t.tree.isGroundNode(e)){if(fe(e)&&Be(t.tree.getScopeNodeFor(e)))return be(100,"vw");if(Pa(e)||fe(e)){let i=be(100,"vw");return pn(m`${ne.componentViewport}?.width || ${i.expr}`)}else{let i=Zp(e,t);if(M(i))throw new Te;return be(i,"px")}}if(_c(e))return To.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(!en(e,o)&&ve(e)&&e.left!==null&&e.right!==null)return To.startFromParentOuterWidth(e,t).op((i,n)=>{let a=n.left,l=n.right;return C(a!==null&&l!==null,"Satisfying TypeScript"),Je("-",i,be(a+l,"px"))}).getWithConstraints();if(Yi(e)&&ve(e)&&X(e.aspectRatio)&&Rb(e)==="width"){let i=rt(e,t),n=Je("*",Up(i),be(e.aspectRatio));return To.startFromRawValue(n,e,t).getWithConstraints()}if(e.widthType===0)return To.startFromRawValue(be(e.width,"px"),e,t).getWithConstraints();if(e.widthType===1){C(o,"A node can\u2019t have a % width without a parent");let i;return vo(e)?i=To.startFromRawValue(be(100,"vw"),e,t):Vr(e)?i=To.startFromParentOuterWidth(e,t):Xt(o)?i=To.startFromColumnWidthMultipliedBySpan(e,t):i=To.startFromParentInnerWidth(e,t),i.op((n,a)=>Je("*",n,be(a.width))).getWithConstraints()}if(e.widthType===3){let i=t.tree.getNodeParent(e);if(C(i,"A node can\u2019t have a fractional width without a parent"),Xt(i))return To.startFromColumnWidthMultipliedBySpan(e,t).getWithConstraints();if(C(to(i),"A node can have a fractional width only if it\u2019s inside a stack"),C(i.stackDirection,"A stack must have a direction defined"),i.stackDirection==="horizontal")return wD(e,i.stackWrapEnabled??!1,t);if(i.stackDirection==="vertical")return DD(e,t);if(z(i.stackDirection)){let n=wD(e,i.stackWrapEnabled??!1,t),a=DD(e,t);if(Jo(n,a))return n;let l=t.getVariableBinding(i.stackDirection,i);if(!l)throw new Te;let s=m`${l} === "row"`,c=m`${s} ? ${Jp(n)} : ${Jp(a)}`;return pn(c)}$(i.stackDirection)}if(e.widthType===2){if(qr(e)&&e.maxWidth){let[i,n]=On(e.maxWidth);return be(i,n)}throw new Te}if(e.widthType===4){let i=be(e.width*100,"vw");return To.startFromRawValue(i,e,t).getWithConstraints()}if(e.widthType===5){if(!ro(e))throw new Te;let i=Pl(e),n=rt(e,t),a=M(n)||M(i)?be(e.width,"px"):Je("*",Up(n),be(i));return To.startFromRawValue(a,e,t).getWithConstraints()}$(e.widthType)}function wD(e,t,o){return t?To.startFromParentInnerWidth(e,o).getWithConstraints():To.startFromParentInnerWidth(e,o).subtractSiblingWidths().getWithConstraints()}function DD(e,t){return To.startFromParentInnerWidth(e,t).op((o,r)=>Je("*",o,be(r.width))).getWithConstraints()}var Ye,rs,Cr,mn,Sr,FD,ED,og,rg,nr=class nr{constructor(t,o,r,i){le(this,Ye);le(this,rs);le(this,Cr);le(this,mn);re(this,Ye,t),re(this,rs,o),re(this,Cr,r),re(this,mn,i)}static startFromRawValue(t,o,r){return new nr(t,()=>{let i=r.tree.getNodeParent(o);return C(i,"Can\u2019t calculate the parent width if the node doesn\u2019t have a parent"),wl(i,r)},o,r)}static startFromParentOuterWidth(t,o){let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call createFromParentWidth() if the node doesn\u2019t have a parent");let i=wl(r,o);return new nr(i,()=>i,t,o)}static startFromParentInnerWidth(t,o){var n;let r=o.tree.getNodeParent(t);C(r,"Can\u2019t call createFromParentWidthMinusPaddings() if the node doesn\u2019t have a parent");let i=wl(r,o);return i=kt(n=nr,Sr,og).call(n,i,r,o),new nr(i,()=>i,t,o)}static startFromColumnWidthMultipliedBySpan(t,o){var a,l;let r=o.tree.getNodeParent(t);C(r&&Xt(r),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node isn\u2019t inside a grid"),C(wn(t),"Can\u2019t call createFromColumnWidthMultipliedBySpan() if the node doesn\u2019t have grid item layout");let i=kt(a=nr,Sr,FD).call(a,r,o),n=kt(l=nr,Sr,ED).call(l,i,r,t.gridItemColumnSpan??1,o);return new nr(n,()=>n,t,o)}subtractSiblingWidths(){let t=A(this,mn).tree.getNodeParent(A(this,Cr));C(t&&to(t),"Can\u2019t call subtractSiblingWidths() if the node isn\u2019t inside a stack");let o=[],r=[],i=[],n=[],a=[],l=0;for(let p of un(t)){let f=Fi(p,t,A(this,mn).tree,!1);if(f!==!1&&!Xp(f))switch(C(Pe(p)&&qe(p),"It\u2019s impossible to have a regular visible node without width/height/widthType/heightType fields"),l++,p.widthType){case 0:{o.push(p);break}case 1:{r.push(p);break}case 3:{i.push(p);break}case 4:{n.push(p);break}case 2:throw new Te;case 5:{if(!ro(p)||!p.fillImagePixelWidth||!p.fillImagePixelHeight)throw new Te;a.push(p);break}default:$(p.widthType)}}let c=1-r.reduce((p,f)=>p+f.width,0);if(c!==1&&re(this,Ye,Je("*",A(this,Ye),be(c))),o.length){let p=o.reduce((f,h)=>Je("+",f,be(h.width,"px")),be(0,"px"));re(this,Ye,Je("-",A(this,Ye),p))}if(a.length){let p=a.reduce((f,h)=>{let v=Pl(h);if(!v)throw new Te;let T=rt(h,A(this,mn));if(!T)throw new Te;return Je("+",f,Je("*",Up(T),be(v,"px")))},be(0,"px"));re(this,Ye,Je("-",A(this,Ye),p))}if(n.length){let p=n.reduce((f,h)=>Je("+",f,be(h.width*100,"vw")),be(0,"vw"));re(this,Ye,Je("-",A(this,Ye),p))}if(z(t.gap)){let p=A(this,mn).getVariableBinding(t.gap,t);if(p){let f=pn(tt`${m`${p} * ${l-1}`}px`);re(this,Ye,Je("-",A(this,Ye),f))}}else{let f=Nd(t.gap)*(l-1);f!==0&&re(this,Ye,Je("-",A(this,Ye),be(f,"px")))}let d=i.reduce((p,f)=>p+f.width,0);return re(this,Ye,Je("/",A(this,Ye),be(d))),re(this,Ye,Je("*",A(this,Ye),be(A(this,Cr).width))),re(this,Ye,Je("max",A(this,Ye),be(1,"px"))),this}op(t){return re(this,Ye,t(A(this,Ye),A(this,Cr))),this}getWithConstraints(){var t,o;return qr(A(this,Cr))?(A(this,Cr).maxWidth&&re(this,Ye,kt(t=nr,Sr,rg).call(t,"maxWidth",A(this,Ye),A(this,rs),A(this,Cr))),A(this,Cr).minWidth&&re(this,Ye,kt(o=nr,Sr,rg).call(o,"minWidth",A(this,Ye),A(this,rs),A(this,Cr))),A(this,Ye)):A(this,Ye)}};Ye=new WeakMap,rs=new WeakMap,Cr=new WeakMap,mn=new WeakMap,Sr=new WeakSet,FD=function(t,o){var r;if(C(t.gridColumnWidthType!==void 0,"A grid node must have a gridColumnWidthType defined"),t.gridColumnWidthType==="fixed")return C(t.gridColumnWidth!==void 0,"A grid node with fixed width columns must have a gridColumnWidth defined"),be(t.gridColumnWidth,"px");if(t.gridColumnWidthType==="minmax"){if(t.gridColumnCount==="auto-fill")throw new Te;let i=wl(t,o);if(i=kt(r=nr,Sr,og).call(r,i,t,o),C(t.gridColumnCount!==void 0,"A grid node must have a gridColumnCount defined"),z(t.gap)){let n=o.getVariableBinding(t.gap,t);if(n){let a=pn(tt`${m`${n} * ${t.gridColumnCount-1}`}px`);i=Je("-",i,a)}}else{let a=Nd(t.gap)*(t.gridColumnCount-1);a!==0&&(i=Je("-",i,be(a,"px")))}return t.gridColumnCount>1&&(i=Je("/",i,be(t.gridColumnCount))),t.gridColumnMinWidth&&(i=Je("max",i,be(t.gridColumnMinWidth,"px"))),i}else $(t.gridColumnWidthType)},ED=function(t,o,r,i){if(r===1)return t;let n;if(X(r)){if(o.gridColumnCount==="auto-fill")throw new Te;C(o.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),n=Math.min(r,o.gridColumnCount)}else if(r==="all"){if(o.gridColumnCount==="auto-fill")throw new Te;C(o.gridColumnCount!==void 0,"A grid must have gridColumnCount defined"),n=o.gridColumnCount}else{if(z(r))throw new Te;$(r)}if(n>1&&(t=Je("*",t,be(n))),z(o.gap)){let a=i.getVariableBinding(o.gap,o);if(a){let l=pn(tt`${m`${a} * ${n-1}`}px`);t=Je("+",t,l)}}else{let l=Nd(o.gap)*(n-1);l!==0&&(t=Je("+",t,be(l,"px")))}return t},og=function(t,o,r){if(!Ho(o))return t;let i;if(z(o.padding)){let n=r.getVariableBinding(o.padding,o);n&&(i=pn(tt`${m`${n} * 2`}px`))}else o.paddingPerSide?i=be((o.paddingLeft??0)+(o.paddingRight??0),"px"):i=be((o.padding??0)*2,"px");return i?Je("-",t,i):t},rg=function(t,o,r,i){let n=t==="minWidth"?"max":"min",[a,l]=On(i[t]);if(l==="%"){let s=r();return Je(n,o,Je("*",s,be(a/100)))}else return Je(n,o,be(a,l))},le(nr,Sr);var To=nr;var AD=nt("simulateYPosition");function OD(e,t){try{let o=fn(e,t);return o.type==="number-const"?o.value:o.expr}catch(o){if(o instanceof Te)return;AD.reportWithoutLogging(o,{nodeId:e.id}),AD.warnOncePerMinute(`Can\u2019t simulate the y position for node ${e.id} because the tree doesn\u2019t match expectations. Skipping.`,o);return}}function fn(e,t){let o=t.cache.getYPosition(e.id);if(o)return o;let r=eB(e,t);return t.cache.setYPosition(e.id,r),r}function eB(e,t){if(!Ba(e))throw new Te;let o=t.tree.getNodeParent(e);if(!(ve(e)&&Qc(e))){if(Ue(e))return ye(0);C(!1,"Can\u2019t calculate the y position on a node when it doesn\u2019t have position information")}if(t.tree.isGroundNode(e)){if(fe(e)&&Be(t.tree.getScopeNodeFor(e)))return ye(0);if(Pa(e)||fe(e))return Vl(m`${ne.componentViewport}?.y || 0`,0);throw new Te}let r=iB(e,o,t);if(r==="fixed"){if(e.top!==null)return ye(e.top);if(e.bottom!==null){let i=rt(e,t);return H("-",rr-e.bottom,i)}else{let i=rt(e,t);return H("-",H("*",rr,e.centerAnchorY),H("/",i,2))}}if(r==="absolute"){C(o&&ve(o)&&Qc(o),"absolute position: parentNode for the node must exist, be pinnable, and have position type");let i=fn(o,t);if(e.top!==null)return H("+",i,ye(e.top));if(e.bottom!==null){let n=rt(o,t),a=rt(e,t);return H("-",H("+",i,n),H("+",e.bottom,a))}else{let n=rt(o,t),a=rt(e,t);return H("+",i,H("-",H("*",n,e.centerAnchorY),H("/",a,2)))}}if(r==="sticky"||r===void 0){if(C(o&&ve(o)&&Qc(o),"relative position: parentNode for the node must exist, be pinnable, and have position type"),to(o)){if(C(o.stackDirection,"parentNode for the node must have stackDirection"),o.stackDirection==="horizontal"){if(o.stackWrapEnabled)throw new Te;if(z(o.stackAlignment))throw new Te;let i=rt(o,t),n=H("-",i,Gt(o)+Lo(o));if(C(o.stackAlignment,"parentNode for node must have stackAlignment"),o.stackAlignment==="start")return H("+",fn(o,t),ye(Gt(o)));if(o.stackAlignment==="center"){let a=rt(e,t),l=H("-",n,a);return H("+",fn(o,t),H("+",Gt(o),H("/",l,2)))}else if(o.stackAlignment==="end"){let a=rt(e,t),l=H("-",n,a);return H("+",fn(o,t),Gt(o),l)}else $(o.stackAlignment)}if(o.stackDirection==="vertical"){let i=Yp(o,t,c=>rt(c,t),c=>eu(c,t),c=>tu(c,t)),n=i.findCoordinates(e.id);C(n,"Node must be found in stack layout info");let a=tB(n.columnIndex,i,t),l=oB(n.columnItemIndex,a,o,t),s=[fn(o,t),Gt(o),l];return nB(o,e,t)&&s.unshift(rr),H("+",...s)}if(z(o.stackDirection))throw new Te;$(o.stackDirection)}if(Xt(o)){if(C(o.gridColumnCount!==void 0,"parentNode for node must have gridColumnCount"),o.gridColumnCount==="auto-fill")throw new Te;if(X(o.gridColumnCount)){let i=oa(o,t);if(i.isEmpty())return H("+",fn(o,t),Gt(o));let n=i.findCoordinates(e.id);C(n,"Node must be found in the grid layout info");let a=rB(n.rowIndex,i,o,t);return H("+",fn(o,t),Gt(o),a)}$(o.gridColumnCount)}C(!1,"Relative and sticky nodes can only exist in stacks or grids")}$(r)}function tB(e,t,o){let r=[];return t.walkColumn(e,i=>{let n=o.tree.get(i);C(n&&Pe(n)&&qe(n),"column item must exist, have size, and have size dimension type");let a;if(n.heightType===3){let l=t.getFrToPxForColumn(e);C(l,"frToPx must be available for the column"),a=H("*",l,n.height)}else a=rt(n,o);r.push(a)}),r}function MD(e,t,o){return o.cache.memo(`sumAllStackChildrenHeights-${e.id}`,()=>H("+",...t)??ye(0))}function oB(e,t,o,r){let i=o.stackDistribution;if(C(i,"parentNode for node must have stackDistribution"),z(i))throw new Te;let n=rt(o,r),a=H("-",n,Gt(o)+Lo(o));if(i==="start"||i==="center"||i==="end"){let l=Xo(o.gap),s=ko(l),c;if(i==="start")c=ye(0);else{let f=MD(o,t,r),h=s*(t.length-1),v=H("-",a,H("+",f,h));c=i==="center"?H("/",v,2):v}let d=qp("+",0,e,t)??ye(0),p=s*e;return H("+",c,d,p)}if(i==="space-between"||i==="space-around"||i==="space-evenly"){C(!gc(o),"gap is not expected with stackDistribution:",o.stackDistribution);let l=MD(o,t,r),s=H("-",a,l),c=t.length,d;switch(i){case"space-between":d=H("/",s,Math.max(1,c-1));break;case"space-around":d=H("/",s,c);break;case"space-evenly":d=H("/",s,c+1);break;default:$(i)}let p;switch(i){case"space-between":p=ye(0);break;case"space-around":p=H("/",d,2);break;case"space-evenly":p=d;break;default:$(i)}let f=qp("+",0,e,t)??ye(0),h=H("*",d,e);return H("+",p,f,h)}$(i)}function rB(e,t,o,r){if(C(o.gridRowHeightType!==void 0,"parentNode for node must have gridRowHeightType defined"),o.gridRowHeightType==="fixed"){C(o.gridRowHeight!==void 0,"A grid parent node with gridRowHeightType === 'fixed' (for node) must have gridRowHeight defined");let i=e*o.gridRowHeight,n=Xo(o.gap),a=ko(n),l=e*a;return ye(i+l)}if(o.gridRowHeightType==="fit"){let i=[];for(let c=0;c<e;c++)for(let d=0;d<t.columnCount;d++){let p=r.tree.get(t.getGridItem(c,d));if(!p)continue;C(Pe(p)&&qe(p),"grid child must have size and size-dimension type");let f=rt(p,r);i[c]=H("max",i[c]??ye(0),f)}let n=H("+",...i)??ye(0),a=Xo(o.gap),l=ko(a),s=e*l;return H("+",n,s)}if(o.gridRowHeightType==="auto"){let i=rt(o,r),n=H("-",i,Gt(o)+Lo(o)),a=oa(o,r),l=a.rowCount,s=Xo(o.gap),c=ko(s),d=(a.rowCount-1)*c,p=H("/",H("-",n,d),l),f=H("*",e,p),h=e*c;return H("+",f,h)}$(o.gridRowHeightType)}function iB(e,t,o){if(ed(o.tree,e)&&e.position==="fixed")return"fixed";if(td(e,t)&&e.position==="absolute")return"absolute";if(nT(e,t)&&e.position==="sticky")return"sticky";if(t&&Ue(t))return"fixed";if(!(t&&co(t)))return"absolute"}function nB(e,t,o){if(fe(e)&&Be(o.tree.getScopeNodeFor(e))){let r=e.children?.findIndex(Xr);if(M(r))return!1;let i=o.tree.getIndex(t);return r<i}return!1}var ou=class{constructor(t,o,r){this.treeStore=t;this.variables=o;this.valueTransforms=r;L(this,"simulationContext");this.simulationContext=gD(this.treeStore.tree,this.variables,this.valueTransforms)}getCSSWidth(t){return LD(t,this.simulationContext)}getHeight(t){return PD(t,this.simulationContext)}getYPosition(t){return OD(t,this.simulationContext)}getComponentViewportContext(t){let o=this.getCSSWidth(t),r,i;return Yr(t)||(r=this.getHeight(t),i=this.getYPosition(t)),{width:o,height:r,y:i}}};var ru=class{constructor(t,o){this.tree=t;this.bindings=o;L(this,"ids",new Map)}create(t){let o=this.composeBaseId(t),r=this.tree.get(t);ho(r,"AppearIdCollector: Node not found");let i=ud(r,this.tree);return i.length>0?this.composeRepeaterId(o,i):o}composeBaseId(t){let o=Ht(t),r=this.ids.get(o);if(M(r))return this.ids.set(o,0),o;let i=r+1;return this.ids.set(o,i),`${o}-${i}`}composeRepeaterId(t,o){let r=[t];for(let i of o){let n=this.tree.get(i);n&&r.push(this.bindings.createWithNode("index",n))}return tt.join(r,"-")}};var hn,ig,ng,ra=class{constructor(t){this.assetMap=t;le(this,hn);L(this,"keys",new Set)}addAsset(t){this.keys.add(t)}resolve(t){if(!kt(this,hn,ig).call(this,t))return;let o=kt(this,hn,ng).call(this,t);if(o!==null)return o&&(t=o.identifier),{src:Jy(t)}}resolveResponsiveImage(t,{focalPoint:o}={}){if(!kt(this,hn,ig).call(this,t))return;let r=kt(this,hn,ng).call(this,t);if(r===null)return;r&&(t=r.identifier);let i=r?.preferredSize??"auto",n=this.assetMap.assetForKey(t),a=n?.properties?.image,l=r?.intrinsicSize??a,s=Zy(a?.width,a?.height),d={src:n?Ky(n,i,s):lc(t,void 0,void 0,l),positionX:void 0,positionY:void 0,srcSet:et.isOn("fixedSizeImageSrcset")?void 0:this.generateSrcSet(n,s,i),preferredSize:et.isOn("fixedSizeImageSrcset")?i:void 0,pixelWidth:l?.width,pixelHeight:l?.height};return o&&D(o.positionX)&&D(o.positionY)&&(d.positionX=o.positionX,d.positionY=o.positionY),d}generateSrcSet(t,o,r){if(!t)return;ho(!et.isOn("fixedSizeImageSrcset"),"This code path must only be executed with fixedSizeImageSrcset: off");let i;if((!r||r==="auto"||r==="lossless")&&o?.length&&t.properties?.image){i="";for(let{maxSideSize:a,width:l}of o)l<Qy||(i+=`${Qu(t,a,r==="lossless")} ${l}w,`);i+=`${Qu(t,void 0,r==="lossless")} ${t.properties.image.width}w`}return i}};hn=new WeakSet,ig=function(t){return!(Qo(t)||t.startsWith("https:"))},ng=function(t){let o=Xy(t);return o&&(t=o.identifier),t===""?null:(this.addAsset(t),o)};var iu=class{constructor(t,o,r){this.declarations=t;this.scope=o;this.primaryVariantId=r}create(t,o){if(t===!0&&M(o))return{condition:!0};if(!M(t)&&M(o))return{condition:t};if(o){if(Array.from(o.values()).every(({value:h})=>h===t))return{condition:t};let r=new Set,i=new P.Set;Zi(this.scope)&&this.primaryVariantId&&zD(this.primaryVariantId,t,r,i);let n=new Map,a=new Map,l=new Map,s=sB(l),c=s(t);for(let[h,v]of o){if(Zi(this.scope)&&zD(h,v.value,r,i),!v.isGesture&&v.value===t)continue;let T=v.isGesture?n:a;aB(h,s(v.value),T)}let d=[],p=[];for(let h of l.keys()){let v=l.get(h);v&&(p.push(new P(h)),d.push(ge(v)))}let f=this.declarations.dedupe("isDisplayed",new P(mt.lines(m`(${new P(d.join(", "))}) => {`,Zi(this.scope)&&m`if (!${P.fn(ne.isBrowser)}) return true`,...this.createConditionStatementsForGroup(n,"gestureVariant"),...this.createConditionStatementsForGroup(a,"baseVariant"),m`return ${c}`,m`}`)));return{condition:P.fn(f,...p),classNames:r,classNameExpressions:i}}return{condition:!0}}createConditionStatementsForGroup(t,o){if(t.size===0)return[];let r=[],i=new P(o);for(let[n,a]of t){let l=new P(n);if(a.size===1){let s=Array.from(a)[0];if(M(s))continue;r.push(m`if (${i} === ${s}) return ${l}`)}else r.push(m`if (${Array.from(a)}.includes(${i})) return ${l};`)}return r}};function aB(e,t,o){let r=ge(t),i=o.get(r)??new Set;o.set(r,i.add(e))}function sB(e){let t=new Set;return o=>{if(!yo(o))return o;let r=ge(o),i=e.get(r)??new P(dd("value",t));return e.set(r,i),i}}function WD(e){return`hidden-${Ht(e)}`}function zD(e,t,o,r){if(t===!1){let i=WD(e);o.add(i)}else if(yo(t)){let i=WD(e);r.add(m`!(${t}) && ${i}`)}}var Dl,ia,Ll,nu=class{constructor(t,o,r,i,n,a){this.scope=t;this.bindings=o;this.declarations=r;this.imports=i;this.variables=n;this.treeStore=a;le(this,Dl,new Map);le(this,ia,null);le(this,Ll,new Map)}isLayoutTemplateRef(t){if(at(A(this,ia))){if(re(this,ia,new Set),!Oc(this.scope)||!wv(this.scope))return!1;let o=E.componentForIdentifier(this.scope.layoutTemplateIdentifier)?.properties;if(!o)return!1;let r=this.scope.getControlProps(o);for(let i in r){let n=r[i];if(M(n?.value)||z(n.value)||n.type!=="scrollsectionref")continue;let a=n.value.target;M(a)||z(a)||A(this,ia).add(a)}}return A(this,ia).has(t)}getNodeInPrimary(t){if(!t)return;let o=t.originalid?this.treeStore.tree.get(t.originalid):t;if(o)return o}scrollTargetInfo({target:t,collectionItem:o}){if(!t)return;if(U(t))return{ref:this.variables.create(t)};let r=this.treeStore.tree.get(t);if(!r||!An(r)||this.treeStore.treeIndex.getScopeIdFor(r.id)!==this.scope.id)return;let i=this.getNodeInPrimary(r);if(!i)return;let n=this.ref(i,o);if(n)return{ref:n,offset:r.scrollMarginTop}}ref(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let i=A(this,Dl).get(r.id);if(i)return i;let n=ud(r,this.treeStore.tree),a=this.isLayoutTemplateRef(r.id);if(a||o||n&&n.length>0){let d=this.id(r,o);if(!d)return;let p=this.imports.addImport("framer",{exportSpecifier:a?"useSiteRefs":"useDynamicRefs"});return P.fn(this.declarations.component.dedupe("dynamicRef",P.fn(m`${p}<HTMLElement>`)),d)}let l=this.bindings.create("ref"),s=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),c=m`const ${l} = ${P.fn(m`${s}.useRef<HTMLElement>`,m`null`)}`;return this.declarations.component.create(c),A(this,Dl).set(r.id,l),l}getBaseId(t,o){if(W(o)){if(An(t)){let r=[t.id];return o&&o.id!==this.scope.id&&r.push(o.id),this.declarations.component.dedupe("elementId",P.fn(this.imports.addImport("framer",{exportSpecifier:"useRouteElementId"}),...r))}return Ht(t.id)}if(ie(o))return tt`${ne.layoutId}-${Ht(t.id)}`}getPortalAncestor(t){let o=this.treeStore.tree.getParent(t.id);if(o){if(ht(t))return this.treeStore.tree.get(o.getPrimaryId());if(Ue(o)){let r=this.treeStore.tree.getParent(o.id);return this.treeStore.tree.get(r?.getPrimaryId())}}}portalId(t){let o=this.getPortalAncestor(t);return o?this.id(o):void 0}id(t,o){let r=this.getNodeInPrimary(t);if(!r)return;let i=this.treeStore.treeIndex.getScopeIdFor(r.id),n=this.treeStore.tree.get(i);if(!W(n)&&!ie(n))return;if(W(n)&&An(r)){let l=$T(r,this.treeStore.tree);l&&A(this,Ll).set(r.id,l)}let a=this.getBaseId(r,n);if(a)return _T(r,this.treeStore.tree,l=>{if(l.id===r.id)return a;if(U(o)&&o.id===l.id)return this.variables.create(o);if(Nv(o)&&o.key===l.id)return o.value;if(l.type==="slug")return this.variables.create(Jt(l.id,l.providerId))})}annotation(){let t=Object.fromEntries(A(this,Ll));return Ft(t)?"":JSON.stringify(t)}};Dl=new WeakMap,ia=new WeakMap,Ll=new WeakMap;function cB(e){return e instanceof Error?!!Sh(e):!1}function dB(e){return D(e)?e:e instanceof Error?e.message:ze(e)?JSON.stringify(e):"Unknown error"}var Fl,au=class{constructor(t,o,r){this.scopeId=t;this.sourceNodeId=o;this.type=r;le(this,Fl,[])}record(t,o,r){if(cB(o)){this.recordKnownError(t,o);return}A(this,Fl).push({nodeId:t.id,reason:dB(o),moduleIdentifier:Ze(r)?r:void 0})}get errors(){return A(this,Fl).map(t=>new TI({...t,sourceNodeId:this.sourceNodeId,sourceNodeModuleType:this.type,scopeId:this.scopeId,type:"CodeGeneration"}))}recordKnownError(t,o){if(Sh(o)){let r=new Set;o.error.forEach(i=>{r.add(i),this.record(t,"CodeError",i)}),o.missing.forEach(i=>{r.has(i)||this.record(t,"MissingModule",i)})}}};Fl=new WeakMap;function ag(e,t){let o=[],r=cC(e,n=>{let a=t.create(n);return o.push(n),"${"+a+"}"});return{templatedUrl:new P("`"+r+"`"),usedVariables:o}}function su(e,t,o,r=void 0){if(z(e.value))return ho(!Qt(e.value),"Computed values should not be possible in fetch fallback"),t.create(e.value);switch(e.type){case"color":return e.value?m`${e.value}`:m`undefined`;case"string":return m`${e.value}`;case"boolean":return new P(e.value);case"number":return new P(e.value);case"image":{if(e.value===void 0)return m`undefined`;let i=o.resolveResponsiveImage(e.value);return i?m`${i.src}`:m`undefined`}case"link":{if(!e.value||!r)return m`undefined`;let i=r.create(e.value);return i?new P(ge(i)):m`undefined`}default:Ut(e)}}function lu(e,t,o,r=void 0){let{templatedUrl:i}=ag(e,t),n=dc(e);return new ee({url:i,resultKeyPath:e.resultKeyPath,fallbackValue:su(n.controlProp,t,o,r),errorFallbackValue:n.errorControlProp?su(n.errorControlProp,t,o,r):void 0,resultOutputType:n.controlProp.type,cacheDuration:e.cacheDuration,credentials:e.credentials})}var na=class{constructor(t,o,r,i,n){this.bindings=t;this.variables=o;this.preload=r;this.assets=i;this.links=n;L(this,"fetchesByNode",new Map);L(this,"resultBindingsByNode",new Map)}createFetchBinding(t,o){let r=dc(o);if(!lC(r))return su(r.controlProp,this.variables,this.assets,this.links);let i=t.getPrimaryId(),n=this.resultBindingsByNode.get(i)??this.bindings.create("fetchResult");this.resultBindingsByNode.set(i,n),this.preload.addFetch(t,r);let a=this.fetchesByNode.get(t.id)??[];return a.push(lu(r,this.variables,this.assets,this.links)),this.fetchesByNode.set(t.id,a),m`${n}[${a.length-1}]`}getResultBinding(t){return this.resultBindingsByNode.get(t.getPrimaryId())}getFetchesForNode(t){return this.fetchesByNode.get(t.id)}};var cu=class{constructor(t){this.declarationCollector=t;L(this,"fontObjects",new Set);L(this,"fontReferences",new Map);L(this,"referencedComponentIdentifiers",new Set);L(this,"fontObjectsBySelector",new Map)}createDedupedVariationAxesBinding(t){return t.variationAxes?this.declarationCollector.dedupe("variationAxes",[...t.variationAxes]):void 0}addFontObjectBySelector(t,o){let r=this.fontObjectsBySelector.get(t);if(r){if(!o)return;let n=r[0];if(!n)return;if(Ac(n.source,o)&&!n.openType)for(let a of r)a.openType=!0;return}let i=qy.getFontBySelector(t);if(!(!i||!i.file))if(i.subsets){let n=[];this.fontObjectsBySelector.set(t,n);for(let a of i.subsets){let l={url:a.file,uiFamilyName:i.family.name,cssFamilyName:i.cssFamilyName,style:i.style,weight:i.weight!==void 0?String(i.weight):void 0,source:i.family.source,unicodeRange:a.unicodeRange,variationAxes:this.createDedupedVariationAxesBinding(i),openType:Ac(i.family.source,o)};this.fontObjects.add(l),n.push(l)}}else{let n={url:i.file,uiFamilyName:i.family.name,cssFamilyName:i.cssFamilyName,style:i.style,weight:i.weight!==void 0?String(i.weight):void 0,source:i.family.source,variationAxes:this.createDedupedVariationAxesBinding(i),openType:Ac(i.family.source,o)};this.fontObjects.add(n),this.fontObjectsBySelector.set(t,[n])}}addFontReference({componentIdentifier:t,fontReference:o}){this.fontReferences.set(ge(o),o),this.referencedComponentIdentifiers.add(t)}};function pB(e){return e==="string"||e==="vectorsetitem"}var aa,du=class{constructor(t,o){this.modulesStore=t;this.tree=o;le(this,aa,new Map)}get structure(){return Array.from(A(this,aa).values())}addSection(t){if(!Jm(t)&&!Sd(t))return;let o=lw(t);if(!o)return;let r={_id:o,_layerId:t.id,content:[]};return A(this,aa).set(t.id,r),t.id}addCustomizations(t,o){if(!Jm(t)||!o)return;let r=A(this,aa).get(o);if(r&&(_(t)&&uB(t,r,this.tree,this.modulesStore),!!tb(t))){for(let i of t.customizations)if(Ie(t))r.content.push({field:i.fieldPath,text:t.getTextContent()});else if(_(t)&&t.isVectorInstance){if(!Ze(t.codeComponentIdentifier))return;let n=Xs(ce(t.codeComponentIdentifier),this.tree,this.modulesStore)?.name;if(!D(n))return;r.content.push({field:i.fieldPath,text:n})}A(this,aa).set(o,r)}}};aa=new WeakMap;function uB(e,t,o,r){let i=E.componentForIdentifier(e.codeComponentIdentifier)?.properties;if(!i)return;let n=e.getControlProps(i);for(let a in n){let l=n[a];if(!l)continue;let{type:s,value:c}=l;if(!D(s)||!pB(s))continue;let d=i[a]?.title??a;if(D(c))switch(s){case"string":t.content.push({field:d,text:c});break;case"vectorsetitem":{if(!Ze(c))continue;let p=Xs(ce(c),o,r)?.name;if(!D(p))continue;t.content.push({field:d,text:c});break}default:$(s,"Unknown control type")}}}var sa,pu=class{constructor(t){this.scopeNode=t;le(this,sa,new Map)}recordClassName(t,o,r){if(!Be(this.scopeNode)||t.parentid!==o||t.visible===!1||Bn(t)&&t.locked)return;let i=o,n=A(this,sa).get(i)??new Set;n.add("."+r),A(this,sa).set(i,n)}annotation(){if(!Be(this.scopeNode)||A(this,sa).size===0)return"{}";let t={};for(let[o,r]of A(this,sa))t[o]=Array.from(r);return JSON.stringify(t)}};sa=new WeakMap;var sg=class{constructor(t,o,r,i){this.moduleType=t;this.modulesStore=o;this.submoduleName=r;this.sourceCode=i;L(this,"submoduleFilename");L(this,"submoduleImport");L(this,"bindings",new oi);L(this,"imports");L(this,"declarations",new Hn(this.bindings));this.submoduleFilename=cx(this.submoduleName),this.submoduleImport=dx(this.submoduleFilename),this.imports=new Ni(this.moduleType,this.modulesStore,this.bindings)}get estimatedSize(){return this.declarations.declarationsByteSize}serialize(){let t=mt.linesFrom(this.imports.statements),o=this.declarations.list();return mt.sections(t,this.sourceCode,...o)}},uu=class{constructor(t,o,r){this.moduleType=t;this.modulesStore=o;this.componentSourceNodeId=r;L(this,"submodules",new Set)}create(t){let o=lx(this.componentSourceNodeId,this.submodules.size),r=new sg(this.moduleType,this.modulesStore,o,t);return this.submodules.add(r),r}delete(t){this.submodules.delete(t)}serialize(){let t=new Map;for(let o of this.submodules){let r=o.serialize();t.set(o.submoduleName,r)}return t}};function BD(e){return`${e}ToDisplayName`}var HD="enumToDisplayNameFunctions";function GD(e){if(e?.type!=="enum"||!e.optionTitles)return m`(value) => value`;let t=e.optionTitles;return new P(mt.lines(m`(value, _locale) => {`,m`switch (value) {`,...e.options.map((o,r)=>{let i=t[r];return m`case ${o}: return ${M(i)?m`undefined`:i};`}),m`default: return "";`,m`}`,m`}`))}function $D(e){let{locale:t,grouping:o,notation:r,compactDisplay:i,style:n,currency:a,currencyDisplay:l,unit:s,unitDisplay:c,minimumFractionDigits:d,maximumFractionDigits:p,minimumIntegerDigits:f}=e,h={locale:t,notation:r,style:n};switch(Tr(o)&&(h.useGrouping=o),X(d)&&(h.minimumFractionDigits=d),X(p)&&(h.maximumFractionDigits=p),X(f)&&(h.minimumIntegerDigits=f),r==="compact"&&(h.compactDisplay=i),n){case"currency":h.currency=a,h.currencyDisplay=l;break;case"unit":h.unit=s,h.unitDisplay=c;break}return new ee(h)}var _D=m`(value, options = {}, activeLocale) => {
    const fallbackLocale = "en-US";
    const locale = options.locale || activeLocale || fallbackLocale;
    const {
        useGrouping,
        notation,
        compactDisplay,
        style,
        currency,
        currencyDisplay,
        unit,
        unitDisplay,
        minimumFractionDigits,
        maximumFractionDigits,
        minimumIntegerDigits,
    } = options;
    const formatOptions = {useGrouping, notation, compactDisplay, style, currency, currencyDisplay, unit, unitDisplay, minimumFractionDigits, maximumFractionDigits, minimumIntegerDigits};
    const number = Number(value);
    try {
        return number.toLocaleString(locale, formatOptions);
    } catch {
        try {
            return number.toLocaleString(fallbackLocale, formatOptions);
        } catch {
            return number.toLocaleString();
        }
    }
};
`;function jD(e,t){if(t.length===0)return null;C(e);let o=new Set;for(let i of t){let n=e.create(i);o.add(ge(n))}let r=`{${Array.from(o).join(", ")}}`;return new P(r)}function UD(e,t,o,r){let i=e.name;switch(i){case"contains":case"containsAny":case"containsAll":case"endsWith":case"equals":case"startsWith":case"greaterThan":case"lessThan":case"isBefore":case"isAfter":case"isIncludedIn":return U(e.value)?(C(o),[o.create(e.value)]):[M(e.value)?m`undefined`:e.value];case"prefix":case"suffix":{if(U(e.value))return C(o),[o.create(e.value)];let a=M(e.value)?m`undefined`:e.value;return e.valueLocalized?(C(r,"LocalizedValueCollector is required"),[r.add(a,e.valueLocalized,l=>e.valueLocalized?.[l]?.value)]):[a]}case"toDateString":return[t.getActiveLocaleCode()];case"extractDateSegment":return[e.segment];case"numberToString":return[$D(e),t.getActiveLocaleCode()];case"offsetAndLimitArray":return[e.startOffset,X(e.limit)?e.limit:m`undefined`];case"isBetweenDates":{let a=[];return U(e.start)?(C(o),a.push(o.create(e.start))):a.push(M(e.start)?m`undefined`:e.start),U(e.end)?(C(o),a.push(o.create(e.end))):a.push(M(e.end)?m`undefined`:e.end),a}case"convertFromEnum":case"convertFromString":{let l=function(d){Oo(d)&&ui(d,p=>l(p)),U(d)&&a.push(d)};var n=l;let a=[];l(e.default);for(let d of e.cases)l(d.to);let s=jD(o,a),c=o?.getLocale()??m`undefined`;return s?[c,s]:[c]}case"convertFromBoolean":{let l=function(p){Oo(p)&&ui(p,f=>l(f)),U(p)&&a.push(p)};var n=l;let a=[];l(e.truthy),l(e.falsy);let s=o?.getLocale()??m`undefined`,c=jD(o,a);return c?[s,c]:[s]}case"enumToDisplayName":return t.variables?[t.variables.getLocale()]:[];case"toString":case"toBoolean":case"toNumber":case"isSet":case"negate":case"reverseArray":case"toResponsiveImage":case"toImageSrc":case"jsonStringify":case"htmlEscape":case"htmlUnescape":case"addImageAlt":case"toZIndex":case"toAxisOverflow":case"toOverflowWithClipFallback":case"numberToPixelString":case"radiusForCorner":case"arrayToArray":case"arrayLength":case"isEven":case"isOdd":case"getGridColumnCSSValue":case"getGridRowCSSValue":case"getNumericColumnGap":return[];default:$(i,"All value transforms should define their arguments")}}var JD=m`(image, alt) => {
    if (!image || typeof image !== "object") {
        return;
    };
    return { ...image, alt };
};
`;var XD=m`(value) => {
    return Array.isArray(value) ? value.length : 0
}
`;function ZD(e){let t=m`item`,o={[Vi]:m`${t}?.[${Vi}]`};for(let r in e.mapping){let i=e.mapping[r];if(C(Mo(i)),fC(i.value)){o[r]=m`${t}?.[${i.value.id}]`;continue}i.value}return m`(value) => {
      if (!Array.isArray(value)) return
      return value.map((${t}) => (${o}))
    }`}var KD=m`(a, b) => {
    if (typeof a === "string" && typeof b === "string") {
        return a.toLowerCase().includes(b.toLowerCase());
    }

    if (Array.isArray(a) && typeof b === "string") {
        return a.includes(b);
    }

    return false;
};
`;var qD=m`(a, b) => {
    if (!Array.isArray(a) || !Array.isArray(b)) {
        return false;
    }

    const aSet = new Set(a);

    for (const item of b) {
        if (!aSet.has(item)) {
            return false;
        }
    }

    return true;
};
`;var YD=m`(a, b) => {
    if (!Array.isArray(a) || !Array.isArray(b)) {
        return false;
    }

    if (b.length === 0) {
        return true;
    }

    const shortestArray = a.length < b.length ? a : b;
    const longestArray = shortestArray === a ? b : a;
    const longestSet = new Set(longestArray);

    for (const item of shortestArray) {
        if (longestSet.has(item)) {
            return true;
        }
    }

    return false;
};
`;function mB(e){let t=Kr(e.outputType);return ge(m`return ${Kt(t)?t:m`undefined`};`)}function QD(e,t,o,r,i,n,a){if(o==="link")return!a||!Oo(e)&&!U(e)?void 0:a.create(e);if(!Oo(e))return U(e)?i.create(e):dv(o,e,r)?n&&t&&o==="string"?n.add(e,t,l=>t?.[l]?.value):e:pv(o,r)}function fB(e,t,o,r,i){if(!cv(e.outputType))return mB(e);let n=QD(e.truthy,e.truthyLocalized,e.outputType,t,o,r,i),a=QD(e.falsy,e.falsyLocalized,e.outputType,t,o,r,i);return mt.lines(m`if (value) {`,m`return ${n===void 0?m`undefined`:n};`,m`} else {`,m`return ${a===void 0?m`undefined`:a};`,m`}`)}function eL(e,t,o,r,i){C(o),C(r),C(i);let n=new Set;function a(s){if(Oo(s)&&ui(s,c=>a(c)),U(s)){C(o);let c=o.create(s);n.add(ge(c))}}a(e.truthy),a(e.falsy);let l=[m`value`,ne.activeLocale];if(n.size>0){let s=`{${Array.from(n).join(", ")}}`;l.push(new P(s))}return new P(mt.lines(m`(${new P(l.map(ge).join(", "))}) => {`,new P(fB(e,t,o,r,i)),m`}`))}function is(e,t,o,r,i,n,a){if(o==="link")return!a||!Oo(e)&&!U(e)?void 0:a.create(e);if(!Oo(e))return U(e)?i.create(e):sv(o,e,r)?n&&o==="string"&&D(e)&&t?n.add(e,t,l=>t?.[l]?.value):e:lv(o,r)}function tL(e){let t=Kr(e.outputType);return ge(m`return ${Kt(t)?t:m`undefined`};`)}function hB(e,t,o,r,i,n){if(t?.type!=="enum"||!nv(e.outputType))return tL(e);let a=new Set,l=is(e.default,e.defaultLocalized,e.outputType,o,r,i,n);return mt.lines(m`switch (value) {`,...e.cases.filter(s=>a.has(s.from)||!t.options.includes(s.from)?!1:(a.add(s.from),!0)).map(s=>{let c=is(s.to,s.toLocalized,e.outputType,o,r,i,n);return m`case ${s.from}: return ${c===void 0?m`undefined`:c};`}),m`default: return ${l===void 0?m`undefined`:l};`,m`}`)}function oL(e,t,o,r,i,n){C(r),C(i),C(n);let a=new Set;function l(c){if(Oo(c)&&ui(c,d=>l(d)),U(c)){C(r);let d=r.create(c);a.add(ge(d))}}e.cases.forEach(c=>{l(c.to)}),l(e.default);let s=[m`value`,ne.activeLocale];if(a.size>0){let c=`{${Array.from(a).join(", ")}}`;s.push(new P(c))}return new P(mt.lines(m`(${new P(s.map(ge).join(", "))}) => {`,new P(hB(e,t,o,r,i,n)),m`}`))}function gB(e){let t=Kr(e.outputType);return ge(m`return ${Kt(t)?t:m`undefined`};`)}function yB(e,t,o,r,i){if(!av(e.outputType))return gB(e);let n=new Set,a=is(e.default,e.defaultLocalized,e.outputType,t,o,r,i);return mt.lines(m`switch (typeof value === "string" ? value.toLowerCase() : value) {`,...e.cases.filter(l=>{let s=l.from.toLowerCase();return n.has(s)?!1:(n.add(s),!0)}).map(l=>{let s=is(l.to,l.toLocalized,e.outputType,t,o,r,i);return m`case ${l.from.toLowerCase()}: return ${s===void 0?m`undefined`:s};`}),m`default: return ${a===void 0?m`undefined`:a};`,m`}`)}function rL(e,t,o,r,i){C(o),C(r),C(i);let n=new Set;function a(s){if(Oo(s)&&ui(s,c=>a(c)),U(s)){C(o);let c=o.create(s);n.add(ge(c))}}e.cases.forEach(s=>{a(s.to)}),a(e.default);let l=[m`value`,ne.activeLocale];if(n.size>0){let s=`{${Array.from(n).join(", ")}}`;l.push(new P(s))}return new P(mt.lines(m`(${new P(l.map(ge).join(", "))}) => {`,new P(yB(e,t,o,r,i)),m`}`))}var iL=m`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().endsWith(b.toLowerCase());
};
`;var nL=m`(a, b) => {
    return (typeof a === "string" && typeof b === "string") ? a.toLowerCase() === b.toLowerCase() : a === b;
};
`;var aL=m`(value, segment = "year") => {
    if (typeof value !== "string") return;
    const date = new Date(value);
    if (isNaN(date.getTime())) return;
    if (segment === "year") return date.getUTCFullYear();
    if (segment === "month") return date.getUTCMonth() + 1;
    if (segment === "day") return date.getUTCDate();
    if (segment === "hour24") return date.getUTCHours();
    if (segment === "hour12") {
        const hour = date.getUTCHours();
        return hour === 0 ? 12 : hour > 12 ? hour - 12 : hour;
    }
    if (segment === "minute") return date.getUTCMinutes();
};
`;var lg=m`spanCount`,mu=m`optionalColumnCount`,sL=m`(columnSpan, ${mu}) => {
    if (columnSpan === "all") return "-1 / 1";
    const ${lg} = Number.isFinite(columnSpan) && columnSpan > 0 ? columnSpan : 1;
    if (Number.isFinite(${mu}) && ${lg} > ${mu}) {
        return ${tt`span ${mu}`};
    }
    return ${tt`span ${lg}`};
};
`;var lL=m`spanCount`,cL=m`(rowSpan) => {
    const ${lL} = Number.isFinite(rowSpan) && rowSpan > 0 ? rowSpan : 1;
    return ${tt`span ${lL}`}
};
`;var dL=m`(gap) => {
    if (Number.isFinite(gap) && gap >= 0) return gap;
    if (typeof gap !== "string") return 0;
    const firstSegment = gap.split(" ")[0];
    const parsedGap = parseFloat(firstSegment);
    return Number.isFinite(parsedGap) && parsedGap >= 0 ? parsedGap : 0;
};
`;var pL=m`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a > b : false;
};
`;var uL=m`(value) => {
    if (typeof value !== "string") return "";
    return value.replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll('"', "&quot;").replaceAll("'", "&#39;");
};
`;var mL=m`(value) => {
    if (typeof value !== "string") return "";
    const entities = /&(?:[gl]t|quot|#39|amp|#6[02]|#34|apos|#38);/gu;
    const replacers = { "&lt;": "<", "&gt;": ">", "&quot;": '"', "&#39;": "'", "&amp;": "&", "&#60;": "<", "&#62;": ">", "&#34;": '"', "&apos;": "'", "&#38;": "&" };
    return value.replace(entities, match => replacers[match]);
};
`;var fL=m`(dateString, minDateString) => {
    if (typeof dateString !== "string" || typeof minDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const minDate = new Date(minDateString);
    if (isNaN(minDate.getTime())) return false;

    return date >= minDate;
};
`;var hL=m`(dateString, maxDateString) => {
    if (typeof dateString !== "string" || typeof maxDateString !== "string") return false;

    const date = new Date(dateString);
    if (isNaN(date.getTime())) return false;

    const maxDate = new Date(maxDateString);
    if (isNaN(maxDate.getTime())) return false;

    return date <= maxDate;
};
`;var gL=m`(value, start, end) => {
    if (typeof value !== "string" || typeof start !== "string" || typeof end !== "string") return false;

    const date = new Date(value);
    if (isNaN(date.getTime())) return false;

    const startDate = new Date(start);
    if (isNaN(startDate.getTime())) return false;

    const endDate = new Date(end);
    if (isNaN(endDate.getTime())) return false;

    return date >= startDate && date <= endDate;
};
`;var yL=m`(value) => {
    return typeof value === "number" && value % 2 === 0;
};
`;var CL=m`(a, b) => {
    return b.includes(a);
};
`;var SL=m`(value) => {
    return typeof value === "number" && value % 2 === 1;
};
`;var vL=m`(value) => {
    if (Array.isArray(value)) return value.length > 0;
    return value !== undefined && value !== null && value !== "";
};
`;var TL=m`(value) => {
    const result = JSON.stringify(value)
    if (typeof result === 'string') return result.replace(/<\\/(script|style)/gi, '<\\\\/$1')
    return result
};
`;var bL=m`(a, b) => {
    return (typeof a === "number" && typeof b === "number") ? a < b : false;
};
`;var IL=m`(value) => {
    return !value;
};
`;var NL=m`(value) => {
    if (typeof value !== "number") return value;
    if (!Number.isFinite(value)) return undefined;
    return Math.max(0, value) + "px";
};
`;var xL=m`(value, offset, limit) => {
    if (!Array.isArray(value)) return []
    const end = typeof limit === "number" ? offset + limit : undefined
    return value.slice(offset, end);
};
`;var PL=m`(value, prefix) => {
    if (typeof value === "string" && typeof prefix === "string") {
        return prefix + value;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof prefix === "string") {
        return prefix;
    }
    return "";
};
`;var VL=m`(value, cornerIndex) => {
    if (typeof value === "number" && Number.isFinite(value)) return Math.max(0, value) + "px";
    if (typeof value !== "string" || typeof cornerIndex !== "number") return undefined;
    const segments = value.split(" ");
    return segments[cornerIndex] || segments[cornerIndex - 2] || segments[0];
};
`;var kL=m`(value) => {
    return Array.isArray(value) ? Array.from(value).reverse() : [];
}
`;var RL=m`(a, b) => {
    return typeof a === "string" && typeof b === "string" && a.toLowerCase().startsWith(b.toLowerCase());
};
`;var wL=m`(value, suffix) => {
    if (typeof value === "string" && typeof suffix === "string") {
        return value + suffix;
    } else if (typeof value === "string") {
        return value;
    } else if (typeof suffix === "string") {
        return suffix;
    }
    return "";
};
`;var DL=m`(value, overflow) => {
    const isNonScrollable = (o) => o === "visible" || o === "clip" || o === undefined
    return isNonScrollable(value) === isNonScrollable(overflow) ? value : undefined
}`;var LL=m`(value) => {
    return Boolean(value);
};
`;var FL=m`value`,EL=m`activeLocale`;function AL(e,t){let o=t.dedupe("sharedDateFormatter",new P(mt.lines(m`(value, formatOptions, locale) => {`,m`  if (typeof value !== "string") return "";`,m`  const date = new Date(value);`,m`  if (isNaN(date.getTime())) return "";`,m`  const fallbackLocale = "en-US";`,m`  try {`,m`      return date.toLocaleString(locale || fallbackLocale, formatOptions);`,m`  } catch {`,m`      return date.toLocaleString(fallbackLocale, formatOptions);`,m`  }`,m`};`))),r=mv(e.display,e.format,e.dateStyle,!1),i={...uv[r].options,timeZone:"UTC"},n=t.dedupe("dateOptions",new P(ge(i)));return new P(mt.lines(m`(${FL}, ${EL}) => {`,m`return ${P.fn(o,FL,n,e.locale||EL)};`,m`};`))}var ML=m`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value.src;
    };
    return typeof value === "string" ? value : undefined;
};
`;var OL=m`(value) => {
    if (typeof value === "number" && Number.isFinite(value)) return value;
    if (typeof value !== "string") return 0;
    const parsedNumber = parseFloat(value);
    return (typeof parsedNumber === "number" && Number.isFinite(parsedNumber)) ? parsedNumber : 0;
};
`;var CB=`var(${rC}, clip)`,WL=m`(value) => {${m.joinLines(m`if (value === "clip") return ${CB}`,m`return value`)}};`;var zL=m`(value) => {
    if (typeof value === "object" && value !== null && typeof value.src === "string") {
        return value
    }
    return typeof value === "string" ? {src: value} : undefined;
};
`;var BL=m`(value) => {
    return typeof value === "string" ? value : String(value);
};
`;var HL=m`(value) => {${m.joinLines(m`if (value < -1) return -1`,m`if (value > 11) return 11`,m`return value`)}};`;function GL(e){switch(e){case"isAfter":return fL;case"isBefore":return hL;case"isBetweenDates":return gL;case"contains":return KD;case"containsAny":return YD;case"containsAll":return qD;case"endsWith":return iL;case"equals":return nL;case"isSet":return vL;case"greaterThan":return pL;case"lessThan":return bL;case"negate":return IL;case"numberToString":return _D;case"startsWith":return RL;case"toString":return BL;case"toNumber":return OL;case"toBoolean":return LL;case"extractDateSegment":return aL;case"reverseArray":return kL;case"offsetAndLimitArray":return xL;case"arrayLength":return XD;case"prefix":return PL;case"suffix":return wL;case"toResponsiveImage":return zL;case"toImageSrc":return ML;case"jsonStringify":return TL;case"htmlEscape":return uL;case"htmlUnescape":return mL;case"addImageAlt":return JD;case"toZIndex":return HL;case"toAxisOverflow":return DL;case"toOverflowWithClipFallback":return WL;case"numberToPixelString":return NL;case"radiusForCorner":return VL;case"isIncludedIn":return CL;case"isEven":return yL;case"isOdd":return SL;case"getGridColumnCSSValue":return sL;case"getGridRowCSSValue":return cL;case"getNumericColumnGap":return dL;default:$(e,"All constant transform names should be implemented")}}function $L(e,t,o,r,i,n,a){switch(e.name){case"enumToDisplayName":return GD(t);case"convertFromEnum":return oL(e,t,o,r,i,n);case"convertFromString":return rL(e,o,r,i,n);case"convertFromBoolean":return eL(e,o,r,i,n);case"arrayToArray":return ZD(e);case"toDateString":return AL(e,a);default:$(e,"All dynamic transform names should be implemented")}}var Ko=Wi(),SB={name:"toString"},vB={name:"toNumber"},TB={name:"toBoolean"},bB={name:"toResponsiveImage"},IB={name:"toImageSrc"},NB={name:"toZIndex"},xB={name:"numberToPixelString"},PB={name:"radiusForCorner"},VB={name:"toAxisOverflow"},kB={name:"toOverflowWithClipFallback"},RB={name:"jsonStringify"},wB={name:"htmlEscape"},DB={name:"htmlUnescape"},LB={name:"addImageAlt"},FB={name:"getGridColumnCSSValue"},EB={name:"getGridRowCSSValue"},AB={name:"getNumericColumnGap"};function MB(e){return gC(e.name)}var si=class{constructor(t,o,r,i,n,a,l,s,c){this.fileDeclarations=t;this.componentDeclarations=o;this.imports=r;this.variables=i;this.localizedValues=n;this.links=a;this.fetches=l;this.modulesStore=s;this.type=c}wrapInTransformFunction(t,o,r,i,n){if(hC(o.name)){let a=this.fileDeclarations.dedupe(o.name,GL(o.name));return P.fn(a,t,...r)}if(MB(o)){if(o.name==="enumToDisplayName"&&i&&i.type==="enum"){let l=this.getImportedEnumToDisplayNameIfPossible(t,i);if(l)return l}let a=$L(o,i,n,this.variables,this.localizedValues,this.links,this.fileDeclarations);return P.fn(new P(this.fileDeclarations.dedupe(o.name,a)),t,...r)}$(o.name,"All value transforms should be handled in wrapInTransformFunction")}getImportedEnumToDisplayNameIfPossible(t,o){let r=this.imports,i=this.modulesStore;if(!r||!i)return;let n=ES(o);if(!n)return;let{dataIdentifier:a,enumFieldKey:l}=n;if(a===Kv)return l===Zv?this.variables?.getLayoutDirectionName()??m`undefined`:this.variables?.getLocaleName()??m`undefined`;let s=E.dataForIdentifier(a);if(!s||!s.annotations)return;let c="framerEnumToDisplayNameUtils",d=s.annotations?.[c];if(!D(d))return;let p=Number.parseInt(d,10);if(!X(p))return;let f=ce(a);if(!Ze(f))return;let{importSpecifier:h}=xi(f,this.type,i);if(!h)return;let v=this.variables?.getLocale()??m`undefined`;switch(p){case 1:{let T=BD(l),N=r.addImport(h,{exportSpecifier:T});return P.optionalFn(N,t,v)}case 2:{let T=HD,N=r.addImport(h,{exportSpecifier:T});return P.optionalFn(m`${N}[${l}]`,t,v)}default:throw new Error(`Enum to display name utils, unsupported version: ${p}`)}}wrapInValueTransform(t,o,r,i){return this.wrapInTransformFunction(t,o,UD(o,this,this.variables,this.localizedValues),r,i)}makeTypeSafe(t,o){switch(o){case"string":case"color":return this.wrapInTransformFunction(t,SB,Ko);case"number":return this.wrapInTransformFunction(t,vB,Ko);case"boolean":return this.wrapInTransformFunction(t,TB,Ko);case"array":case"enum":case"link":case"gap":case"padding":case"borderradius":case"image":return t;default:return t}}getActiveLocaleCode(){if(!this.componentDeclarations||!this.imports)return m`undefined`;let t=this.imports.addImport("framer",{exportSpecifier:"useLocaleCode"});return this.componentDeclarations.dedupe("activeLocaleCode",P.fn(t))}createComputedValue(t,o,r){C(this.variables);let i=Hr(t)?o.cache.getVariableControlByReference(t.startValue):void 0,n=Hr(t)?this.variables.create(t.startValue):this.fetches.createFetchBinding(o,t.startValue),a;t.transforms.forEach(s=>{yC(s.name)&&(n=this.wrapInValueTransform(n,s,i,r),a=s)});let l=a?CC(a.name):null;return!l||l.length>1||l[0]!==t.outputType?this.makeTypeSafe(n,t.outputType):n}wrapInToResponsiveImage(t){return this.wrapInTransformFunction(t,bB,Ko)}wrapInToImageSrc(t){return this.wrapInTransformFunction(t,IB,Ko)}wrapInToZIndex(t){return this.wrapInTransformFunction(t,NB,Ko)}wrapInNumberToPixelString(t){return this.wrapInTransformFunction(t,xB,Ko)}wrapInRadiusForCorner(t,o){return this.wrapInTransformFunction(t,PB,[o])}wrapInToAxisOverflow(t,o){return this.wrapInTransformFunction(t,VB,[o])}wrapInToOverflowWithClipFallback(t){return this.wrapInTransformFunction(t,kB,Ko)}wrapInAddImageAlt(t,o){return this.wrapInTransformFunction(t,LB,[o])}wrapInClampRGB(t){return C(this.imports,"ValueTransformCollector: Must have imports to wrap in clampColor."),P.fn(this.imports.addImport("framer",{exportSpecifier:"clampRGB"}),t)}wrapInGetGridColumnCSSValue(t,o){return this.wrapInTransformFunction(t,FB,o?[o]:Ko)}wrapInGetGridRowCSSValue(t){return this.wrapInTransformFunction(t,EB,Ko)}wrapInGetNumericColumnGap(t){return this.wrapInTransformFunction(t,AB,Ko)}wrapInTemplateFilters(t,o){return this.makeTypeSafe($I(t,o,{json:r=>this.wrapInTransformFunction(r,RB,Ko),escape:r=>this.wrapInTransformFunction(r,wB,Ko),raw:r=>this.wrapInTransformFunction(r,DB,Ko)}),"string")}};function OB(e){return W(e)||Mt(e)||ie(e)||jr(e)||Be(e)}function _L(e,t){return m`(key, locale){${m.joinLines(m`while (locale) {${m.joinLines(m`const values = ${e}[locale.id]`,m`if (values) {${m.joinLines(m`const value = ${t?m`values.read()[key]`:m`values[key]`}`,m`if (value) return value`)}}`,m`locale = locale.fallback`)}}`)}}`}var Al,fu=class{constructor(t,o,r){this.entryNode=t;this.variables=o;this.treeStore=r;L(this,"cache",{});L(this,"valueCounter",0);le(this,Al,!1)}freeze(){re(this,Al,!0)}add(t,o,r){C(!A(this,Al),"Cannot add values to a frozen LocalizedValuesCollector.");let i={};if(!o||!OB(this.entryNode))return t;let n;if(this.variables){let p=new oi;n=new Gn(this.entryNode,p)}let a=this.treeStore.tree.root.locales??[];for(let p of a){if(!(p.id in o))continue;let f=this.createLocalizedValue(p.id,n,r);Qo(f)||(i[p.id]=f)}if(Ft(i))return t;let l=ge({defaultValue:t,localizedValues:i}),s=this.cache[l];if(s)return s;let c=`v${this.valueCounter++}`,d=P.fn(this.getLocalizedValueBinding,c,ne.activeLocale);if(this.variables&&n&&n.size>0){let p=[],f=[];for(let[v,T]of n){p.push(T);let N=this.variables.create(v);f.push(N)}for(let v in i){let T=i[v];C(!Qo(T),"Localized should not be null or undefined");let N=m.listFrom(p);i[v]=m`(${N}) => ${T}`}let h=m.listFrom(f);d=m`${d}?.(${h})`}for(let p in i){let f=i[p];C(!Qo(f),"Localized should not be null or undefined"),this.recordLocalizedValue(p,c,f)}return M(t)||(d=m`${d} ?? ${t}`),this.cache[l]=d}};Al=new WeakMap;var gn,hu=class extends fu{constructor(o,r,i,n,a,l,s,c){super(o,r,i);this.imports=n;this.declarations=a;this.fetches=l;this.modulesStore=s;this.moduleType=c;L(this,"submoduleByLocaleId",new Map);L(this,"identifier",`../${di("localization",this.entryNode.id)}`);L(this,"submodules");L(this,"bindings",new oi);le(this,gn);this.submodules=new uu(this.moduleType,this.modulesStore,this.entryNode.id)}get getLocalizedValueBinding(){return this.imports.addImport(this.identifier,{exportSpecifier:"default",importBinding:"getLocalizedValue"})}canPreloadWithSuspense(){return!ie(this.entryNode)}preloadWithSuspense(){A(this,gn)||(re(this,gn,this.bindings.create("usePreloadLocalizedValues")),this.declarations.component.create(P.fn(this.imports.addImport(this.identifier,{exportSpecifier:ge(A(this,gn))}),ne.activeLocale)))}createLocalizedValue(o,r,i){let n=this.submoduleByLocaleId.get(o)??this.submodules.create(),a=new on(this.entryNode,n.imports,n.bindings,r,this.treeStore,this.modulesStore),l=i(o,{links:a,variables:r,imports:n.imports,declarations:n.declarations,valueTransforms:new si(n.declarations,void 0,n.imports,r,this,a,this.fetches,this.modulesStore,this.moduleType)});if(Qo(l)){n&&!this.submoduleByLocaleId.has(o)&&this.submodules.delete(n);return}return this.submoduleByLocaleId.set(o,n),this.canPreloadWithSuspense()&&this.preloadWithSuspense(),l}recordLocalizedValue(o,r,i){let n=this.submoduleByLocaleId.get(o);C(n,"Localization submodule must exist"),n.declarations.create(m`export const ${new P(r)} = ${i}`)}maybeGetUsePreloadDeclarations(o){if(!this.canPreloadWithSuspense()||!A(this,gn))return[];let r=this.bindings.create("preload"),i=A(this,gn);return[m`function ${r}(locale) {${m.joinLines(m`const promises = []`,m`while (locale) {${m.joinLines(m`const values = ${o}[locale.id]`,m`if (values) {${m.joinLines(m`const promise = values.preload()`,m`if (promise) promises.push(promise)`)}}`,m`locale = locale.fallback`)}}`,m`if (promises.length > 0) return Promise.all(promises)`)}}`,m`export function ${i}(locale) {${m.joinLines(m`const preloadPromise = ${r}(locale)`,m`if (preloadPromise) throw preloadPromise`)}}`]}values(o){let r={};for(let[i,n]of this.submoduleByLocaleId)if(this.canPreloadWithSuspense()){let a=o.addImport("framer",{exportSpecifier:"LazyValue"});r[i]=P.fn(m`new ${a}`,m`() => import(${n.submoduleImport})`)}else r[i]=o.addImport(n.submoduleImport,{exportSpecifier:"*",importBinding:"localizedValues"});return r}module(o){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0||this.submoduleByLocaleId.size===0)return;let i=new Ni(this.moduleType,this.modulesStore,this.bindings),n=new Hn(this.bindings),a=n.dedupe("valuesByLocaleId",this.values(i));return{type:"localization",revision:o,source:m.joinSections(m.joinLines(...i.statements),...n.list(),m`export default function getLocalizedValue${_L(a,this.canPreloadWithSuspense())}`,...this.maybeGetUsePreloadDeclarations(a)),artifacts:{submodules:this.submodules.serialize()}}}};gn=new WeakMap;var Ml,El=class extends fu{constructor(o,r,i,n,a,l,s,c,d){super(o,r,i);this.imports=n;this.bindings=a;this.declarations=l;this.fetches=s;this.modulesStore=c;this.moduleType=d;L(this,"valuesByLocaleId",{});le(this,Ml)}get getLocalizedValueBinding(){return A(this,Ml)||re(this,Ml,this.bindings.create("getLocalizedValue")),A(this,Ml)}recordLocalizedValue(o,r,i){let n=this.valuesByLocaleId[o]??{};n[r]=i,this.valuesByLocaleId[o]=n}createLocalizedValue(o,r,i){let n=new on(this.entryNode,this.imports,this.bindings,r,this.treeStore,this.modulesStore);return i(o,{links:n,variables:r,imports:this.imports,declarations:this.declarations,valueTransforms:new si(this.declarations,void 0,this.imports,r,this,n,this.fetches,this.modulesStore,this.moduleType)})}list(){if(this.freeze(),(this.treeStore.tree.root.locales??[]).length===0)return[];let r=this.bindings.create("valuesByLocaleId");return[m`const ${r} = ${this.valuesByLocaleId}`,m`function ${this.getLocalizedValueBinding} ${_L(r,!1)}`]}};Ml=new WeakMap;var la,ca,ns,gu=class{constructor(t){le(this,la);le(this,ca,new Set);le(this,ns,new Map);re(this,la,{...t})}count(t,o=1){A(this,la)[t]+=o}measureLength(t,o){return(typeof o=="string"||o instanceof P)&&(A(this,la)[t]+=o.length),o}get(){if(A(this,ca).size>0){let o=Array.from(A(this,ca),r=>r.metric).join(", ");throw Error(`Attempted to get metrics before completing timer(s): ${o}`)}let t={...A(this,la)};for(let[o,r]of A(this,ns)){let i=ap(r);t[o]+=Math.round(i.reduce((n,[a,l])=>n+(l-a),0))}return t}time(t){let o=performance.now(),r=!1,i={get metric(){return t},cancel:()=>{r||(A(this,ca).delete(i),r=!0)},done:()=>{C(!r,"Attempted to complete a cancelled timer");let n=A(this,ns).get(t);n||(n=[],A(this,ns).set(t,n)),n.push([o,performance.now()]),i.cancel()}};return A(this,ca).add(i),i}async timed(t,o){let r=this.time(t);try{return await o()}finally{r.done()}}};la=new WeakMap,ca=new WeakMap,ns=new WeakMap;var Ol,da=class{constructor(t,o,r,i,n,a,l){this.entryNode=t;this.treeStore=o;this.variables=r;this.declarations=i;this.bindings=n;this.imports=a;this.assets=l;le(this,Ol,new Map);L(this,"preloadDependencyTree",new Map)}command(t){let o=A(this,Ol).get(t);if(o)return o;let r=this.bindings.create("pre"+t);return A(this,Ol).set(t,r),r}addQuery(t,o,r){if(!ie(this.entryNode))return;let{destructured:i,dependencies:n}=this.getVariableDependencies(r),a=m`(${UL(this.command("query"),i)}) => ${P.fn(this.command("query"),o)}`;this.addStatement("query",t,n,P.fn(this.declarations.dedupe("query",a),this.command("query"),i))}addFetch(t,o){if(!ie(this.entryNode))return;let{usedVariables:r}=ag(o,this.variables);U(o.controlProp.value)&&r.push(o.controlProp.value);let{destructured:i,dependencies:n}=this.getVariableDependencies(r),a=m`(${UL(this.command("fetch"),i)}) => ${P.fn(this.command("fetch"),lu(o,this.variables,this.assets,void 0))}`;this.addStatement("fetch",t,n,P.fn(this.declarations.dedupe("query",a),this.command("fetch"),i))}createPromiseList({fetches:t,children:o},r=!1){let i=[];if(r)for(let n of t)i.push(n);for(let[,n]of o){for(let l of n.fetches)i.push(l);if(!n.value)continue;let a=n.value;if(n.children.size===0){i.push(a);continue}i.push(m`${a}.then(collection => Promise.all(collection.flatMap((${HB(this.variables,n.usedVariables)}) => (${this.createPromiseList(n)}))))`)}return m`[${m.listFrom(i)}]`}getHook(){if(!ie(this.entryNode))return{variants:new Set,hook:void 0};let t={},o=[],r=new Set;for(let[h,v]of this.preloadDependencyTree){if(v.children.size===0&&v.fetches.size===0||!v.variantHasAnyFetches)continue;r.add(h);let T=v.usedVariables.map(N=>this.variables.create(N));o.push(...T),t[h]=this.declarations.dedupe("preload",m`(${this.command("query")}, ${this.command("fetch")}, ${cg(T)??m`props`}) => Promise.all(${this.createPromiseList(v,!0)})`)}if(!r.size)return{variants:new Set,hook:void 0};let i=this.declarations.dedupe("preloadStatements",t),n=this.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),a=this.imports.addImport("framer",{exportSpecifier:"usePreloadQuery"}),l=this.imports.addImport("framer",{exportSpecifier:"usePrefetch"}),s=m`variant`,c=m`gestures`,d=m`clearLoadingVariant`,p=m`setGestureState`,f=this.declarations.dedupe("useLoadingVariant",m`(${s}, ${c}, ${d}, ${p}, props?: Record<string, unknown>) => {${m.joinLines(m`const prequery = ${P.fn(a)}`,m`const prefetch = ${P.fn(l)}`,m`${n}.useEffect(() => {${m.joinLines(m`const promise = ${i}[${s}]`,m`if (!promise || !${c}?.[${s}]?.loading) return`,m`promise(prequery, prefetch, props)`,m`.then(() => ${P.fn(d)})`,m`.catch(() => ${P.fn(p,{isError:!0})})`)}}, [${s}])`)}}`);return{variants:r,hook:h=>P.fn(f,ne.baseVariant,h,ne.clearLoadingGesture,ne.setGestureState,cg(o))}}addStatement(t,o,r,i){let n=this.treeStore.treeIndex.getGroundNodeIdFor(o.id),a=this.treeStore.tree.get(n);if(!a||!Ve(a)||Ja(a.gesture))return;let l=jL(this.preloadDependencyTree,a.id);t==="fetch"&&(l.variantHasAnyFetches=!0);let s=r.get(this.entryNode.id);s&&l.usedVariables.push(...s);let c=l;for(let d of WB(o,r,t==="fetch")){let p=jL(c.children,d);if(d===o.id){t==="query"&&(p.value=i),t==="fetch"&&p.fetches.add(i);for(let[h,v]of r){let T=p.dependencies.get(h)??[];T.push(...v),p.dependencies.set(h,T)}}let f=r.get(d);f&&p.usedVariables.push(...f),c.children.set(d,p),c=p}this.preloadDependencyTree.set(a.id,l)}getVariableDependencies(t){let o=[],r=new Map;for(let i of t)o.push(this.variables.create(i)),zB(r,i.providerId??this.entryNode.id,i);return{destructured:cg(o),dependencies:r}}};Ol=new WeakMap;function WB(e,t,o){if(e.cache.ancestorRepeaterIds){if(o){let r=[...e.cache.ancestorRepeaterIds,e.id];for(let i=e.cache.ancestorRepeaterIds.length-1;i>=0;i--){let n=e.cache.ancestorRepeaterIds[i];if(n&&t.has(n))break;r.splice(i,1)}return r}return[...e.cache.ancestorRepeaterIds,e.id]}return[e.id]}function zB(e,t,o){let r=e.get(t)??[];r.push(o),e.set(t,r)}function BB(e){return{id:e,value:void 0,dependencies:new Map,usedVariables:[],children:new Map,fetches:new P.Set,variantHasAnyFetches:!1}}function jL(e,t){return e.get(t)??BB(t)}function UL(...e){let t=[];for(let o of e)o&&t.push(ge(o));return new P(t.join(", "))}function cg(e){if(e.length===0)return;let t={};for(let o of e)t[ge(o)]=o;return t}function HB(e,t){if(t.length===0)return m``;let o=new ee;for(let r of t)o[r.id]=e.create(r);return o}var ss,yu=class{constructor(){le(this,ss,[])}add(t){let o=_B(t);o.length!==0&&A(this,ss).push(...o)}annotation(){if(A(this,ss).length===0)return;let t=new Set;for(let o of A(this,ss))t.add(JSON.stringify(o));return`[${Array.from(t).join(",")}]`}};ss=new WeakMap;function as(e){return D(e)&&e.length>0}function GB(e){return ze(e)?"id"in e&&as(e.id)&&(e.type===void 0||e.type==="click"||e.type==="form_submit"):!1}function Pye(e){return St(e)?e.every(GB):!1}function $B(e,t,o){if(e.includes(Hc))try{let i=Ha(e).querySelectorAll(`[${Hc}]`);for(let n of i){let a=n.getAttribute(Hc);as(a)&&o.push({id:a,nodeId:t,type:"click"})}}catch{}}function _B(e){let t=[],o=e.getPrimaryId();if(rn(e)&&as(e.linkClickTrackingId)&&t.push({id:e.linkClickTrackingId,nodeId:o,type:"click"}),Ie(e)){for(let r of e.getLinkClickTrackingId(!1))as(r)&&t.push({id:r,nodeId:o,type:"click"});if(e.htmlLocalized)for(let r in e.htmlLocalized){let i=e.htmlLocalized[r]?.value;i&&$B(i,o,t)}}if(_(e)){let r=E.reactComponentForIdentifier(e.codeComponentIdentifier);if(r?.properties){let i=e.getControlProps(r.properties);for(let n in i){if(!i[n])continue;let a=i[n];a.type==="trackingid"&&as(a.value)&&t.push({id:a.value,nodeId:void 0,type:void 0})}}}return _o(e)&&as(e.formSubmitTrackingId)&&t.push({id:e.formSubmitTrackingId,nodeId:o,type:"form_submit"}),t}var Cu=class{constructor(t,o,r,i){this.imports=t;this.treeStore=o;this.modulesStore=r;this.createBinding=i;L(this,"sets",new Set)}resolveVariableInstance(t){C(U(t.dynamicVectorSetIdentifier),"Vector set identifier must be a variable reference"),C(Ze(t.codeComponentIdentifier),"Code component identifier must be a module");let o=ce(t.codeComponentIdentifier),r=Xs(o,this.treeStore.tree,this.modulesStore)?.set.moduleId;return r&&this.sets.add(r),this.createBinding(t.dynamicVectorSetIdentifier,t,"Icon")}resolveControl(t,o,r){if(U(t))return this.sets.add(o.setModuleId),this.createBinding(t,r,"Icon");C(Ze(t),"Vector set item must be a module export identifier");let i=QT(this.treeStore.tree,o,t);if(i)return this.imports.addModuleImport(i)}annotation(){if(this.sets.size!==0)return JSON.stringify(Array.from(this.sets))}};var Wl,zl,dg,Su=class{constructor(){le(this,zl);le(this,Wl,new Map)}set(t,o){A(this,Wl).set(kt(this,zl,dg).call(this,t),o)}get(t){return A(this,Wl).get(kt(this,zl,dg).call(this,t))}};Wl=new WeakMap,zl=new WeakSet,dg=function(t){return t.getPrimaryId()};function JL(e,t){let o=new Map(t.map(i=>[i.id,i])),r=[];for(let i of e.getRouteSegmentRootNode().getWebPageIdToRawPathMap(e).keys()){let n=o.get(i);n&&r.push(n)}return r}function XL(e,t){let o,r,i,n,a;for(let s of e)W(s,!0)?(t===s.id&&(o=o??s),s.dataIdentifier?i=i??s:r=r??s):At(s,!0)?a=a??s:pt(s,!0)&&(n=n??s);let l=o??r??i??a??n;return C(l,"getFirstPageNodeAccordingToUI: Tree must contain at least one Web Page, Design Page or Canvas Page"),l}function ZL(e){for(let t of e)if(At(t,!0))return t}function KL(e){return e?W(e,!0)||pt(e,!0)||ie(e,!0)||At(e,!0):!1}function qL(e,t,o=!1,r=!1){let i=t?.[e];if(i)return i;if(e===Uc&&o)return r?"Key":"Key & Gamepad";if(r&&e==="onMouseEnter")return"Enter";let a=(e.startsWith("on")&&e.length>2?e.substring(2):e).replace("Tap","Click");return pi(a)}function jB(){let e=null,t=null;return o=>{let r=E.componentForIdentifier(o.codeComponentIdentifier);if(r===e)return t;if(!r||!r.properties)return null;let i={},n=Object.keys(r.properties);for(let a=0,l=n.length;a<l;a++){let s=n[a],c=r.properties[s];c?.type==="eventhandler"&&c.title&&(i[s]=c.title)}return e=r,t=i,i}}var jye=jB();function UB(e,t){let o=new Set(e.variables.map(r=>r.name));return Ro(pi(t),o)}function JB(e){switch(e.type){case"controlReference":case"nodePropertyControlReference":switch(e.expectedType){case"enum":return"Type";case"file":return"File";default:throw Error(`getFallbackNameForCreateVariableOptions(), unsupported file reference type: ${e.expectedType}`)}default:return NS(e.type)}}function XB(e,t){if(e==="richtext")return t.length;let o=FC;return t.forEach((r,i)=>{if(!xn(o)){if(r.type!=="richtext"){X(o)&&(o=Hy);return}EC(o)||(o=i)}}),X(o)?o:t.length}function ZB(e){return Mt(e)?"collection":Be(e)?"layout_template":ie(e)?"canvas_component":W(e)?"web_page":(C(!0,"Should not be able to create variables on invalid scope",e.__class),"canvas_component")}function pg(e,t){let{scopeId:o,isAssigned:r=!0,useUniqueName:i=!0,...n}=t,a=e.get(o);if(!a||!xr(a))return null;let l=t.name.trim(),s=l||JB(t),c=i?UB(a,s):s,d=Nl({...n,name:c},ZB(a));if(d.type==="eventhandler"&&!ie(a))return null;let p=XB(d.type,a.variables),f=Or.insert(a.variables,p,d);return a.set({variables:f}),r&&ZV({variableType:d.type,variableId:d.id}),Jt(d.id,a.id)}function sCe(e){let{engine:t,showModal:o=!0,...r}=e,i=pg(t.tree,r);if(!i)return null;let n=t.tree.get(e.scopeId);return!n||!xr(n)?null:(Ra(t)&&o&&(t.stores.variablesStore.selectedVariableId=i.id,t.stores.modalStore.set({type:"Variables",source:"properties"})),Jt(i.id,n.id))}var KB=nt("createAndAssignActionVariableToNode");function YL(e,t,o,r,i){if(!(Zt(t)||_(t)))return null;let n=e.getScopeNodeFor(t);if(!n||!ie(n))return null;let a=e.getGroundNodeFor(t);if(!a||!Co(a))return null;let l=E.componentForIdentifier("framer/useTriggerEvent");if(!l)return null;let s=pg(e,{scopeId:n.id,type:"eventhandler",name:r??qL(o,null),initialValue:void 0});if(!s)return null;hd(e,t,o,l,{id:{type:"string",value:s.id}});let c=n.getTopLevelReplicaVariants();for(let d of c){let{overrides:p}=d.replicaInfo;p[t.id]&&rb(e,d,t.id,o,l,{id:{type:"string",value:s.id}})}return i&&i.updateComponent(n.id).catch(d=>KB.error(d)),s.id}function qB(e){let t=fd(e);if(Object.keys(t).length!==0)for(let r in t){let i=t[r];if(i&&i.length===0)return r}}function YB(e,t,o){switch(t){case"framer/useShowOverlay":return e.create(oN,o);case"framer/useShowRelativeOverlay":return e.create(ki,o,{width:200,height:150,radius:10,boxShadows:[wC({x:0,y:10,blur:20,color:"rgba(0,0,0,0.05)",spread:0})],floatingPositionEnabled:!0,floatingPlacement:Gv,floatingAlignment:$v,floatingOffsetX:Bv,floatingOffsetY:Hv,floatingCollisionDetection:!0,floatingCollisionPadding:Kc});default:$(t)}}function QB(e,t,o,r){o&&C(t==="framer/useShowOverlay"&&Ue(o)||t==="framer/useShowRelativeOverlay"&&(De(o)||_(o)),"Invalid overlay type: ",o.__class,"for overlay action: ",t);let i=o??YB(e,t,r.id);return lt(i)&&i.set({zIndex:_S,styleAppearEffectEnabled:!0,styleAppearEffectTrigger:"onMount",overflow:"clip",position:"absolute",...yb.fadeIn()}),i}function e0(e,t,o,r,i){C($s(o),"Parent is not a local smart component instance, events can't be created");let n=eT(e,o);e.loadScopes([n],([a])=>{if(!a)return;let l=a.getPrimaryVariant();C(l,"SmartComponentNode should have a primary variant");let s=YL(e,l,r,r==="onMouseEnter"?"Hover":void 0,t);C(s,"Should be able to create event key for local smart component node"),i(s)})}function QL(e,t,o,r,i){let n=E.componentForIdentifier(t);C(n,"Cannot find overlay action definition"),hd(e,i,r,n,{overlay:{type:"string",value:o.id}},!0)}function t0(e){switch(e){case"framer/useShowOverlay":return"fixed";case"framer/useShowRelativeOverlay":return"relative";default:$(e)}}function eF({treeStore:e,codeGenerationStore:t},o,r,i){let n=e.tree.get(r);if(!n)return;let a=st(n)?e.tree.get(n.originalid):n;if(!a||!Zt(a)&&!_(a))return;let l=o==="framer/useShowRelativeOverlay"?"onMouseEnter":"onTap",s=_(a)?qB(a):l,c=$s(a);if(!s&&!c)return;let d=QB(e.tree,o,i,a);return s?QL(e.tree,o,d,s??l,a):e0(e.tree,t,a,l,p=>QL(e.tree,o,d,p,a)),It("overlay_create",{source:i?"duplicate":"events_panel",overlayType:t0(o)}),d}var tF=nt("ScopeStore");function ug(e){return pt(e,!0)||W(e,!0)||At(e,!0)}function vu(e){if(pt(e))return"CanvasPage";if(W(e))return"WebPage";if(ie(e))return"SmartComponent";if($i(e))return"ContentManagement";if(Be(e))return"LayoutTemplate";if(zo(e))return"VectorSet";if(KC(e))return"Analytics";if(qC(e))return"LocalizationGlossary";if(At(e))return"DesignPage";if(vc(e))return"Routes";if(YC(e))return"CustomCode";throw Error(`Failed to return scope type, invalid scope: ${e.__class}`)}var pa,ua,ma,fa,ls,ar,Ai,yn,cs,ds,ps,oF=class extends ti{constructor(o,r,i,n,a,l,s,c,d,p,f){super();this.treeStore=o;this.canvasStore=r;this.selection=i;this.chromeStore=n;this.contentManagementStore=a;this.modalStore=l;this.overlayStore=s;this.codeGenerationStore=c;this.insertSidebarStore=d;this.modulesStore=p;this.aiGenerationStore=f;le(this,pa,0);L(this,"isCheckingActivePage",!0);le(this,ua,"");le(this,ma,"");le(this,fa,"");le(this,ls,"");le(this,ar,[]);le(this,Ai,!1);le(this,yn,!1);le(this,cs,new Map);le(this,ds,new Map);L(this,"loadingActiveId");L(this,"_activeId");L(this,"scopeSwitchStart",0);L(this,"scopeSwitchPending",!1);L(this,"scopeIdToSelectedCollectionItem",new Map);L(this,"rootScopeType","CanvasPage");le(this,ps,[]);L(this,"canGoBack",()=>A(this,Ai));L(this,"goBack",()=>{let o=Array.from(this.isolatedCanvasNodes());o.pop();let r=o.pop();r&&this.select(r.id,{keepHistory:!1})});let h=this.getFirstPageNodeAccordingToUI();this._activeId=h.id,Pm(h),pt(h)?re(this,ua,h.id):W(h)?re(this,ma,h.id):At(h)&&re(this,fa,h.id);let v=this.getScopeNodes();re(this,pa,v.indexOf(h)),C(h.loaded,"Scope must be fully loaded"),d.onScopeChange({scope:h.loaded,hasCanvasPageNodes:this.hasCanvasPageNodes(),hasWebPageNodes:this.hasWebPageNodes()}),this.modulesStore.setActiveScope(this._activeId)}get activeId(){return this._activeId}get active(){let o=this.getScopeNode(this._activeId);return C(o.isLoaded(),"Scope must be fully loaded"),o}get rootNode(){return this.treeStore.tree.root}get checkingActivePage(){return this.isCheckingActivePage}documentDidLoad(){this.isCheckingActivePage=!1}get scopeType(){return vu(this.active)}getScopeNode(o){let r=this.treeStore.tree.get(o);return C(r instanceof Vm,"Node, ",o,"is not a ScopeNode"),r}getScopeNodes(){return this.rootNode.children.filter(Qr)}getCanvasPageNodes(){return this.rootNode.children.filter(pt)}getDesignPageNodes(){return this.rootNode.children.filter(At)}getKitPageNodes(){let o=[];for(let r of this.rootNode.children)W(r)&&r.kitPage&&o.push(r);return o}getSmartComponentNodes(){return this.rootNode.children.filter(ie)}getLayoutTemplateNodes(){return this.rootNode.children.filter(Be)}getWebPageNodes(){return this.rootNode.children.filter(o=>W(o,!0)&&!o.kitPage)}getWebPageNodesWithoutCollection(){return this.rootNode.children.filter(o=>W(o,!0)&&!o.dataIdentifier&&!o.kitPage)}getWebPageNodesWithCollection(o=!1){let r=this.rootNode.children.filter(i=>!!(W(i)&&i.dataIdentifier));return o?JL(this.treeStore.tree,r):r}hasPages(){let o=!1,r=!1,i=!1,n=!1,a=!1;for(let l of this.rootNode.children)if(pt(l)&&(i=!0),At(l)&&(n=!0),W(l)&&(l.kitPage?a=!0:l.dataIdentifier?r=!0:o=!0),o&&r&&i&&n&&a)break;return{hasSitesPages:o,hasCMSPages:r,hasCanvasPages:i,hasDesignPages:n,hasKitPages:a}}hasCanvasPageNodes(){return this.rootNode.children.some(pt)}hasWebPageNodes(){return this.rootNode.children.some(W)}getRootScopeNodes(){return this.rootNode.children.filter(ug)}getFirstPageNodeAccordingToUI(o=this.treeStore.tree){let{children:r,homePageNodeId:i}=o.root,n=XL(r,i);if(i0(n)){let a=ZL(r);if(a)return a}return n}getFirstWebPageNode(){try{let o=this.getFirstPageNodeAccordingToUI();if(W(o))return o}catch{}}changeActive(o,r,i){if(this._activeId){let s=o.get(this._activeId),c=W(s)&&s.abTestingParentId?s.abTestingParentId:this._activeId;A(this,cs).set(c,{zoom:this.canvasStore.zoom,offset:this.canvasStore.offset}),A(this,ds).set(this._activeId,this.selection.ids),ie(s)&&It("component_canvas_exit",{componentId:this._activeId})}if(re(this,ls,this._activeId),re(this,pa,i),this._activeId=r.id,Pm(r),this.codeGenerationStore.changeScope(),this.modulesStore.changeScope(r),At(r))this.rootScopeType="DesignPage",re(this,fa,r.id),re(this,ar,[]),re(this,Ai,!1),re(this,yn,!1);else if(pt(r))this.rootScopeType="CanvasPage",re(this,ua,r.id),re(this,ar,[]),re(this,Ai,!1),re(this,yn,!1);else if(W(r))this.rootScopeType="WebPage",re(this,ma,r.id),re(this,ar,[]),re(this,Ai,!1),re(this,yn,vt(r));else if(ie(r)||Be(r)||zo(r)){let s=A(this,ar).indexOf(r.id);s===-1?A(this,ar).push(r.id):A(this,ar).splice(s+1),re(this,Ai,A(this,ar).length>0),re(this,yn,!1),UV({componentId:r.id}),ie(r)&&this.chromeStore.mainView===0&&this.modalStore.displayComponentIsolationModal({source:"automatic"})}let n=A(this,cs).get(W(r)&&r.abTestingParentId?r.abTestingParentId:r.id);n?this.canvasStore.updateCanvas(n.offset,n.zoom):this.canvasStore.zoomAfterScopeSwitch(o,r);let a=A(this,ds).get(r.id);a?this.selection.set(a):this.selection.clear(),this.overlayStore.hideAll(),this.insertSidebarStore.onScopeChange({scope:r,hasWebPageNodes:this.hasWebPageNodes(),hasCanvasPageNodes:this.hasCanvasPageNodes()}),this.treeStore.setHighlight(null);let l=vu(r);this.chromeStore.onChangeScopeType(l),this.contentManagementStore.onChangeScopeType(l),this.aiGenerationStore.setCurrentSessionId(l==="DesignPage"?r.id:void 0)}select(o,{keepHistory:r,activateContentPanel:i,collectionItemId:n}){this.loadingActiveId=o,this.scopeSwitchStart=performance.now();let a=()=>{if(this.scopeSwitchPending=!1,this.loadingActiveId!==o||this._activeId===o)return;let c=this.getScopeNodes().findIndex(h=>h.id===o);C(c!==-1,"Tree must contain scope node");let p=this.treeStore.tree.latestTree().getNode(o);C(Qr(p),"Tree must contain scope node",o);let f;if(p.isLoaded())f=p.loaded;else if(!this.treeStore.tree.getService("loader"))tF.reportError(new ReferenceError("Loader service is not available in the tree but scope is not loaded"),{message:"Scope must be fully loaded"},{shallowScopes:"true"}),f=p;else throw new TypeError("Scope must be fully loaded");r||re(this,ar,[]),D(n)&&W(p)&&this.setSelectedCollectionItemForWebPage(p.id,n),i&&(this.chromeStore.contentPanelTab=i),this.changeActive(this.treeStore.tree,f,c)},l=this.treeStore.tree.getService("loader");if(l&&!l.hasLoadedScope(o)){this.scopeSwitchPending=!0,l.prioritizeLoadingScope(o,()=>this.scheduler.processWhenReady(a));return}a()}selectByNode(o){let r=this.treeStore.tree.get(o);if(r===null)return;let i=this.treeStore.tree.getScopeNodeFor(r);i!==null&&this.select(i.id,{keepHistory:!1})}selectPreviousActiveScope(){let o=this.treeStore.tree.get(A(this,ls));this.select(o?.id??this.getFirstPageNodeAccordingToUI().id,{keepHistory:!1})}findNextActiveScope(o=this.treeStore.tree){let r=o.root,i=r.children.filter(Qr);C(r.children.some(ug),"validateActiveScope: Tree must contain at least one Canvas Page or Web Page");let n=i.findIndex(a=>a.id===this._activeId);return n===-1&&(n=this.findNextAvailablePageIndex(i,A(this,pa))),[i[n],n]}validateActiveScope(o=this.treeStore.tree,r=!1){let[i,n]=this.findNextActiveScope(o);C(i,"ScopeNode must be defined"),r||C(i.isLoaded(),"Scope must be fully parsed"),re(this,pa,n);let a=i;return i.id!==this._activeId&&(this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,a,n)),a}findNextAvailablePageIndex(o,r){let i=[],n=[];for(let c=0;c<o.length;c++){let d=o[c];W(d)?n.push(c):pt(d)&&i.push(c)}let a=this.rootScopeType==="WebPage",l=a?n:i,s=a?i:n;return r0(l.length>0?l:s,r)}renameScope(o,r){this.getScopeNode(o).set({name:r})}getActiveScopeNodeForReset(o=this.treeStore.tree,r=null){if(r){let n=o.getScopeNodeFor(o.get(r));if(KL(n)&&n?.isValid())return n}let i=this.getFirstPageNodeAccordingToUI(o);if(W(i)&&i.isValid()&&i.loaded||(pt(i)||At(i))&&i.loaded)return i.loaded;tF.warn("getActiveScopeNodeForReset: falling back to scanning for a useful scope to make active");for(let n of o.root.children)if(pt(n)&&n.isValid()&&n.loaded||W(n)&&n.isValid()&&n.loaded)return n.loaded;for(let n of o.root.children)if(ie(n)&&n.isValid()&&n.loaded)return n.loaded;throw Error("Document does not have any scopes that can be set to active.")}resetActiveScope(o=this.treeStore.tree,r=void 0){let i=this.getActiveScopeNodeForReset(o,r);if(i.id===this._activeId)return;this._activeId="",re(this,ua,""),re(this,fa,""),re(this,ma,""),re(this,ls,""),A(this,cs).clear(),A(this,ds).clear(),C(i.isLoaded(),"Scope must be fully parsed");let n=o.root.children.indexOf(i);this.scopeSwitchStart=performance.now(),this.scopeSwitchPending=!1,this.changeActive(o,i,n)}movePage(o,r){let i=this.getScopeNode(o),n=this.getAllPageNodesOfScope(i),a=n[r];C(a,`Trying to move a page node to an invalid index: ${r}, total: ${n.length} page nodes.`);let l=this.rootNode.children.findIndex(s=>s.id===a.id);C(i.parentid,"Scope node has no parentid"),C(l!==-1,"Cant find scope in root node"),this.treeStore.tree.moveNode(i,i.parentid,l)}getAllPageNodesOfScope(o){return At(o)?this.getDesignPageNodes():pt(o)?this.getCanvasPageNodes():W(o)&&o.kitPage?this.getKitPageNodes():(C(!o,"Scope is not movable"),Wi())}getParentId(o,r,i){let n=this.rootNode.id;if(o instanceof Vm||Gi(o))return n;let a=i?this.getScopeNode(i):this.active;return $i(a)&&C(Vc(o),"ContentManagementNode only accepts content nodes"),r===n?a.id:r??a.id}insertNode(o,r,i,n,a){r=this.getParentId(o,r,a),ht(o)&&eF({codeGenerationStore:this.codeGenerationStore,treeStore:this.treeStore},lt(o)?"framer/useShowRelativeOverlay":"framer/useShowOverlay",r,o),this.treeStore.tree.insertNode(o,r,i,n)}insertNodes(o){for(let r of o)this.insertNode(r,r.parentid)}moveNode(o,r,i,n,a){r=this.getParentId(o,r,a),this.treeStore.tree.moveNode(o,r,i,n)}removeNode(o){this.treeStore.tree.removeNode(o),o.id===this._activeId&&this.validateActiveScope(this.treeStore.tree,!0)}setSelectedCollectionItemForWebPage(o,r){if(this.scopeIdToSelectedCollectionItem.get(o)===r)return;let n=new Map(this.scopeIdToSelectedCollectionItem);n.set(o,r),this.scopeIdToSelectedCollectionItem=n}getSelectedCollectionItemForScope(o){if(W(o))return this.scopeIdToSelectedCollectionItem.get(o.id)}getMostRecentPage(){switch(this.rootScopeType){case"CanvasPage":{let o=this.treeStore.tree.get(A(this,ua));if(pt(o))return o;break}case"DesignPage":{let o=this.treeStore.tree.get(A(this,fa));if(At(o))return o;break}case"WebPage":{let o=this.treeStore.tree.get(A(this,ma));if(o&&Qr(o)&&W(o))return o;break}}return this.getFirstPageNodeAccordingToUI()}getComponentHistory(){if(A(this,ar).length===0)return[];let o=this.active;if(!(ie(o)||Be(o)||zo(o)))return[];let r=[],i;for(let n of A(this,ar)){let a=this.treeStore.tree.getNode(n);(ie(a)||Be(a)||zo(a))&&a.isLoaded()&&(r.push(a),i=a)}return i===o?r:[o]}get onIsolatedCanvas(){return A(this,Ai)}get onCollectionPage(){return A(this,yn)}isolatedCanvasNodes(){let o=this.active,r;return ug(o)?r=[o]:r=[this.getMostRecentPage(),...this.getComponentHistory()],Vn(A(this,ps),r)?A(this,ps):(re(this,ps,r),r)}getTopMostWebPageNode(){for(let o of this.isolatedCanvasNodes())if(W(o))return o}};pa=new WeakMap,ua=new WeakMap,ma=new WeakMap,fa=new WeakMap,ls=new WeakMap,ar=new WeakMap,Ai=new WeakMap,yn=new WeakMap,cs=new WeakMap,ds=new WeakMap,ps=new WeakMap;function r0(e,t){for(let o of e)if(!(o<t))return o;return Math.max(...e)}function i0(e){if(!W(e)||!e.isLoaded())return!1;for(let t of e.children)if(!De(t)||t.children.length>0)return!1;return!0}function rF(e){return er(e)&&e.layout==="stack"&&e.stackDirection==="vertical"}function iF(e){return rF(e.getPrimaryVariant())&&e.getReplicaVariants().every(rF)}function n0(e,t,o){if(!Array.from(t).some(a=>{let l=o.get(a);return Et(l)}))return;let i=o.get(e.parentid),n=e;for(;i;){if(t.has(i.getPrimaryId())){let a=o.get(i.getPrimaryId()),l=HT(o,a),s=n.getPrimaryId();if(Et(a)&&s===l?.id)return a}n=i,i=o.get(i.parentid)}}function a0(e){return e}function s0(e){let t=new Set;return JI(e,o=>{o.providerId&&t.add(o.providerId)}),t}var nF=(e,t,o,r)=>(i,n,a,l=a0,s=void 0)=>{if(U(i))return l(o.create(i));if(Qt(i)){let c=l(r.createComputedValue(i,n,s));return TC(i)?c:t.component.dedupe(a,c,n0(n,s0(i),e.tree))}$(i)};function l0(e){if(pt(e))return"screen";if(zo(e))return"vector";if(At(e))return"design";let{type:t}=ce(e.instanceIdentifier);return t}function aF(e,t,{treeStore:o,modulesStore:r,engineChanges:i,assetMap:n},a=new Set,l=`framer-${lp(5)}`,s=!1){let c=l0(t),d=new oi(...a),p=new Ni(c,r,d);p.addImport("react",{exportSpecifier:"*",importBinding:"React"});let f=new au(t.id,pt(t)?e.id:t.id,c),h=vu(t);ho(h!=="ContentManagement"&&h!=="Analytics"&&h!=="LocalizationGlossary"&&h!=="Routes"&&h!=="CustomCode","Content management, Analytics, Localization glossary, Routes & Custom Code nodes cannot be code-generated");let v=new Pb(d),T=new Gn(t,d),N=new ra(n),w=new on(t,p,d,T,o,r,()=>{let $t=p.addImport("framer",{exportSpecifier:"useRouter"});return v.component.dedupe("router",P.fn($t))}),R=new da(t,o,T,v.file,d,p,N),B=new na(d,T,R,N,w),G=new hu(t,T,o,p,v,B,r,c),K=new si(v.file,v.component,p,T,G,w,B,r,c),se=new nu(t,d,v,p,T,o),oe=new yu,pe=new iu(v.component,t,e.id),Ee=nF(o,v,T,K),q=new xb(t,T,o,K,Ee),We=new Ap(t,e,l,q),$e=new cu(v.font),Y=new Lp(e,o,T,d,p,N,w,$e,B,{type:c}),Dt=new Set,J=new gu(mT()),ue=new Set,me={dependencies:ue,addDependency:$t=>ue.add($t)},Ae=Ti(t)&&!s?t.getReplicaVariants():[],Ct={};if(ie(t))for(let $t of Ae)!Go($t)||Ja($t.gesture)||(Ct[$t.replicaInfo.inheritsFrom??$t.replicaInfo.master]=!0);let Pt=new ru(o.tree,d),_e=new OT(t,$e,p,v.file,T,r,o),Ce=new du(r,o.tree),no=new pu(t),bo=new Cu(p,o,r,Ee),Yo=new ou(o,T,K),sr=Be(t)?ne.children:void 0;return{type:"jsxContext",treeStore:o,modulesStore:r,engineChanges:i,assetMap:n,simulatedDOM:Yo,variants:Ae,topLevelVariantsWithGestures:Ct,imports:p,errors:f,variables:T,fetches:B,assets:N,valueTransforms:K,elementIds:se,css:We,renderFunctions:pe,events:Y,links:w,fonts:$e,metrics:J,packages:me,appearIds:Pt,bindings:d,declarations:v,preload:R,localizedValues:G,componentPresetIds:Dt,renderAsListNodes:new Map,repeaterInfo:new Map,renderConditions:new Map,nodesWithAnyGradientFill:new Map,customCursors:_e,cssVariableDefinitions:q,formIds:new Set,hitTargets:no,createDeduplicatedDynamicValueBinding:Ee,trackingIds:oe,vectorSets:bo,kitSectionsStructure:Ce,overlayProps:new Map,llmSnapshot:s,scopeId:t.id,scopeType:h,moduleType:c,rootId:e.id,linkClassName:We.addRule({display:"block"},t),layoutTemplateSlotBinding:sr,nodeRendersWithMotion:new Su,serializationId:l,acceptsLayoutTemplate:W(t)&&t.isLoaded()&&t.baseVariantId?iF(t):void 0}}function sF({ctx:e,ancestorInfo:t,jsxAttributes:o,usedVariableIds:r,dataRepeater:i,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:l}){let s=[],c=o.subqueries,d=t.subqueries,p=mx(i,n,r,T=>{if(a){let N=d;for(;N;){if(T.providerId===N.repeaterNode.id){let w=Ed(N.repeaterNode),[R,B]=fx(T.id,w);return{type:"Identifier",name:B,collection:R}}N=N.parent}}return C(e.variables,"VariableCollector is required"),s.push(T),{type:"LiteralValue",value:e.variables.create(T)}},T=>{let N=e.imports.addModuleImport(T);return C(N,"Can't import collection"),N});C(c,"Subqueries must exist");let f=c.getSubqueries(l);for(let[T,N]of f)p.select.push({type:"FunctionCall",functionName:"ARRAY",alias:T,arguments:[{type:"Select",...N}]});let h=c.getVariableDependencies(l);s.push(...h);let v=p;return a?(C(d,"Parent subqueries must exist"),d.addSubquery(l,i.getPrimaryId(),p),d.addVariableDependencies(l,s)):e.preload.addQuery(i,v,s),new ee({query:v,pageSize:i.collectionPaginationPageSize})}function c0(e,t){return M(e.subqueries)||t.isAnyVariantPaginated?!1:e.inRepeatedItem??!1}function lF(e,t,o,r,i){let n=r.inheritedControlMap?.get(e.id);C(n,"Primary variant control map must be defined.");let a=c0(o,r),l=sF({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:i,dataRepeater:e,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:"primary"}),s={};for(let c of t.variants){let d=ea(c,e.id,t.treeStore.tree)??e;C(Et(d),"Node must be a data repeater");let p=sF({ctx:t,ancestorInfo:o,jsxAttributes:r,usedVariableIds:i,dataRepeater:d,primaryVariantControlMap:n,shouldInlineQuery:a,variantId:c.id});zr(l,p)||(s[c.id]=p)}return a?null:{props:l,overrides:Ft(s)?void 0:s}}function d0(e,t){let o=t.imports.addImport("framer",{exportSpecifier:"useQueryData"});if(wr(e)){let r=t.imports.addImport("framer",{exportSpecifier:"useLoadMorePaginatedQuery"}),i=m`paginatedQuery`;return m.joinLines(m`const { ${i}, paginationInfo, loadMore } = ${r}(query, pageSize, ${e.id})`,m`const data = ${P.fn(o,i)}`,m`return children(data, paginationInfo, loadMore)`)}return m.joinLines(m`const data = ${P.fn(o,m`query`)}`,m`return children(data)`)}function cF(e,t){return m`({ query, pageSize, children }) => {
        ${d0(e,t)}
    }`}function dF({renderAsListNodes:e},t){return t.parentid?e.has(t.parentid):!1}function pF(e,t,{isAnyVariantALink:o},r){let i=r?"motion.":"";return rn(t)&&(io(t)||o)?`${i}a`:dF(e,t)?`${i}li`:nn(t)&&t.htmlTag&&ja(e.scopeType)?`${i}${t.htmlTag}`:`${i}${Cd}`}function uF(e,t,{isAnyVariantAnEffect:o,isAnyVariantOptimizedAppearEffect:r},i){let n=[];o&&n.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r&&n.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"}));let a=t.treeStore.tree.get(i.lastRepeaterId);return Ur(a)&&wr(a)&&Pi(e,a)&&n.push(t.imports.addImport("framer",{exportSpecifier:"withInfiniteScroll"})),t.scopeType==="SmartComponent"?t.imports.addImport("framer",{exportSpecifier:"SmartComponentScopedContainer",composeWithImports:n}):t.imports.addImport("framer",{exportSpecifier:"Container",composeWithImports:n})}function p0(e,t){if(!oT(t.treeStore.tree,e)||!!!E.reactComponentForIdentifier(e.codeComponentIdentifier)?.annotations?.framerImmutableVariables)return;let r=ce(e.codeComponentIdentifier);if(!Ze(r))return;let{importSpecifier:i,importBinding:n}=xi(r,t.moduleType,t.modulesStore);if(!i)return;let a=t.imports.addImport(i,{exportSpecifier:"*",importBinding:`${n}Info`});return[t.imports.addImport("framer",{exportSpecifier:"withMappedReactProps"}),a]}function u0(e,t,o,r){let i=[];De(e)&&t.scopeType==="CanvasPage"&&i.push(t.imports.addImport("framer",{exportSpecifier:"withGeneratedLayoutId"})),r.isAnyVariantColumnMasonryLayout&&i.push(t.imports.addImport("framer",{exportSpecifier:"withColumnMasonryLayout"}));let n=m0(e,t,o);n&&i.push(n);let a=Wp(e,t);if(i.push(...a),n||a.length>0){let l=p0(e,t);l&&i.push(l)}return r.isAnyVariantAVariantAppearEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withVariantAppearEffect"})),_(e)&&!e.isVectorInstance||(r.isAnyVariantAnEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withFX"})),r.isAnyVariantOptimizedAppearEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withOptimizedAppearEffect"})),r.isAnyVariantATickerEffect&&i.push(t.imports.addImport("framer",{exportSpecifier:"withTickerFX"}))),i}function m0(e,t,o){let r=Op(e,t);if(!r)return;let{importSpecifier:i,exportSpecifier:n}=r,a={scopeId:t.scopeId,nodeId:e.getPrimaryId(),override:t.imports.addImport(i,{exportSpecifier:n}),inComponentSlot:o.inComponentSlot?!0:void 0};return[t.imports.addImport("framer",{exportSpecifier:"withCodeBoundaryForOverrides"}),a]}function f0(e,t){if(e.kind!=="localModuleExport")return;let{localId:o}=e,i=t.modulesStore.getPersistedModuleByLocalId(o)?.metadata.packageDependencies;Array.isArray(i)&&i.forEach(n=>{D(n)&&t.packages.addDependency(n)})}function mF(e,t){let o=Dd(e,E);if(!o)return;let r=di("prototype",o);return t.imports.addImport(`../${r}`,{exportSpecifier:"default",importBinding:"Prototype"})}function h0(e){switch(e){case"BooleanShapeNode":case"CodeComponentNode":case"FormBooleanInputNode":case"FormPlainTextInputNode":case"FormSelectNode":case"FrameNode":case"OvalShapeNode":case"OverlayNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"RichTextNode":case"ShapeContainerNode":case"ShapeGroupNode":case"StarShapeNode":case"SVGNode":case"TextNode":{let t=e;return!0}case"AnalyticsScopeNode":case"BlockquoteEntityTypeRootNode":case"BlockquoteStylePresetNode":case"BoxShadow":case"CanvasNode":case"CanvasPageNode":case"CanvasScopeNode":case"ChatTool":case"CMSEntityTypeRootNode":case"CodeFileEntityTypeRootNode":case"CollectionReferenceVariableEditTool":case"CollectionItemNode":case"CollectionNode":case"Color":case"ColorEntityTypeRootNode":case"ColorStyleTokenListNode":case"ColorStyleTokenNode":case"ComponentEntityTypeRootNode":case"ComponentPresetNode":case"ConicGradient":case"ContentManagementNode":case"CreateCodeComponentBaseTool":case"CreateFrameBaseTool":case"CreateShapeBaseTool":case"CreateTextTool":case"CustomCodeScopeNode":case"CustomCodeNode":case"DateVariableEditTool":case"DesignPageNode":case"EntityFolderNode":case"EntityReferenceNode":case"EntityRootNode":case"ErrorListNode":case"ErrorNode":case"ExportOptions":case"EnumVariableEditTool":case"ExternalModuleNode":case"ExternalModulesListNode":case"FeedbackTool":case"FunnelNode":case"FunnelStepActionNode":case"FunnelStepNode":case"GapTool":case"GradientColorStop":case"GradientToolManagerTool":case"GuideMoveTool":case"HeaderRouteNode":case"HighlightStackItemTool":case"HighlightTool":case"ImageStylePresetNode":case"InitialTool":case"InlineCodeEntityTypeRootNode":case"InlineCodeStylePresetNode":case"LayoutTemplateEntityTypeRootNode":case"LayoutTemplateNode":case"LineAnchorMoveTool":case"LinearGradient":case"LinkEntityTypeRootNode":case"LinkStylePresetNode":case"LinkTool":case"LoadingShieldTool":case"LocalizationGlossaryItemNode":case"LocalizationGlossaryNode":case"LocalModuleNode":case"LocalModulesListNode":case"MoveTool":case"MutableNode":case"PaddingTool":case"PageLinkTool":case"PanTool":case"PathCurveBendTool":case"PathDefaultTool":case"PathSegment":case"PathSegmentAdditionTool":case"PathSegmentHandleMoveTool":case"PathSegmentMoveTool":case"PathSegmentSelectTool":case"PresetsListNode":case"PreviewSettings":case"ProxyRouteNode":case"RadialGradient":case"RadiusTool":case"RecoveryTool":case"RedirectRouteNode":case"ResizeTool":case"RewriteRouteNode":case"RichTextEditTool":case"RichTextVariableEditTool":case"RootNode":case"RotateTool":case"RouteNode":case"RouteLocaleNode":case"RouteSegmentNode":case"RouteSegmentRootNode":case"RoutesNode":case"SampleColorTool":case"ScaleTool":case"ScopeNode":case"SelectTool":case"Shadow":case"SlotConnectTool":case"SlotNode":case"SlotPropertyNode":case"SmartComponentNode":case"StringVariableEditTool":case"StyledTextDraft":case"TableStylePresetNode":case"TestTool":case"TextEditTool":case"TextEntityTypeRootNode":case"TextStylePresetNode":case"VectorSetEntityTypeRootNode":case"VectorSetNode":case"VekterGradientTool":case"VekterPathEngine":case"VekterTool":case"ViewportResizeTool":case"WebPageNode":case"ZoomSelectTool":case"ZoomTool":{let t=e;return!1}default:$(e)}}function fF(e,t,o,r){if(!h0(e.__class))throw Error(`jsxTagNameForNode: ${e.__class} does not support serialization to JSX.`);let i=u0(e,t,o,r);switch(e.__class){case"SVGNode":case"ShapeContainerNode":case"BooleanShapeNode":case"OvalShapeNode":case"PathNode":case"PolygonShapeNode":case"RectangleShapeNode":case"ShapeGroupNode":case"StarShapeNode":return t.imports.addImport("framer",{exportSpecifier:"SVG",composeWithImports:i});case"TextNode":return t.imports.addImport("framer",{exportSpecifier:"Text",composeWithImports:i});case"RichTextNode":return t.imports.addImport("framer",{exportSpecifier:"RichText",composeWithImports:i});case"FrameNode":{if(_o(e))return t.imports.addImport("framer",{exportSpecifier:"FormContainer",composeWithImports:i});if(ro(e)||r.isAnyVariantAnImage)return t.imports.addImport("framer",{exportSpecifier:"Image",composeWithImports:i});let n=t.nodeRendersWithMotion.get(e);C(!M(n),"Node must have had `rendersWithMotion` computed for it.");let a=pF(t,e,r,n);return n?t.imports.addImport("framer-motion",{exportSpecifier:a,composeWithImports:i}):new P(a)}case"CodeComponentNode":{if(C(Bo(e),"Nodes with a ClassDiscriminator of CodeComponentNode must be a Code Component"),qR(e))return t.imports.addImport("framer",{exportSpecifier:YR(e)});if(Ui(e)||r.identifiers&&r.identifiers.size>1)return t.imports.addImport("framer",{exportSpecifier:"Instance",composeWithImports:i});let n=ce(e.codeComponentIdentifier);if(!Ze(n)){let d=jy(e.codeComponentIdentifier);return C(d,"A package must have module information to be included in code-generation."),t.packages.addDependency(d.packageName),t.imports.addImport(d.moduleURL,{exportSpecifier:d.exportIdentifier,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"withMeasuredSize"})]})}C(Ze(n),"A code component that is not a package must be a module.");let a=t.llmSnapshot&&_(e)&&e.isVectorInstance?"Icon":void 0,{importSpecifier:l,exportSpecifier:s,importBinding:c}=xi(n,t.moduleType,t.modulesStore,void 0,a);return C(l,"A module must have an import specifier."),f0(n,t),t.fonts.addFontReference({componentIdentifier:e.codeComponentIdentifier,fontReference:t.imports.addImport(l,{exportSpecifier:s,importBinding:c,composeWithImports:[t.imports.addImport("framer",{exportSpecifier:"getFonts"})]})}),t.imports.addImport(l,{exportSpecifier:s,importBinding:c,composeWithImports:i})}case"OverlayNode":return t.imports.addImport("framer",{exportSpecifier:"ResetOuterLinkContext"});case"FormBooleanInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormBooleanInput",composeWithImports:i});case"FormPlainTextInputNode":return t.imports.addImport("framer",{exportSpecifier:"FormPlainTextInput",composeWithImports:i});case"FormSelectNode":return t.imports.addImport("framer",{exportSpecifier:"FormSelect",composeWithImports:i});default:$(e.__class)}}function hF(e,t){if(vt(t)){let o=e.dataForIdentifier(t.dataIdentifier);return C(o,"A Data Repeater must have an evaluated data entity in the sandbox."),{id:t.id,annotations:o.annotations}}if(il(t))return{id:t.id,annotations:void 0};$(t,"A data repeater must have either an identifier or array variable")}function g0(e,t){let o=[];for(let[r,i]of e){if(af(r))continue;let n=t?.get(r);if(!n)continue;let a=Kr(n.type);Kt(a)&&o.push(m`${i} ??= ${a}`)}return o}function y0(e,t,o,r){if(vt(e)){let i=o?.framerRecordIdKey;return i?t.variables.create(Jt(i,e.id)):r}return t.bindings.create("id")}function C0(e,t){if(vt(e))return t.bindings.createWithNode("collection",e);if(il(e))return t.variables.create(e.dataRepeaterArray);$(e,"parent should be a collection or array repeater")}function S0(e,t,o,r,i){let n={};for(let[a,l]of o)af(a)||(n[a]=l);if(vt(e)){C(r,"Subqueries must exist");for(let a of r.childRepeaterIds){let l=i.treeStore.tree.get(a);C(l,"Repeater node must exist");let s=i.bindings.createWithNode("collection",l);n[a]=s}}else n[Vi]=t;return n}function gF(e,t,o,r,i){let n=y0(e,r,t,i),a=C0(e,r),l=r.variables.getBindings(e.id),s=S0(e,n,l,o.subqueries,r),c=o.inheritedControlMap?.get(e.id),d=Cc(e);return{args:m`${s}, ${i}`,variableFallbackList:g0(l,c),data:a,key:d?m`${n} ?? ${i}`:n}}var v0=nt("jsxForNode");async function T0(e,t,o,r){let i=_N(t.treeStore.tree,e,E);for(let n in i){if(n==="children")continue;let a=[],l=i[n];if(l){for(let s=0;s<l.length;s++){let c=l[s];if(!c)continue;let d=await bu(c.node,e,t,{...r,inComponentSlot:!0});d&&d.length>0&&a.push(d)}o.props[n]=a}}}function b0(e,t,o){if(Ue(e))return ge(vr(t.imports.addImport("framer-motion",{exportSpecifier:"motion.div"}),t,o));if(_(e)&&e.codeComponentIdentifier==="framer/Prototype"){let r=mF(e,t);if(r)return ge(ft.tag(r,void 0))}return""}function I0(e,t,o){if(Et(t)){let r=hF(E,t);return o.repeaterInfo.set(t.id,r),t.id}return e.lastRepeaterId}function N0(e,t,o){return Et(t)?!1:!!(Ma(o.treeStore.tree,t)||e.inRepeatedItem)}function x0(e,t,o,{itemsOrderOverrides:r,hiddenInVariants:i,inheritedControlMap:n,inCodeOverride:a,subqueries:l,kitSectionNodeId:s,isAnyVariantColumnMasonryLayout:c}){return{...e,lastRepeaterId:I0(e,t,o),inRepeatedItem:N0(e,t,o),subqueries:l,itemsOrderOverrides:r,hiddenInVariants:i,inheritedControlMap:n,inCodeOverride:a,isColumnMasonryLayout:c,kitSectionNodeId:e.kitSectionNodeId??s,inComponentSlot:e.inComponentSlot||_(t)&&t.codeComponentIdentifier!=="framer/Prototype"}}function P0(e,t,o,r,i){let n=[],l=r.treeStore.tree.getPresetsListNode()?.getComponentPresets();if(Ie(e)&&U(e.htmlContent)&&l&&l.length>0){let f=r.imports.addImport(`../${QR}`,{exportSpecifier:"*",importBinding:"componentPresets"}),h={},v=e.getComponentPresets();for(let[T,N]of v)r.componentPresetIds.add(N),h[T]=m`${f}.props[${N}]`;n.push(T=>ft.tag(r.imports.addImport("framer",{exportSpecifier:"ComponentPresetsProvider"}),new ee({presets:h}),T))}_(e)&&yr(e)&&n.push(f=>vr(uF(e,r,o,i),r,o.propsForContainer,f)),_(e)&&!e.isVectorInstance&&n.push(f=>vr(r.imports.addImport("framer",{exportSpecifier:"ComponentViewportProvider"}),r,o.propsForComponentViewport,f));let s=r.links.getUnresolvedLinksForNode(e);if(s){let{unresolvedLinks:f,binding:h}=s;if(Kt(f)||US(f)){let v=r.imports.addImport("framer",{exportSpecifier:"ResolveLinks"}),T=new ee({links:f});n.push(N=>vr(v,r,{props:T},m`(${h}) => (${N})`))}}if(o.isAnyVariantALink&&n.push(f=>vr(r.imports.addImport("framer",{exportSpecifier:"Link"}),r,o.propsForLink,f)),Et(e)&&(Ji(e)||$r(e))&&CF(e,r,i,o,n),o.isAnyVariantATransitionOverride){let f=r.imports.addImport("framer-motion",{exportSpecifier:"MotionConfigContext"}),h=r.imports.addImport("react",{exportSpecifier:"*",importBinding:"React"}),v=r.declarations.file.dedupe("Transition",new P(mt.lines(m`({value, children}) => {`,m`const config = ${h}.useContext(${f})`,m`const transition = value ?? config.transition`,m`const contextValue = ${h}.useMemo(() => ({ ...config, transition }), [JSON.stringify(transition)])`,m`return <${f}.Provider value={contextValue}>{children}</${f}.Provider>`,m`}`)));n.push(T=>vr(v,r,o.propsForTransition,T))}let c=r.events.overlayTriggerOverlayBindings.get(e.id);if(c&&c.size>0){n.push(w=>ft`<>${w}</>`);let f=m`visible`,h=m`setVisible`,v={visible:m`enabled && ${f}`,[Fp.show]:m`() => ${P.fn(h,m`true`)}`,[Fp.hide]:m`() => ${P.fn(h,m`false`)}`,[Fp.toggle]:m`() => ${P.fn(h,m`!${f}`)}`},T=r.imports.addImport("framer",{exportSpecifier:"useOverlayState"}),N=r.declarations.file.dedupe("Overlay",new P(mt.lines(m`({ children, blockDocumentScrolling, dismissWithEsc, enabled = true }) => {`,m`const ${[f,h]} = ${P.fn(T,m`{ blockDocumentScrolling, dismissWithEsc: enabled && dismissWithEsc }`)}`,m`return children(${v})`,m`}`)));for(let[w,R]of c){let B=r.treeStore.tree.get(w);if(!B)continue;let G=r.overlayProps.get(w),K=r.renderConditions.get(w),se=Ue(B),oe=new ee({enabled:yo(K)?K:void 0,blockDocumentScrolling:se?G?.props?.blockDocumentScrolling:!1,dismissWithEsc:se?G?.props?.dismissWithEsc:!1});n.push(pe=>vr(N,r,{props:oe,overrides:se?G?.overrides:void 0},m`${R} => (${pe})`))}}let d=r.events.overlayState.get(e.id);if(d&&Ue(e)){let f=t?r.elementIds.id(t):m`undefined`;n.push(w=>ft.tag(r.imports.addImport("framer",{exportSpecifier:"InjectSelectionStyle"}),new ee({triggerId:f}),w));let h=r.imports.addImport("react-dom",{exportSpecifier:"*",importBinding:"ReactDOM"}),v=`#${rS}`,T=`#${oS}`,N=r.declarations.file.dedupe("getContainer",m`() => {${m.joinLines(m`return document.querySelector(${v}) ?? document.querySelector(${T}) ?? document.body`)}}`);n.push(w=>ft`<>{${h}.createPortal(${w}, ${P.fn(N)})}</>`)}t&&d&&lt(e)&&o.isAnyVariantFloating&&n.push(f=>vr(r.imports.addImport("framer",{exportSpecifier:"Floating"}),r,o.propsForFloating,f)),d&&ht(e)&&n.push(f=>ft.tag(r.imports.addImport("framer-motion",{exportSpecifier:"AnimatePresence"}),void 0,m`${d}.visible && (${f})`)),o.renderCondition!==!0&&n.push(f=>m`${o.renderCondition} && (${f})`);let p=r.fetches.getResultBinding(e);if(o.propsForFetcher&&p&&n.push(f=>vr(r.imports.addImport("framer",{exportSpecifier:"Fetcher"}),r,o.propsForFetcher,m`${p} => (${f})`)),Pc(e)&&o.propsForTickerItem&&n.push(f=>vr(r.imports.addImport("framer",{exportSpecifier:"TickerItem"}),r,o.propsForTickerItem,f)),Et(t)&&Ma(r.treeStore.tree,e)){let f=r.repeaterInfo.get(t.id);if(C(f,"jsxForNode: `repeaterInfo` must exist when transforming the child of a repeater."),vt(t)){let B=r.links.getPathVariablesForRepeaterInfo(f);B&&n.push(G=>ft.tag(r.imports.addImport("framer",{exportSpecifier:"PathVariablesContext.Provider"}),new ee({value:B}),G))}let h=r.bindings.createWithNode("index",t),{data:v,args:T,variableFallbackList:N,key:w}=gF(t,f.annotations,o,r,h),R=r.variables.getBinding(t.id,BI);n.push(B=>m`${v}?.map((${T}) => {${m.joinLines(...N,R&&m`const ${R} = ${h} + 1`,...r.declarations.component.list(t),m`return (${ft.tag(r.imports.addImport("framer-motion",{exportSpecifier:"LayoutGroup"}),new ee({key:w,id:tt`${t.id}-${w}`}),B)})`)}})`)}return n}function V0(e,t,o){let i=yr(e)?t.propsForContainer:t.propsForElement,n=o.events.overlayTriggerOverlayBindings.get(e.id);if(n&&n.size>0){let s=i.props;s||(s=new ee),s.id=s.id??o.elementIds.id(e)}let l=o.cssVariableDefinitions.getDefinitionsForNode(e)??{};if(!Ft(l)){let s=i.props;s||(s=new ee),s.style?Object.assign(s.style,l):s.style=l}}async function bu(e,t,o,r){try{if(Xr(e)){C(t&&o.layoutTemplateSlotBinding,"A SlotNode must be in a Layout Template and have a parent.");let s=hD(e,t,o);return ft`${m.joinLines(ft.children(o.layoutTemplateSlotBinding),ft.tag(m`div`,new ee({className:s})))}`}await w0(e,o),o.metrics.count("nodes");let i=fD(e,t,o,r);if(Ue(e)&&o.overlayProps.set(e.id,i?.propsForOverlay),!i)return ft``;_(e)&&await T0(e,o,i.propsForElement,r);let n=b0(e,o,i.propsForElement),a=x0(r,e,o,i);for(let s of D0(e,o)){if(ht(s)&&!o.events.overlayState.has(s.id))continue;let c=await bu(s,e,o,a);c&&(n+=ge(ft.children(c)))}V0(e,i,o);let l=await F0(e,o,r,a,i,ft.fromTrustedString(n));return ft.applyTransforms(l,P0(e,t,i,o,r))}catch(i){return v0.reportError(i,{node:e.id,primaryVariant:o.rootId}),o.errors.record(e,i),ft``}}async function yF(e,t,o,r,i=`framer-${lp(5)}`,n=!1){let{combinedVariableControlMap:a}=t.combineVariableControlMap(o.treeStore.tree,void 0,void 0,E,E.activeBundleHash),l={inheritedControlMap:a},s=aF(e,t,o,r,i,n);return{ctx:s,jsx:await bu(e,null,s,l)}}async function Tu(e,t,{modulesStore:o,errors:r,treeStore:i,rootId:n}){let a=i.tree.get(n),l=i.tree.getScopeNodeFor(a);if(Lv(i.tree,l,e))return;for(let c of t)if(fo(c)&&c.type==="codeFile"){let p=E.componentForIdentifier(c.value),f=E.errorForIdentifier(c.value);p?f&&r.record(e,"CodeError",c.value):r.record(e,"MissingModule",c.value);return}let s=k0(t);s.length>0&&await o.preloadExternalModules(s),await vp(E,t.map(c=>c.value),o)}function k0(e){let t=[];for(let o of e)Mr(o)&&t.push(o);return t}function R0(e,t){if(!Ze(e.codeComponentIdentifier))return;let o=new Set([e.codeComponentIdentifier]);for(let r of t.variants){let i=ea(r,e.id,t.treeStore.tree);i&&(C(_(i),"Expected a CodeComponentNode in the variant",i?.id),Ze(i.codeComponentIdentifier)&&o.add(i.codeComponentIdentifier))}return o}async function w0(e,t){if(_(e)){if(e.codeComponentIdentifier==="framer/Prototype"){let i=Dd(e,E);if(!i)return;await Tu(e,[Pn("prototype",i,"default")],t)}let o=R0(e,t);if(!o)return;let r=[];for(let i of o)r.push(ce(i));await Tu(e,r,t)}if(Vv(e)){if(!Ze(e.codeOverrideIdentifier))return;await Tu(e,[ce(e.codeOverrideIdentifier)],t)}vt(e)&&await Tu(e,[ce(e.dataIdentifier)],t)}function D0(e,t){return!gt(e)||He(e)||Ie(e)?Wi():_(e)&&e.codeComponentIdentifier!=="framer/Prototype"?jN(t.treeStore.tree,e,E).map(o=>o.node):e.children}function CF(e,t,o,r,i){if(!Cc(e)){if(vt(e)){let n=t.variables.getBindings(e.id),a=new Set(n.keys()),l=lF(e,t,o,r,a);if(l){let s=t.declarations.file.dedupe("QueryData",cF(e,t)),c=t.bindings.createWithNode("collection",e),d=t.bindings.createWithNode("paginationInfo",e),p=t.bindings.createWithNode("loadMore",e);i.push(f=>ft.tag(t.imports.addImport("framer",{exportSpecifier:"ChildrenCanSuspend"}),void 0,vr(s,t,l,m`(${c}, ${d}, ${p}) => (<>${f}</>)`)))}return}$(e,"All data repeater types should be handled")}}function L0(e,t,o,r){let i=[];return _o(e)&&i.push(n=>m`(${$h}) => (<>${n}</>)`),Et(e)&&!Ji(e)&&!$r(e)&&CF(e,t,o,r,i),i}async function F0(e,t,o,r,i,n){let a=vr(fF(e,t,o,i),t,Ue(e)?void 0:i.propsForElement,ft.applyTransforms(n,L0(e,t,o,i)));if((_(e)||Ie(e))&&Jv(e,"framer/useShowRelativeOverlay")){let l=ge(a);for(let s of e.children){if(!ht(s)||!t.events.overlayState.has(s.id))continue;let c=await bu(s,e,t,r);c&&(l+=ge(ft.children(c)))}return ft.fromTrustedString(l)}return a}function vr(e,t,o,r){if(!o)return ft.tag(e,void 0,r);let{props:i=new ee,overrides:n}=o,a=[];if(n)switch(t.scopeType){case"SmartComponent":ee.addSpreadAtEnd(i,P.fn(m`addPropertyOverrides`,n,m`baseVariant`,m`gestureVariant`));break;case"WebPage":case"LayoutTemplate":a.push(l=>ft.tag(t.imports.addImport("framer",{exportSpecifier:"PropertyOverrides"}),new ee({breakpoint:m`baseVariant`,overrides:n}),l));break;default:break}return ft.applyTransforms(ft.tag(e,i,r),a)}var ha={};Zu(ha,{$brand:()=>vf,$input:()=>ZP,$output:()=>XP,NEVER:()=>hx,TimePrecision:()=>QP,ZodAny:()=>VF,ZodArray:()=>DF,ZodBase64:()=>_g,ZodBase64URL:()=>jg,ZodBigInt:()=>jl,ZodBigIntFormat:()=>Xg,ZodBoolean:()=>_l,ZodCIDRv4:()=>Gg,ZodCIDRv6:()=>$g,ZodCUID:()=>Ag,ZodCUID2:()=>Mg,ZodCatch:()=>KF,ZodCodec:()=>iy,ZodCustom:()=>Mu,ZodCustomStringFormat:()=>Gl,ZodDate:()=>Fu,ZodDefault:()=>_F,ZodDiscriminatedUnion:()=>LF,ZodE164:()=>Ug,ZodEmail:()=>Lg,ZodEmoji:()=>Fg,ZodEnum:()=>Bl,ZodError:()=>A0,ZodFile:()=>HF,ZodFirstPartyTypeKind:()=>ny,ZodFunction:()=>nE,ZodGUID:()=>ku,ZodIPv4:()=>Bg,ZodIPv6:()=>Hg,ZodISODate:()=>Nu,ZodISODateTime:()=>Iu,ZodISODuration:()=>Pu,ZodISOTime:()=>xu,ZodIntersection:()=>FF,ZodIssueCode:()=>UH,ZodJWT:()=>Jg,ZodKSUID:()=>zg,ZodLazy:()=>oE,ZodLiteral:()=>BF,ZodMap:()=>WF,ZodNaN:()=>YF,ZodNanoID:()=>Eg,ZodNever:()=>RF,ZodNonOptional:()=>oy,ZodNull:()=>xF,ZodNullable:()=>$F,ZodNumber:()=>$l,ZodNumberFormat:()=>ms,ZodObject:()=>Au,ZodOptional:()=>ty,ZodPipe:()=>ry,ZodPrefault:()=>UF,ZodPromise:()=>iE,ZodReadonly:()=>QF,ZodRealError:()=>qo,ZodRecord:()=>Yg,ZodSet:()=>zF,ZodString:()=>Hl,ZodStringFormat:()=>Tt,ZodSuccess:()=>ZF,ZodSymbol:()=>IF,ZodTemplateLiteral:()=>tE,ZodTransform:()=>GF,ZodTuple:()=>AF,ZodType:()=>ke,ZodULID:()=>Og,ZodURL:()=>Lu,ZodUUID:()=>Mi,ZodUndefined:()=>NF,ZodUnion:()=>Kg,ZodUnknown:()=>kF,ZodVoid:()=>wF,ZodXID:()=>Wg,_ZodString:()=>Dg,_default:()=>jF,_function:()=>zH,any:()=>SH,array:()=>Eu,base64:()=>oH,base64url:()=>rH,bigint:()=>fH,boolean:()=>bF,catch:()=>qF,check:()=>BH,cidrv4:()=>eH,cidrv6:()=>tH,clone:()=>cl,codec:()=>MH,coerce:()=>ay,config:()=>sn,core:()=>ln,cuid:()=>J0,cuid2:()=>X0,custom:()=>HH,date:()=>TH,decode:()=>bg,decodeAsync:()=>Ng,discriminatedUnion:()=>PH,e164:()=>iH,email:()=>O0,emoji:()=>j0,encode:()=>Tg,encodeAsync:()=>Ig,endsWith:()=>jd,enum:()=>Qg,file:()=>LH,flattenError:()=>Ad,float32:()=>dH,float64:()=>pH,formatError:()=>Md,function:()=>zH,getErrorMap:()=>XH,globalRegistry:()=>Xn,gt:()=>Kn,gte:()=>gr,guid:()=>W0,hash:()=>cH,hex:()=>lH,hostname:()=>sH,httpUrl:()=>_0,includes:()=>$d,instanceof:()=>GH,int:()=>wg,int32:()=>uH,int64:()=>hH,intersection:()=>EF,ipv4:()=>Y0,ipv6:()=>Q0,iso:()=>Vu,json:()=>_H,jwt:()=>nH,keyof:()=>bH,ksuid:()=>q0,lazy:()=>rE,length:()=>ul,literal:()=>DH,locales:()=>JP,looseObject:()=>xH,lowercase:()=>Hd,lt:()=>Zn,lte:()=>ni,map:()=>kH,maxLength:()=>pl,maxSize:()=>dl,mime:()=>Ud,minLength:()=>qn,minSize:()=>Za,multipleOf:()=>Xa,nan:()=>AH,nanoid:()=>U0,nativeEnum:()=>wH,negative:()=>kV,never:()=>Zg,nonnegative:()=>wV,nonoptional:()=>XF,nonpositive:()=>RV,normalize:()=>Xd,null:()=>PF,nullable:()=>wu,nullish:()=>FH,number:()=>TF,object:()=>IH,optional:()=>Ru,overwrite:()=>Jd,parse:()=>yg,parseAsync:()=>Cg,partialRecord:()=>VH,pipe:()=>Du,positive:()=>VV,prefault:()=>JF,preprocess:()=>jH,prettifyError:()=>Sx,promise:()=>WH,property:()=>DV,readonly:()=>eE,record:()=>OF,refine:()=>aE,regex:()=>Bd,regexes:()=>Jn,registry:()=>KP,safeDecode:()=>Pg,safeDecodeAsync:()=>kg,safeEncode:()=>xg,safeEncodeAsync:()=>Vg,safeParse:()=>Sg,safeParseAsync:()=>vg,set:()=>RH,setErrorMap:()=>JH,size:()=>zd,startsWith:()=>_d,strictObject:()=>NH,string:()=>Rg,stringFormat:()=>aH,stringbool:()=>$H,success:()=>EH,superRefine:()=>sE,symbol:()=>yH,templateLiteral:()=>OH,toJSONSchema:()=>WV,toLowerCase:()=>Kd,toUpperCase:()=>qd,transform:()=>ey,treeifyError:()=>Cx,trim:()=>Zd,tuple:()=>MF,uint32:()=>mH,uint64:()=>gH,ulid:()=>Z0,undefined:()=>CH,union:()=>qg,unknown:()=>us,uppercase:()=>Gd,url:()=>$0,util:()=>Oe,uuid:()=>z0,uuidv4:()=>B0,uuidv6:()=>H0,uuidv7:()=>G0,void:()=>vH,xid:()=>K0});var Vu={};Zu(Vu,{ZodISODate:()=>Nu,ZodISODateTime:()=>Iu,ZodISODuration:()=>Pu,ZodISOTime:()=>xu,date:()=>fg,datetime:()=>mg,duration:()=>gg,time:()=>hg});var Iu=Z("ZodISODateTime",(e,t)=>{jx.init(e,t),Tt.init(e,t)});function mg(e){return eV(Iu,e)}var Nu=Z("ZodISODate",(e,t)=>{Ux.init(e,t),Tt.init(e,t)});function fg(e){return tV(Nu,e)}var xu=Z("ZodISOTime",(e,t)=>{Jx.init(e,t),Tt.init(e,t)});function hg(e){return oV(xu,e)}var Pu=Z("ZodISODuration",(e,t)=>{Xx.init(e,t),Tt.init(e,t)});function gg(e){return rV(Pu,e)}var vF=(e,t)=>{yx.init(e,t),e.name="ZodError",Object.defineProperties(e,{format:{value:o=>Md(e,o)},flatten:{value:o=>Ad(e,o)},addIssue:{value:o=>{e.issues.push(o),e.message=JSON.stringify(e.issues,Tf,2)}},addIssues:{value:o=>{e.issues.push(...o),e.message=JSON.stringify(e.issues,Tf,2)}},isEmpty:{get(){return e.issues.length===0}}})},A0=Z("ZodError",vF),qo=Z("ZodError",vF,{Parent:Error});var yg=vx(qo),Cg=Tx(qo),Sg=bx(qo),vg=Ix(qo),Tg=Nx(qo),bg=xx(qo),Ig=Px(qo),Ng=Vx(qo),xg=kx(qo),Pg=Rx(qo),Vg=wx(qo),kg=Dx(qo);var ke=Z("ZodType",(e,t)=>(bf.init(e,t),e.def=t,e.type=t.type,Object.defineProperty(e,"_def",{value:t}),e.check=(...o)=>e.clone(Oe.mergeDefs(t,{checks:[...t.checks??[],...o.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),e.clone=(o,r)=>cl(e,o,r),e.brand=()=>e,e.register=(o,r)=>(o.add(e,r),e),e.parse=(o,r)=>yg(e,o,r,{callee:e.parse}),e.safeParse=(o,r)=>Sg(e,o,r),e.parseAsync=async(o,r)=>Cg(e,o,r,{callee:e.parseAsync}),e.safeParseAsync=async(o,r)=>vg(e,o,r),e.spa=e.safeParseAsync,e.encode=(o,r)=>Tg(e,o,r),e.decode=(o,r)=>bg(e,o,r),e.encodeAsync=async(o,r)=>Ig(e,o,r),e.decodeAsync=async(o,r)=>Ng(e,o,r),e.safeEncode=(o,r)=>xg(e,o,r),e.safeDecode=(o,r)=>Pg(e,o,r),e.safeEncodeAsync=async(o,r)=>Vg(e,o,r),e.safeDecodeAsync=async(o,r)=>kg(e,o,r),e.refine=(o,r)=>e.check(aE(o,r)),e.superRefine=o=>e.check(sE(o)),e.overwrite=o=>e.check(Jd(o)),e.optional=()=>Ru(e),e.nullable=()=>wu(e),e.nullish=()=>Ru(wu(e)),e.nonoptional=o=>XF(e,o),e.array=()=>Eu(e),e.or=o=>qg([e,o]),e.and=o=>EF(e,o),e.transform=o=>Du(e,ey(o)),e.default=o=>jF(e,o),e.prefault=o=>JF(e,o),e.catch=o=>qF(e,o),e.pipe=o=>Du(e,o),e.readonly=()=>eE(e),e.describe=o=>{let r=e.clone();return Xn.add(r,{description:o}),r},Object.defineProperty(e,"description",{get(){return Xn.get(e)?.description},configurable:!0}),e.meta=(...o)=>{if(o.length===0)return Xn.get(e);let r=e.clone();return Xn.add(r,o[0]),r},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e)),Dg=Z("_ZodString",(e,t)=>{If.init(e,t),ke.init(e,t);let o=e._zod.bag;e.format=o.format??null,e.minLength=o.minimum??null,e.maxLength=o.maximum??null,e.regex=(...r)=>e.check(Bd(...r)),e.includes=(...r)=>e.check($d(...r)),e.startsWith=(...r)=>e.check(_d(...r)),e.endsWith=(...r)=>e.check(jd(...r)),e.min=(...r)=>e.check(qn(...r)),e.max=(...r)=>e.check(pl(...r)),e.length=(...r)=>e.check(ul(...r)),e.nonempty=(...r)=>e.check(qn(1,...r)),e.lowercase=r=>e.check(Hd(r)),e.uppercase=r=>e.check(Gd(r)),e.trim=()=>e.check(Zd()),e.normalize=(...r)=>e.check(Xd(...r)),e.toLowerCase=()=>e.check(Kd()),e.toUpperCase=()=>e.check(qd())}),Hl=Z("ZodString",(e,t)=>{If.init(e,t),Dg.init(e,t),e.email=o=>e.check(Nf(Lg,o)),e.url=o=>e.check(Wd(Lu,o)),e.jwt=o=>e.check($f(Jg,o)),e.emoji=o=>e.check(Rf(Fg,o)),e.guid=o=>e.check(Od(ku,o)),e.uuid=o=>e.check(xf(Mi,o)),e.uuidv4=o=>e.check(Pf(Mi,o)),e.uuidv6=o=>e.check(Vf(Mi,o)),e.uuidv7=o=>e.check(kf(Mi,o)),e.nanoid=o=>e.check(wf(Eg,o)),e.guid=o=>e.check(Od(ku,o)),e.cuid=o=>e.check(Df(Ag,o)),e.cuid2=o=>e.check(Lf(Mg,o)),e.ulid=o=>e.check(Ff(Og,o)),e.base64=o=>e.check(Bf(_g,o)),e.base64url=o=>e.check(Hf(jg,o)),e.xid=o=>e.check(Ef(Wg,o)),e.ksuid=o=>e.check(Af(zg,o)),e.ipv4=o=>e.check(Mf(Bg,o)),e.ipv6=o=>e.check(Of(Hg,o)),e.cidrv4=o=>e.check(Wf(Gg,o)),e.cidrv6=o=>e.check(zf($g,o)),e.e164=o=>e.check(Gf(Ug,o)),e.datetime=o=>e.check(mg(o)),e.date=o=>e.check(fg(o)),e.time=o=>e.check(hg(o)),e.duration=o=>e.check(gg(o))});function Rg(e){return qP(Hl,e)}var Tt=Z("ZodStringFormat",(e,t)=>{Fx.init(e,t),Dg.init(e,t)}),Lg=Z("ZodEmail",(e,t)=>{Mx.init(e,t),Tt.init(e,t)});function O0(e){return Nf(Lg,e)}var ku=Z("ZodGUID",(e,t)=>{Ex.init(e,t),Tt.init(e,t)});function W0(e){return Od(ku,e)}var Mi=Z("ZodUUID",(e,t)=>{Ax.init(e,t),Tt.init(e,t)});function z0(e){return xf(Mi,e)}function B0(e){return Pf(Mi,e)}function H0(e){return Vf(Mi,e)}function G0(e){return kf(Mi,e)}var Lu=Z("ZodURL",(e,t)=>{Ox.init(e,t),Tt.init(e,t)});function $0(e){return Wd(Lu,e)}function _0(e){return Wd(Lu,{protocol:/^https?$/,hostname:Jn.domain,...Oe.normalizeParams(e)})}var Fg=Z("ZodEmoji",(e,t)=>{Wx.init(e,t),Tt.init(e,t)});function j0(e){return Rf(Fg,e)}var Eg=Z("ZodNanoID",(e,t)=>{zx.init(e,t),Tt.init(e,t)});function U0(e){return wf(Eg,e)}var Ag=Z("ZodCUID",(e,t)=>{Bx.init(e,t),Tt.init(e,t)});function J0(e){return Df(Ag,e)}var Mg=Z("ZodCUID2",(e,t)=>{Hx.init(e,t),Tt.init(e,t)});function X0(e){return Lf(Mg,e)}var Og=Z("ZodULID",(e,t)=>{Gx.init(e,t),Tt.init(e,t)});function Z0(e){return Ff(Og,e)}var Wg=Z("ZodXID",(e,t)=>{$x.init(e,t),Tt.init(e,t)});function K0(e){return Ef(Wg,e)}var zg=Z("ZodKSUID",(e,t)=>{_x.init(e,t),Tt.init(e,t)});function q0(e){return Af(zg,e)}var Bg=Z("ZodIPv4",(e,t)=>{Zx.init(e,t),Tt.init(e,t)});function Y0(e){return Mf(Bg,e)}var Hg=Z("ZodIPv6",(e,t)=>{Kx.init(e,t),Tt.init(e,t)});function Q0(e){return Of(Hg,e)}var Gg=Z("ZodCIDRv4",(e,t)=>{qx.init(e,t),Tt.init(e,t)});function eH(e){return Wf(Gg,e)}var $g=Z("ZodCIDRv6",(e,t)=>{Yx.init(e,t),Tt.init(e,t)});function tH(e){return zf($g,e)}var _g=Z("ZodBase64",(e,t)=>{Qx.init(e,t),Tt.init(e,t)});function oH(e){return Bf(_g,e)}var jg=Z("ZodBase64URL",(e,t)=>{eP.init(e,t),Tt.init(e,t)});function rH(e){return Hf(jg,e)}var Ug=Z("ZodE164",(e,t)=>{tP.init(e,t),Tt.init(e,t)});function iH(e){return Gf(Ug,e)}var Jg=Z("ZodJWT",(e,t)=>{oP.init(e,t),Tt.init(e,t)});function nH(e){return $f(Jg,e)}var Gl=Z("ZodCustomStringFormat",(e,t)=>{rP.init(e,t),Tt.init(e,t)});function aH(e,t,o={}){return ml(Gl,e,t,o)}function sH(e){return ml(Gl,"hostname",Jn.hostname,e)}function lH(e){return ml(Gl,"hex",Jn.hex,e)}function cH(e,t){let o=t?.enc??"hex",r=`${e}_${o}`,i=Jn[r];if(!i)throw new Error(`Unrecognized hash format: ${r}`);return ml(Gl,r,i,t)}var $l=Z("ZodNumber",(e,t)=>{iP.init(e,t),ke.init(e,t),e.gt=(r,i)=>e.check(Kn(r,i)),e.gte=(r,i)=>e.check(gr(r,i)),e.min=(r,i)=>e.check(gr(r,i)),e.lt=(r,i)=>e.check(Zn(r,i)),e.lte=(r,i)=>e.check(ni(r,i)),e.max=(r,i)=>e.check(ni(r,i)),e.int=r=>e.check(wg(r)),e.safe=r=>e.check(wg(r)),e.positive=r=>e.check(Kn(0,r)),e.nonnegative=r=>e.check(gr(0,r)),e.negative=r=>e.check(Zn(0,r)),e.nonpositive=r=>e.check(ni(0,r)),e.multipleOf=(r,i)=>e.check(Xa(r,i)),e.step=(r,i)=>e.check(Xa(r,i)),e.finite=()=>e;let o=e._zod.bag;e.minValue=Math.max(o.minimum??Number.NEGATIVE_INFINITY,o.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(o.maximum??Number.POSITIVE_INFINITY,o.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(o.format??"").includes("int")||Number.isSafeInteger(o.multipleOf??.5),e.isFinite=!0,e.format=o.format??null});function TF(e){return iV($l,e)}var ms=Z("ZodNumberFormat",(e,t)=>{nP.init(e,t),$l.init(e,t)});function wg(e){return aV(ms,e)}function dH(e){return sV(ms,e)}function pH(e){return lV(ms,e)}function uH(e){return cV(ms,e)}function mH(e){return dV(ms,e)}var _l=Z("ZodBoolean",(e,t)=>{aP.init(e,t),ke.init(e,t)});function bF(e){return pV(_l,e)}var jl=Z("ZodBigInt",(e,t)=>{sP.init(e,t),ke.init(e,t),e.gte=(r,i)=>e.check(gr(r,i)),e.min=(r,i)=>e.check(gr(r,i)),e.gt=(r,i)=>e.check(Kn(r,i)),e.gte=(r,i)=>e.check(gr(r,i)),e.min=(r,i)=>e.check(gr(r,i)),e.lt=(r,i)=>e.check(Zn(r,i)),e.lte=(r,i)=>e.check(ni(r,i)),e.max=(r,i)=>e.check(ni(r,i)),e.positive=r=>e.check(Kn(BigInt(0),r)),e.negative=r=>e.check(Zn(BigInt(0),r)),e.nonpositive=r=>e.check(ni(BigInt(0),r)),e.nonnegative=r=>e.check(gr(BigInt(0),r)),e.multipleOf=(r,i)=>e.check(Xa(r,i));let o=e._zod.bag;e.minValue=o.minimum??null,e.maxValue=o.maximum??null,e.format=o.format??null});function fH(e){return mV(jl,e)}var Xg=Z("ZodBigIntFormat",(e,t)=>{lP.init(e,t),jl.init(e,t)});function hH(e){return hV(Xg,e)}function gH(e){return gV(Xg,e)}var IF=Z("ZodSymbol",(e,t)=>{cP.init(e,t),ke.init(e,t)});function yH(e){return yV(IF,e)}var NF=Z("ZodUndefined",(e,t)=>{dP.init(e,t),ke.init(e,t)});function CH(e){return CV(NF,e)}var xF=Z("ZodNull",(e,t)=>{pP.init(e,t),ke.init(e,t)});function PF(e){return SV(xF,e)}var VF=Z("ZodAny",(e,t)=>{uP.init(e,t),ke.init(e,t)});function SH(){return vV(VF)}var kF=Z("ZodUnknown",(e,t)=>{mP.init(e,t),ke.init(e,t)});function us(){return TV(kF)}var RF=Z("ZodNever",(e,t)=>{fP.init(e,t),ke.init(e,t)});function Zg(e){return bV(RF,e)}var wF=Z("ZodVoid",(e,t)=>{hP.init(e,t),ke.init(e,t)});function vH(e){return IV(wF,e)}var Fu=Z("ZodDate",(e,t)=>{gP.init(e,t),ke.init(e,t),e.min=(r,i)=>e.check(gr(r,i)),e.max=(r,i)=>e.check(ni(r,i));let o=e._zod.bag;e.minDate=o.minimum?new Date(o.minimum):null,e.maxDate=o.maximum?new Date(o.maximum):null});function TH(e){return NV(Fu,e)}var DF=Z("ZodArray",(e,t)=>{yP.init(e,t),ke.init(e,t),e.element=t.element,e.min=(o,r)=>e.check(qn(o,r)),e.nonempty=o=>e.check(qn(1,o)),e.max=(o,r)=>e.check(pl(o,r)),e.length=(o,r)=>e.check(ul(o,r)),e.unwrap=()=>e.element});function Eu(e,t){return LV(DF,e,t)}function bH(e){let t=e._zod.def.shape;return Qg(Object.keys(t))}var Au=Z("ZodObject",(e,t)=>{CP.init(e,t),ke.init(e,t),Oe.defineLazy(e,"shape",()=>t.shape),e.keyof=()=>Qg(Object.keys(e._zod.def.shape)),e.catchall=o=>e.clone({...e._zod.def,catchall:o}),e.passthrough=()=>e.clone({...e._zod.def,catchall:us()}),e.loose=()=>e.clone({...e._zod.def,catchall:us()}),e.strict=()=>e.clone({...e._zod.def,catchall:Zg()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=o=>Oe.extend(e,o),e.safeExtend=o=>Oe.safeExtend(e,o),e.merge=o=>Oe.merge(e,o),e.pick=o=>Oe.pick(e,o),e.omit=o=>Oe.omit(e,o),e.partial=(...o)=>Oe.partial(ty,e,o[0]),e.required=(...o)=>Oe.required(oy,e,o[0])});function IH(e,t){let o={type:"object",shape:e??{},...Oe.normalizeParams(t)};return new Au(o)}function NH(e,t){return new Au({type:"object",shape:e,catchall:Zg(),...Oe.normalizeParams(t)})}function xH(e,t){return new Au({type:"object",shape:e,catchall:us(),...Oe.normalizeParams(t)})}var Kg=Z("ZodUnion",(e,t)=>{SP.init(e,t),ke.init(e,t),e.options=t.options});function qg(e,t){return new Kg({type:"union",options:e,...Oe.normalizeParams(t)})}var LF=Z("ZodDiscriminatedUnion",(e,t)=>{Kg.init(e,t),vP.init(e,t)});function PH(e,t,o){return new LF({type:"union",options:t,discriminator:e,...Oe.normalizeParams(o)})}var FF=Z("ZodIntersection",(e,t)=>{TP.init(e,t),ke.init(e,t)});function EF(e,t){return new FF({type:"intersection",left:e,right:t})}var AF=Z("ZodTuple",(e,t)=>{bP.init(e,t),ke.init(e,t),e.rest=o=>e.clone({...e._zod.def,rest:o})});function MF(e,t,o){let r=t instanceof bf,i=r?o:t,n=r?t:null;return new AF({type:"tuple",items:e,rest:n,...Oe.normalizeParams(i)})}var Yg=Z("ZodRecord",(e,t)=>{IP.init(e,t),ke.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function OF(e,t,o){return new Yg({type:"record",keyType:e,valueType:t,...Oe.normalizeParams(o)})}function VH(e,t,o){let r=cl(e);return r._zod.values=void 0,new Yg({type:"record",keyType:r,valueType:t,...Oe.normalizeParams(o)})}var WF=Z("ZodMap",(e,t)=>{NP.init(e,t),ke.init(e,t),e.keyType=t.keyType,e.valueType=t.valueType});function kH(e,t,o){return new WF({type:"map",keyType:e,valueType:t,...Oe.normalizeParams(o)})}var zF=Z("ZodSet",(e,t)=>{xP.init(e,t),ke.init(e,t),e.min=(...o)=>e.check(Za(...o)),e.nonempty=o=>e.check(Za(1,o)),e.max=(...o)=>e.check(dl(...o)),e.size=(...o)=>e.check(zd(...o))});function RH(e,t){return new zF({type:"set",valueType:e,...Oe.normalizeParams(t)})}var Bl=Z("ZodEnum",(e,t)=>{PP.init(e,t),ke.init(e,t),e.enum=t.entries,e.options=Object.values(t.entries);let o=new Set(Object.keys(t.entries));e.extract=(r,i)=>{let n={};for(let a of r)if(o.has(a))n[a]=t.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Bl({...t,checks:[],...Oe.normalizeParams(i),entries:n})},e.exclude=(r,i)=>{let n={...t.entries};for(let a of r)if(o.has(a))delete n[a];else throw new Error(`Key ${a} not found in enum`);return new Bl({...t,checks:[],...Oe.normalizeParams(i),entries:n})}});function Qg(e,t){let o=Array.isArray(e)?Object.fromEntries(e.map(r=>[r,r])):e;return new Bl({type:"enum",entries:o,...Oe.normalizeParams(t)})}function wH(e,t){return new Bl({type:"enum",entries:e,...Oe.normalizeParams(t)})}var BF=Z("ZodLiteral",(e,t)=>{VP.init(e,t),ke.init(e,t),e.values=new Set(t.values),Object.defineProperty(e,"value",{get(){if(t.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return t.values[0]}})});function DH(e,t){return new BF({type:"literal",values:Array.isArray(e)?e:[e],...Oe.normalizeParams(t)})}var HF=Z("ZodFile",(e,t)=>{kP.init(e,t),ke.init(e,t),e.min=(o,r)=>e.check(Za(o,r)),e.max=(o,r)=>e.check(dl(o,r)),e.mime=(o,r)=>e.check(Ud(Array.isArray(o)?o:[o],r))});function LH(e){return FV(HF,e)}var GF=Z("ZodTransform",(e,t)=>{RP.init(e,t),ke.init(e,t),e._zod.parse=(o,r)=>{if(r.direction==="backward")throw new gx(e.constructor.name);o.addIssue=n=>{if(typeof n=="string")o.issues.push(Oe.issue(n,o.value,t));else{let a=n;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=o.value),a.inst??(a.inst=e),o.issues.push(Oe.issue(a))}};let i=t.transform(o.value,o);return i instanceof Promise?i.then(n=>(o.value=n,o)):(o.value=i,o)}});function ey(e){return new GF({type:"transform",transform:e})}var ty=Z("ZodOptional",(e,t)=>{wP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function Ru(e){return new ty({type:"optional",innerType:e})}var $F=Z("ZodNullable",(e,t)=>{DP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function wu(e){return new $F({type:"nullable",innerType:e})}function FH(e){return Ru(wu(e))}var _F=Z("ZodDefault",(e,t)=>{LP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function jF(e,t){return new _F({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():Oe.shallowClone(t)}})}var UF=Z("ZodPrefault",(e,t)=>{FP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function JF(e,t){return new UF({type:"prefault",innerType:e,get defaultValue(){return typeof t=="function"?t():Oe.shallowClone(t)}})}var oy=Z("ZodNonOptional",(e,t)=>{EP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function XF(e,t){return new oy({type:"nonoptional",innerType:e,...Oe.normalizeParams(t)})}var ZF=Z("ZodSuccess",(e,t)=>{AP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function EH(e){return new ZF({type:"success",innerType:e})}var KF=Z("ZodCatch",(e,t)=>{MP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function qF(e,t){return new KF({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}var YF=Z("ZodNaN",(e,t)=>{OP.init(e,t),ke.init(e,t)});function AH(e){return PV(YF,e)}var ry=Z("ZodPipe",(e,t)=>{WP.init(e,t),ke.init(e,t),e.in=t.in,e.out=t.out});function Du(e,t){return new ry({type:"pipe",in:e,out:t})}var iy=Z("ZodCodec",(e,t)=>{ry.init(e,t),zP.init(e,t)});function MH(e,t,o){return new iy({type:"pipe",in:e,out:t,transform:o.decode,reverseTransform:o.encode})}var QF=Z("ZodReadonly",(e,t)=>{BP.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function eE(e){return new QF({type:"readonly",innerType:e})}var tE=Z("ZodTemplateLiteral",(e,t)=>{HP.init(e,t),ke.init(e,t)});function OH(e,t){return new tE({type:"template_literal",parts:e,...Oe.normalizeParams(t)})}var oE=Z("ZodLazy",(e,t)=>{_P.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.getter()});function rE(e){return new oE({type:"lazy",getter:e})}var iE=Z("ZodPromise",(e,t)=>{$P.init(e,t),ke.init(e,t),e.unwrap=()=>e._zod.def.innerType});function WH(e){return new iE({type:"promise",innerType:e})}var nE=Z("ZodFunction",(e,t)=>{GP.init(e,t),ke.init(e,t)});function zH(e){return new nE({type:"function",input:Array.isArray(e?.input)?MF(e?.input):e?.input??Eu(us()),output:e?.output??us()})}var Mu=Z("ZodCustom",(e,t)=>{jP.init(e,t),ke.init(e,t)});function BH(e){let t=new Lx({check:"custom"});return t._zod.check=e,t}function HH(e,t){return EV(Mu,e??(()=>!0),t)}function aE(e,t={}){return AV(Mu,e,t)}function sE(e){return MV(e)}function GH(e,t={error:`Input not instance of ${e.name}`}){let o=new Mu({type:"custom",check:"custom",fn:r=>r instanceof e,abort:!0,...Oe.normalizeParams(t)});return o._zod.bag.Class=e,o}var $H=(...e)=>OV({Codec:iy,Boolean:_l,String:Hl},...e);function _H(e){let t=rE(()=>qg([Rg(e),TF(),bF(),PF(),Eu(t),OF(Rg(),t)]));return t}function jH(e,t){return Du(ey(e),t)}var UH={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function JH(e){sn({customError:e})}function XH(){return sn().customError}var ny;ny||(ny={});var ay={};Zu(ay,{bigint:()=>YH,boolean:()=>qH,date:()=>QH,number:()=>KH,string:()=>ZH});function ZH(e){return YP(Hl,e)}function KH(e){return nV($l,e)}function qH(e){return uV(_l,e)}function YH(e){return fV(jl,e)}function QH(e){return xV(Fu,e)}sn(UP());var obe=ha;var eG=nt("renameLayers"),tG=`Propose names for the elements in provided React JSX fragment of a web site.

**Naming Rules:**
1. Never use an ancestor's name in a descendant's name. A descendant's name must never repeat any part of its ancestors name.
    - INCORRECT: "Pricing Plans", "Pricing Plans Icon", "Pricing Plans Title"
    - CORRECT: "Pricing Plans", "Icon", "Title"
2. Evaluate the entire fragment, paying special attention to the text in the children of RichText components, to determine the theme of the content, e.g. "Savings Goals" or "Pricing Plans", and use this to inform the individual names.
3. When an element is a layout wrapper (e.g., flex, grid), describe its function or structure. Use this to replace generic wrappers like 'Body,' 'Content,' or 'Group.' (Example: '2x2 Grid,' 'Info Stack,' 'Action Bar'). (Never: 'Icon Flex,' 'Details Group').
4. Titles should be short. Aim for 1 word (80%). Use 2-3 words only when necessary (20%).
5. All names must use Title Case, including spaces.
6. Ignore "*-container" suffixes.
7. Ignore the attribute value of data-framer-name="*".

**Response Format:**
- Respond with a single line of text.
- Do not include any other text, explanation, or preamble.
- The line must be a list of "class-name Proposed Name" pairs separated by semicolons.
- The class name must be the class name of the JSX element.

**Example Output:**
framer-asifd Title; framer-adfda Content; framer-fdsafd Footer; framer-aht4dq Submit Button;
`,oG=";",rG=ha.object({className:ha.string(),name:ha.string()});function iG(e){let t=e.trim();C(t.length>0,"Trimmed result is empty");let[o,...r]=t.split(" ");return rG.parse({className:o,name:r.join(" ")})}function nG(e){return At(e)||W(e)||pt(e)||ie(e)||Be(e)}async function lE(e,t){let o=performance.now(),r=0,i=e.stores.scopeStore.active;if(nG(i))try{e.scheduler.process(()=>e.beginUndoGroup());for(let n of e.tree.withoutDescendants(t)){let{jsx:a,ctx:l}=await yF(n,i,{modulesStore:e.stores.modulesStore,treeStore:e.stores.treeStore,engineChanges:e.scheduler.changes,assetMap:e.stores.assetStore.assetMap},void 0,"",!0);if(!a)continue;let s=new Rp(oG,iG,c=>{e.scheduler.processWhenReadyAsync(()=>{let{className:d,name:p}=c,f=e.tree.get(l.css.getNodeIdForClassName(d));!f||!sd(f)||Bt(f)||fe(f)||D(f.name)||(f.set({name:qv(p)}),r++)})});await new kp("renameLayers").start({model:"google/gemini-2.5-flash",messages:[{role:"system",content:tG},{role:"user",content:`\`\`\`
${a.toString()}\`\`\``}],onText:c=>s.addToken(c)}),s.finalize()}}catch(n){throw eG.error("Failed to generate layer names:",n),n}finally{await e.scheduler.processWhenReadyAsync(()=>e.endUndoGroup()),It("rename_layers",{duration:performance.now()-o,count:r})}}function bbe(e){return Rt(e)&&!Ve(e)}function Ibe(e){return st(e)&&!So(e)}function cE(e){return zt(e)&&!So(e)}function dE(e,t){return fc(t)&&(nt("app").warn("Inserting a symbol is no longer supported."),t.isMaster=!1,t.replicaInfo=null,t.originalid=null),C(!e.tree.has(t.id),"Tree should not contain node with same id as inserted template"),e.stores.scopeStore.insertNode(t),t}function mE(e){let t={width:200,height:200,codeComponentIdentifier:e.identifier,intrinsicWidth:null,intrinsicHeight:null,slotsAreChildNodes:et.isOn("componentSlotsAreChildNodes")},{defaultProps:o,annotations:r}=e;if(o!==void 0&&(om(o.width)&&(t.width=o.width,t.intrinsicWidth=o.width),om(o.height)&&(t.height=o.height,t.intrinsicHeight=o.height)),r){let i=wT(r);i.width&&(t.width=i.width),i.height&&(t.height=i.height)}return new $n(t)}function Wbe(e){return e.sort(aG)}var pE=new Map;function uE(e){let t=pE.get(e);if(t)return t;let o=e.split("/").map(r=>r.trim()).join("");return pE.set(e,o),o}function aG(e,t){if(e.name===null)return-1;if(t.name===null)return 1;let o=uE(e.name),r=uE(t.name);return o.localeCompare(r,void 0,{numeric:!0})}function zbe(e){if(_y(e)&&e.file==="./canvas.tsx"||e.identifier==="framer/Stack")return!1;let t=ce(e.identifier);return fo(t)&&t.type==="screen"?!1:e.type==="component"||e.type==="master"}function Bbe(e){let t=e.split("/"),o=t[t.length-1];return C(Mo(o),"Last section is required"),o.trim()}function Hbe(e,t){return e.name?e.name:t?ii(t):"Unknown"}function Gbe(e){let t=[];for(let o of E.getAllLocalModules())o.type==="component"&&o.file===e&&t.push(o);return t}function fE(e,{allowVariants:t,allowLockedNodes:o}={}){return!o&&ri(e)||Wo(e)||!t&&(Ve(e)||So(e))||cE(e)||xs(e)||He(e)||Ui(e)?!1:ve(e)}async function IIe(e,t,o,r){function i(){dG(e,[t],o,r)}if(!_(o)){i();return}let n=ce(o.codeComponentIdentifier);if(!n||n.kind!=="externalModuleExport"){i();return}await e.stores.modulesStore.addExternalModulesToProject([n],{onTreeUpdate:i})}function sG(e,t,o){if(!$s(t))return;let r=tT(e.tree,t);if(!ie(r))return;C(r.isLoaded(),"smart component must be loaded"),o.set({formSubmitButtonId:t.id});let i=r.getPrimaryVariant();r.getReplicaVariants().forEach(n=>{Le.resetOverridesByProperty(e.tree,n,n,["htmlTag","link"])}),fb(i)&&i.set({htmlTag:"button",link:void 0})}function lG(e,t,o){if(!_(e)||!_(t)||!e.cache.formContainerAncestorId)return;let r=o.tree.get(e.cache.formContainerAncestorId);_o(r)&&sG(o,t,r)}function cG(e,t,o){let r=GT(o.tree,e);r&&Pi(e,r)&&r.set({dataSourceLoaderId:t.id})}function dG(e,t,o,r){let i={},n=new Set;t.forEach(a=>{let l=null;if(zt(a)){if(!ur(a))return;let v=ai(e.tree,a),T=Le.getReplicaForTemplateNode(e.tree,a);if(!v||!T||!Ve(T))return;a=v,l=T}let s=dE(e,o);lG(a,s,e),cG(a,s,e);let c=e.tree.getNodeParent(a),d=c||e.tree.getScopeNodeFor(a)||e.stores.scopeStore.active,p=d.children.indexOf(a),f=gp(e.tree,a,s,d);if(s.set(f),c&&lt(a)&&Da(s)){s.set(qi(a));let v=new Pp([[a.id,s.id]]);Di(e.tree,c,v,ht(c)||Yr(c)),n.add(s.id)}if(_(s)&&uG(a,s,new Set(Object.keys(f))),Rt(a)&&!Ve(a)&&_(s)&&pG(e,a,s),mG(e,d,a,s),gt(a))for(let v of a.children)ht(v)&&e.moveNode(v.id,s.id);e.deleteNode(a.id),e.moveNode(s.id,d.id,p);let h=fG(e.tree,a,s);ve(s)&&h&&(r?e.tree.current(s)?.set({left:h.left,right:h.right,top:h.top,bottom:h.bottom,centerAnchorX:h.centerAnchorX,centerAnchorY:h.centerAnchorY}):e.tree.current(s)?.set(h)),l?i[a.id]=$o(l.id,s.id):i[a.id]=s.id});for(let a of e.stores.selectionStore.ids)n.add(i[a]??a);e.stores.selectionStore.set(Array.from(n))}function pG(e,t,o){if(Ve(t))return;let r=o.getLocalSmartComponentNodeId();if(!r)return;let i=e.tree.getNode(r);if(!(!i||!ie(i))&&i.originalSymbolId===t.replicaInfo.master){for(let n of t.walk())if(!(!NI(n)||!n.isTarget)&&n.originalid){if(De(n)&&n.fillType==="image"&&D(n.fillImage)){let a=o.getRawControlProp(`symbol_${n.originalid}`);a&&a.type==="image"&&(a.value=n.fillImage)}else if(xs(n)){let a=o.getRawControlProp(`symbol_${n.originalid}`);a&&a.type==="string"&&(a.value=n.styledText.text)}}}}function uG(e,t,o){let r;e:for(let n of e.walk()){if(!Zt(n)&&!_(n))continue;let a=gd(n);for(let[,l]of Object.entries(a))if(r===void 0)r=l;else if(r){r=null;break e}}if(!r)return;let i=E.componentForIdentifier(t.codeComponentIdentifier);if(i?.properties)for(let n in i.properties){if(o?.has(n)||i.properties[n]?.type!=="eventhandler")continue;let l={type:"eventhandler",value:r};t.set({[ut(n)]:l});return}}function mG(e,t,o,r){let i=t?Ns(t):null;if(!i||!Co(i))return;let n=e.tree.getSmartComponentNodeFor(i);if(n)for(let a of n.getReplicaVariants()){let l=a.replicaInfo;if(!(o.id in l.overrides))continue;let s={...l};s.overrides={...s.overrides};let c={},d=s.overrides[o.id];for(let p in d){let f=d[p];if(p==="_deleted"){if(!St(f))continue;let h=f.filter(v=>v in r);h.length&&(c._deleted=h)}else p in r&&(c[p]=f)}delete s.overrides[o.id],s.overrides[r.id]=c,e.tree.current(a)?.set({replicaInfo:s})}}function fG(e,t,o){if(!ve(t)||!ve(o))return;let r=t.constraintValues();if(zs(t)&&zs(o)&&(_c(t)&&(r.gridItemFillCellWidth=!0),Bs(t)&&(r.gridItemFillCellHeight=!0)),!_(o))return r;if(DT(t)){let i=o.getSupportedLayout(E),n=e.getRect(t);t.widthType===2&&!zi(i.width)&&(r.widthType=0,r.width=n.width),t.widthType===5&&(r.widthType=zi(i.width)?2:0),t.heightType===2&&!zi(i.height)&&(r.heightType=0,r.height=n.height),t.heightType===5&&(r.heightType=zi(i.height)?2:0)}return r}function NIe(e){return $y(e)?mE(e):null}var hE=Ss(AS());function gE(e){let t={};for(let o of e.walk()){let r={};jo(o)&&(r.strokeDashArray=o.strokeDashArray,r.strokeDashOffset=o.strokeDashOffset,z(o.strokeWidth)||(r.strokeWidth=o.strokeWidth)),Dn(o)&&(r.boxShadows=o.boxShadows),ei(o)&&(r.radius=o.radius),Si(o)&&(r.radiusTopLeft=o.radiusTopLeft,r.radiusTopRight=o.radiusTopRight,r.radiusBottomRight=o.radiusBottomRight,r.radiusBottomLeft=o.radiusBottomLeft),Ps(o)&&(r.pathSegments=o.pathSegments),Po(o)&&o.fillType==="image"&&o.fillImageResize==="tile"&&(r.fillImageTileSize=o.fillImageTileSize??1),t[o.id]=r}return(0,hE.Map)(t)}function sy(e,t,o){t.forEach((r,i)=>{let n=e.getNode(i);if(!n)return;let a={};jo(n)&&(X(r.strokeWidth)&&(a.strokeWidth=lo(r.strokeWidth*o,2)),D(r.strokeDashArray)&&(a.strokeDashArray=gG(r.strokeDashArray,o)),X(r.strokeDashOffset)&&(a.strokeDashOffset=lo(r.strokeDashOffset*o,2))),hS(n)&&RC(r.boxShadows)&&(a.boxShadows=hG(r.boxShadows,o)),ei(n)&&(X(r.radius)&&(a.radius=lo(r.radius*o,2)),X(r.radiusTopLeft)&&(a.radiusTopLeft=lo(r.radiusTopLeft*o,2)),X(r.radiusTopRight)&&(a.radiusTopRight=lo(r.radiusTopRight*o,2)),X(r.radiusBottomRight)&&(a.radiusBottomRight=lo(r.radiusBottomRight*o,2)),X(r.radiusBottomLeft)&&(a.radiusBottomLeft=lo(r.radiusBottomLeft*o,2))),Ps(n)&&r.pathSegments&&(a.pathSegments=n.pathSegments.map((l,s)=>{let d=r.pathSegments[s].radius*o;return l.merge({radius:d})})),Po(n)&&X(r.fillImageTileSize)&&(a.fillImageTileSize=r.fillImageTileSize*o),n.set(a)})}function hG(e,t){if(!(!e||z(e)))return e.map(o=>pc(o,{x:lo(o.x*t,2),y:lo(o.y*t,2),blur:lo(o.blur*t,2),spread:lo(o.spread*t,2)}))}function gG(e,t){let o=[],r=e.split(",");for(let i of r){let n=parseFloat(i);if(!X(n))continue;let a=lo(n*t,2);o.push(a)}return o.join(", ")}var OIe=(e,t)=>{if(e===t)return!0;if(e.length!==t.length)return!1;let o=new Set(e);for(let r of t)if(!o.has(r))return!1;return!0},WIe=(e,t,o)=>{let r=[];for(let i of e)ly(t,i,o)!==-1&&r.push(i);return r},yE=(e,t,o)=>{if(!o)return Array.from(new Set([...e,...t]));let r=[...e];for(let i of t)ly(r,i,o)===-1&&r.push(i);return r},zIe=(e,t,o)=>e.filter(r=>ly(t,r,o)===-1);function ly(e,t,o){return o?e.findIndex(r=>o(r,t)):e.indexOf(t)}function yG(e,t){let o=[];for(let i of t.segmentSelection){let n=e.getNode(i.id);!n||i.index>=n.pathSegments.length||o.push(i)}let r=t.segmentHandle;if(r){let i=e.getNode(r.id);(!i||r.index>=i.pathSegments.length)&&(r=null)}return{...t,segmentSelection:o,segmentHandle:r}}var CE=class{constructor(t){this.addChanges=t;L(this,"state",{segmentSelection:[],selectionType:0,segmentHandle:null,segmentHovered:null,closestCurve:null,pointRounding:.5,snapConstraint:null})}validateSegmentSelection(t){this.state=yG(t,this.state),this.addChanges("PathSelection")}setSegmentSelection(t,o){this.state={...this.state,segmentSelection:t,selectionType:o},this.addChanges("PathSelection")}toggleSegmentSelection(t,o){this.state.selectionType!==o&&(this.state={...this.state,segmentSelection:t,selectionType:o});let r=t.filter(n=>this.state.segmentSelection.find(a=>n.id===a.id&&n.index===a.index)===void 0),i=this.state.segmentSelection.filter(n=>t.find(a=>a.id===n.id&&a.index===n.index)===void 0);this.state={...this.state,segmentSelection:yE(r,i)},this.addChanges("PathSelection")}setSegmentHandle(t){this.state={...this.state,segmentHandle:t},this.addChanges("PathSelection")}setHoveredSegment(t){this.state={...this.state,segmentHovered:t},this.addChanges("PathSelection")}setClosestCurve(t){this.state={...this.state,closestCurve:t},this.addChanges("PathSelection")}setPathPointRounding(t){this.state={...this.state,pointRounding:t},this.addChanges("PathSelection")}setPathConstraint(t){this.state={...this.state,snapConstraint:t},this.addChanges("PathSelection")}};var Ul=Ss(AS());function vE(e,t){return gl(e,"canDesign")||t.length===0?!1:t.find(o=>!(!qa(o)&&hr(o)&&!Sc(o)&&!o.originalid))===void 0}function yNe(e,t,o,r){let i=t.map(n=>dy(e,n,o,r)[0]);e.stores.selectionStore.set(i)}function dy(e,t,o,r){let i=e.tree,n;mf.isBasicShape(t)?n=mf.createPath(t):n=t.calculatedPaths();let a=aT(t,n),l=Xl(i,t,n),s=i.newId(),c=Vo.boundingBox(a),d=IE(t),p=Ab(t);if(d.fillType==="linear-gradient"&&d.fillLinearGradient){d.fillType="linear-gradient";let h=X(t.rotation)?t.rotation:0;d.fillLinearGradient=d.fillLinearGradient.updated({angle:d.fillLinearGradient.angle+h})}if(a.length===1){let h=a[0];C(h!==void 0,"Expected first path after length === 1 check");let v=Vo.offset(h,Ne.reverse(c));e.createPath(t.parentid,{id:s,...v,...c,...d,...p})}else{let h=[],v=new wd({id:s,parentid:t.parentid,pathBoolean:4,...c,...d,...p});h.push(v);for(let T of a){let N=Vo.boundingBox(T),w={...N,...Ne.subtract(N,c)},R=Vo.offset(T,Ne.reverse(N)),B=new sl({parentid:s,...w,...R,...d});h.push(B)}e.tree.insertNodes(h)}let f=i.getParent(t.id);if(f!==null&&gt(f)){let h=f.children.indexOf(t);e.moveNode(s,f.id,h)}return e.deleteNode(t.id),r||e.stores.selectionStore.set(s),o===!0&&e.setTool(36),[s,l]}function CG(e){let t={};return e.forEach(o=>{let r=t[o.id]??[];r.push(o.index),t[o.id]=r}),t}function CNe(e,t){let o=1/t;return{x:Math.round(e.x*o)/o,y:Math.round(e.y*o)/o}}function SNe(e,t){let o=e.getNode(t.id);if(!o||!o.pathSegments)return null;let r=o.pathSegments[t.index];if(!r)return null;let i=t.handle===0?po.calculatedHandleIn(r):po.calculatedHandleOut(r);return e.convertPointToCanvas(o,i)}function SE(e,t){return t.handle===0?{x:e.handleOutX,y:e.handleOutY}:{x:e.handleInX,y:e.handleInY}}function vNe(e,t,o,r,i){let n=e.getNode(t.id),a=n.pathSegments[t.index];return C(a!==void 0,"Expected segment at handleSelector.index"),o=e.convertPointToNode(n,o),o=Ne.subtract(o,a),Or.update(n.pathSegments,t.index,l=>{let s=SE(l,t),c=l.handleMirroring==="straight",d=l.handleMirroring;r&&(s=SE(r,t),c=r.handleMirroring==="straight",d=r.handleMirroring),c&&(d="symmetric"),r&&i&&(d==="disconnected"||d==="asymmetric"?d="symmetric":d="disconnected"),d==="symmetric"&&(s=Ne.reverse(o));let p=t.handle===0,f=p?o.x:s.x,h=p?o.y:s.y,v=p?s.x:o.x,T=p?s.y:o.y;return l.merge({handleOutX:v,handleOutY:T,handleInX:f,handleInY:h,handleMirroring:d})})}function Jl(e,t,o=!1,r){let i=e.tree,n=(0,Ul.Map)(),a=(0,Ul.Map)();if(!hr(t)&&!He(t))return{descendantPaths:n,descendantBasicShapes:a};let l={};py(i,t,l);let s=Object.keys(l);for(let p=0,f=s.length;p<f;p++){let h=s[p];C(h!==void 0,"Expected id at index within loop bounds");let v=l[h];C(v!==void 0,"Expected path for id from Object.keys"),n=n.set(h,v)}let c={};uy(i,t,c,o);let d=Object.keys(c);for(let p=0,f=d.length;p<f;p++){let h=d[p];C(h!==void 0,"Expected id at index within loop bounds");let v=c[h];C(v!==void 0,"Expected points for id from Object.keys"),a=a.set(h,v)}return a.forEach((p,f)=>{if(p!==null)return;let h=i.getNode(f);if(!h||!vE(e,[h]))return;let[v,T]=dy(e,h,!1,!0),N=T[0];C(N!==void 0,"Expected pathSegment from flattenShape"),n=n.set(v,N),r&&r.includes(f)&&e.stores.selectionStore.toggle(v)}),{descendantPaths:n,descendantBasicShapes:a}}function TE(e,t){let o=e.tree,r=(0,Ul.Map)(),i=(0,Ul.Map)();if(!He(t))return{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:i};let n={};py(o,t,n,t);let a=Object.keys(n);for(let c=0,d=a.length;c<d;c++){let p=a[c];C(p!==void 0,"Expected id at index within loop bounds");let f=n[p];C(f!==void 0,"Expected path for id from Object.keys"),r=r.set(p,f)}let l={};uy(o,t,l,!1,!1,t);let s=Object.keys(l);for(let c=0,d=s.length;c<d;c++){let p=s[c];C(p!==void 0,"Expected id at index within loop bounds");let f=l[p];C(f!==void 0,"Expected points for id from Object.keys"),i=i.set(p,f)}return i.forEach((c,d)=>{if(c!==null)return;let p=o.getNode(d);if(!p||!vE(e,[p]))return;let[f,h]=dy(e,p,!1,!0),v=h[0];C(v!==void 0,"Expected pathSegment from flattenShape");let N=Cn(o,t,[v])[0];C(N!==void 0,"Expected converted path segments at index 0"),r=r.set(f,{pathSegments:N,pathClosed:!0})}),{shapeContainerDescendantPaths:r,shapeContainerDescendantBasicShapes:i}}function py(e,t,o,r){if(Sc(t)||am(t)||He(t))for(let i of t.children)hr(i)&&py(e,i,o,r);else if(qa(t)){let n=Xl(e,t,t)[0];C(n!==void 0,"Expected path from convertPathToCanvas");let a=n.pathSegments;if(r){let s=Cn(e,r,[{pathSegments:a,pathClosed:t.pathClosed}])[0];C(s!==void 0,"Expected converted path at index 0"),a=s}o[t.id]={pathSegments:a,pathClosed:t.pathClosed}}}function uy(e,t,o,r=!1,i=!1,n){if(Sc(t)||am(t)||He(t))for(let a of t.children){let s=fr(a)&&X(a.rotation)&&a.rotation%90!==0||r;hr(a)&&uy(e,a,o,s,i,n)}else if(!qa(t)&&hr(t))if(r||i)o[t.id]=null;else{let a=ae.pointsAtOrigin(e.getRect(t));o[t.id]=a.map(l=>{let s=e.convertPointToCanvas(t,l);return n?e.convertPointToNode(n,s,!0):s})}}function Xl(e,t,o,r=1){let i=[];return Array.isArray(o)?i=o:i=[o],i.map(({pathSegments:n,pathClosed:a})=>({pathSegments:n.map(s=>cy(e,t,s,r,void 0)),pathClosed:a}))}function cy(e,t,o,r=1,i){let n=Ne.multiply(e.convertPointToCanvas(t,o,!0,i),r),a=Ne.multiply(e.convertPointToCanvas(t,po.calculatedHandleIn(o),!0,i),r),l=Ne.multiply(e.convertPointToCanvas(t,po.calculatedHandleOut(o),!0,i),r),s=Ne.subtract(a,n),c=Ne.subtract(l,n);return o.merge({...n,handleOutX:c.x,handleOutY:c.y,handleInX:s.x,handleInY:s.y})}function Cn(e,t,o){return o.map(({pathSegments:r})=>r.map(i=>{let n=e.convertPointToNode(t,i),a=e.convertPointToNode(t,po.calculatedHandleIn(i)),l=e.convertPointToNode(t,po.calculatedHandleOut(i)),s=Ne.subtract(a,n),c=Ne.subtract(l,n);return i.merge({...n,handleOutX:c.x,handleOutY:c.y,handleInX:s.x,handleInY:s.y})}))}function bE(e,t,o,r){return r.map(({pathSegments:i})=>i.map(n=>{let a={x:n.x,y:n.y},l=e.convertPointFromNodeToDescendant(t,o,a),s=e.convertPointFromNodeToDescendant(t,o,po.calculatedHandleIn(n)),c=e.convertPointFromNodeToDescendant(t,o,po.calculatedHandleOut(n)),d=Ne.subtract(s,l),p=Ne.subtract(c,l);return n.merge({...l,handleOutX:p.x,handleOutY:p.y,handleInX:d.x,handleInY:d.y})}))}function my(e,t){return t.map(({pathSegments:o})=>o.map(r=>{let i=ct.convertPoint(e,r),n=ct.convertPoint(e,po.calculatedHandleIn(r)),a=ct.convertPoint(e,po.calculatedHandleOut(r)),l=Ne.subtract(n,i),s=Ne.subtract(a,i);return r.merge({...i,handleOutX:s.x,handleOutY:s.y,handleInX:l.x,handleInY:l.y})}))}function SG(e,t,o){let r=t.updateForPath(o);e.tree.current(t)?.set(r)}function TNe(e,t,o,r,i){let n=e.getParent(o.id),a=o.updateForPath(r);t.createPath(n?n.id:eo,{...a,id:i,rotation:o.rotation,...IE(o)})}function bNe(e,t,o){if(o===0)return t;let r=[],i=CG(t),n=Object.keys(i);for(let a=0,l=n.length;a<l;a++){let s=n[a];C(s!==void 0,"Expected id at index within loop bounds");let c=[],d=e.getNode(s),p=i[s];C(p!==void 0,"Expected selectors for id from grouped object");let f=d.pathSegments.length;for(let h=0,v=p.length;h<v;h++){let T=p[h];C(T!==void 0,"Expected value at index of selectors within loop bounds"),c.push(T);let N=T+1;N===f?c.push(0):c.push(N)}for(let h=0,v=c.length;h<v;h++){let T=c[h];C(T!==void 0,"Expected value in indexes array within loop bounds"),r.push({id:d.id,index:T})}}return r}function INe(e,t,o){for(let r of e)if(r.id===t&&r.index===o)return!0;return!1}function NNe(e,t,o,r,i,n){let a=Xl(e,i,i),s=Cn(e,o,a)[0];C(s!==void 0,"Expected converted path at index 0");let c=s,d=!Vo.isLastSegment(o.pathSegments,o.pathClosed,r.index),p=Vo.isLastSegment(i.pathSegments,i.pathClosed,n.index);(!d&&p||d&&!p)&&(c=Vo.reverse(c));let h;d?h=Or.unshift(o.pathSegments,...c):h=Or.push(o.pathSegments,...c),t.deleteNode(i.id),SG(t,o,{pathSegments:h})}function vG(e,t,o){let r=aS(e,t);if(o===0){if(r)return Ne.subtract(t,e);if(e.handleOutX!==0||e.handleOutY!==0){let n=po.calculatedHandleOut(e);return Ne.subtract(n,e)}let i=po.calculatedHandleIn(t);return Ne.subtract(i,e)}else{if(r)return Ne.subtract(e,t);if(t.handleInX!==0||t.handleInY!==0){let n=po.calculatedHandleIn(t);return Ne.subtract(n,t)}let i=po.calculatedHandleOut(e);return Ne.subtract(i,t)}}function xNe(e,t){let o=e.getNode(t.id);if(!o)return null;let r=o.pathSegments[t.segmentIndex];if(!r)return null;let i=o.pathSegments[t.segmentIndex+1];if(!i)return null;let n=cy(e,o,r),a=cy(e,o,i),s=t.projectedTime<.5?po.point(n):po.point(a),c=vG(n,a,0);return Yy(s,Ne.add(s,c))}var TG=15;function PNe(e,t,o,r){let i=5/r,n=TG/r,a=t.cache.canvasRect;if(a&&(a.x-o.x>i||a.y-o.y>i||o.x-(a.x+a.width)>i||o.y-(a.y+a.height)>i))return null;let l=Vo.toBezierJS(t,t),s=e.convertPointToNode(t,o),c=-1,d=1/0,p=0;for(let N=0,w=l.length;N<w;N++){let R=l[N];C(R!==void 0,"Expected bezierCurve at index within loop bounds");let B=R.project(s),G=B.d,K=B.t;G>=d||K===0||K===1||(d=G,c=N,p=K)}if(c===-1)return null;let f=l[c];C(f!==void 0,"Expected curve at shortestIndex");let h=f.get(p),v=f.get(.5),T=Ne.distance(s,v)<n;return{id:t.id,segmentIndex:c,distance:d,projectedPoint:h,projectedTime:p,midPoint:v,midPointInRange:T}}function IE(e){return{strokeEnabled:e.strokeEnabled,strokeAlignment:e.strokeAlignment,strokeWidth:e.strokeWidth,strokeColor:e.strokeColor,lineJoin:e.lineJoin,lineCap:e.lineCap,strokeMiterLimit:e.strokeMiterLimit,strokeDashArray:e.strokeDashArray,strokeDashOffset:e.strokeDashOffset,fillEnabled:e.fillEnabled,fillType:e.fillType,fillColor:e.fillColor,fillLinearGradient:e.fillLinearGradient,fillRadialGradient:e.fillRadialGradient,fillImage:e.fillImage,fillImageResize:e.fillImageResize,fillImageOriginalName:e.fillImageOriginalName,fillImagePixelWidth:e.fillImagePixelWidth,fillImagePixelHeight:e.fillImagePixelHeight,fillImagePositionX:e.fillImagePositionX,fillImagePositionY:e.fillImagePositionY,fillImageTileSize:e.fillImageTileSize,boxShadows:e.boxShadows,opacity:e.opacity}}function NE(e,t){let o=e.getRect(t),r={width:o.width,height:o.height};if(!De(t)||!co(t))return r;let i=nd(t);if(i.perSide)i.top&&(r.height-=i.top),i.bottom&&(r.height-=i.bottom),i.right&&(r.width-=i.right),i.left&&(r.width-=i.left);else if(i.top){let n=i.top*2;r.width-=n,r.height-=n}return r.width=Math.max(1,r.width),r.height=Math.max(1,r.height),r}function JNe(e,t,o,r){e.getNodesWithTrait(o,Bt).forEach(n=>{let{descendantPaths:a}=Jl(t,n,!0,o),l=a.valueSeq().toArray(),s=Vo.boundingBox(l),c={...s};r==="horizontal"?(c.x=s.x+s.width,c.width=-s.width):(c.y=s.y+s.height,c.height=-s.height);let d=c.width>-1&&c.width<1?1:c.width,p=c.height>-1&&c.height<1?1:c.height,f=[s.x,s.x+s.width],h=[c.x,c.x+d],v=[s.y,s.y+s.height],T=[c.y,c.y+p],N=d/s.width,w=p/s.height;a.forEach((R,B)=>{let G=R.pathSegments.map(q=>q.merge({x:go(q.x,f,h,!1),y:go(q.y,v,T,!1),handleOutX:q.handleOutX*N,handleOutY:q.handleOutY*w,handleInX:q.handleInX*N,handleInY:q.handleInY*w}));C(t.tree===e);let K=e.get(B);if(!K)return;let se={pathSegments:G,pathClosed:K.pathClosed},pe={pathSegments:Cn(e,K,[se])[0],pathClosed:K.pathClosed},Ee=K.updateForPath(pe);K.set(Ee)})})}function XNe(e,t,o){let{tree:r}=e;t.forEach(i=>{let n=r.getRect(i),a=o(n);if(a.width&&a.width<1&&(a.width=1),a.height&&a.height<1&&(a.height=1),He(i))bG(e,i,a);else if(hr(i))IG(e,i,a);else{let l=r.getParent(i.id),s=l?NE(r,l):null,c=i.updateForSize(a,s?{sizing:s,positioning:s,viewport:i.cache.viewportRect,layout:_r(l)}:null);r.current(i)?.set(c)}})}function bG(e,t,o){let{tree:r}=e,i=r.getParent(t.id),n=i?r.getRect(i):null,a=t.updateForSize(o,n?{sizing:n,positioning:n,viewport:null,layout:_r(i)}:null);a.sizeToFit=!1,r.current(t)?.set(a)}function IG(e,t,o){let{tree:r}=e,i=r.getRect(t),n=xc.update(i,o,Yi(t)?X(t.aspectRatio):!1),a={...i,...n},l=a.width>-1&&a.width<1?1:a.width,s=a.height>-1&&a.height<1?1:a.height,c=[i.x,i.x+i.width],d=[a.x,a.x+l],p=[i.y,i.y+i.height],f=[a.y,a.y+s],h=l/i.width,v=s/i.height,{descendantPaths:T,descendantBasicShapes:N}=Jl(e,t);T.forEach((w,R)=>{let G=Cn(r,t,[w])[0].map(q=>q.merge({x:go(q.x+i.x,c,d,!1)-i.x,y:go(q.y+i.y,p,f,!1)-i.y,handleOutX:q.handleOutX*h,handleOutY:q.handleOutY*v,handleInX:q.handleInX*h,handleInY:q.handleInY*v})),K=Xl(r,t,{pathSegments:G,pathClosed:!0});C(e.tree===r);let se=r.get(R);if(!se)return;let pe={pathSegments:Cn(r,se,K)[0],pathClosed:se.pathClosed},Ee=se.updateForPath(pe);se.set(Ee)}),N.forEach((w,R)=>{if(w===null)return;let K=w.map($e=>r.convertPointToNode(t,$e)).map($e=>({x:go($e.x+i.x,c,d,!1)-i.x,y:go($e.y+i.y,p,f,!1)-i.y})).map($e=>r.convertPointToCanvas(t,$e)),se=r.get(R);if(!se)return;let oe=K.map($e=>r.convertPointToNode(se,$e)),pe=ae.boundingRectFromPoints(oe),Ee=ae.center(pe),q=od(se,Ee),We={x:q.x-pe.width/2,y:q.y-pe.height/2,width:pe.width,height:pe.height};se.set(We)})}function xE(e,t,o,r,i,n){let{tree:a}=e,l=a.getNode(t.id),s=n.width>-1&&n.width<1?1:n.width,c=n.height>-1&&n.height<1?1:n.height,d=s/i.width,p=c/i.height;o.forEach((f,h)=>{let v=a.getNode(h);if(!v)return;let N={pathSegments:f.pathSegments.map(G=>G.merge({x:G.x*d,y:G.y*p,handleOutX:G.handleOutX*d,handleOutY:G.handleOutY*p,handleInX:G.handleInX*d,handleInY:G.handleInY*p})),pathClosed:f.pathClosed},R={pathSegments:bE(a,l,v,[N])[0],pathClosed:v.pathClosed},B=v.updateForPath(R);v.set(B)}),r.forEach((f,h)=>{if(f===null)return;let v=f.map(R=>({x:R.x*d,y:R.y*p})),T=a.getNode(h),N=v.map(R=>a.convertPointFromNodeToDescendant(l,T,R,!1)),w=ae.boundingRectFromPoints(N);e.tree.get(h)?.set(w)})}function PE(e,t,o,r,i,n=a=>a.canvasMatrix()){let a=r.width>-1&&r.width<1?1:r.width,l=r.height>-1&&r.height<1?1:r.height,s=[o.x,o.x+o.width],c=[r.x,r.x+a],d=[o.y,o.y+o.height],p=[r.y,r.y+l],f=a/o.width,h=l/o.height,v=i?{x:0,y:0}:t.rect;t.descendantPaths&&t.descendantPaths.forEach((T,N)=>{let R=(i?T.pathSegments:my(t.canvasMatrix.inverse(),[T])[0]??[]).map(pe=>pe.merge({x:go(pe.x+v.x,s,c,!1)-v.x,y:go(pe.y+v.y,d,p,!1)-v.y,handleOutX:pe.handleOutX*f,handleOutY:pe.handleOutY*h,handleInX:pe.handleInX*f,handleInY:pe.handleInY*h})),B=i?{pathSegments:R,pathClosed:T.pathClosed}:{pathSegments:my(t.canvasMatrix,[{pathSegments:R,pathClosed:T.pathClosed}])[0]??[],pathClosed:T.pathClosed},G=e.get(N);if(!G)return;let se={pathSegments:Cn(e,G,[B])[0],pathClosed:G.pathClosed},oe=G.updateForPath(se);G.set(oe)}),t.descendantBasicShapes&&t.descendantBasicShapes.forEach((T,N)=>{if(T===null)return;let R=(i?T:T.map(q=>ct.convertPoint(t.canvasMatrix.inverse(),q))).map(q=>({x:go(q.x+v.x,s,c,!1)-v.x,y:go(q.y+v.y,d,p,!1)-v.y})),B=i?R:R.map(q=>ct.convertPoint(t.canvasMatrix,q)),G=e.get(N);if(!G)return;let K=B.map(q=>ct.convertPoint(n(G).inverse(),q)),se=ae.boundingRectFromPoints(K),oe=ae.center(se),pe=od(G,oe),Ee={x:tm(pe.x-se.width/2),y:tm(pe.y-se.height/2),width:se.width,height:se.height};G.set(Ee)})}function kE(e,t,o,r,i){if(o!==1)for(let[n]of r.parentsInitialState){let a=r.parentsInitialState.get(n);if(!a)continue;let l=[];for(let s of t)a.selectedNodeIds.has(s.id)&&l.push(s);wE(l,o,VG(e,n,o,r,i),!0)}}function RE(e,t){let o=new Map,r=new Map,i={},n=new Set;for(let a of e.tree.withoutDescendants(t)){let l=a.parentid;if(!l)continue;let s=e.tree.getNode(l);C(s,"Parent must exist"),NG(e,a,r,n),PG(e,a,s,o),i[l]??=[],i[l].push(a)}for(let[a,l]of o){let s=i[a];C(s,"Nodes must exist"),l.selectionBoundingFrame=e.tree.getBoundingFrameForNodes(s)}return{parentsInitialState:o,nodesInitialState:r,nonScalableNodes:n}}function NG(e,t,o,r){for(let{node:i,skipChildren:n}of t.walkWithSkipChildren()){if(o.has(i.id))continue;let a=i.id===t.id,l=e.tree.isInlineVectorNode(i),s=Bt(i)&&(l||a);if(!WG(i,a)){r.add(i.id),n();continue}let c=s?Jl(e,i):void 0,d=He(i)?TE(e,i):void 0,p=He(i)||s?gE(i.draftOrCurrent()):void 0,f=_(i)?xG(i):void 0;o.set(i.id,{rect:ae.round(e.tree.getRect(i,!1),2),matrix:e.tree.transformMatrixToNode(i),codeComponentControlProps:f,scalableShapeStylesMap:p,...c,...d}),He(i)&&n()}}function xG(e){let t=E.reactComponentForIdentifier(e.codeComponentIdentifier);if(!(!t||!t.properties))return e.getControlProps(t.properties)}function PG(e,t,o,r){let i=r.get(o.id)??{matrix:e.tree.transformMatrixToNode(o).invertSelf(),selectedNodeIds:new Set,selectionBoundingFrame:{x:0,y:0,width:0,height:0}};i.selectedNodeIds.add(t.id),r.set(o.id,i)}function VG(e,t,o,r,i){let n=r.parentsInitialState.get(t);C(n,"Parent must be present in initial state");let a=n.selectionBoundingFrame,l={...a,width:a.width*o,height:a.height*o};return{initialRect:a,resizedRect:l,engine:e,tree:e.tree,initialState:r,anchorPoint:i??{x:.5,y:.5}}}function wE(e,t,o,r){if(e.length===0)return!1;let i=!1;for(let n of e){if(o.initialState.nonScalableNodes.has(n.id))continue;let a=zG(n)&&wE(n.children,t,o,!1),l=kG(n,o,t,a,r);i||=l||a}return i}function kG(e,t,o,r,i){let n=MG(e,o,i),a=RG(e,t,o,r,i,n);return e.set(n),(a||r)&&LG(e,t,o,i),a}function RG(e,t,o,r,i,n){return Ie(e)?wG(e,o,t,i,n):He(e)?DG(e,o,t,i,n):Bt(e)?BG(e,o,t):_(e)?HG(e,o,t,i,n):Pe(e)?DE(e,o,t,r,i,n):!1}function wG(e,t,o,r,i){let n=!1;if(!e.textFitViewBoxSize){OG(e,o.tree);let a=e.draftOrCurrent().updateForScale(t);Object.assign(i,a),n=!0}return e.widthType!==2&&(n=fs("width",e,t,o,!1,r,i)||n),e.heightType!==2&&(n=fs("height",e,t,o,!1,r,i)||n),n}function DG(e,t,o,r,i){let n=o.initialState.nodesInitialState.get(e.id),a=n?.shapeContainerDescendantPaths,l=n?.shapeContainerDescendantBasicShapes,s=n?.scalableShapeStylesMap;return C(s,"Shape container styles should be available in initial state"),C(a,"Shape container paths should be available in initial state"),C(l,"Shape container shapes should be available in initial state"),xE(o.engine,e,a,l,e,{width:e.width*t,height:e.height*t}),sy(o.tree,s,t),fs("width",e,t,o,!0,r,i),fs("height",e,t,o,!0,r,i),!0}function LG(e,t,o,r){if(r)FG(e,o,t);else if(ve(e)){let i={};e.left&&(i.left=de(e.left,o)),e.right&&(i.right=de(e.right,o)),e.top&&(i.top=de(e.top,o)),e.bottom&&(i.bottom=de(e.bottom,o)),e.set(i)}}function FG(e,t,o){if(!ve(e)&&!ld(e))return;let r=o.initialState.nodesInitialState.get(e.id);C(r,"Node must be present in initial state");let i=e.parentid?o.initialState.parentsInitialState.get(e.parentid):void 0;C(i,"Node parent must be present in the initial state"),i.selectedNodeIds.size===1?EG(e,t,o,r):AG(e,o,r,i)}function EG(e,t,o,r){let i=r.rect,n={...i,width:i.width*t,height:i.height*t},l=Bt(e)||He(e)?e.clone({rotation:0}):e,s=Wu(i,o.anchorPoint),c=Wu(n,o.anchorPoint),d=ct.convertPoint(l.originAdjustedMatrix(null,i),s),p=ct.convertPoint(l.originAdjustedMatrix(null,n),c),f=Ne.subtract(d,p),h=ae.round(ae.offset(n,f),2);if(ve(e)){let{widthType:v,heightType:T,maxHeight:N,minHeight:w,maxWidth:R,minWidth:B,...G}=$m(e.constraints(),h,o.tree.getParentSizeInfo(e,o.tree.getParent(e.id)),null,!1);e.set(G)}else e.set({x:h.x,y:h.y})}function AG(e,t,o,r){let i=Ne.add(Wu(t.initialRect,t.anchorPoint),t.initialRect),n=Ne.add(Wu(t.resizedRect,t.anchorPoint),t.resizedRect),a=Ne.subtract(i,n),l=r.matrix??null,s=VE(l,t.initialRect),c=VE(l,ae.offset(t.resizedRect,a)),d=[s.x,s.x+s.width],p=[c.x,c.x+c.width],f=[s.y,s.y+s.height],h=[c.y,c.y+c.height],v=o.rect,T={x:go(v.x,d,p,!1),y:go(v.y,f,h,!1)},N={x:go(v.x+v.width,d,p,!1),y:go(v.y+v.height,f,h,!1)},w=ae.round(ae.fromTwoPoints(T,N));if(ve(e)){let R=$m(e.constraints(),w,t.tree.getParentSizeInfo(e,t.tree.getParent(e.id)),null,!1);delete R.widthType,delete R.heightType,e.set(R)}else e.set({x:w.x,y:w.y})}function VE(e,t){if(!e)return t;let o=ct.convertPointsWithClipping(e,ae.cornerPoints(t));return ae.boundingRectFromPoints(o)}function MG(e,t,o){let r={};return kr(e)&&(r.borderWidth=de(e.borderWidth,t),r.borderBottom=de(e.borderBottom,t),r.borderLeft=de(e.borderLeft,t),r.borderTop=de(e.borderTop,t),r.borderRight=de(e.borderRight,t)),Dn(e)&&(r.boxShadows=FE(e.boxShadows,t)),jo(e)&&(r.strokeWidth=de(e.strokeWidth,t)),Ho(e)&&(r.padding=de(e.padding,t),r.paddingBottom=de(e.paddingBottom,t),r.paddingLeft=de(e.paddingLeft,t),r.paddingTop=de(e.paddingTop,t),r.paddingRight=de(e.paddingRight,t)),Si(e)&&(r.radiusBottomLeft=de(e.radiusBottomLeft,t),r.radiusBottomRight=de(e.radiusBottomRight,t),r.radiusTopLeft=de(e.radiusTopLeft,t),r.radiusTopRight=de(e.radiusTopRight,t)),ei(e)&&(r.radius=de(e.radius,t)),Xt(e)&&(r.gridColumnMinWidth=de(e.gridColumnMinWidth,t),r.gridColumnWidth=de(e.gridColumnWidth,t),e.gridRowHeightType==="fixed"&&(r.gridRowHeight=de(e.gridRowHeight,t))),co(e)&&(r.gap=LE(e.gap,t)),Un(e)&&(r.formInputFontSize=EE(e.formInputFontSize,t),e.formInputFontLetterSpacingUnit==="px"&&(r.formInputFontLetterSpacing=de(e.formInputFontLetterSpacing,t)),e.formInputFontLineHeightUnit==="px"&&(r.formInputFontLineHeight=de(e.formInputFontLineHeight,t))),Zs(e)&&(r.blur=de(e.blur,t,0),r.backgroundBlur=de(e.backgroundBlur,t,0)),Po(e)&&e.fillType==="image"&&e.fillImageResize==="tile"&&(r.fillImageTileSize=de(e.fillImageTileSize??1,t)),qr(e)&&(r.minWidth=Ou(e.minWidth,t,o),r.maxWidth=Ou(e.maxWidth,t,o),r.minHeight=Ou(e.minHeight,t,o),r.maxHeight=Ou(e.maxHeight,t,o)),r}function DE(e,t,o,r,i,n){if(!qe(e))return n.width=de(e.width,t),n.height=de(e.height,t),!0;let a=!1;return a=fs("width",e,t,o,r,i,n)||a,a=fs("height",e,t,o,r,i,n)||a,a}function OG(e,t){let o=e.getTextStylePresets(!1);for(let r of o){let i=t.getNode(r);oo(i)&&e.draftOrCurrent().detachTextStylePreset(i,!1)}}function fs(e,t,o,r,i,n,a){let l=e==="width"?"widthType":"heightType",s=t[l],c=r.initialState.nodesInitialState.get(t.id)?.rect;C(c,"node should have cached rect");let d=e==="width"?"gridItemFillCellWidth":"gridItemFillCellHeight";if(zs(t)&&t[d]&&n)return a[d]=!1,a[e]=de(c[e],o),a[l]=0,!0;switch(s){case 0:return a[e]=de(t[e],o),!0;case 4:return a[e]=de(t[e],o,4),!0;case 1:return n?(a[e]=de(t[e],o,4),!0):!1;case 3:return n?(a[e]=de(c[e],o),a[l]=0,!0):!1;case 2:if(!i){let f=r.tree.getNodeParent(t),v=(f&&er(f)?f.layout:void 0)==="grid"?c[e]:t[e];return a[e]=de(v,o),a[l]=0,!0}return!1;case 5:return!0;default:$(s)}}function WG(e,t){let o=_(e)?e.getSupportedLayout(E):void 0;return!(o?.width==="auto"&&o?.height==="auto"||fe(e)||ht(e)&&!t)}function zG(e){return!(!e.children||He(e)||Bt(e))}function de(e,t,o=2){return X(e)?lo(e*t,o):e}function LE(e,t){return X(e)?de(e,t):D(e)?Lc(e,o=>de(o,t)):e}function Ou(e,t,o){if(M(e))return e;let[r,i]=On(e);return Number.isNaN(r)||i==="%"&&!o?e:Pr(de(r,t,0),i)}function FE(e,t){if(!(!e||z(e)))return e.map(o=>o.type==="realistic"?o:pc(o,{x:de(o.x,t),y:de(o.y,t),spread:de(o.spread,t)}))}function BG(e,t,o){let r=o.initialState.nodesInitialState.get(e.id);return r?(PE(o.tree,{canvasMatrix:r.matrix,rect:r.rect,descendantPaths:r.descendantPaths,descendantBasicShapes:r.descendantBasicShapes},o.initialRect,o.resizedRect,!0,i=>{let n=o.initialState.nodesInitialState.get(i.id);return C(n,"Basic shape initial state must exist"),n.matrix}),r.scalableShapeStylesMap&&sy(o.tree,r.scalableShapeStylesMap,t),!0):!1}function Wu(e,t){return{x:e.width*t.x,y:e.height*t.y}}function HG(e,t,o,r,i){let n=Pe(e)?DE(e,t,o,!1,r,i):!1,a=o.initialState.nodesInitialState.get(e.id)?.codeComponentControlProps;if(!a)return n;for(let l in a){let s=a[l];if(!(!s||z(s.value)))switch(s.type){case"borderradius":i[ut(l)]={...s,value:$G(s.value,t)};break;case"padding":i[ut(l)]={...s,value:_G(s.value,t)};break;case"gap":i[ut(l)]={...s,value:LE(s.value,t)};break;case"boxshadow":i[ut(l)]={...s,value:FE(s.value,t)};break;case"font":i[ut(l)]={...s,value:UG(s.value,t)};break;case"border":i[ut(l)]={...s,value:JG(s.value,t)};break;case"array":case"boolean":case"collectionreference":case"color":case"slot":case"cursor":case"customcursor":case"date":case"enum":case"eventhandler":case"file":case"link":case"linkrelvalues":case"multicollectionreference":case"number":case"object":case"pagescope":case"richtext":case"scrollsectionref":case"string":case"transition":case"fusednumber":case"image":case"trackingid":case"vectorsetitem":break;default:$(s)}}return n}function GG(e){return e.includes("%")}function $G(e,t){return z(e)||GG(e)?e:Lc(e,o=>de(o,t))}function _G(e,t){return z(e)?e:Lc(e,o=>de(o,t))}var jG={px:2,rem:3};function EE(e,t){if(M(e))return e;let[o,r]=X(e)?[e,"px"]:Fn(e);return Pr(de(o,t,jG[r]),r)}function UG(e,t){if(M(e))return e;let o=EE(e.fontSize,t);return{...e,fontSize:o,lineHeight:e.lineHeight?.[1]==="px"?[de(e.lineHeight[0],t),"px"]:e.lineHeight,letterSpacing:e.letterSpacing?.[1]==="px"?[de(e.letterSpacing[0],t),"px"]:e.letterSpacing}}function JG(e,t){return!e||U(e)?e:{...e,borderWidth:de(e.borderWidth,t),borderTop:de(e.borderTop,t),borderRight:de(e.borderRight,t),borderBottom:de(e.borderBottom,t),borderLeft:de(e.borderLeft,t)}}var XG;(Oi=>{function e(u){return u.some(g=>zE(g))}Oi.canCopyNodes=e;function t(u){return u.some(g=>AE(g))}Oi.canDuplicateNodes=t;function o(u,g){return e(g)&&l(u,g)}Oi.canCutNodes=o;function r(u,g,y=void 0,S=!0){let{documentSettingsStore:b,codeGenerationStore:I,modalStore:x,canvasStore:k,scopeStore:V,treeStore:O}=u.stores,F=O.tree,j=F.withoutDescendants(F.getNodes(g)),Fe=V.active,xe=j.length===1?j[0]:void 0;if(!M(xe)&&Mc(xe)&&!fe(xe)&&De(xe)&&ie(Fe)){let Se=F.getRect(xe),Vt=fl(F,Fe,xe,Se),so=Oi.createVariant(u.stores,Fe,xe,Vt);return so?new Set([so.id]):void 0}let it=j.find(Se=>fe(Se)&&De(Se));if(it&&De(it)){let Se=O.tree.getScopeNodeFor(it);if(Se&&W(Se)){Se.abTestingParentId?u.loadScopesThenProcess([Se,O.tree.getAnalyticsScopeNode()],async([Vt,so])=>{Vt&&FR(u,Vt,so,"context_menu")}):x.set({type:"DuplicateWebPage",source:"context_menu",duplicateFromId:Se.id});return}}let Me=j.map(Se=>F.getRect(Se)),Re=new Map,je=new Set,Lt=[],Qe=new Map,Xe=new Map,Io=0;if(j.forEach((Se,Vt)=>{if(!AE(Se))return;let so=F.getParent(Se.id);if(Ue(Se))if(so&&_(so)){if(!Av(so,E))return}else return;for(let xt of Se.walk())De(xt)&&Io++;let Nt=u.cloneNode(Se,!1,!0,Re);if(Re.set(Se.id,Nt.id),Xe.set(Se.id,Nt.id),je.add(Nt.id),Qe.set(Se,Nt),Se.isMaster)Jf({});else if(Se.replicaInfo){let{master:xt}=Se.replicaInfo,Yt=xt&&F.getNode(xt);Yt&&nm(Yt)||Jf({})}else WC(Se)&&(!y||y.node&&zC(y.node))&&Nk(u,Se,Re);if(y){let xt=F.getParent(Se.id);if(y.node){let Yt=y.node;if(st(y.node)&&(Yt=ai(F,y.node),!Yt))return;if(Mm(u.tree,Yt,Nt,V.active.id,E)){let Er=xt&&br(xt)&&br(Yt),Eo=xt&&De(xt)&&De(Yt);if(Er||Eo)u.moveNode(Nt.id,Yt.id,y.insertionIndex);else if(ve(Nt)){u.moveNode(Nt.id,Yt.id,y.insertionIndex);let va=F.getParentSizeInfo(Nt,Yt,!0,!1),Nn=Nt.updateForSize(Me[Vt]??{},va);xt||(Nn.left=0,Nn.top=0),u.tree.current(Nt)?.set(Nn)}else Oi.convertNodeToNewParent(u,Nt,xt,y.node,y.insertionIndex,Se);if(So(y.node)){uh(u,Nt,y.node,Yt,je,Re);let Ar=Le.getReplicaForTemplateNode(F,y.node);if(Ar){let va=$o(Ar.id,Nt.id);Xe.set(Se.id,va)}}}}else Oi.convertNodeToNewParent(u,Nt,xt,y.node,y.insertionIndex,Se),br(xt)&&Me[Vt]&&u.tree.current(Nt)?.set(Nt.updateForSize(Me[Vt],null))}}),!y){let Se=j.some(so=>F.isGroundNode(so)),Vt=j.some(so=>fr(so)&&so.resolveValue("rotation")!==0);if(j.length){let so=j.map(No=>F.convertFrameToCanvas(No)),Nt=ae.merge(...so),xt,Yt=oe(u,g),Er=pe(F,j),Eo=j.some(No=>Bt(No)),Ar=b.lastDuplicationMap,va=!1;if(!Eo&&Yt&&!Er&&!Vt&&Ar){let No=Ar.keys(),Xu=u.tree.getBoundingFrameForNodes(F.getNodes(No));va=!0,xt=Ne.subtract(Nt,Xu)}let Nn=xt||{y:0,x:0},Ju=j[0];if(!Eo&&Se&&!va&&Ju){let No=YV(F,V.active,Ju,Nt,j.every(Ii)?{x:u.tree.getRect(Ju).width}:xt);Nn=Ne.subtract(No,Nt)}for(let No of j){let{x:Xu,y:FA,width:EA,height:AA}=F.getRect(No),ci=Qe.get(No);if(!ci)continue;let ys=u.tree.getParent(No.id),Cs=u.tree.getParent(ci.id);if(Cs&&ys&&So(ys)){uh(u,ci,ys,Cs,je,Re);let By=Le.getReplicaForTemplateNode(F,ys);if(By){let WA=$o(By.id,ci.id);Xe.set(No.id,WA)}}if(Cs&&br(Cs))continue;let Wy=Xu+Nn.x,zy=FA+Nn.y,MA=u.tree.getParentSizeInfo(No,ys),OA=ci.updateForRect({rect:{x:Bt(No)?Wy:Math.round(Wy),y:Bt(No)?zy:Math.round(zy),width:EA,height:AA},parentSizeInfo:MA,constraintsLocked:!1,shouldGuessPinToBottom:!0,shouldGuessPinToRight:Dr(u.tree,ci,Cs)});u.tree.current(ci)?.set(OA),Se&&F.isGroundNode(ci)&&Lt.push(ci.rect())}}}b.lastDuplicationMap=Xe;let ao=[];for(let Se of Qe.values())Di(F,Se,Re,!1),Ii(Se)&&ao.push(Se);if(ao.length&&I.createVectorSet(ao),Lt.length){let Se=ae.merge(...Lt);k.scrollToCenter(ae.center(Se))}return S&&je.size>0&&u.stores.selectionStore.set(je,{sticky:!0}),Io>0&&It("layout_frame",{source:"duplication",count:Io}),je}Oi.duplicateNodes=r;function i(u){if(u.length>=50)return!0;let y=u.length;return u.forEach(S=>{y+=Dh(S)}),y>=50}function n(u,g,y){let S=u.tree.withoutDescendants(g);function b(){let I=[],x=[];S.forEach(k=>{if(ur(k))if(qc(u.tree,k))x.push(k);else{let V=u.tree.get(k.originalid);V&&gy(V)&&I.push(V.id)}else gy(k)&&I.push(k.id)}),x.forEach(k=>k.set({visible:!1})),u.deleteNodes(I),u.stores.selectionStore.clear(),u.stores.treeStore.setHighlight(null)}y&&i(S)?u.stores.modalStore.set({type:"Confirmation",variant:"destructive",title:"Delete Selection",description:"You are about to delete the selected layers for all project collaborators.",confirmLabel:"Delete",onConfirm:b,source:"delete_node"}):b()}Oi.deleteOrHideNodes=n;function a(u,g){u.tool.deleteAction?u.tool.deleteAction():g&&n(u,g,!0)}Oi.deleteAction=a;function l(u,g){return u.tool.deleteAction?!!u.tool.canDelete&&u.tool.canDelete():!!g&&g.some(y=>qG(y))}Oi.canDeleteOrHideNodes=l;function s(u,g){return hi(g)?!1:zt(g)?ur(g):!Go(g)}Oi.canRenameNode=s;function c(u,g){return g.filter(y=>s(u,y)).length===1}Oi.canRename=c;function d(u,g){return u.stores.chromeStore.contentPanelTab!=="Pages"||u.stores.scopeStore.active.id===u.tree.root.homePageNodeId||g.length!==0?!1:W(u.stores.scopeStore.active)||pt(u.stores.scopeStore.active)}Oi.canRenameActivePage=d;function p(u,g){if(d(u,g)){let y=u.stores.scopeStore.active.id,S=yi(u.tree,y)?.id||y;rp(S)}else g.length===1&&(u.stores.chromeStore.layersExpanded=!0,u.stores.chromeStore.contentPanelTab="Layers",u.scheduler.runBeforeNextFrame(()=>{let y=document.querySelectorAll(".layerPanelPlaceholder.active");if(y.length===1&&y[0]){let S=new MouseEvent("dblclick",{view:window,bubbles:!0,cancelable:!0}),b=y[0].parentElement;b&&b.dispatchEvent(S)}}))}Oi.rename=p;async function f(u,g){g.length!==0&&await qN({key:"generate-layer-names",progress:{variant:"progress",text:"Renaming layers\u2026"},error:{variant:"error",text:"Failed to rename layers"},success:{variant:"success",text:"Done"},waitTime:1e3},()=>lE(u,g))}Oi.renameLayers=f;function h(u,g){let y=u.tree,S=y.withoutDescendants(g),b=Sa(S);R(y,g,b)&&Ly(u,b,"front")}Oi.sendToFront=h;function v(u,g){let y=u.tree,S=y.withoutDescendants(g),b=Sa(S);w(y,g,b)&&Ly(u,b,"back")}Oi.sendToBack=v;function T(u,g){let y=u.tree,S=y.withoutDescendants(g),b=Sa(S);R(y,g,b)&&Fy(u,b,1)}Oi.sendForward=T;function N(u,g){let y=u.tree,S=y.withoutDescendants(g),b=Sa(S);w(y,g,b)&&Fy(u,b,-1)}Oi.sendBackward=N;function w(u,g,y){if(Dy(g))return!1;if(!y){let S=u.withoutDescendants(g);y=Sa(S)}return Ey(u,y,-1)}Oi.sendBackwardEnabled=w;function R(u,g,y){if(Dy(g))return!1;if(!y){let S=u.withoutDescendants(g);y=Sa(S)}return Ey(u,y,1)}Oi.sendForwardEnabled=R;function B(u,g){return ue(u,g,0)}Oi.addFrame=B;function G(u,g){return ue(u,g,1)}Oi.addStack=G;function K(u,g){let y=u.stores.scopeStore.active,S=u.tree.withoutDescendants(g);return S.length>1&&Ae(u,S)&&(!W(y)||S.every(b=>u.tree.isGroundNode(b)))}Oi.canWrapInAutoSizedFrame=K;function se(u,g,y){let S=B(u,g);C(S!==void 0,"new frame ID must be defined");let b=u.tree.getNode(S);C(b!==null,"new frame must exist");let I=u.tree.withoutDescendants([b]);return zR(u,I,y),b}Oi.wrapInAutoSizedFrame=se;function oe(u,g){let{documentSettingsStore:y,selectionStore:S}=u.stores;if(!y.lastDuplicationMap||!vl(g,S.ids))return!1;let b=[...y.lastDuplicationMap.values()];if(!vl(S.ids,b))return!1;let I=[...y.lastDuplicationMap.keys()];return vl(S.previousIds,I)}function pe(u,g){let y=u.getCommonGroundNode(g);return!!y&&br(y)}function Ee(u,g,y){if(y!==null){let S=g.flatMap(k=>u.convertCornerPointsToCanvas(k)),b=u.transformMatrixToNode(y),I=(qs(y)?b:ct.flatProjectionMatrix(b)).invertSelf(),x=S.map(k=>ct.convertPoint(I,k));return ae.roundToOutside(ae.boundingRectFromPoints(x))}return ae.roundToOutside(ae.merge(...g.map(S=>u.convertFrameToCanvas(S))))}Oi.getUntransformedBoundingRect=Ee;function q(u,g,y,S,b,I){let x={top:y.y,left:y.x,width:y.width,height:y.height,fillEnabled:!1},k=b.length===1?b[0]:null;C(k!==void 0,"node must be defined",b),S&&Object.assign(x,We(g,y,S,k,I));let V=S===null,O=W(u.stores.scopeStore.active);return x.overflow=V||O?"clip":"visible",x}function We(u,g,y,S,b){let I=u.getViewportRect(y),x=u.getRect(y),k=S?u.getParentSizeInfo(S,y):{sizing:x,positioning:x,viewport:I,layout:_r(y)},V=!!S&&ve(S),O=$e(S,b),F=FT({rect:g,parentSizeInfo:k,currentConstraints:O,constraintsLocked:V,shouldGuessPinToBottom:_n(u,null,y),shouldGuessPinToRight:Dr(u,null,y),floatingPosition:null});return b&&y?{...Aa(S,y),...Y(S),...F,widthType:co(y)?3:1,heightType:2,width:1,left:0}:{...Aa(S,y),...Y(S),...F}}function $e(u,g){let S=!!u&&ve(u)?u.constraints():void 0;if(!S)return;let b={...S};return g?(b.widthType===5&&(b.widthType=2),b.heightType===5&&(b.heightType=2)):(rm(b.widthType)&&(b.widthType=0),rm(b.heightType)&&(b.heightType=0)),b}function Y(u){if(!(!u||!Pe(u)))return{width:u.width,height:u.height}}function Dt(u,g,y,S,b,I,x,k,V){let O=I?.id??eo;switch(g){case 0:{let F=u.createFrame(O,{id:y,...V},S);return u.moveNode(F.id,O,x),C(F&&gt(F),"Fail to create a wrapping frame: the created frame should have the `children` field"),k.forEach(j=>{let Fe=In(u.tree,j,I,F);u.moveNode(j.id,F.id),u.tree.current(j)?.set(Fe)}),F}case 1:{let F=J(u,y,O,V,k,b);return u.moveNode(F.id,O,x),F}case 2:{let F=u.createShapeContainer(O,{id:y,...V});return u.moveNode(F.id,O,x),C(F&&gt(F),"Fail to create a wrapping frame: the created frame should have the `children` field"),k.forEach(j=>{let Fe=In(u.tree,j,I,F);u.moveNode(j.id,F.id),u.tree.current(j)?.set(Fe)}),F}default:$(g)}}function J(u,g,y,S,b,I,x){let k=gh(u,b,I),V=u.createNode(ki,{id:g,...S,...k},y,x);C(to(V),"Fail to create stack: the created node should have stack layout");let{stackDirection:O}=k;return $k(u,g,I,b,O),V}function ue(u,g,y){let S=u.tree;if(!Ae(u,g))return;let b=S.sortVisually(S.withoutDescendants(g)),I=b[0]?S.getParent(b[0].id):null,x=I&&So(I),k=x?u.tree.getNode(I.originalid):I,V=!0,O=x?b.map(Re=>{if(!zt(Re))return Re;let je=u.tree.getNode(Re.originalid);return C(je,"Fail to create a wrapping frame: the original node must exist"),V&&(V=!je.cache.visible),je}):b,F=I?.children.findIndex(Re=>b.includes(Re))??-1,j=S.newId(),Fe=Ee(S,O,k),xe=q(u,S,Fe,k,O,y===1),it=Dt(u,y,j,O[0]?.id,Fe,k,F,O,xe),Me=j;if(x){C(I,"Fail to create a wrapping frame: parentNode should not be null"),C(st(I),"Fail to create a wrapping frame: parentNode should be a replica node"),V&&ph(u,it,I,k);let Re=Le.getReplicaForTemplateNode(u.tree,I);C(Re,"Fail to create a wrapping frame: replica must exist");let je=Ee(S,b,I),Lt=q(u,S,je,I,b,y===1);ll(S,Re,it.id,Lt),Le.replicaWithChanges(u.tree,Re.draftOrCurrent());let Qe=$o(Re.id,j);Me=Qe;let Xe=u.tree.get(Qe);if(C(Xe&&gt(Xe),"Fail to create a wrapping frame: replica wrapping node should exist and should have the `children` field"),y===0||y===2)b.forEach(Io=>{let ao=In(S,Io,I,Xe);u.tree.current(Io)?.set(ao)});else if(y===1){C(De(it),"Fail to create a wrapping frame: the wrapping node should be a FrameNode"),C(to(it),"Fail to create a wrapping frame: the wrapping node should have stack layout");let Io=gh(u,b,je);ll(S,Re,it.id,Io),Hk(u,it,Io.stackDirection,b,je)}}return u.stores.selectionStore.set(Me),j}function me(u){return Rs(u)||Ve(u)||lt(u)||Xr(u)||hi(u)||Ue(u)?!1:zt(u)?ur(u):!0}function Ae(u,g){if(g.length===0)return!1;switch(u.tool.enum){case 0:case 1:case 6:break;default:return!1}if(!g.every(x=>me(x)))return!1;let y=u.tree,S=y.withoutDescendants(g),[b,I]=S.reduce(([x,k],V)=>{let O=y.isInlineVectorNode(V)||!Bt(V)&&!lt(V),F=S[0]?y.getParentId(S[0]):void 0,j=y.getParentId(V);return[x&&F===j,k&&O]},[!0,!0]);return b&&I}Oi.wrappingEnabled=Ae;function Ct(u){return u.some(or)}Oi.overflowEnabled=Ct;function Pt(u){u.stores.chromeStore.removePanelOverrides(),u.stores.chromeStore.chromeIsVisible=!0,u.stores.chromeStore.pagesExpanded=!0,u.stores.chromeStore.contentPanelTab="Pages";let g=new Set(u.stores.scopeStore.getDesignPageNodes().map(S=>S.resolveValue("name")??"")),y=u.createNode(SI,{name:Ro("Design",g,{startIndex:g.size+1,omitCountIfFirst:!0})},u.tree.root.id);return u.stores.scopeStore.select(y.id,{keepHistory:!1}),u.scheduler.runAtEndOfFrame(()=>rp(y.id)),y.id}Oi.createDesignPage=Pt;function _e(u){u.stores.chromeStore.removePanelOverrides(),u.stores.chromeStore.chromeIsVisible=!0,u.stores.chromeStore.pagesExpanded=!0,u.stores.chromeStore.contentPanelTab="Pages";let g=new Set(u.stores.scopeStore.getCanvasPageNodes().map(I=>I.resolveValue("name")??"")),y=u.createNode(RT,{name:Ro("Canvas",g,{startIndex:g.size+1,omitCountIfFirst:!1})},u.tree.root.id),S=bI("iPhone_390_844"),b=u.createFrame(y.id,{width:S.screenWidth,height:S.screenHeight,name:S.title,framePreset:S.id,isScreen:!0});u.stores.codeGenerationStore.updateComponent(b.id).catch(dr),u.stores.scopeStore.select(y.id,{keepHistory:!1}),_V({pageId:y.id}),u.scheduler.runAtEndOfFrame(()=>rp(y.id))}Oi.createCanvasPage=_e,Oi.toggleContentManagementScope=u=>{let{chromeStore:g,selectionStore:y,scopeStore:S,analyticsStore:b,siteSettingsStore:I,codeEditorStore:x}=u.stores,k=g.mainView;if(k===2){S.selectPreviousActiveScope();return}switch(k){case 0:u.cancelTool();break;case 5:g.setLocalizationsVisible(!1);break;case 6:b.close();break;case 4:I.close();break;case 1:x.closeEditor();break;case 3:break;default:$(k)}let V=u.tree.getContentManagementNode()?.loaded;if(V&&V.children.length>0){let O=S.active,F=y.nodes.at(0);S.select(V.id,{keepHistory:!1});let j=YG(u,O,F);if(j){y.set(j);return}if(y.ids.length===0){let Fe=V.children[0];Fe&&y.set(Fe.id)}}else g.toggleContentManagementSidebar()};function no(u,g){u.stores.chromeStore.chromeIsVisible=!0,u.stores.scopeStore.select(Yc,{keepHistory:!1}),u.stores.selectionStore.set(g)}Oi.openContentCollection=no;function bo(u,g,y,S){u.stores.modalStore.set({type:"CreateComponent",source:g,onSuccess:b=>{let I=b.resolveValue("name");if(at(I)||at(u.tree.getEntityRootNode()))return;let x=up(u.tree,I,y??_s);Yn(u.tree,x,b.id),S?.(b)}})}Oi.makeComponent=bo;function Yo(u,g){return DA(u,g)}Oi.canMakeComponent=Yo;function sr(u,g){if(g.length!==1||Ti(u.stores.scopeStore.active))return;let y=g[0];y&&fc(y)&&Le.canMakeMaster(y)&&u.tree.current(y)?.set({isMaster:!0,replicaInfo:null,originalid:null})}Oi.makeMaster=sr;function $t(u,g){for(let y of g)if(y.originalid&&st(y)&&Le.overrideKeys(u,[y]).size>0)return!0;return!1}Oi.canResetToMasterValues=$t;function lr(u,g){for(let y of g){if(!y.originalid)continue;let b=Le.getReplicaForTemplateNode(u,y);b&&Le.resetOverrides(u,b,y)}}Oi.resetToMasterValues=lr;function bn(u,g,y){for(let S of g){if(!st(S))continue;let b=Le.getReplicaForTemplateNode(u,S);b&&Le.resetOverridesByProperty(u,b,S,y)}}Oi.resetPropertiesToMasterValues=bn;function li(u,g){if(g.length===0)return!1;for(let y of g){if(Co(y))return!1;if(Mc(y)){let S=u.tree.getScopeNodeFor(y);if(!S)return!1;if(ie(S)){let{hover:b,pressed:I}=S.getGesturesForTopLevelVariant(y);return!(b||I)}return W(S)&&!fe(y)}if(Rt(y))return!0}return!1}Oi.canDetachFromMaster=li;function hs(u,g){let y=new Map;g.filter(Rt).forEach(b=>{if(!fE(b,{allowVariants:!0}))return;let I=b.clone({parentid:null});I.replicaInfo=null,$S(I)&&(I.isVariant=void 0);for(let V of I.walk())V.originalid=null;C(b.id!==I.id),u.tree.insertNode(I);let x=u.tree.getParent(b.id)||u.stores.scopeStore.active,k=x.children.indexOf(b);u.tree.removeNode(b),u.moveNode(I.id,x.id,k),u.tree.current(I)?.set(I.constraintValues()),y.set(b.id,I.id)}),Di(u.tree,u.tree.root,y,!1);let S=u.stores.selectionStore.ids.map(b=>y.get(b)??b);return u.stores.selectionStore.set(S),y}Oi.detachFromMaster=hs;function gs(u,g){if(!cr(g))return;let y=mo(g);g.filter(Rr).forEach(b=>b.set({visible:!y})),u.stores.treeStore.setHighlight(eo)}Oi.visibility=gs;function cr(u){return u.some(Rr)}Oi.visibilityEnabled=cr;let mo=u=>u.every(g=>g.isVisible());function ga(u){return mo(u)?"Hide":"Show"}Oi.visibilityTitle=ga;function Ny(u,g){let y=u.withoutDescendants(g);if(!ju(y))return;let S=!ya(y),b=new Set;for(let I of y){if(!Bn(I))continue;let x=I.cache.lockedByParent,k=S===x?void 0:S;I.set({locked:k});for(let V of I.descendants())b.add(V)}for(let I of b)Bn(I)&&I.locked!==void 0&&I.set({locked:void 0})}Oi.toggleLock=Ny;function ju(u){return u.some(Bn)}Oi.toggleLockEnabled=ju;function ya(u){return u.some(g=>Bn(g)&&ri(g))}function tc(u){return ya(u)?"Unlock":"Lock"}Oi.toggleLockTitle=tc;function xy(u){return u.every(Ii)}Oi.copyURLEnabled=xy;function Ca(u){return u.length>0&&u.every(b=>rc(b))?`Remove ${u.length>1?"Viewboxes":"Viewbox"}`:`Remove ${u.length>0&&u.find(b=>!br(b))===void 0?"Stack":"Frame"}${u.length>1?"s":""}`}Oi.removeFrameTitle=Ca;function oc(u,g){Uu(u,g)&&IA(u,g)}Oi.removeFrame=oc;function Uu(u,g){if(g.length===0)return!1;let y=u.stores.scopeStore.active.id;return g.every(S=>{if(!De(S)&&!br(S)&&!rc(S)||!S.children||S.children.length===0||Wo(S)||Rt(S)||zt(S)&&!ur(S))return!1;let b=u.tree.getParent(S.id);if(!b)return!0;for(let I of S.children)if(!Mm(u.tree,b,I,y,E))return!1;return!0})}Oi.removeFrameEnabled=Uu;function rc(u){return He(u)&&!Ii(u)}function Py(u,g){g.forEach(y=>{let S=u.getParentSizeInfo(y);if(y.intrinsicWidth!==null&&y.intrinsicHeight!==null){let b={width:y.intrinsicWidth,height:y.intrinsicHeight},I=b.width/b.height;if(Rs(y))y.set(UN(y,b,{aspectRatio:I}),u);else if(Yi(y)&&y.aspectRatio){y=y.set({aspectRatio:null},u);let x=y.updateForSize(b,S);x.aspectRatio=I,y.set(x,u)}else y.set(y.updateForSize(b,S),u)}})}Oi.resetToIntrinsicSize=Py;function In(u,g,y,S){let b=u.getRect(g),I=u.getOriginPoint(g),x=u.convertPointToCanvas(g,{x:b.width*I.x,y:b.height*I.y});if(S){let F=u.transformMatrixToNode(S),j=qs(S)?F:ct.flatProjectionMatrix(F);x=ct.convertPoint(j.inverse(),x)}let k={...b,x:x.x-b.width*I.x,y:x.y-b.height*I.y},V=g.updateForRect({rect:k,parentSizeInfo:u.getParentSizeInfo(g,S),constraintsLocked:!1,shouldGuessPinToBottom:S?_n(u,g,S):!0,shouldGuessPinToRight:Dr(u,g,S)});if(br(S)||(V.widthType===3&&(V.widthType=0,V.width=b.width),V.heightType===3&&(V.heightType=0,V.height=b.height)),fr(g)){let F=g.resolveValue("rotation")-bA(u,y,S);F!==0&&(V.rotation=F)}return S&&co(S)&&!vo(g)&&!Vr(g)&&(V.top=null,V.left=null,V.bottom=null,V.right=null),Object.assign(V,Aa(g,S)),V}Oi.convertNodeToNewParentUpdate=In;function Vy(u,g,y,S,b=-1,I){let{tree:x}=u,k=g;if(zt(g)&&(k=ai(x,g),!k))return null;let V=S;if(S&&st(S)&&(V=ai(x,S),!V))return null;let O=y;if(y&&st(y)&&(O=ai(x,y),!O))return null;let F=In(x,I??k,zt(g)?O:y,zt(g)?V:S);if(u.tree.current(k)?.set(F),u.moveNode(k.id,V?V.id:u.stores.scopeStore.active.id,b),k.id!==g.id){C(y,"Current parent must exist when editing variants");let Fe=Le.getReplicaForTemplateNode(x,y);C(Fe,"The current parent should located in a variant node");let xe=S?Le.getReplicaForTemplateNode(x,S):null;if(Fe.id===xe?.id){let it=In(x,g,y,S);x.current(g)?.set(it)}}return{originalNode:k,originalCurrentParent:O,originalNewParent:V}}Oi.convertNodeToNewParent=Vy;function ky(u,g){if(!Gi(u)&&!ri(u)&&(g.push(u.id),!!u.children))for(let y of u.children)ky(y,g)}function Ry(u,g){let y=new Set;return g.forEach(S=>{let b=u.getParent(S.id);b&&y.add(b.id)}),y}function d_(u,g){let y=u.withoutDescendants(u.getNodes(g));return Ry(u,y).size>0}Oi.canSelectAncestor=d_;function p_(u,g){wy(u,g,"parent")}Oi.selectParent=p_;function u_(u,g){wy(u,g,"groundNode")}Oi.selectGroundNode=u_;function wy(u,g,y){let{tree:S}=u,b=S.withoutDescendants(S.getNodes(g)),I=null;if(y==="groundNode"){let F=new Set(b.map(j=>S.getGroundNodeFor(j).id));F.size>0&&(I=Array.from(F))}else{let F=Ry(S,b);F.size>0&&(I=Array.from(F))}if(!I)return!1;let{selectionStore:x,overlayStore:k,treeStore:V}=u.stores;x.set(I,{sticky:!0,switchToLayers:!0});let O=b.length===1?b[0]:null;return O&&k.activeOverlays.has(O.id)&&k.exitEditMode(x,!1),V.setHighlight(null),!0}Oi.selectAncestor=wy;function m_(u,g){let y=u.tree,S=[];if(u.tool.selectAll){u.tool.selectAll();return}else{let b=g.map(I=>{let x=y.get(I);if(Bt(x)){let V=bN(y,x);return V&&y.isGroundNode(V)?V.id:eo}let k=y.getGroundFrameAncestor(I,!0);return k!==null?k.id:eo});if(new Set(b).size===1&&b[0]!==null){let I=b[0];S=y.getSubtreeNodes(I).filter(x=>ri(x)?!1:x.id!==I).map(x=>x.id)}if(S.length===0)for(let I of u.stores.scopeStore.active.children)ky(I,S)}u.stores.selectionStore.set(S)}Oi.selectAll=m_;function f_(u,g){let y=new Set;for(let S of g){let b=u.tree.get(S);if(!b)continue;let I=u.tree.getSiblingsIncludingSelf(b);for(let x of I)y.add(x.id)}u.stores.selectionStore.set(y)}Oi.selectAllSiblings=f_;function h_(u,g){return u.tree.getNodes(g).some(y=>gt(y)&&y.children.length>0)}Oi.canSelectChildren=h_;function g_(u,g){let y=new Set;for(let S of g){let b=u.tree.get(S);if(!b)continue;let I=Ea(b);for(let x of I)y.add(x.id)}y.size>0&&u.stores.selectionStore.set(y)}Oi.selectAllChildren=g_;function y_(u,g){let y=g.length>0?u.tree.getNodes(g):u.stores.scopeStore.active.getGroundNodes(),S=[];y.map(k=>{Ge(k)?S.push(...u.tree.getSiblingsIncludingSelf(k)):S.push(k)});let b=new Set,I=new Set,x=k=>{if(!b.has(k.id)){if(Ge(k)&&I.add(k.id),k.children)for(let V of k.children)x(V);b.add(k.id)}};for(let k of S)x(k);u.stores.selectionStore.set(I)}Oi.selectAllTextNodes=y_;function C_(u,g){let[y]=u.tree.getNodes(g);if(!y||!Ge(y))return;let S=[],b=Ie(y)?mi(y.getTextStylePresets(!1)):void 0,I=mi(y.getFonts(!1)),x=mi(y.getFontSizes(!1).map(V=>Xi(V)?Pr(...V):X(V)?Pr(V,"px"):V)),k=mi(y.getTextColors(!1));if(!(Is(b)||xn(b))&&!(Is(I)||xn(I))&&!(Is(x)||xn(x))&&!(Is(k)||xn(k))){for(let V of u.stores.scopeStore.active.walk())So(V)||!Ge(V)||(Ie(V)?mi(V.getTextStylePresets(!1)):void 0)!==b||mi(V.getFonts(!1))!==I||mi(V.getFontSizes(!1).map(xe=>Xi(xe)?Pr(...xe):X(xe)?Pr(xe,"px"):xe))!==x||mi(V.getTextColors(!1))!==k||S.push(V);u.stores.selectionStore.set(S)}}Oi.selectAllTextNodesWithSameFontStyles=C_;function S_(u,g){let y=u.tree.getNodes(g);C(g.length===1,"Cannot have multiple layers selected");let[S]=y;if(!S||!De(S))return;let b=[],x=qS(u.tree,S.id)??u.stores.scopeStore.active;for(let k of x.walk())De(k)&&SA(S,k,u.tree)&&b.push(k);u.stores.selectionStore.set(b)}Oi.selectAllLayersWithSameFill=S_;function SA(u,g,y){if(pr(u)&&!u.fillEnabled||pr(g)&&!g.fillEnabled)return!1;let{fillType:S}=u;if(S!==g.fillType||S===void 0)return!1;switch(S){case"color":return!D(u.fillColor)||!D(g.fillColor)?!1:Ta.equals(mh(u.fillColor,y,void 0),mh(g.fillColor,y,void 0));case"linear-gradient":return u.fillLinearGradient&&g.fillLinearGradient?u.fillLinearGradient.equals(g.fillLinearGradient):!1;case"radial-gradient":return u.fillRadialGradient&&g.fillRadialGradient?u.fillRadialGradient.equals(g.fillRadialGradient):!1;case"conic-gradient":return u.fillConicGradient&&g.fillConicGradient?u.fillConicGradient.equals(g.fillConicGradient):!1;case"image":return u.fillImage===g.fillImage;default:$(S)}}function Dy(u){return u.some(g=>id(g)?zt(g)?!ur(g):!1:!0)}function Sa(u){let g={};return u.forEach(y=>{let S=y.parentid?y.parentid:bs,b=g[S];b||(b=[],g[S]=b),b.push(y)}),g}function Ly(u,g,y){let S=u.tree;for(let b in g){let I=b===bs?S.root:S.get(b);if(!I||!g[b])continue;let x=S.sortVisually(g[b]);y==="back"&&x.reverse();let k=y==="front"?-1:0,V=So(I)&&yc(I);x.forEach(O=>{let F=O.originalid?S.get(O.originalid):O;C(F,"Cannot send",O.id,"backward/forward: original node must exist."),V&&id(F)?Wm(F.id,I,k):u.tree.moveNodeIndex(F,k)})}}function vA(u,g,y){let S=u.tree.getParent(y.id);if(!S)return null;let b=S.children.indexOf(y),I=g==="backward"?b-1:b+1,x=S.children[I];if(!x||!en(x))return null;let k=u.tree.convertFrameToCanvas(y),V=u.tree.convertFrameToCanvas(x);if(g==="backward")return{...k,y:V.y};let O=V.height-k.height;return{...k,y:V.y+O}}function TA(u,g,y){let S=vA(u,g,y),{canvasStore:b}=u.stores;!S||ae.containsRect(b.getCanvasVisibleRectTakingOverlaysIntoAccount(),S)||b.zoomToCenter(S,{zoom:b.zoom,maxZoom:.5,animated:!0})}function Fy(u,g,y){let S=u.tree,b=Object.keys(g).length===1;for(let I in g){let x=I===bs?S.root:S.get(I);if(!x||!gt(x))continue;let k=So(x)&&yc(x),V=g[I],O=b&&V?.length===1,F=bi(x)?x.getChildrenInVisualOrder():x.children,j=!1;for(let Fe=0,xe=F.length;Fe<xe;Fe++){let it=y===1?xe-Fe-1:Fe,Me=F[it];if(!V?.includes(Me))j=!0;else if(j)if(k&&id(Me))C(Me.originalid,"Cannot send nodes: nodes in a replica variant parent must have originalid."),Wm(Me.originalid,x,it+y);else{O&&Cp(S,Me)&&TA(u,y===-1?"backward":"forward",Me);let je=Me.originalid?S.get(Me.originalid):Me,Lt=x.originalid?S.get(x.originalid):x;C(je,"Cannot send node",Me.id,": original child node does not exist."),C(Lt,"Cannot send node",x.id,": original parent node does not exist."),u.moveNode(je.id,Lt.id,it+y)}}}}function Ey(u,g,y){for(let S in g){let b=S===bs?u.root:u.get(S);if(!b||!gt(b))continue;let I=g[S],x=bi(b)?b.getChildrenInVisualOrder():b.children,k=!1;for(let V=0,O=x.length;V<O;V++){let F=y===1?O-V-1:V,j=x[F];if(!I?.includes(j))k=!0;else if(k)return!0}}return!1}function bA(u,g,y){let S=0,b=0;return g&&(S=u.totalAncestorRotation(g)),y&&(b=u.totalAncestorRotation(y)),Math.round(b-S)}function v_(u){if(u.length!==1)return!1;let g=u[0];return g&&qa(g)&&!g.originalid}Oi.reversePathDirectionEnabled=v_;function T_(u,g){let y=u.current(g);y&&y.set({pathSegments:Vo.reverse(y.pathSegments)})}Oi.reversePathDirection=T_;function b_(u,g){let y=Sl(g,u);return y.length===0?!1:y.every(S=>Bt(S)&&!S.originalid&&Ea(S).length>0)}Oi.canUngroup=b_;function IA(u,g){if(g.length===0)return;let y=u.tree,S=y.sortVisually(Sl(g,y)),b=y.withoutDescendants(S),I=[];return b.forEach(x=>{if(!gt(x))return;let k=x,V=null;if(zt(x)){if(k=ai(y,x),!k)return;V=Le.getReplicaForTemplateNode(y,x)}let O=y.getParent(x.id);if(x.children.length>0){let F=y.getIndex(x),j=k?.id??x.id;[...Ea(x)].forEach((xe,it)=>{let Me=xe;if(zt(xe)&&(Me=ai(y,xe),!Me))return;if(ht(Me)){y.removeNode(Me);return}let Re=O,je=Re;if(Re&&st(Re)&&(je=ai(y,Re),!je))return;let Lt=Oi.convertNodeToNewParentUpdate(y,Me,k,je);if(u.moveNode(Me.id,je?.id??null,F+it,j),u.tree.current(Me)?.set(Lt),j=Me.id,V){let Qe=Oi.convertNodeToNewParentUpdate(y,xe,x,Re);u.tree.current(xe)?.set(Qe)}I.push(xe.id)}),u.deleteNode(k.id)}}),u.stores.selectionStore.set(I),I}Oi.ungroup=IA;function I_(u){return!u.hasPreferredSize(E)}Oi.canSetDefaultSize=I_;function N_(u,g){if(g.hasPreferredSize(E))return;let y=g.getPreferredSize(E),S={aspectRatio:null};y.width==="auto"?(S.width=1,S.widthType=2):X(y.width)&&(S.width=y.width,S.widthType=0),y.height==="auto"?(S.height=1,S.heightType=2):X(y.height)&&(S.height=y.height,S.heightType=0),ve(g)&&X(g.top)&&X(g.bottom)&&(S.bottom=null),ve(g)&&X(g.left)&&X(g.right)&&(S.right=null),AR(g,S,"context_menu_default_size_item"),g.set(S,u.tree)}Oi.setDefaultSize=N_;function NA(u,g){if(!u.stores.toolStore.isDefaultToolActive)return!1;let y=Sl(g,u.tree);return y.length===0?!1:y.every(S=>Bt(S)&&!S.originalid)}Oi.canJoinInGroup=NA;function x_(u,g){let y=u.tree;if(C(g.length>0,"No nodes"),!NA(u,g))return;let S=Sl(g,y),b=y.sortVisually(y.withoutDescendants(S)),I=b[0],x=I?y.getParent(I.id):void 0,k=x?x.id:eo,V=I?y.getIndex(I):void 0,O=y.newId();u.createShapeGroup(k,{id:O},V),b.forEach(F=>{let j=Oi.convertNodeToNewParentUpdate(y,F,y.getParent(F.id),x);u.moveNode(F.id,O),u.tree.current(F)?.set(j)}),u.stores.selectionStore.set(O)}Oi.joinInGroup=x_;function P_(u,g){if(g.originalid)return null;let y={width:g.width,height:g.height},S=Jk(g.svg,Ld.createEmpty,y,g);if(S){S.name=g.name||g.originalFilename,S.parentid=g.parentid;let b=u.cloneNode(S),I=g.parentid===null,x=I?"rgb(255,255,255)":"transparent",{aspectRatio:k,...V}=g.constraintValues();u.tree.current(b)?.set({...V,width:S.width,height:S.height,fillEnabled:I,fillColor:x});let O=u.tree.getParent(g.id);if(O!==null&&gt(O)){let F=O.children.indexOf(g);u.moveNode(b.id,O.id,F)}return Ay(u,b.id,y),u.deleteNode(g.id),b.id}return null}Oi.convertSVGToShape=P_;function Ay(u,g,y){let S=u.tree.get(g);if(!He(S))return;let b=S.width>=S.height?"width":"height",I=b==="width"?"height":"width",x=y[b]/S[b];if(x===1)return;kE(u,[S],x,RE(u,[S]),xA(S));let k=u.tree.current(S);C(k,"Node must exist after scaling");let V=y[I]-k[I];if(V===0)return;k.set({[I]:y[I]});let O=I==="width"?"x":"y";for(let F of k.children){let j=u.tree.current(F);!j||!ld(j)||j.set({[O]:j[O]+V/2})}}Oi.scaleVector=Ay;function xA(u){let g=u.constraints(),y=0,S=0;return g.top===!1&&g.bottom===!1?S=.5:g.top===!1&&(S=1),g.left===!1&&g.right===!1?y=.5:g.left===!1&&(y=1),{x:y,y:S}}function V_(u,g){if(g.length>1)return!1;let y=Le.getReplicaForTemplateNode(u,g[0]);if(!y)return!1;let S=Le.getMaster(u,y);if(Gi(S))return!1;for(let b=0,I=g.length;b<I;b++){let x=g[b];if(Le.overrideKeys(u,[x]).size>0)return!0}return!1}Oi.canUpdateMasterFromInstance=V_;function k_({tree:u},g){function y(V,O){for(let F of["id","update","cache","children","mutable","parentid","originalid","isMaster","isVariant","isBreakpoint","replicaInfo","duplicatedFrom","gesture"])delete V[F];if(O)for(let F of Le.positionKeysToIgnore)delete V[F];return V}function S(V,O){let F;if(O)for(let j of Le.positionKeysToIgnore)V[j]!==void 0&&(F=F||{},F[j]=V[j]);return V.gesture&&(F||(F={}),F.gesture=V.gesture),F}let b=Le.getReplicaForTemplateNode(u,g[0]);if(!b)return;let I=Le.getMaster(u,b);if(Gi(I))return;let x={...b.replicaInfo.overrides},k={...b.replicaInfo,overrides:x};for(let V=0,O=g.length;V<O;V++){let F=g[V];if(!F?.originalid)continue;let j=u.get(F.originalid),Fe=y(F.raw(),Rt(F));j?.set(Fe);let xe=S(x[F.originalid]??{},Rt(F));xe?x[F.originalid]=xe:delete x[F.originalid]}b.asDraft().replicaInfo=k}Oi.updateMasterFromInstance=k_;function R_(u,g){let y=My(u,g);return!y||nm(y)?0:OC(y)?2:1}Oi.canGoToMaster=R_;let My=(u,g)=>{let y=null;for(let b=0,I=g.length;b<I;b++){let x=g[b],k=Le.getReplicaForTemplateNode(u,x);if(k){if(!y)y=k.originalid;else if(y!==k.originalid)return null}}if(!y)return null;let S=u.get(y);return!S||!Wo(S)?null:S};function w_(u,g){if(g.length===1){let S=u.tree.getNode(g[0]?.originalid);if(!S)return;Oy(u,S);return}let y=My(u.tree,g);y&&(Le.showMaster(u.tree,y),Oy(u,y))}Oi.goToMaster=w_;function Oy(u,g){let y=u.tree.getScopeNodeFor(g),S=u.stores.scopeStore.active;Wo(g)&&Le.showMaster(u.tree,g),y===null&&(u.moveNode(g.id,S.id),y=S),u.stores.scopeStore.select(y.id,{keepHistory:!1}),u.stores.selectionStore.set(g);let b=u.tree.convertFrameToCanvas(g);u.stores.canvasStore.scrollToCenter(ae.center(b))}Oi.showNodeOnCanvas=Oy;function D_(u,g){u.exitMode(),u.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Component",parentId:g})}Oi.createCodeComponent=D_;function L_(u){u.exitMode(),u.stores.modalStore.set({type:"CodeFileCreation",source:"main_menu",creationType:"Override"})}Oi.createCodeOverride=L_;function F_(u,g,y,S,{gesture:b,overrides:I,overrideSize:x,variantName:k,viewportHeight:V,selectAndCenter:O=!0}={}){b&&C(Mc(y),"gesture variant should inherit from top level variant");let{treeStore:F,scopeStore:j,selectionStore:Fe,canvasStore:xe}=u,it=g.getPrimaryVariant(),Me=null;if(!b){let Lt=new Set(g.getTopLevelVariants().map(Qe=>Qe.resolveValue("name")??""));k?Me=Ro(k,Lt):Me=Ro(fe(y)?"Breakpoint":"Variant",Lt,{startIndex:Lt.size+1,omitCountIfFirst:!1})}if(I||(I=b?void 0:y.replicaInfo?.overrides),Me&&fe(y)){let Lt=Ak(F,Me,y);Lt&&(I?I=Mn(Lt,I):I=Lt);let Qe={};y.children.forEach(Xe=>{if(!yc(Xe)||ve(Xe)&&Xe.widthType===2||!(Xe.originalid?F.tree.getNode(Xe.originalid):Xe))return;let ao=F.tree.getRect(Xe);ZN(F.tree,Xe,ao,y,S.width,Qe)}),I||(I={}),I=Mn(I,Qe)}let Re=Le.create(F.tree,it,{overrides:I,inheritsFrom:b?y.id:void 0,duplicatedFrom:Gs(y)});if(j.insertNode(Re,g.id,-1),!Re)return;let je={top:S.y,left:S.x,gesture:b,isBreakpoint:Zi(g)?!0:void 0,name:Me};if(V&&(je.viewportHeight=V),x&&(je.width=S.width,je.widthType=0,fe(Re)||(je.height=S.height,je.heightType=0)),Re.set(je),ie(g)){let Lt=Ja(b)?"variant":b??"variant";JV({variantId:Re.id,variantType:Lt,componentId:g.id})}else fe(Re)&&It("breakpoint_create",{scopeId:g.id,breakpointId:Re.id,width:Re.width});return O&&(Fe.set(Re.id),xe.scrollToCenter(ae.center(S))),Re}Oi.createVariant=F_;function PA(u,g){return u.filter(y=>Wa(y)?ob(y)!==g:Lr(y)?Pk(y)!==g:!0)}function E_(u,g,y){for(let S of g.walk()){let b=gd(S);for(let[I,x]of Object.entries(b)){let k=PA(x,y);if(k.length!==x.length){if(Zt(S))u.tree.current(S)?.set({[I]:k});else if(_(S)){let V={type:"eventhandler",value:k};u.tree.current(S)?.set({[I]:V})}}}}}Oi.removeActionsWithTarget=E_;function A_(u,g){let y=u.tree.getParent(g.id)||u.stores.scopeStore.active;if(st(y))return!1;let S=u.stores.treeStore.getPartialIndexes();return g.codeComponentIdentifier in S.localSmartComponentNameByIdentifier}Oi.canDetachVariantInstance=A_;function M_(u,g,y,S){if(!y)return null;let b={...mp(g,E),...WR(g)},I=new Map;y.getTopLevelVariants().forEach(Qe=>I.set(Qe.id,Qe));let x=D(b.variant)&&I.get(b.variant)||y.getPrimaryVariant();C(De(x),"Variant must be a frame node");let k=u.tree.getParent(g.id)||u.tree.getScopeNodeFor(g)||u.stores.scopeStore.active;if(st(k))return null;let V=new Map,O=bl(x,new Map,new Map,V);V.set(g.id,O.id);let F=u.tree.getScopeNodeFor(k);if(W(F)||ie(F)){let Qe=F.getTopLevelReplicaVariants();for(let Xe of Qe){let Io=$o(Xe.id,g.id),ao=u.tree.getNode(Io);if(!ao||!_(ao))continue;let Se=ao.getResolvedControlPropValues(E).variant;if(!D(Se))continue;if(S){let Eo=S.get(Se);Eo&&(Se=Eo)}let Vt=D(Se)?I.get(Se):void 0;if(!Vt||!De(Vt)||!Ve(Vt))continue;let so=Ya(MR(Vt,u.tree,ao,y.id),V),Nt={},xt=V.get(x.id)??x.id;if(Ms(Vt)){let Eo=Ya(Vt.replicaInfo.overrides,V,!0);Object.assign(Nt,{...Eo,[xt]:OR(Eo[xt]??{})})}let Yt=Mn(so,Nt);if(Ms(Vt)){let{opacity:Eo,rotation:Ar}=Xe.replicaInfo.overrides?.[g.id]||{};Vp(Yt[xt]??{},{opacity:Eo,rotation:Ar})}else if(Xe.replicaInfo.overrides?.[g.id]){let{opacity:Eo,rotation:Ar}=Vt;Vp(Xe.replicaInfo.overrides[g.id]??{},{opacity:Eo,rotation:Ar})}let Er={};ao.heightType===2&&(Er.heightType=Vt.heightType,Er.height=Vt.height),ao.widthType===2&&(Er.widthType=Vt.widthType,Er.width=Vt.width),u.tree.current(Xe)?.set({replicaInfo:{...Xe.replicaInfo,overrides:Mn({...Xe.replicaInfo.overrides,[g.id]:{}},{...Yt,[xt]:{...Xe.replicaInfo.overrides[g.id],...Yt[xt],...Er}})}})}}let j=gp(u.tree,g,O,k);Vp(j,{opacity:U(x.opacity)?b[x.opacity.id]:x.opacity,rotation:U(x.rotation)?b[x.rotation.id]:x.rotation});let Fe=g.constraintValues(),xe=x.constraintValues();Fe.widthType===2&&xe.widthType!==2&&(Fe.widthType=xe.widthType),Fe.heightType===2&&xe.heightType!==2&&(Fe.heightType=xe.heightType),O.set({...Fe,...j,...k?qi(g):void 0,isVariant:!1,isMaster:!1,gesture:void 0,replicaInfo:null,originalid:null,name:g.name??ii(g)});let it=KI(y),Me=new Map([...it??[],...Object.entries(b)]),Re=new Map;Re.set(y.id,Me);let je={};for(let Qe of O.walk()){if(Qe.originalid=null,za(Qe))for(let[Xe,Io]of Object.entries(Qe.getActions(E)))Io&&Qe.set({[Xe]:Io.filter(ao=>Zc(ao)||Bi(ao))});if(Me.size>0){let Xe=Pd(u.tree,y.id,Qe,Re,je);Xe&&Qe.set(Xe)}}C(O.id!==x.id);let Lt=k.children.indexOf(g);u.tree.insertNode(O,k.id,Lt);for(let Qe of g.children)ht(Qe)&&u.tree.moveNode(Qe,je[Qe.id]??O.id);return Di(u.tree,k,V,ht(k)||Yr(k)),u.deleteNode(g.id),lt(O)&&u.scheduler.runBeforeNextFrame(()=>{u.stores.overlayStore.showOverlay(u.stores.selectionStore,O,O.parentid)}),O}Oi.detachSmartComponentOrWebPageInstance=M_;function O_(u){VA(u,{openLibrary:!0})}Oi.toggleTeamLibrary=O_;function VA(u,{openLibrary:g}={}){let{modalStore:y,popoverStore:S}=u.stores;y.active.type==="QuickActions"?y.dismiss():(u.cancelTool(),S.active=0,y.set({type:"QuickActions",source:"main_menu",initialCategory:g?{type:"TeamLibraryCategory"}:void 0}),g?It("ui_interaction",{page:"main-menu",id:"team-library"}):It("ui_interaction",{page:"main-menu",id:"quick-actions"}))}Oi.toggleQuickActions=VA;function W_(u){return!!fe(u)}Oi.canCreateBreakpoint=W_;function z_(u,g,y,S,b){let{modalStore:I}=u.stores;I.active.type!=="CustomBreakpoint"&&(u.cancelTool(),I.set({type:"CustomBreakpoint",actionType:g,baseNodeId:y,name:S,width:b,source:"undefined"}))}Oi.showCustomBreakpointModal=z_;function B_(u,g,y,S,b,I,x,k){let V={...S,width:b},O=Oi.createVariant(u.stores,y,g,V,{overrideSize:!0,variantName:I,viewportHeight:x,selectAndCenter:k});return C(fe(O),"Created node is not a breakpoint variant"),O}Oi.createBreakpoint=B_;function kA(u){return u.some(g=>g!==u&&Wo(g))}Oi.containsMaster=kA;function RA(u){return De(u)||_i(u)||He(u)||Ge(u)||bc(u)||_C(u)||Ic(u)}Oi.nodeTypeCanBePrimaryVariantSource=RA;function wA(u,g){return!(!RA(g)||Dk(u,g)||Ve(g)||Rt(g)||Wo(g)||kA(g))}Oi.canConvertNodeToSmartComponentPrimaryVariant=wA;function DA(u,g){let y=g.length;if(y===0)return!0;let S=g[0];return C(S,"node must be defined",g),y===1&&wA(u.tree,S)}Oi.canMakeSmartComponent=DA;function LA(u,g){if(g.length!==1)return!1;let S=g[0];if(C(S,"node must be defined",g),!De(S)||st(S))return!1;let b=u.tree.get(S.parentid);return At(b)}Oi.canMakeWebPagePrimaryBreakpoint=LA;async function H_(u,g){if(!LA(u,g))return;let y=g[0];C(y,"node must be defined",g);let S=y.resolveValue("name"),b=S?uk(S):void 0;return u.createWebPage({primaryBreakpointTemplateId:y.id,shouldRemovePanelOverrides:!1,startEditingPageTitle:!1,preferredPath:b})}Oi.convertNodeToWebPagePrimaryBreakpoint=H_;function G_(u,g,y="Template",S,b){let I=new ki({...Sn,...ZG(S),isMaster:!0,isVariant:!0,isBreakpoint:!0,widthType:0,heightType:0,width:S?.width??1200,name:S?.name??"Desktop"}),x=new NN;I.addChild(x);let k=Ro(y,KG(u)),V=new YI({baseVariantId:I.id,name:k});C(V.isLoaded(),"A newly created LayoutTemplateNode must be loaded."),V.addChild(I),u.latestTree().insertNode(V);let O=up(u,k,b??js);return Yn(u,O,V.id),It("layout_template_create",{source:g}),V}Oi.createLayoutTemplate=G_;function $_(u,g,y=!0,S=null,b=_t(),I="context_menu",x=0){let k=new cf({name:g,id:b});if(C(k.isLoaded(),"A newly created VectorSetNode must be loaded"),u.tree.latestTree().insertNode(k),Yn(u.tree,S??Fa,k.id),y)for(let O of t$())u.tree.latestTree().insertNode(O,k.id);let V=u.tree.current(k);return C(V,"A newly created VectorSetNode must exist"),u.stores.codeGenerationStore.createVectorSet(V.getVectorSetItems()),It("vector_set_create",{source:I,items:y?3:x}),k}Oi.createVectorSet=$_;async function __(u,g,y){let S=u.tree.get(y);if(!zo(S))return;let b=S.isLoaded()?S:await S.load();if(!b)return;let I=b.children.find(Ii);if(!Ii(I))return;let x=u.tree.getRect(I);u.scheduler.process(()=>{let k=OE(u,g),V=[],O=pr(I)?{fillEnabled:I.fillEnabled,fillType:I.fillType,fillColor:I.fillColor}:void 0;for(let F of k){let j=u.tree.get(F);if(!j)continue;let Fe=u.tree.getIndex(j),xe=fl(u.tree,b,j,x,x.width),it=ME(j,xe,O);if(Ii(it)){if(u.tree.insertNode(it,b.id),V.push(it),Ay(u,it.id,x),It("vector_set_item_create",{source:"context_menu"}),y!==u.stores.scopeStore.active.id){let Me=new $n({...WE(j),codeComponentIdentifier:Pn("vector",it.id,"default").value,width:j.width,height:j.height,widthType:0,heightType:0,slotsAreChildNodes:et.isOn("componentSlotsAreChildNodes"),name:j.name});u.tree.insertNode(Me,j.parentid,Fe)}u.tree.removeNode(j)}}V.length!==0&&(u.stores.scopeStore.select(S.id,{keepHistory:!1}),u.stores.selectionStore.set(V),u.stores.chromeStore.layersExpanded=!0,u.stores.chromeStore.contentPanelTab="Layers",u.stores.codeGenerationStore.createVectorSet(V))})}Oi.addToVectorSet=__;function j_(u,g,y="Icon Set",S="context_menu"){let b=new cf({name:y});C(b.isLoaded(),"A newly created VectorSetNode must be loaded");let I=OE(u,g),x=0,k=[];for(let V of I){let O=u.tree.get(V);if(!O)continue;let F=u.tree.getRect(O),j=ME(O,{x,y:0});if(!Ii(j))continue;let Fe=u.tree.getIndex(O);k.push(j),b.addChild(j),x+=F.width*2;let xe=new $n({...WE(O),codeComponentIdentifier:Pn("vector",j.id,"default").value,width:O.width,height:O.height,widthType:0,heightType:0,slotsAreChildNodes:et.isOn("componentSlotsAreChildNodes"),name:O.name});u.tree.insertNode(xe,O.parentid,Fe),u.tree.removeNode(O)}u.tree.latestTree().insertNode(b),Yn(u.tree,Fa,b.id),u.stores.codeGenerationStore.createVectorSet(k),u.stores.scopeStore.select(b.id,{keepHistory:!1}),u.stores.selectionStore.set(k),u.stores.chromeStore.layersExpanded=!0,u.stores.chromeStore.contentPanelTab="Layers",It("vector_set_create",{source:S,items:I.size})}Oi.createVectorSetFromNodes=j_;function U_(u,g,y,S,b){let I=y.clone({children:[],name:"Vector"}),{scopeStore:x,codeGenerationStore:k,selectionStore:V,canvasStore:O}=u;x.insertNode(I,g.id),C(ve(I),"Vector must be pinnable."),I.set({top:S.y,left:S.x}),k.createVectorSet([I]),V.set(I.id),O.scrollToCenter(ae.center(S)),It("vector_set_item_create",{source:b})}Oi.createVectorSetItem=U_})(XG||={});var Sn={height:qI,left:0,top:0,layout:"stack",stackDirection:"vertical",stackAlignment:"center",stackDistribution:"start",stackWrapEnabled:!1,gap:0,padding:0,paddingPerSide:!1,paddingLeft:0,paddingBottom:0,paddingTop:0,paddingRight:0,overflow:"clip"};function ZG(e){if(!e||!er(e)||!Ho(e)||!pr(e))return;let t=nd(e),o={gap:e.resolveValue("gap")??Sn.gap,padding:t.perSide?Sn.padding:t.top,paddingPerSide:t.perSide??Sn.paddingPerSide,paddingLeft:t.left??Sn.paddingLeft,paddingBottom:t.bottom??Sn.paddingBottom,paddingTop:t.top??Sn.paddingTop,paddingRight:t.right??Sn.paddingRight,fillEnabled:e.resolveValue("fillEnabled"),fillType:e.resolveValue("fillType"),fillColor:e.resolveValue("fillColor"),fillLinearGradient:e.resolveValue("fillLinearGradient"),fillRadialGradient:e.resolveValue("fillRadialGradient"),fillConicGradient:e.resolveValue("fillConicGradient"),fillImage:z(e.fillImage)?void 0:e.fillImage,fillImageOriginalName:e.resolveValue("fillImageOriginalName"),fillImageResize:e.resolveValue("fillImageResize"),fillImagePixelWidth:e.resolveValue("fillImagePixelWidth"),fillImagePixelHeight:e.resolveValue("fillImagePixelHeight"),fillImagePositionX:e.resolveValue("fillImagePositionX"),fillImagePositionY:e.resolveValue("fillImagePositionY"),fillImageTileSize:e.resolveValue("fillImageTileSize")};return Dc(e)&&(o.fillImageAlts=e.fillImageAlts?[...e.fillImageAlts]:void 0),o}function KG(e){let t=new Set;return e.root.children.forEach(o=>{if(!Be(o))return;let r=o.resolveValue("name");r&&t.add(r)}),t}function zE(e){return!(Go(e)||Xr(e)||hi(e))}function gy(e){return!(Co(e)||Xr(e)||hi(e)||zt(e))}function qG(e){return ur(e)&&e.isVisible()?!0:gy(e)}function AE(e){return zE(e)?zt(e)?ur(e):!0:!1}function Zl(e,t){if(vt(t)){let o=mr(e.tree,t.dataIdentifier);if(o)return o.id}return null}function YG(e,t,o){if(o){let i=Zl(e,o);if(i)return i;for(let n of o.ancestors()){let a=Zl(e,n);if(a)return a}}let r=Zl(e,t);if(r)return r;if(o)for(let i of o.walk()){let n=Zl(e,i);if(n)return n}for(let{node:i,skipChildren:n}of t.walkWithSkipChildren())if(o&&i.id===o.id)n();else{let a=Zl(e,i);if(a)return a}return null}function ME(e,{x:t,y:o},r){if(Bt(e)){let i=new wi({...r,isVectorSetItem:!0,width:e.width,height:e.height,left:t,top:o,name:e.name}),n=e.clone({x:0,y:0});return i.addChild(n),i}return e.clone({...r,isVectorSetItem:!0,left:t,top:o})}function OE(e,t){return new Set(t.map(o=>{if(!o)return null;if(He(o))return o.getPrimaryId();let r=e.tree.getAncestorThatMatches(o,n=>QG(e,n),!0,!0);if(!r)return null;let i=e.tree.getNodeParent(r);return i&&He(i)?i.getPrimaryId():r.getPrimaryId()}))}function QG(e,t){return Bt(t)&&e.tree.isRootVectorNode(t)}function WE(e){return ve(e)?{top:e.top,bottom:e.bottom,left:e.left,right:e.right,centerAnchorX:e.centerAnchorX,centerAnchorY:e.centerAnchorY,constraintsLocked:e.constraintsLocked}:{top:e.y,left:e.x}}var e$="rgb(0, 153, 255)",fy={fillType:"color",fillColor:e$,fillEnabled:!0},hy={isVectorSetItem:!0,top:0,width:40,height:40,autoSize:!1},t$=()=>{let e=new ff({...fy,x:-3,y:-3,width:46,height:46,polygonSides:3,centered:!0,radius:1}),t=new ff({...fy,x:0,y:0,width:40,height:40,polygonSides:4,centered:!0,radius:1}),o=new GN({...fy,x:2,y:2,width:36,height:36}),r=new wi({...hy,name:"Triangle"});r.addChild(e);let i=new wi({...hy,left:80,name:"Diamond"});i.addChild(t);let n=new wi({...hy,left:160,name:"Oval"});return n.addChild(o),[r,i,n]};function vn(e,t){return`${e??""}.${t}`}function Kl(e,t){return`${e??""}[${t}]`}function YVe(e){let t=[],o=e.split(".");for(let r of o){let[i,n]=r.split("[");if(i.length!==0&&t.push({type:"object",key:i}),n){let a=n.slice(0,-1);C(a.length>0),t.push({type:"array",id:a})}}return t}function yy(e,t){if(e===void 0)return"";let o=`<${t}>${e}</${t}>`,i=Rn(o).querySelector(t);return i instanceof HTMLElement?i.innerHTML:""}function HE(e,t,o){let r=et.isOn("customCodeSiteSettings"),i={headStart:"",headEnd:"",bodyEnd:"",bodyStart:""};for(let n of gN){let a=[],l=e?.[n];if(l&&a.push(l),t&&!r)for(let s in t){let c=t[s]?.[n];c?.html&&!c.disabled&&a.push(`<!-- Plugin: ${s} --> ${c.html}`)}i[n]=a.map(s=>BE(s,n)).join(`
`)}if(!o)return i;for(let n of o){if(n.disabled||n.pageIds&&n.pageIds.length>0||n.loadMode!=="once")continue;let a=n.managedByPlugin?`<!-- Plugin: ${n.managedByPlugin} --> ${n.code}`:n.code,{start:l,end:s}=nS(n.id),c=BE(a,n.placement);i[n.placement]+=`${l}
${c}
${s}
`}return i}function BE(e,t){if(t==="headStart"||t==="headEnd")return yy(e,"head");if(t==="bodyStart"||t==="bodyEnd")return yy(e,"body");Ut(t)}var Cy=e=>e;function cke(e){return e.filter(Mo)}var zu=m`params`,$E={type:"siteMetadata",localIdName:"siteMetadata",localId:di("siteMetadata","siteMetadata")};function _ke(e){return{type:"webPageMetadata",localIdName:e,localId:di("webPageMetadata",e)}}var jke=Cy(async(e,t)=>{let{assetMap:o,treeStore:r,modulesStore:i}=t,n=new ra(o),a=new oi,l=new Ni("siteMetadata",i,a),s=new Gn(e,a),c=new Hn(a),d=new on(e,l,a,void 0,r,i),p=new da(e,r,s,c,a,l,n),f=new na(a,s,p,n,d),h=new El(e,s,r,l,a,c,f,i,"siteMetadata"),v=new si(c,void 0,l,s,h,void 0,f,i,"siteMetadata"),T=_E(e,n,v,s,h,void 0,void 0,void 0);return[{type:"siteMetadata",revision:void 0,source:jE(e,T,l,c,h,v,s,void 0),artifacts:{assets:n.keys}}]}),Uke=Cy(async(e,t,o)=>{let{treeStore:r,modulesStore:i,assetMap:n}=t,{serializationId:a}=o,l=new ra(n),s=new oi,c=new Ni("webPageMetadata",i,s),d=new Gn(e,s),p=new Hn(s),f=new on(e,c,s,void 0,r,i),h=new da(e,r,d,p,s,c,l),v=new na(s,d,h,l,f),T=new El(e,d,r,c,s,p,v,i,"webPageMetadata"),N=new si(p,void 0,c,d,T,void 0,v,i,"webPageMetadata"),w=e.getVariableControlMap(r.tree,void 0,E,E.activeBundleHash),R=_E(e,l,N,d,T,r$(r.tree,e,c),i$(c),w);R.viewport=await n$(e);let B=Object.entries(e.getBreakpointValues()).map(([K,se])=>({hash:Ht(K),mediaQuery:GI(se)}));R.breakpoints=B;let G=Iv(e);return R.elements=G,R.serializationId=a,[{type:"webPageMetadata",source:jE(e,R,c,p,T,N,d,w),artifacts:{assets:l.keys},revision:e.moduleSourceRevision}]});function Jke(e,t){let o=new Set;function r(i){let n=sf(),a=i.matchAll(n);for(let[,l]of a)l&&t?.has(l)&&o.add(l)}for(let i in e.webMetadata){let n=i,a=e.webMetadata[n];switch(n){case"title":case"description":case"socialImage":D(a)&&r(a),U(a)&&o.add(a.id);break;case"noIndex":case"noIndexSite":if(!z(a))continue;U(a)?o.add(a.id):Qt(a)?Hr(a)&&o.add(a.startValue.id):$(a);break;case"favicon":case"faviconDark":case"appleTouchIcon":case"googleAnalyticsTrackingId":case"reducedMotion":case"language":case"languageTitle":case"adaptLayoutToTextDirection":case"canonicalURL":case"customCanonicalURL":case"optOutOfHTMLPlugin":case"automaticLocale":case"preserveQueryParams":case"enableFormsUTMTracking":case"translatePagePaths":case"translatePagePathsWithAI":break;default:}}for(let i in e.customHTML){let n=i,a=e.customHTML[n];switch(n){case"headStart":case"headEnd":case"bodyStart":case"bodyEnd":D(a)&&r(a);break;default:}}if(e.titleLocalized)for(let i of Object.values(e.titleLocalized))D(i.value)&&r(i.value);if(e.descriptionLocalized)for(let i of Object.values(e.descriptionLocalized))D(i.value)&&r(i.value);return o}function _E(e,t,o,r,i,n,a,l){let s={},c=i.add(Tn(e,e.webMetadata?.title,o,r,l)??n,e.titleLocalized,(R,B)=>(C(B.variables),Tn(e,e.titleLocalized?.[R]?.value,B.valueTransforms,B.variables,l)));M(c)||(s.title=c);let d=i.add(Tn(e,e.webMetadata?.description,o,r,l)??a,e.descriptionLocalized,(R,B)=>(C(B.variables),Tn(e,e.descriptionLocalized?.[R]?.value,B.valueTransforms,B.variables,l)));if(M(d)||(s.description=d),e.webMetadata?.favicon){let R=t.resolve(e.webMetadata.favicon);C(R,"Favicon is not a valid asset reference"),s.favicon=R.src}let p=e.webMetadata?.socialImage;if(U(p)){let R=Jt(p.id,e.id),B=r.create(R);s.socialImage=o.wrapInToImageSrc(B)}else if(p){let R=t.resolve(p);C(R,"Social image is not a valid asset reference"),s.socialImage=R.src}let f="noindex",h="max-image-preview:large";if(z(e.webMetadata?.noIndex)){let R=GE(e.webMetadata.noIndex,e.id,r,o);s.robots=m`${R} ? ${h} : ${f}`}else e.webMetadata?.noIndex===!0?s.robots=f:s.robots=h;if(e.webMetadata?.noIndexSite!==void 0)if(z(e.webMetadata?.noIndexSite)){let R=GE(e.webMetadata.noIndexSite,e.id,r,o);s.framerSearch={index:R}}else s.framerSearch={index:!e.webMetadata?.noIndexSite};let v=et.isOn("customCodeSiteSettings"),T=v?void 0:e.customHTML,N=!v&&jr(e)?e.pluginCustomHTML:void 0,w=HE(T,N,void 0);if(w.headStart){let R=Tn(e,w.headStart,o,r,l,"escape");R&&(s.customHTMLHeadStart=R)}if(w.headEnd){let R=Tn(e,w.headEnd,o,r,l,"escape");R&&(s.customHTMLHeadEnd=R)}if(w.bodyStart){let R=Tn(e,w.bodyStart,o,r,l,"escape");R&&(s.customHTMLBodyStart=R)}if(w.bodyEnd){let R=Tn(e,w.bodyEnd,o,r,l,"escape");R&&(s.customHTMLBodyEnd=R)}return s}function GE(e,t,o,r){let i,n;if(U(e)){let a=Jt(e.id,t);i=o.create(a),n=i}else if(Qt(e)){C(Hr(e),"Fetch is not supported for no index");let a=Jt(e.startValue.id,t);i=o.create(a),n=i;for(let l of e.transforms)n=r.wrapInValueTransform(n,l,void 0,void 0)}else $(e);return m`${i} !== undefined && ${n} === false`}function o$(e,t,o,r){if(!o||!vt(e))return;let i=r.getBindings(e.id);if(i.size===0)return;let n=new Set(i.keys()),a=t.addImport("framer",{exportSpecifier:"QueryEngine"}),l=t.addImport("framer",{exportSpecifier:"getWhereExpressionFromPathVariables"});function s(T){let N=t.addModuleImport(T);return C(N,"Can't import collection"),N}let c=Ed(e),d=new Set,p=ux(o,n,d,c,s),f=px(e.dataIdentifier,o,d,c,s),h=new ee({from:f,select:p,where:P.fn(l,m`pathVariables`,c)}),v=new ee({from:f,select:p});return m.joinLines(m`export async function fetchMetadata(pathVariables, activeLocale) {`,m`  const queryEngine = new ${a}();`,m``,m`  const query = ${h};`,m``,m`  const result = await queryEngine.query(query, activeLocale);`,m`  if (result.length === 0) {`,m`    throw new Error("No data matches pathVariables");`,m`  }`,m``,m`  const params = result[0];`,m`  return metadata(params, activeLocale);`,m`}`,m``,m`export async function fetchAllMetadata(pathVariableKeys, activeLocale) {`,m`  const queryEngine = new ${a}();`,m``,m`  const query = ${v};`,m``,m`  for (const pathVariableKey of pathVariableKeys) {`,m`    query.select.push({`,m`      collection: ${c},`,m`      name: pathVariableKey,`,m`      type: "Identifier",`,m`    });`,m`  }`,m``,m`  const results = await queryEngine.query(query, activeLocale);`,m``,m`  return results.map(result => ({`,m`    metadata: metadata(result, activeLocale),`,m`    pathVariables: Object.fromEntries(`,m`      pathVariableKeys.map(pathVariableKey => [pathVariableKey, result[pathVariableKey]])`,m`    )`,m`  }));`,m`}`)}function jE(e,t,o,r,i,n,a,l){let s=a.getBindings(e.id),c=[];for(let[f,h]of s){let v=m`${zu}?.[${f}]`,T=l?.get(f);if(T&&T.type==="enum"){let w=n.wrapInValueTransform(v,{name:"enumToDisplayName"},T);v=m`${v} !== undefined ? ${w} : undefined`}let N=m`const ${h} = ${v}`;c.push(N)}let d=m.joinLines(m`export default function metadata(${zu}, ${ne.activeLocale}) {`,...c,m`return ${t}`,m`}`),p=W(e)?o$(e,o,l,a):void 0;return m.joinSections(m.linesFrom(o.statements),...i.list(),...r.list(),d,p,m`export const metadataVersion = 1`)}function Tn(e,t,o,r,i,n){if(Qo(t))return;let a=sf();return tt.replaceAll(t,a,(l,s)=>{let[c,d]=_I(s,n);if(!i?.has(c))return l;let p=Jt(c,e.id),f=r.create(p),h=f;return i?.get(c)?.type==="responsiveimage"&&(h=o.wrapInToImageSrc(h)),h=o.wrapInTemplateFilters(h,d),m`${f} !== undefined ? ${h} : ${l}`})}function Xke(e,t,o){let r=o?.title,i=ql(e,t);return r||i}function r$(e,t,o){let r=o.addImport(`../${$E.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"}),i=m`${r}(${zu}, ${ne.activeLocale}).title`,n=ql(e,t);return m`${i} || ${n}`}function i$(e){let t=e.addImport(`../${$E.localId}`,{exportSpecifier:"default",importBinding:"siteMetadata"});return m`${t}(${zu}, ${ne.activeLocale}).description`}function ql(e,t){if(vt(t)){let i=E.dataForIdentifier(t.dataIdentifier);if(i?.name)return i.name+" Detail"}let o=BT(e,t);return cn(o??"/")}async function n$(e){if(W(e)){let t=e.isLoaded()?e:await e.load();return t?t.getReplicaVariants().length>0?"width=device-width":`width=${t.getPrimaryVariant().width}`:"width=device-width"}return"width=device-width"}function jt(e,t=!1){let o=(t?$a(e):e).trim();return o===""?0:o.split(/\W+\b/).length}function UE(e){return ie(e)||W(e)||Be(e)}function nRe(e){ho(fm(e),"Array gallery control must be Array of Object controls");let t=e.control,o;for(let r in t.controls){ho(!o,"Multiple item properties found in gallery control");let i=t.controls[r];ho(i?.type==="responsiveimage"),o=[r,i]}return ho(o,"Gallery control must have at least one item property"),o}function aRe(e,t){if(!Ds(t)||!t.value)return;let o=t.value[e];if(o?.type==="image")return o}function sRe(e){return e?e.filter(t=>!a$(t)):[]}function a$(e){if(!Ds(e)||!e.value)return!1;let t=Object.values(e.value);if(t.length!==1)return!1;let o=t[0];return SS(o)?M(o.value):!1}function JE(e){if(!fm(e))return!1;let t=Object.values(e.control.controls);return t.length!==1?!1:t[0]?.type==="responsiveimage"}function XE(e){return`${e??"Field"} is required`}function ZE(e,t){return`Exceeded max length by ${ET(e-t,"character","characters")}`}function uRe(e){return`Must have at least ${e.minCount} ${KE(e)}`}function mRe(e){return`Must have at most ${e.maxCount} ${KE(e)}`}var fRe="Slug value is already taken and must be unique";function KE(e){return JE(e)?"images":"items"}function Sy(e,t){return t.getRouteSegmentRootNode().getRouteSegmentIdToRawPathMap(t).get(e.id)??"Unknown"}function s$(e,t){if(e.id===t.root.homePageNodeId)return"Home";let r=tn(t,e);if(!r)return"Unknown";let i=e.dataIdentifier;if(!i)return r;let n=E.dataForIdentifier(i);return n?zT(n,r):r}function l$(e,t){let o=t.getParent(e.id);return Mt(o)?bp(o,e)??"Unknown":"Unknown"}function IRe(e,t){if(jr(e))return"Site";if(fi(e))return Sy(e,t);if(Mt(e))return e.resolveValue("name")||"Unknown";if(Ir(e))return l$(e,t)||"Unknown";if(W(e))return s$(e,t);if(ie(e))return e.resolveValue("name")||"Unknown";if(Be(e))return e.resolveValue("name")||"Unknown";$(e,"Invalid localization scope")}function qE(e){let t=Ha(e);for(let o of t.querySelectorAll("*"))o.tagName!=="BR"&&(o.removeAttribute("class"),o.removeAttribute("style"),o.removeAttribute("data-styles-preset"));return t.innerHTML}function Iwe(e){return e==="hidden"?null:e}var Nwe=["new","needsReview","done","hidden"],c$="controlPropKey";function xwe(e){return c$ in e}function Pwe(e){return"groups"in e}var d$="collectionNodeId";function Vwe(e){return d$ in e}var p$={string:!0,richtext:!0,image:!0,enum:!0,link:!0,slug:!0};function u$(e){return e in p$}function eA(e){return u$(e.type)}var m$={string:!0,richtext:!0,image:!0,link:!0};function tA(e){return e in m$}function f$(e){return e?e.type==="richtext"?!0:e.type==="RichTextNode"?e.textType==="rich-text":!1:!1}function kwe(e){return e?e.type==="image"||e.type==="FrameNode":!1}function Rwe(e){return e?e.type==="nodeLink"||e.type==="link":!1}function wwe(e){return e?e.type==="RootNode"||e.type==="WebPageNode":!1}function Dwe(e){return e?.type==="slug"||e?.type==="RouteSegmentNode"}function h$(e){return Qo(e)||e===""||zV(e)}function Lwe(e,t){if(!e||f$(e))return!1;if(e.value.includes(`
`))return!0;let o=e.localizedValues[t.id];return o?!!o.value?.includes(`
`):!1}function oA(e,t,o){return t?t.hash!==o||t.needsReview?"needsReview":"done":h$(e)?"done":"new"}function Wt(e,t,o,r,i,n){return Object.fromEntries(t.map(a=>{let l=o[a.id];if(i?.[a.id])return[a.id,"warning"];if(n){let s=n(a);if(s)return[a.id,s]}return[a.id,oA(e,l,r)]}))}function Ty(e){return t=>e[t.id]?null:"done"}function by(e,t,o){return r=>{if(D(e)&&t){let i=t[r.id];if(i)return oA(e,i,o)}return null}}var yt={};Object.freeze(yt);function g$(e,t,o,r,i,n,a){let l=(s,c,d)=>{if(U(c)||!D(c)||c.length===0&&!d)return;let p=Ke(c),f=d??yt,h=Wt(c,n,f,p);a.push({type:e.name,transformId:e.id,keyPath:vn(t,s),nodeId:i.id,scopeId:r.id,property:s,value:c,controlPropKey:o,controlPropName:void 0,ancestorControlKeyPath:void 0,valueWordCount:jt(c),hash:p,localizedValues:f,localizedValueStatuses:h,managedByPluginButUserEditable:!1})};l("truthy",e.truthy,e.truthyLocalized),l("falsy",e.falsy,e.falsyLocalized)}function y$(e,t,o,r,i,n,a,l){if(t.outputType!=="string")return;for(let p of t.cases){if(Hr(e)&&e.startValue.id===Xv)break;if(U(p.to)||!D(p.to)||p.to.length===0&&!p.toLocalized)continue;let f=Ke(p.to),h=p.toLocalized??yt,v=Wt(p.to,a,h,f),T=vn(o,"cases");l.push({type:"convertFromEnum",transformId:t.id,keyPath:Kl(T,p.id),nodeId:n.id,scopeId:i.id,caseId:p.id,isDefaultCase:!1,value:p.to,ancestorControlKeyPath:void 0,controlPropKey:r,controlPropName:void 0,valueWordCount:jt(p.to),hash:f,localizedValues:h,localizedValueStatuses:v,managedByPluginButUserEditable:!1})}if(!t.default||U(t.default)||!D(t.default))return;let s=Ke(t.default),c=t.defaultLocalized??yt,d=Wt(t.default,a,c,s);l.push({type:"convertFromEnum",transformId:t.id,keyPath:vn(o,"default"),nodeId:n.id,scopeId:i.id,caseId:null,isDefaultCase:!0,ancestorControlKeyPath:void 0,value:t.default,controlPropKey:r,controlPropName:void 0,valueWordCount:jt(t.default),hash:s,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1})}function Hu(e,t,o,r,i,n,a){if(!(!vC(o.outputType)||o.outputType!=="string")){for(let l of o.transforms)if(SC(l))switch(l.name){case"convertFromEnum":{y$(o,l,r,i,e,t,n,a);break}case"convertFromBoolean":{g$(l,r,i,e,t,n,a);break}case"prefix":case"suffix":{if(U(l.value)||l.value.length===0&&!l.valueLocalized)return;let s=Ke(l.value),c=l.valueLocalized??yt,d=Wt(l.value,n,c,s);a.push({type:l.name,transformId:l.id,keyPath:Kl(r,l.id),controlPropKey:i,controlPropName:void 0,ancestorControlKeyPath:void 0,nodeId:t.id,scopeId:e.id,value:l.value,valueWordCount:jt(l.value),hash:s,localizedValues:c,localizedValueStatuses:d,managedByPluginButUserEditable:!1});continue}default:}}}function C$(e,t,o,r,i,n){if(Qt(o.textContent)){if(!bt(e,o,"textContent"))return;Hu(t,o,o.textContent,o.id,o.id,r,i);return}if(z(o.htmlContent)||z(o.textContent))return;let a=bt(e,o,"html"),l=bt(e,o,"htmlLocalized");if(!a&&!l)return;let s=o.html,c=$a(s),d=Fd(s),p=n==="canvasHtmlAsTextContentIfPossible"?d:"rich-text",f=p==="text"?c:qE(s);if(p==="text"&&!l&&zt(o)){let w=e.getNode(o.originalid);if(w&&$a(w.html)===c)return}let v=Ke(d===p?f:c),T=o.htmlLocalized??yt,N=Wt(f,r,T,v);i.push({type:"RichTextNode",keyPath:S$(o.id),nodeId:o.id,scopeId:t.id,value:f,valueWordCount:jt(f,!0),textType:p,hash:v,localizedValues:T,localizedValueStatuses:N,managedByPluginButUserEditable:!1,inherited:!l})}function S$(e){return`${e}_html`}function YE(e){if(jr(e))return"RootNode";if(W(e))return"WebPageNode";$(e)}function QE(e,t,o){let r={};for(let i of e){let n=t[i.id];if(!n||!n.value)continue;let a=jI({collectionData:o,getCollectionDataForIdentifier:E.dataForIdentifier.bind(E),type:"id",value:n.value});a&&(r[i.id]=a)}return r}function rA(e,t,o,r,i){let n=null;if(W(o)&&(n=E.dataForIdentifier(o.dataIdentifier)),o.webMetadata?.title||o.titleLocalized){let a=o.webMetadata?.title??e.root.webMetadata?.title??"",l=Ke(a),s=o.titleLocalized??yt,c=QE(r,s,n),d=Wt(a,r,s,l,c);i.push({type:YE(o),keyPath:`${o.id}_title`,nodeId:o.id,scopeId:t.id,value:a,valueWordCount:jt(a),hash:l,localizedValues:s,localizedValueStatuses:d,managedByPluginButUserEditable:!1,key:"title",dataIdentifier:ba(o)?o.dataIdentifier:void 0,warnings:c})}if(o.webMetadata?.description||o.descriptionLocalized){let a=o.webMetadata?.description??e.root.webMetadata?.description??"",l=Ke(a),s=o.descriptionLocalized??yt,c=QE(r,s,n),d=Wt(a,r,s,l,c);i.push({type:YE(o),keyPath:`${o.id}_description`,nodeId:o.id,scopeId:t.id,value:a,valueWordCount:jt(a),hash:l,localizedValues:s,localizedValueStatuses:d,managedByPluginButUserEditable:!1,key:"description",dataIdentifier:ba(o)?o.dataIdentifier:void 0,warnings:c})}}function v$(e){return`${e}_fillImageLocalized`}function T$(e,t,o,r,i){if(!ro(o)||!D(o.fillImage)||o.fillImage.length===0)return;let n=bt(e,o,"fillImage"),a=bt(e,o,"fillImageLocalized"),l=bt(e,o,"altAttribute"),s=bt(e,o,"altAttributeLocalized");if(!n&&!a&&!l&&!s)return;let c=o.altAttribute??Oa,d=Ke(c),p=o.altAttributeLocalized??yt,f=o.fillImage,h=Ke(f),v=o.fillImageLocalized??yt,T=Wt(c,r,p,d,void 0,by(f,v,h));i.push({type:"FrameNode",keyPath:v$(o.id),nodeId:o.id,scopeId:t.id,value:c,valueWordCount:jt(c),hash:d,localizedValues:p,localizedValueStatuses:T,managedByPluginButUserEditable:!1,inherited:!s,supportsAlt:!0,image:f,imageHash:h,imageLocalizedValues:v,imageInherited:!a,positionX:lm(o.fillImagePositionX)?o.fillImagePositionX:void 0,positionY:lm(o.fillImagePositionY)?o.fillImagePositionY:void 0,supportsFocalPoint:!0})}function iA(e,t,o,r){if(!et.isOn("localizedLinks"))return;let i=t.getLink();if(!Gr(i))return;let n=i.url,a=Ke(n),l=t.linkLocalized??yt,s=Wt(n,o,l,a,void 0,Ty(l));r.push({type:"nodeLink",keyPath:`${t.id}_linkLocalized`,nodeId:t.id,scopeId:e.id,value:n,valueWordCount:n?1:0,hash:a,localizedValues:l,localizedValueStatuses:s,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0})}function b$(e,t,o,r,i){T$(e,t,o,r,i),iA(t,o,r,i)}function Gu(e){return!!(tA(e)||e==="array"||e==="object")}function Bu(e,t,o){return`${e}.${t}.${o??""}`}function I$(e){if(W(e)&&Oc(e))return e.layoutTemplateIdentifier;if(_(e))return e.codeComponentIdentifier}function N$(e,t,o,r,i){let n=I$(o);if(!n)return;let a=E.componentForIdentifier(n);if(!a)return;let l=o.getControlProps(a.properties);function s(c,d,p,f=void 0){let h=d.type;if(h==="array"&&nC(d.value)){if(p.type!=="array")return;let v=p.control;for(let T of d.value){if(!Gu(T.type))continue;let N=Kl(f,T.id);s(c,T,v,N)}}if(h==="object"&&ze(d.value)){if(p.type!=="object")return;for(let v in d.value){let T=d.value[v];if(!T||!Gu(T.type))continue;let N=vn(f,v),w=p.controls[v];w&&s(c,T,w,N)}}if(tA(h))switch(h){case"string":{if(!bt(e,o,ut(c))||p.type==="string"&&p.preventLocalization||(Qt(d.value)&&Hu(t,o,d.value,vn(o.id,c),c,r,i),!D(d.value)))break;let v=d.value,T=Ke(v),N=d.valueLocalized??yt,w=Wt(v,r,N,T);i.push({type:"string",keyPath:Bu(o.id,c,f),controlPropKey:c,controlPropName:p.title||pi(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:jt(v),hash:T,localizedValues:N,localizedValueStatuses:w,managedByPluginButUserEditable:!1});break}case"link":{if(!et.isOn("localizedLinks")||!bt(e,o,ut(c))||(Qt(d.value)&&Hu(t,o,d.value,vn(o.id,c),c,r,i),!Gr(d.value)))break;let v=d.value.url,T=Ke(v),N=d.valueLocalized??yt,w=Wt(v,r,N,T,void 0,Ty(N));i.push({type:"link",keyPath:Bu(o.id,c,f),controlPropKey:c,controlPropName:p.title||pi(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:v?1:0,hash:T,localizedValues:N,localizedValueStatuses:w,managedByPluginButUserEditable:!1,aiTranslationDisabled:!0});break}case"richtext":{if(h!=="richtext"||!D(d.value)||p.type==="richtext"&&p.preventLocalization||!bt(e,o,ut(c)))break;let v=d.value,T=Ke(v),N=d.valueLocalized??yt,w=Wt(v,r,N,T);i.push({type:"richtext",keyPath:Bu(o.id,c,f),controlPropKey:c,controlPropName:p.title||pi(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:v,valueWordCount:jt(v,!0),hash:T,localizedValues:N,localizedValueStatuses:w,managedByPluginButUserEditable:!1,contentType:void 0});break}case"image":{if(!d||d.type!=="image"||!D(d.value)||p.type!=="responsiveimage"&&p.type!=="image"||!bt(e,o,ut(c)))break;let v=p.type==="responsiveimage",T=d.alt??Oa,N=Ke(T),w=v?d.altLocalized??yt:yt,R=d.value,B=Ke(R),G=d.valueLocalized??yt,K=Wt(T,r,w,N,void 0,by(R,G,B)),se=p.type==="responsiveimage";i.push({type:"image",keyPath:Bu(o.id,c,f),controlPropKey:c,controlPropName:p.title||pi(c),ancestorControlKeyPath:f,nodeId:o.id,scopeId:t.id,value:T,valueWordCount:jt(T),hash:N,localizedValues:w,localizedValueStatuses:K,managedByPluginButUserEditable:!1,supportsAlt:v,image:R,imageHash:B,imageLocalizedValues:G,supportsFocalPoint:se,positionX:se?d.positionX:void 0,positionY:se?d.positionY:void 0});break}default:}}for(let c in l){let d=l[c];if(!d)continue;let p=a.properties[c];p&&s(c,d,p)}}function x$(e,t,o,r){let i=t.formSelectOptions;if(!(!i||i?.length===0))for(let n of i){let a=n.title;if(!a)continue;let l=n.titleLocalized??yt,s=Ke(a),c=Wt(a,o,l,s);r.push({type:"FormSelectNode",keyPath:`${t.id}_${n.id}`,nodeId:t.id,optionId:n.id,scopeId:e.id,value:a,valueWordCount:jt(a),hash:s,localizedValues:l,localizedValueStatuses:c,managedByPluginButUserEditable:!1})}}function P$(e,t,o,r,i){let n=`${o.id}_placeholder`;if(z(o.formInputPlaceholder)){if(U(o.formInputPlaceholder)||!bt(e,o,"formInputPlaceholder"))return;Hu(t,o,o.formInputPlaceholder,n,o.id,r,i);return}if(!o.formInputPlaceholder||!bt(e,o,"formInputPlaceholder"))return;let a=Ke(o.formInputPlaceholder),l=o.formInputPlaceholderLocalized??yt;i.push({keyPath:n,type:"FormPlainTextInputNode",nodeId:o.id,scopeId:t.id,value:o.formInputPlaceholder,valueWordCount:jt(o.formInputPlaceholder),hash:Ke(o.formInputPlaceholder),localizedValues:l,localizedValueStatuses:Wt(o.formInputPlaceholder,r,l,a),managedByPluginButUserEditable:!1})}function nA(e,t,o,r,i,n){W(o)&&rA(e,t,o,r,i),Ie(o)&&C$(e,t,o,r,i,n),(_(o)||W(o))&&N$(e,t,o,r,i),De(o)&&b$(e,t,o,r,i),(_i(o)||He(o))&&iA(t,o,r,i),bc(o)&&P$(e,t,o,r,i),Ic(o)&&x$(t,o,r,i)}var aA=(e,t)=>t?`${e.update}-${t.update}`:e.update.toString();function Ql(e,t,o,r,i,n,a,l){if(t.mutable||o?.mutable)return;let s=t.cache.localizationSourceGroup;if(s&&!(s.update!==aA(t,o)||s.componentHash!==i||s.locales!==r||s.parentVariables!==n||!Br(s.subGroups,a)||!Br(s.settings,l))&&!(tl(e,t)&&s.includedLocales!==t.includedLocales))return s}function ec(e,t,o,r,i,n,a,l,s){t.mutable||o?.mutable||(t.cache.localizationSourceGroup={update:aA(t,o),locales:i,componentHash:n,parentVariables:a,group:r,includedLocales:tl(e,t)?t.includedLocales:void 0,subGroups:l,settings:s})}function V$(e,t,o,r,i,n){let a=et.isOn("localizedPagePaths");if(cA(e,t)&&a)return;let l=n==="canvasHtmlAsTextContentIfPossible";if(l){let p=Ql(e,t,void 0,o,r,Ci,void 0,void 0);if(p){p.group&&i.push(p.group);return}}let s=[];for(let p of t.walk())nA(e,t,p,o,s,n);let c=tl(e,t),d;if(s.length>0){let p=W(t)?ql(e,t):t.resolveValue("name")??"Unknown";!a&&W(t)&&t.abTestingParentId&&(p=`${p} \xB7 ${t.resolveValue("name")||ii(t)}`),d={type:"sourceGroup",name:p,groupType:W(t)?"page":Be(t)?"template":"component",nodeId:t.id,supportsLocaleVisibility:c,includedLocaleIds:c?Yd(e,t):void 0,items:s},i.push(d)}l&&ec(e,t,void 0,d,o,r,Ci,void 0,void 0)}function Yl(e,t,o){return o?`${e}.${t}.${o}`:`${e}.${t}`}function k$(e){return e.type!=="rich-text"?e.value.length:$a(e.value).length}function vy(e,t,o){let r=o.required,i=o.type==="link"?void 0:o.options?.maxLength;if(!r&&!X(i))return;let n={};for(let a of e){let l=t[a.id];if(!As(l))continue;let s=k$(l);r&&s===0?n[a.id]=XE(o.name):X(i)&&s>i&&(n[a.id]=ZE(s,i))}return n}function sA(e,t,o,r){let i={};for(let n of e){let a=t[n.id];if(!As(a))continue;let s=o[n.id]?.get(a.value);s&&s>1&&(i[n.id]=r)}return i}function R$(e,t,o,r,i,n,a,l,s){let c=n.type;switch(c){case"string":{if(wc(n))return;let d;if(l){if(l.type!==c||!D(l.value))return;d=l.value}else{if(xS(n))return;d=n.initialValue}let p=Ke(d),f=l?.valueLocalized??yt,h=vy(r,f,n),v=Wt(d,r,f,p,h);return{type:"string",keyPath:Yl(o,a,i),nodeId:o,scopeId:t,controlPropKey:a,controlPropName:n.name,ancestorControlKeyPath:i,value:d,valueWordCount:jt(d),hash:p,localizedValues:f,localizedValueStatuses:v,managedByPluginButUserEditable:n.userEditable??!1,warnings:h}}case"link":{if(!l||l.type!==c||!Gr(l.value)||!et.isOn("localizedLinks"))return;let d=l.value.url,p=Ke(d),f=l?.valueLocalized??yt,h=vy(r,f,n),v=Wt(d,r,f,p,h);return{type:"link",keyPath:Yl(o,a,i),nodeId:o,scopeId:t,controlPropKey:a,controlPropName:n.name,ancestorControlKeyPath:i,value:d,valueWordCount:d?1:0,hash:p,localizedValues:f,localizedValueStatuses:v,managedByPluginButUserEditable:n.userEditable??!1,warnings:h,aiTranslationDisabled:!0}}case"slug":{if(e.root.translatePagePaths==="no"||!l)return;C(l.type==="string","expected slug controlType to be a string"),C(D(l.value),"expected slug value to be a string");let d=l.value,p=Ke(d),f=l?.valueLocalized??yt,h=sA(r,f,s,"Each item in the Collection must have a unique slug"),v=Wt(d,r,f,p,h,e.root.translatePagePaths==="legacy"?Ty(f):void 0);return{type:"slug",keyPath:Yl(o,a,i),controlPropKey:a,controlPropName:n.name,ancestorControlKeyPath:i,nodeId:o,scopeId:t,value:d,valueWordCount:jt(d),hash:p,localizedValues:f,localizedValueStatuses:v,managedByPluginButUserEditable:n.userEditable??!1,warnings:h,aiTranslationDisabled:!e.root.translatePagePathsWithAI}}case"richtext":{let d;if(wc(n))return;if(l){if(l.type!==c||!D(l.value))return;d=l.value}else d=n.initialValue;let p=Ke(d),f=l?.valueLocalized??yt,h=vy(r,f,n),v=Wt(d,r,f,p,h);return{type:"richtext",keyPath:Yl(o,a,i),nodeId:o,scopeId:t,controlPropKey:a,controlPropName:n.name,ancestorControlKeyPath:i,value:d,valueWordCount:jt(d,!0),hash:p,localizedValues:f,localizedValueStatuses:v,managedByPluginButUserEditable:n.userEditable??!1,warnings:h,contentType:n.type==="richtext"?n.contentType:void 0}}case"image":{let d;if(l){if(l.type!==c||!D(l.value))return;d=l.value}else{if(!D(n.initialValue))return;d=n.initialValue}let p=Ke(d),f=l?.valueLocalized??yt,h=l?.alt??Oa,v=Ke(h),T=l?.altLocalized??yt,N=Wt(h,r,T,v,void 0,by(d,f,p));return{type:"image",keyPath:Yl(o,a,i),nodeId:o,scopeId:t,controlPropKey:a,controlPropName:n.name,ancestorControlKeyPath:i,value:h,valueWordCount:jt(h),hash:v,localizedValues:T,localizedValueStatuses:N,supportsAlt:!0,image:d,imageHash:p,imageLocalizedValues:f,managedByPluginButUserEditable:n.userEditable??!1,supportsFocalPoint:!0,positionX:l?.positionX,positionY:l?.positionY}}case"enum":return;default:}}function w$(e,t,o,r,i,n){let a=o.id;function l(s,c,d,p=void 0){if(c&&c.type==="array"){if(d.type!=="array"||z(c.value))return;for(let h of c.value){if(!Gu(h.type)||!Ds(h)||!h.value)continue;let v=Kl(p,h.id);for(let T of d.itemVariables){let N=h.value[T.id];if(!N||!Gu(N.type))continue;let w=vn(v,T.id);l(s,N,T,w)}}}if(!eA(d))return;let f=R$(e,a,o.id,r,p,d,s,c,n);f&&i.push(f)}for(let s of t.variables){if(s.type==="divider")continue;let c=o.getControlProp(s.id);l(s.id,c,s)}}var lA=pC((e,t)=>({translatePagePaths:e,translatePagePathsWithAI:t}));function D$(e,t,o,r,i,n){let a=lA(e.root.translatePagePaths,e.root.translatePagePathsWithAI),l=Ql(e,o,void 0,r,Ln,t.variables,void 0,a);if(l){l.group&&n.push(l.group);return}let s=[],c=Yd(e,o);if(w$(e,t,o,r,s,i),s.length>0){for(let p of s)p.insetLevel=1;let d={type:"sourceGroup",groupType:"collectionItem",collectionName:t.resolveValue("name")??"Unknown",collectionNodeId:t.id,supportsLocaleVisibility:!0,includedLocaleIds:c,name:bp(t,o)??"Unknown",nodeId:o.id,items:s};ec(e,o,void 0,d,r,Ln,t.variables,void 0,a),n.push(d)}}function L$(e,t,o,r){let i=o.name,n=Ke(i),a=o.nameLocalized??yt,l=Wt(i,r,a,n);return{type:"enum",keyPath:`${e.id}_${t.id}_${o.id}`,nodeId:e.id,scopeId:e.id,variableId:t.id,enumCaseId:o.id,value:i,valueWordCount:jt(i),hash:n,localizedValues:a,localizedValueStatuses:l,managedByPluginButUserEditable:!1}}function F$(e,t,o,r){let i=[],n=E$(o,t);for(let d of t.getUnsortedChildren())D$(e,t,d,o,n,i);let a=Ql(e,t,void 0,o,Ln,Ci,i,void 0);if(a){a.group&&r.push(a.group);return}let l=t.variables.filter(eA);if(l.length===0)return;let s=[];for(let d of l){let p=d.type;switch(p){case"enum":{if(wc(d))break;for(let f of d.cases)s.push(L$(t,d,f,o));break}case"string":case"richtext":case"image":case"link":case"slug":break;default:}}let c=s.length>0||i.length>0?{type:"sourceGroup",groupType:"collection",name:t.resolveValue("name")??"Unknown",nodeId:t.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:s,groups:i}:void 0;ec(e,t,void 0,c,o,Ln,Ci,i,void 0),c&&r.push(c)}function E$(e,t){let o={};for(let i of e)o[i.id]=new Map;let r=t.getSlugVariable();if(!r)return o;for(let i of t.getUnsortedChildren()){let n=i.getControlProp(r.id);if(n&&(C(n.type==="string","expect slug control type to be be of type string"),C(D(n.value),"expected slug control prop value to be string"),!!n.valueLocalized))for(let a in n.valueLocalized){let l=n.valueLocalized[a],s=o[a];if(!s||!l?.value)continue;let c=(s.get(l.value)??0)+1;s.set(l.value,c)}}return o}function A$(e,t,o){let r=e.getParent(o.id)?.children??[],i={};for(let n of t)n.id!==Es&&(i[n.id]=new Map);for(let n of r){if(!fi(n))continue;let{segment:a,segmentLocalized:l}=n;for(let s of t){if(s.id===Es)continue;let d=GS(s,l)?.value??a,p=i[s.id];if(!p)continue;let f=(p.get(d)??0)+1;p.set(d,f)}}return i}function M$(e,t,o){let r=Ql(e,e.root,void 0,t,Ln,Ci,void 0,void 0);if(r){r.group&&o.push(r.group);return}let i=[];rA(e,e.root,e.root,t,i);let n=i.length>0?{type:"sourceGroup",groupType:"settings",name:"Site Settings",nodeId:e.root.id,supportsLocaleVisibility:!1,includedLocaleIds:void 0,items:i}:void 0;ec(e,e.root,void 0,n,t,Ln,Ci,void 0,void 0),n&&o.push(n)}function O$(e,t,o,r){for(let i of t.children)F$(e,i,o,r)}function W$(e,t,o,r,i,n){if(o.dataIdentifier||QC.has(o.segment))return;let a=Ke(o.segment),l=o.segmentLocalized??yt,s=sA(r,l,A$(e,i,o),"Sibling pages must have unique slugs");n.push({keyPath:o.id,type:"RouteSegmentNode",nodeId:o.id,scopeId:t.id,value:o.segment,valueWordCount:jt(o.segment),hash:Ke(o.segment),localizedValues:l,localizedValueStatuses:Wt(o.segment,r,l,a,s,void 0),managedByPluginButUserEditable:!1,warnings:s,aiTranslationDisabled:!e.root.translatePagePathsWithAI})}function z$(e,t,o,r,i,n){let a=xv(e,"includeDrafts"),l=new Set;for(let s of t.walk())fi(s)&&B$(e,s,o,a,r,i,n,l)}function B$(e,t,o,r,i,n,a,l){let s=et.isOn("localizedPagePaths"),c=t.webPageId?e.get(t.webPageId):void 0,d=W(c)&&c.isLoaded()?c:null,p=lA(e.root.translatePagePaths,e.root.translatePagePathsWithAI),f=c&&l.has(c.id),h=s&&d||t,v=h===d?t:void 0,T=Ql(e,h,v,o,i,Ci,void 0,p);if(T){T.group&&n.push(T.group);return}let N=[];if(s&&(e.root.translatePagePaths==="yes"&&W$(e,h,t,o,r,N),c&&!f)){for(let G of c.walk())nA(e,h,G,o,N,a);l.add(c.id)}let w,R=W(c)?ql(e,c):cn(Sy(t,e));W(h)&&h.abTestingParentId&&(R=`${R} \xB7 ${h.resolveValue("name")||ii(h)}`),t.segment===""&&(R=`${R} /`);let B=tl(e,h);N.length>0&&(w={type:"sourceGroup",name:R,groupType:"page",nodeId:h.id,supportsLocaleVisibility:B,includedLocaleIds:B?Yd(e,h):void 0,items:N},n.push(w)),ec(e,h,v,w,o,i,Ci,void 0,p)}function Fwe(e,t,o,r){let i=[];if(!t||t.length===0)return i;M$(e,t,i);let n=et.isOn("localizedPagePaths");for(let a of e.root.children)cA(e,a)&&n||(UE(a)&&(C(a.isLoaded(),"Scope node must be fully loaded"),V$(e,a,t,o,i,r)),$i(a)&&(C(a.isLoaded(),"Scope node must be fully loaded"),O$(e,a,t,i)),JC(a)&&z$(e,a,t,o,i,r));return i}function cA(e,t){return W(t)&&t.id!==e.root.homePageNodeId}function Ewe(e,t){return zr(e,t)}function Awe(e,t){return Br(e,t)}function dA(e,t){let o=e.itemVariables.length===1&&e.itemVariables[0]?.type==="image"?e.itemVariables[0]:void 0,r=m`item`,i={[Vi]:m`typeof ${r}?.[${Vi}] === "string" ? ${r}[${Vi}] : undefined`};for(let a of e.itemVariables){let l=mc(a.name);l?i[a.id]=m`${r}?.[${l}] ?? ${r}?.[${a.id}]`:i[a.id]=m`${r}?.[${a.id}]`}let n=t.bindings.create("arrayFromHumanReadable"+e.id);return t.declarations.file.create(m.joinLines(m`const ${n} = (value) => {${m.joinLines(m`if (!Array.isArray(value)) return`,m`return value.map(${r} => {${m.joinLines(o?m`if (typeof ${r} === "string") return { [${o.id}]: ${r} }`:void 0,m`return ${i}`)}})`)}}`)),n}function H$(e){return[e[1],e[0]]}var G$=new Map(Object.entries(we).map(H$));function pA(e,t){let o=t.addImport("framer",{exportSpecifier:"ControlType"}),r=G$.get(e),i=new P(r);return m`${o}.${i}`}var $$={boolean:"boolean",number:"number",string:"string",richtext:"string",fusednumber:"any",enum:"string",segmentedenum:"string",color:"string",image:"string",responsiveimage:"{src: string; srcSet?: string; alt?: string}",file:"string",componentinstance:"any",slot:"any",array:"any[]",eventhandler:"any",transition:"Record<string, any>",link:"string",linkrelvalues:"string[] | undefined",pagescope:"string",date:"string",object:"Record<string, any>",font:"Record<string, any> | undefined",scrollsectionref:"React.MutableRefObject<HTMLElement>",customcursor:"string",border:"Record<string, any>",cursor:"string",boxshadow:"string",gap:"string",padding:"string",borderradius:"string",collectionreference:"string | undefined",multicollectionreference:"string[] | undefined",trackingid:"string | undefined",vectorsetitem:"React.ComponentType<any> | undefined"};function _$(e){return e?new P($$[e]):m`any`}var uA="variant";function j$(e){return!M(e?.defaultValue)}function U$(e,t){if(!ie(e))return{};C(e.isLoaded(),"Node must be loaded to generate controls");let o=e.getTopLevelVariants();if(o?.length<2)return{};let r=[],i=[];for(let n of o){let a=n.resolveValue("name")??ii(n);r.push(n.id),i.push(a)}return{[uA]:{type:pA("enum",t),title:"Variant",options:r,optionTitles:i}}}function J$(e,t,o,r,i){if(e.type==="responsiveimage"&&Ws(e)&&Os(e.__vekterDefault)){let{assetReference:n,alt:a}=e.__vekterDefault,l=o.assets.resolveResponsiveImage(n,{focalPoint:e.__vekterDefault});return l&&D(a)&&(l.alt=a),l}else if(Va(e))switch(e.type){case"responsiveimage":{let n=o.assets.resolveResponsiveImage(e.__defaultAssetReference);return n||void 0}case"file":{let n=o.assets.resolve(e.__defaultAssetReference);return n?n.src:void 0}}else{if(t?.type==="array")return t.initialValue?t.initialValue.map(n=>{let a={};if(!n||n.type!=="object"||!ze(n.value))return a;for(let l in n.value){let s=n.value[l];if(!s||s.type!=="image"||!D(s.value))continue;let c=o.assets.resolveResponsiveImage(s.value,{focalPoint:s});c&&(c.alt=s.alt??"",a[l]=c)}return a}):[];if(j$(e)){let n=e.defaultValue;if(e.type==="vectorsetitem")return C(TS(n),"Vector set item must be a module export identifier"),o.imports.addModuleImport(n.identifier);if(e.type==="richtext"&&D(n))return an(n,{collectors:o,useFramerMotion:r==="SmartComponent"});if(e.type==="boxshadow"&&jT(n))return UT(n,"emptyStringWhenEmpty",a=>Nr(a)?ws(a):Ta.toFormatString(a));if(Kt(n))return Nr(n)?ws(n):n}}}function $u(e,t){return m`${e}?: ${t};`}var mA=["id","width","height"],X$=Object.fromEntries(mA.map(e=>{let t=new P(e);return[t,t]}));function Z$(e,t){let o=new ee(e);return ee.addSpreadAtEnd(o,t),o}var fA=[{name:ne.style,type:m`Record<string, unknown>`},{name:ne.className,type:m`string`},{name:ne.layoutId,type:m`string | number`}];function K$(e,{declarations:t}){if(!ie(e)&&!W(e)&&!Be(e)&&!zo(e))return[];C(e.isLoaded(),"Node must be loaded to generate default values and types");let o=fA.map(({name:l,type:s})=>({key:ge(l),type:$u(l,s)})),r=Ti(e)?e.getTopLevelVariants():[],i=ge(ne.variant);if(r.length<2)return o.concat({key:i});C(Ti(e),"A scope with more than 1 variants must have replica variants.");let n=new ee;for(let l of r)n[l.resolveValue("name")??ii(l)]=l.id;let a=t.file.dedupe("humanReadableVariantMap",n);return o.concat([{key:i,type:$u(ne.variant,m`keyof typeof ${a}`),value:m`${a}[props.${ne.variant}] ?? props.${ne.variant} ?? ${e.baseVariantId}`}])}function Iy(e,t,o){let r=m`props.${new P(e)}`;return t&&(r=m`${t} ?? ${r}`),o&&(r=m`${r} ?? ${o}`),r}function hA(e,{treeStore:t}){if(!W(e)||!tn(t.tree,e))return;if(!et.isOn("urlVariables")){let n=ce(e.dataIdentifier);if(!Ze(n))return}let r=e.getVariableDefinitions(t.tree,void 0,E,E.activeBundleHash);if(!r||r.length===0)return;let i=new Map;for(let n of r)W(e)&&e.hasVariable(n.id)||i.set(n.id,n);return i}var q$=[...MT,uA,...mA,...fA.map(({name:e})=>e.toString()),"name"];function Y$(e,t,o,r,i,n){let a=new Set(q$),l=Object.entries(e).map(([R,{control:B,variable:G,binding:K}])=>{if(!B)return{key:R,binding:K};let se=dd(mc(B.title)??R,a),oe=new P(se),pe=J$(B,G,r,i,n),Ee=$u(oe,_$(B.type)),q;if(B.type==="enum"&&B.options&&B.optionTitles&&oe){let We=new ee;B.options.forEach((Y,Dt)=>{if(!D(Y)||!B.optionTitles)return;let J=B.optionTitles[Dt];D(J)&&(We[J]=Y)});let $e=r.declarations.file.dedupe("humanReadableEnumMap",We);Ee=$u(oe,m`keyof typeof ${$e}`),q=Iy(R,oe,pe),q=m`${$e}[${oe}] ?? ${q}`}else if(G?.type==="array"){let We=dA(G,r),$e=P.fn(We,oe);q=Iy(R,$e,pe)}else q=Iy(R,oe,pe);return{key:R,binding:K,name:se,type:Ee,value:q}}),s="",c=[],d=[],p=new ee,f=hA(t,o),h={},v={...X$};for(let{key:R,binding:B,type:G,value:K,name:se}of[...K$(t,r),...l]){let oe=f?.get(R),pe=B??new P(R);if(oe){let Ee=m`${pe} = ${ne.getFromCurrentRouteData}(${oe.id})`;if(AC(oe.type)){let q=Kr(oe.type);Kt(q)&&(Ee=m`${Ee} ?? ${q}`)}c.push(Ee)}else{let Ee=r.variables.getSetterBinding(R);if(Ee){let q=r.bindings.create(`external${R}`),We=r.bindings.create(`previous${R}`),$e=r.bindings.create(`setPrevious${R}`);c.push(m`${R}: ${q}`),d.push(m.joinLines(m`const [${pe}, ${Ee}] = React.useState(${q})`,m`const [${We}, ${$e}] = React.useState(${q})`,m`if (${q} !== ${We}) {${m.joinLines(P.fn(Ee,q),P.fn($e,q))}}`))}else ge(pe)!==R?c.push(m`${R}: ${pe}`):c.push(pe)}G&&(s+=G),K&&(p[R]=K),se&&(h[R]=se,v[se]=new P(se))}i==="LayoutTemplate"&&c.push(ne.children),i==="DesignPage"&&c.push(ne.style),ee.addSpreadAtStart(p,ne.props);let T=r.declarations.file.dedupe("getProps",m`(${Z$(v,ne.props)}) => { return ${p} }`),N=c.join(", "),w=N.length>0?new P(`{ ${N}, ...${ne.restProps} }`):ne.restProps;return{variableMap:Ft(h)?void 0:h,types:new P(s),props:m.joinSections(m`const ${w} = ${P.fn(T,ne.props)}`,...d)}}function Q$(e,t,o){let r=[],i=zo(e),n=gA(e),a=o.getBindings(e.id);for(let s of n){if(!gi(s))continue;let c=a.get(s.id);!i&&!c||r.push({id:s.id,binding:c,definition:s})}let l=hA(e,t);if(l)for(let[s]of l){let c=a.get(s);c&&r.push({id:s,binding:c})}return r}function e_(e,t){let{hidden:o,...r}=e;if(!t)return r;let{description:i,...n}=r;return n}function t_(e,t,o,{treeStore:r},{imports:i,variables:n},a,l){let{id:s,type:c}=t;switch(c){case"controlReference":{let d=ce(IS(r.tree,t.entityIdentifier));if(!d||!t.entityIdentifier||!Ze(d))return;let p=i.addModuleImport(d,{composeWithImports:[i.addImport("framer",{exportSpecifier:"getPropertyControls"})]});if(!p)return;let f=new ee({hidden:m`undefined`,description:m`undefined`});return ee.addSpreadAtStart(f,m`${p}[${t.controlKey}]`),D(o.title)&&(f.title=o.title),D(o.description)&&(f.description=o.description),o.type==="responsiveimage"&&Ws(o)&&Os(o.__vekterDefault)&&(f[XS]=P.fromValue(o.__vekterDefault)),Va(o)?f[JS]=P.fromValue(o.__defaultAssetReference):M(t.initialValue)||(f.defaultValue=P.fromValue(t.initialValue)),m`${p}?.[${t.controlKey}] && ${f}`}case"nodePropertyControlReference":case"array":case"vectorsetitem":case"boolean":case"color":case"date":case"enum":case"eventhandler":case"file":case"image":case"link":case"linkrelvalues":case"number":case"richtext":case"scrollsectionref":case"customcursor":case"cursor":case"transition":case"boxshadow":case"string":case"border":case"borderradius":case"gap":case"padding":case"collectionreference":case"multicollectionreference":case"trackingid":case"slug":{let d={...e_(o,a),type:pA(o.type,i)};return l==="vector"&&n&&(d.hidden=!n.getBinding(e.id,s)),d}default:$(c)}}function gA(e){return xr(e)?e.variables:[]}function o_(e,t,o,r,i=gA(e)){let n=U$(e,o.imports),a=Vc(e),l=[...i];if(Mt(e)){let s=kS();l.push(s);let c=RS();l.push(c);let d=PS(e);l.push(d);let p=VS(e);l.push(p)}for(let s of l){if(!gi(s))continue;let c=Ls(t.treeStore.tree,E,s);if(at(c))continue;C(c.type!=="image","Image variables should become responsive images");let d=t_(e,s,c,t,o,a,r);M(d)||(n[s.id]=d)}if(!Ft(n))return new ee(n,1)}function CDe(e,t,o,r,i,n){let a={},l=[];for(let{id:s,binding:c,definition:d}of Q$(e,t,o.variables)){if(d&&W(e)&&e.hasVariable(d.id))continue;let f=d?Ls(t.treeStore.tree,E,d):void 0;a[s]={control:f??void 0,variable:d,binding:c},d&&l.push(d)}return{propertyControls:o_(e,t,o,i,l),...Y$(a,e,t,o,r,n)}}function IDe(e){let t={};for(let[o,r]of e)CA(t,o,r);return t}function NDe(e,t,o){return _f(e,r=>{CA(r,t,o)})}function xDe(e,t){return e[t]?_f(e,o=>{let r=o[t];if(r){for(let i of r.dependents){let n=o[i];n&&(n.dependencies.delete(t),_u(n)&&delete o[i])}for(let i of r.dependencies){let n=o[i];n&&(n.dependents.delete(t),_u(n)&&delete o[i])}delete o[t]}}):e}function PDe(e,t,o,r,i){let n=new Set,a=[t];for(r=r||new Set,i=i||new Set;a.length>0;){let l=a.pop();if(!l||n.has(l))continue;n.add(l);let s=e[l];if(s){if(r.has(l))i.add(l);else if(!r.size)o.add(l);else{let c=!1;for(let d of s.dependents)if(r.has(d)||i.has(d)){c=!0;break}c?i.add(l):o.add(l)}for(let c of s.dependents)n.has(c)||a.push(c)}}}function VDe(e,t){let o=new Set,r=[t];for(;i_(r);){let i=r.shift(),n=e[i];if(n){for(let a of n.dependents)o.has(a)||(o.add(a),r.push(a));if(o.has(t))return!0}}return!1}function r_(e,t){let o=cd(e,t);if(o)return o.startsWith("collection")&&!t.startsWith("collection")&&!t.startsWith("draftCollection")?o.replace("collection","draftCollection"):o}function CA(e,t,o){let r=e[t];if(!r){if(o.length===0)return;r=yA(e,t)}let i=new Set(r.dependencies);for(let n of o){let a=r_(n,t);if(!a)continue;r.dependencies.add(a);let l=e[a];l||(l=yA(e,a)),l.dependents.add(t),r.dependencies.add(a),i.delete(a)}for(let n of i){let a=e[n];a&&(a.dependents.delete(t),_u(a)&&delete e[n])}_u(r)&&delete e[t]}function _u(e){return e.dependents.size===0&&e.dependencies.size===0}function yA(e,t){let o={dependents:new Set,dependencies:new Set};return e[t]=o,o}function i_(e){return e.length>0}var n_=1;function a_(e){return e==="screen"||e==="canvasComponent"}function s_(e){let t=e.metadata.compatibleCmsVersion;return X(t)?t:0}function l_(e){let t=AT(e);return e.imports.relative.some(o=>{let r=cd(o,t);return D(r)&&r.startsWith("collection")})}function c_(e){return a_(e.type)&&l_(e)}function FDe(e){return c_(e)&&s_(e)<n_}export{ZV as a,X_ as b,GA as c,Cl as d,_A as e,tj as f,ai as g,P1 as h,ph as i,uh as j,V1 as k,Nk as l,KV as m,Aj as n,fl as o,Mj as p,tM as q,Oj as r,Wj as s,zj as t,Bj as u,Hj as v,M1 as w,xk as x,Lr as y,O1 as z,W1 as A,z1 as B,B1 as C,H1 as D,jM as E,G1 as F,kk as G,mh as H,Yn as I,eX as J,tX as K,JM as L,pp as M,pX as N,uX as O,mX as P,fh as Q,fX as R,hh as S,up as T,wX as U,QM as V,DX as W,LX as X,qa as Y,Dk as Z,BX as _,Uj as $,ek as aa,Lk as ba,tk as ca,Ek as da,ok as ea,mU as fa,th as ga,Qf as ha,hl as ia,sU as ja,lU as ka,eh as la,op as ma,cU as na,rk as oa,oh as pa,rM as qa,gl as ra,SU as sa,ik as ta,RU as ua,nk as va,wU as wa,DU as xa,LU as ya,FU as za,EU as Aa,AU as Ba,zU as Ca,oO as Da,rO as Ea,Mk as Fa,hp as Ga,hZ as Ha,Q as Ia,gp as Ja,Wk as Ka,zk as La,iO as Ma,$k as Na,yh as Oa,oq as Pa,yp as Qa,Tq as Ra,Cp as Sa,bq as Ta,Iq as Ua,Nq as Va,xq as Wa,Jk as Xa,HU as Ya,GU as Za,sk as _a,dM as $a,rp as ab,gO as bb,jq as cb,Uq as db,Jq as eb,Xq as fb,qk as gb,Qk as hb,eR as ib,Qn as jb,vp as kb,oR as lb,ip as mb,nJ as nb,aJ as ob,np as pb,Tp as qb,kO as rb,lR as sb,cR as tb,dR as ub,s2 as vb,FO as wb,cn as xb,uk as yb,I2 as zb,N2 as Ab,x2 as Bb,MO as Cb,OO as Db,bh as Eb,bp as Fb,P2 as Gb,V2 as Hb,k2 as Ib,R2 as Jb,w2 as Kb,zO as Lb,D2 as Mb,L2 as Nb,F2 as Ob,E2 as Pb,A2 as Qb,M2 as Rb,gQ as Sb,fR as Tb,hR as Ub,gR as Vb,yQ as Wb,CQ as Xb,SQ as Yb,UO as Zb,vQ as _b,dt as $b,TQ as ac,bQ as bc,mR as cc,IM as dc,sp as ec,ih as fc,nh as gc,RQ as hc,wQ as ic,DQ as jc,LQ as kc,FQ as lc,ZO as mc,EQ as nc,SR as oc,Ya as pc,Pp as qc,Di as rc,bl as sc,xR as tc,PR as uc,kR as vc,RR as wc,wh as xc,L6 as yc,F6 as zc,LR as Ac,FR as Bc,AR as Cc,b5 as Dc,I5 as Ec,zR as Fc,kp as Gc,Rp as Hc,B5 as Ic,HR as Jc,H5 as Kc,GR as Lc,Z5 as Mc,K5 as Nc,wp as Oc,mW as Pc,q3 as Qc,gk as Rc,MJ as Sc,lp as Tc,QR as Uc,ew as Vc,tw as Wc,u8 as Xc,m8 as Yc,f8 as Zc,h8 as _c,ow as $c,FM as ad,u1 as bd,m1 as cd,Jo as dd,Il as ed,aw as fd,b7 as gd,Nl as hd,LW as id,F7 as jd,E7 as kd,A7 as ld,M7 as md,O7 as nd,j7 as od,lw as pd,OW as qd,U7 as rd,mee as sd,fee as td,vw as ud,Xle as vd,ou as wd,ra as xd,na as yd,cu as zd,du as Ad,uu as Bd,BD as Cd,HD as Dd,JD as Ed,si as Fd,El as Gd,gu as Hd,da as Id,Pye as Jd,JL as Kd,XL as Ld,KL as Md,qL as Nd,jye as Od,sCe as Pd,YL as Qd,eF as Rd,ug as Sd,vu as Td,oF as Ud,i0 as Vd,iF as Wd,nF as Xd,l0 as Yd,aF as Zd,yF as _d,vg as $d,ha as ae,obe as be,nG as ce,bbe as de,Ibe as ee,cE as fe,dE as ge,mE as he,Wbe as ie,zbe as je,Bbe as ke,Hbe as le,Gbe as me,fE as ne,IIe as oe,sG as pe,NIe as qe,gE as re,OIe as se,WIe as te,yE as ue,zIe as ve,CE as we,vE as xe,yNe as ye,dy as ze,CG as Ae,CNe as Be,SNe as Ce,vNe as De,Jl as Ee,TE as Fe,Xl as Ge,cy as He,TNe as Ie,bNe as Je,INe as Ke,NNe as Le,vG as Me,xNe as Ne,PNe as Oe,IE as Pe,NE as Qe,JNe as Re,XNe as Se,PE as Te,kE as Ue,RE as Ve,XG as We,zE as Xe,qG as Ye,HE as Ze,Cy as _e,cke as $e,$E as af,_ke as bf,jke as cf,Uke as df,Jke as ef,Xke as ff,ql as gf,n$ as hf,UE as if,nRe as jf,aRe as kf,sRe as lf,a$ as mf,JE as nf,XE as of,ZE as pf,uRe as qf,mRe as rf,fRe as sf,vn as tf,Kl as uf,YVe as vf,IRe as wf,qE as xf,Iwe as yf,Nwe as zf,xwe as Af,Pwe as Bf,Vwe as Cf,f$ as Df,kwe as Ef,Rwe as Ff,wwe as Gf,Dwe as Hf,h$ as If,Lwe as Jf,S$ as Kf,v$ as Lf,Bu as Mf,nA as Nf,Yl as Of,R$ as Pf,w$ as Qf,L$ as Rf,E$ as Sf,O$ as Tf,Fwe as Uf,Ewe as Vf,Awe as Wf,IDe as Xf,NDe as Yf,xDe as Zf,PDe as _f,VDe as $f,n_ as ag,a_ as bg,s_ as cg,c_ as dg,FDe as eg,pA as fg,q$ as gg,o_ as hg,CDe as ig};
//# sourceMappingURL=https://app.framerstatic.com/chunk-ATANOO3H.mjs.map

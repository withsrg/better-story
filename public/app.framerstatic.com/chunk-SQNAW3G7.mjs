import{g as d,h as f}from"https://app.framerstatic.com/chunk-QBRDYVUO.mjs";import{j as m}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var u=class extends Error{constructor(t){let e="Failed to upload";t?.error?.message&&(e=t.error.message);super(e);m(this,"code");typeof t?.code=="number"&&(this.code=t.code)}};async function b(s,i=200,t="image/png",e){let a=Math.min(i/s.naturalWidth,i/s.naturalHeight);if(a>=1)return null;let o=document.createElement("canvas");o.width=Math.floor(s.naturalWidth*a),o.height=Math.floor(s.naturalHeight*a);let r=o.getContext("2d");if(!r)throw Error("Failed to create context");return r.drawImage(s,0,0,o.width,o.height),new Promise((c,l)=>{o.toBlob(n=>{if(!n){l(Error("Failed to create Blob"));return}c(n)},t,e)})}function w(s){let i=URL.createObjectURL(s),t=new Image;return new Promise((e,a)=>{t.onerror=o=>{URL.revokeObjectURL(i),a(o)},t.onload=()=>{URL.revokeObjectURL(i),e(t)},t.src=i})}function R(s,i,t){let e=new XMLHttpRequest;return e.withCredentials=!0,t&&(e.upload.onprogress=a=>t(a.loaded/a.total)),new Promise((a,o)=>{e.onload=()=>{let r;try{r=JSON.parse(e.responseText)}catch{}if(e.status<200||e.status>299||r?.error){o(new u(r));return}a(r)},e.onerror=()=>{o(new u)},e.open("POST",s),d.withAuthorizationHeader({headers:f}).then(({headers:r})=>{if(r){let l=typeof r.entries=="function"?r.entries():Object.entries(r);for(let[n,g]of l)e.setRequestHeader(n,g)}let c=new FormData;for(let[l,n]of Object.entries(i))Array.isArray(n)?c.set(l,...n):n instanceof File?c.set(l,n,n.name):c.set(l,n);e.send(c)})})}export{b as a,w as b,R as c};
//# sourceMappingURL=https://app.framerstatic.com/chunk-SQNAW3G7.mjs.map

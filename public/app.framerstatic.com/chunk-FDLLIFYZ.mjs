import{$f as wi,Da as li,Ea as ki,Kb as Ei,Rd as _i,Tc as Be,Ua as ci,Va as ui,Wa as $i,We as Oi,Xf as Pr,Yf as Jj,Zc as Ri,Zf as $t,_f as Fj,cg as qi,dg as Ni,ee as Si,ge as yi,i as ai,kb as di,ne as Mi,oe as Ci,qe as Di,rc as Bi,sc as mi,sd as Ii,xc as fi,yc as Gi,zc as Fi}from"https://app.framerstatic.com/chunk-ATANOO3H.mjs";import{e as me,o as Ti}from"https://app.framerstatic.com/chunk-2PXEF7RD.mjs";import{e as kt}from"https://app.framerstatic.com/chunk-CEHFNECT.mjs";import{Nc as Ki}from"https://app.framerstatic.com/chunk-5ETEZDDN.mjs";import{a as Pi}from"https://app.framerstatic.com/chunk-YE25YANI.mjs";import{a as Li}from"https://app.framerstatic.com/chunk-EWEZCJKH.mjs";import{b as $A}from"https://app.framerstatic.com/chunk-XXKLA2AS.mjs";import{u as si}from"https://app.framerstatic.com/chunk-I24ABD3P.mjs";import{u as ct}from"https://app.framerstatic.com/chunk-NDPPBRVU.mjs";import{a as vi}from"https://app.framerstatic.com/chunk-DZJERIIY.mjs";import{Be as oi,Ce as ii,G as ce,Va as Ai,Xa as ji,aa as vo,bb as ei,cb as ti,db as ri,od as ni}from"https://app.framerstatic.com/chunk-HABMTUSV.mjs";import{f as DA}from"https://app.framerstatic.com/chunk-XWGDE7KU.mjs";import{Re as vr}from"https://app.framerstatic.com/chunk-OMLUVIS3.mjs";import{a as Tr,c as yA}from"https://app.framerstatic.com/chunk-NITQ6GUY.mjs";import{b as gi,c as hi,e as bi,f as lA,g as ut}from"https://app.framerstatic.com/chunk-OOKYJP4H.mjs";import{a as pe,b as st,c as lt,d as xi}from"https://app.framerstatic.com/chunk-EPGT6RL3.mjs";import{Ac as Lj,Bc as Ho,Bd as Gj,Cc as Qo,Cd as Wo,Dc as Uo,Dd as Or,Fd as xr,Hb as it,Hc as Vo,Ib as Mr,Ic as Xo,Ii as Zo,Jb as Po,Lc as fj,Mc as Dr,Nc as X,Oc as at,Qc as Kj,Rc as zo,a as ot,ic as To,k as wj,kc as wo,oc as qo,pc as ue,qc as $e,r as yr,rc as de,sc as No,tc as Lo,uc as Ko,vc as Ee,wc as Cr,wf as Yo,xc as Jo,yc as qj,zc as Nj}from"https://app.framerstatic.com/chunk-KMAC4JUD.mjs";import{$i as co,$n as uo,$v as xo,Be as mA,Cu as _o,Dd as wA,Ee as et,Fe as ke,J as sA,Ra as to,Ri as ko,Tt as ho,Wd as io,Zd as jt,Zv as Oo,ao as $o,bm as _r,br as fo,c as hr,cr as Go,dm as Sr,dr as Fo,er as Ro,fr as tt,fv as yo,gb as br,gr as rt,gv as nt,ha as Yn,hr as Io,hv as Mo,io as Eo,iv as Co,jv as Do,ke as ae,ko as Pj,le as JA,m as pA,me as se,ne as le,qe as ao,re as vj,rf as lo,rp as Bo,ru as bo,se as so,sf as mj,ue as SA,ur as Tj,wd as no,xp as po,yd as oo,yr as go}from"https://app.framerstatic.com/chunk-MEZTIH57.mjs";import{f as mo}from"https://app.framerstatic.com/chunk-KYPY4QS7.mjs";import{M as ro,m as Ze}from"https://app.framerstatic.com/chunk-4PXICH4C.mjs";import{a as pi}from"https://app.framerstatic.com/chunk-LKMP537Z.mjs";import{b as zn}from"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{p as ie}from"https://app.framerstatic.com/chunk-XB2V7G5R.mjs";import{b as IA,d as oj,f as Zn,i as At,j as Ao,l as jo,q as eo}from"https://app.framerstatic.com/chunk-ZQUNXESX.mjs";import{b as Wn,ce as So}from"https://app.framerstatic.com/chunk-JX6NUTD4.mjs";import{c as Ir,l as gr}from"https://app.framerstatic.com/chunk-XDXIFLRG.mjs";import{C as Kn,D as pj,E as CA,F as KA,H as nj,I as ze,J as Gr,K as We,L as Jn,M as rA,O as Hn,R as Ye,S as Fr,T as Qn,U as WA,V as Un,W as Vn,a as Nn,fa as Xn,ga as Rr,m as BA,o as Ln,v as LA}from"https://app.framerstatic.com/chunk-WWEGIMHT.mjs";import{a as I,b as Bj}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as fr}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{c as Zl,d as wn,e as pr,j as N,k as GA,l as rj,m as qn,o as mr}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var Ll=Zl((tM,Nl)=>{"use strict";var $r=Object.prototype.hasOwnProperty,ql=Object.prototype.toString,Ol=Object.defineProperty,xl=Object.getOwnPropertyDescriptor,vl=function(e){return typeof Array.isArray=="function"?Array.isArray(e):ql.call(e)==="[object Array]"},Pl=function(e){if(!e||ql.call(e)!=="[object Object]")return!1;var j=$r.call(e,"constructor"),t=e.constructor&&e.constructor.prototype&&$r.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!j&&!t)return!1;var r;for(r in e);return typeof r>"u"||$r.call(e,r)},Tl=function(e,j){Ol&&j.name==="__proto__"?Ol(e,j.name,{enumerable:!0,configurable:!0,value:j.newValue,writable:!0}):e[j.name]=j.newValue},wl=function(e,j){if(j==="__proto__")if($r.call(e,j)){if(xl)return xl(e,j).value}else return;return e[j]};Nl.exports=function A(){var e,j,t,r,o,n,i=arguments[0],a=1,s=arguments.length,l=!1;for(typeof i=="boolean"&&(l=i,i=arguments[1]||{},a=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});a<s;++a)if(e=arguments[a],e!=null)for(j in e)t=wl(i,j),r=wl(e,j),i!==r&&(l&&r&&(Pl(r)||(o=vl(r)))?(o?(o=!1,n=t&&vl(t)?t:[]):n=t&&Pl(t)?t:{},Tl(i,{name:j,newValue:A(l,n,r)})):typeof r<"u"&&Tl(i,{name:j,newValue:r}));return i}});var YA=pr(Wn()),Ji="dismissedInstantNPMToast",Hi="showedInstantNPMToast",Qi="instant-npm-toast",tB=()=>window.localStorage.getItem(Hi)==="true",Ui=()=>window.localStorage.getItem(Ji)==="true";function Ak(){return(0,YA.jsxs)(YA.Fragment,{children:[(0,YA.jsx)(vr,{children:"You installed an external NPM library."}),(0,YA.jsxs)("a",{href:"https://www.framer.com/developers/#faq",target:"_blank",children:[" ",(0,YA.jsx)(vr,{children:"Learn More"})]})]})}function Vi(){window.localStorage.setItem(Hi,"true"),$A({type:"add",variant:"info",text:(0,YA.jsx)(Ak,{}),key:Qi,duration:1/0,action:{title:"Dismiss",onClick:()=>window.localStorage.setItem(Ji,"true")}})}function rB(){$A({type:"remove",key:Qi})}var Xi="https://app.framerstatic.com/framer_compiler_bg-UTRYLQ4Z.wasm";var ek={track:!0};function zi(A){let e={...A,event:"external_component_insert"};zn(e,ek)}var ZA=LA("compiler");async function GB(){await Fe()}function Wi(A){return{code:`const err = new Error(${JSON.stringify(String(A))}); err.name = "CompilationError"; throw err;`,sourceMap:void 0,annotations:{},exportedNames:[],reExportedModules:[],imports:{absolute:[],relative:[],bare:[]}}}function Yi(A,e,j){let t={...e.exports};j&&(t.__FramerMetadata__={type:"variable"},A=A.concat(`
export const __FramerMetadata__ = `,JSON.stringify({exports:t})));let r=Object.entries(t).filter(([,n])=>n.type!=="tsType").map(([n])=>n),o={};for(let[n,i]of Object.entries(e.exports))i.annotations&&(o[n]=i.annotations);return{moduleCode:A,annotations:o,exportedNames:r}}async function Zi({localId:A,name:e,source:j,includeSourceMap:t=!0}){let r=await Fe();try{let{code:o,metadata:n,map:i}=await r.transformSync(j,{fileName:yA(e).source,framerContractVersion:1,mediaType:"tsx",minify:!1,compress:!1,mangle:!1,sourceMap:t,useReactRefresh:!0}),a=`
if (!window.$RefreshReg$) throw new Error("React refresh preamble was not loaded. Something is wrong.");
const prevRefreshReg = window.$RefreshReg$;
const prevRefreshSig = window.$RefreshSig$;
window.$RefreshReg$ = window.reactRefreshRuntime.getRefreshReg("${A}");
window.$RefreshSig$ = window.reactRefreshRuntime.createSignatureFunctionForTransform;

${o}

window.$RefreshReg$ = prevRefreshReg;
window.$RefreshSig$ = prevRefreshSig;`,{moduleCode:s,annotations:l,exportedNames:k}=Yi(a,n,!0);return{code:s,sourceMap:i??void 0,imports:n.requestedModules,annotations:l,exportedNames:k,reExportedModules:n.reExportedModules}}catch(o){let n=`Failed to compile development module ${e}: ${o}`;return ZA.debug(n,"(enable trace logging to see full source)"),ZA.trace(j),A.startsWith("codeFile/")||(ZA.reportCriticalError(new Error(n,{cause:o}),{moduleName:e,moduleSource:j}),DA("application_error",{message:n,area:"compiler"})),Wi(o)}}async function FB(A,e){await(await Fe()).transformSync(e,{fileName:yA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:!1,mangle:!1,sourceMap:!1,useReactRefresh:!1})}async function Aa({name:A,source:e,type:j,includeSourceMap:t=!0,addFramerMetadata:r=!0,telemetrySession:o}){let n=Be(10),i=`compile-${A}-${n}`,a=`\u{1F4DD} Compile ${A}`;ZA.debug("Compiling module",A,"; with source map:",t),pe(i);let s=await Fe(),l=o?.start("transform"),k=j==="collection";try{let{code:c,map:u,metadata:$}=await s.transformSync(e,{fileName:yA(A).source,framerContractVersion:1,mediaType:"tsx",minify:!0,compress:k,mangle:k,sourceMap:t,useReactRefresh:!1}),{moduleCode:E,annotations:m,exportedNames:d}=Yi(c,$,r);return{code:E,sourceMap:u??void 0,imports:$.requestedModules,annotations:m,exportedNames:d,reExportedModules:$.reExportedModules}}catch(c){let u=`Failed to compile module ${A}: ${c}`;return ZA.debug(u,"(enable trace logging to see full source)"),ZA.trace(e),A.startsWith("codeFile/")||(ZA.reportCriticalError(new Error(u,{cause:c}),{moduleName:A,moduleSource:e}),DA("application_error",{message:u,area:"compiler"})),Wi(c)}finally{l?.end(),ea(a,i)}}async function ja(A){let j=`analyze-imports-${Be(10)}`,t="\u{1F575}\u{1F3FB} Analyze Imports";pe(j);try{return{ok:!0,value:await(await Fe()).analyzeImports(A)}}catch(r){return ZA.warn("Failed to analyze imports:",r),r instanceof Error?{ok:!1,error:r}:{ok:!1,error:new Error(`${r}`,{cause:r})}}finally{ea(t,j)}}var dt;async function Fe(){if(!dt){let A=new Worker(qo("./modulesCompilerWorker.js")),e=To(A);dt=e.initWithPathToWasm(Xi).then(()=>({transformSync:e.transformSync,analyzeImports:e.analyzeImports})),dt.catch(()=>{if(pi()||!Ln.isProduction)throw new Error(`\u274C Your dev setup is struggling to run the compiler\u2019s WASM binary.
To fix it, run "make clean" followed by "make dev".`)})}return dt}function ea(A,e){st(A,e),performance.getEntriesByName(A,"measure").forEach(({name:j,duration:t})=>{ZA.debug(j,"took",t.toFixed(2),"ms"),xi(j)}),lt(e)}function ta(A,e){if(!mA(A))return;let j=A.getSupportedLayout(pA),t=A.getCurrentVariantSize(pA);hr(j.width)&&t?.widthType!==0&&(e.widthType=2,e.left!==null&&e.right!==null&&(e.right=null)),hr(j.height)&&t?.heightType!==0&&(e.heightType=2,e.top!==null&&e.bottom!==null&&(e.bottom=null))}function ra(A,e,j=!0){A.scheduler.processWhenReady(()=>{let{overlayStore:t,selectionStore:r,scopeStore:o,canvasStore:n,persistedUserDefaults:i}=A.stores;o.selectByNode(e.id),r.set(e.id);let a=A.tree.get(e.cache.overlayAncestorId);if(Oo(a)?t.showOverlay(r,a,a.parentid):t.hideAll(),j){let s=A.tree.getBoundingFrameForNodes([e]);n.zoomToCenter(s,{animated:i.animateOnZoom,maxZoom:1})}})}var Aj=class{constructor(e,j,t){this.normal=j,this.property=e,t&&(this.space=t)}};Aj.prototype.normal={};Aj.prototype.property={};Aj.prototype.space=void 0;function wr(A,e){let j={},t={};for(let r of A)Object.assign(j,r.property),Object.assign(t,r.normal);return new Aj(j,t,e)}function Re(A){return A.toLowerCase()}var dA=class{constructor(e,j){this.attribute=j,this.property=e}};dA.prototype.attribute="";dA.prototype.booleanish=!1;dA.prototype.boolean=!1;dA.prototype.commaOrSpaceSeparated=!1;dA.prototype.commaSeparated=!1;dA.prototype.defined=!1;dA.prototype.mustUseProperty=!1;dA.prototype.number=!1;dA.prototype.overloadedBoolean=!1;dA.prototype.property="";dA.prototype.spaceSeparated=!1;dA.prototype.space=void 0;var Ie={};wn(Ie,{boolean:()=>K,booleanish:()=>nA,commaOrSpaceSeparated:()=>hA,commaSeparated:()=>ij,number:()=>b,overloadedBoolean:()=>Et,spaceSeparated:()=>z});var rk=0,K=Rj(),nA=Rj(),Et=Rj(),b=Rj(),z=Rj(),ij=Rj(),hA=Rj();function Rj(){return 2**++rk}var qr=Object.keys(Ie),Ij=class extends dA{constructor(e,j,t,r){let o=-1;if(super(e,j),na(this,"space",r),typeof t=="number")for(;++o<qr.length;){let n=qr[o];na(this,qr[o],(t&Ie[n])===Ie[n])}}};Ij.prototype.defined=!0;function na(A,e,j){j&&(A[e]=j)}function OA(A){let e={},j={};for(let[t,r]of Object.entries(A.properties)){let o=new Ij(t,A.transform(A.attributes||{},t),r,A.space);A.mustUseProperty&&A.mustUseProperty.includes(t)&&(o.mustUseProperty=!0),e[t]=o,j[Re(t)]=t,j[Re(o.attribute)]=t}return new Aj(e,j,A.space)}var Nr=OA({properties:{ariaActiveDescendant:null,ariaAtomic:nA,ariaAutoComplete:null,ariaBusy:nA,ariaChecked:nA,ariaColCount:b,ariaColIndex:b,ariaColSpan:b,ariaControls:z,ariaCurrent:null,ariaDescribedBy:z,ariaDetails:null,ariaDisabled:nA,ariaDropEffect:z,ariaErrorMessage:null,ariaExpanded:nA,ariaFlowTo:z,ariaGrabbed:nA,ariaHasPopup:null,ariaHidden:nA,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:z,ariaLevel:b,ariaLive:null,ariaModal:nA,ariaMultiLine:nA,ariaMultiSelectable:nA,ariaOrientation:null,ariaOwns:z,ariaPlaceholder:null,ariaPosInSet:b,ariaPressed:nA,ariaReadOnly:nA,ariaRelevant:null,ariaRequired:nA,ariaRoleDescription:z,ariaRowCount:b,ariaRowIndex:b,ariaRowSpan:b,ariaSelected:nA,ariaSetSize:b,ariaSort:null,ariaValueMax:b,ariaValueMin:b,ariaValueNow:b,ariaValueText:null,role:null},transform(A,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function Bt(A,e){return e in A?A[e]:e}function pt(A,e){return Bt(A,e.toLowerCase())}var oa=OA({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ij,acceptCharset:z,accessKey:z,action:null,allow:null,allowFullScreen:K,allowPaymentRequest:K,allowUserMedia:K,alt:null,as:null,async:K,autoCapitalize:null,autoComplete:z,autoFocus:K,autoPlay:K,blocking:z,capture:null,charSet:null,checked:K,cite:null,className:z,cols:b,colSpan:null,content:null,contentEditable:nA,controls:K,controlsList:z,coords:b|ij,crossOrigin:null,data:null,dateTime:null,decoding:null,default:K,defer:K,dir:null,dirName:null,disabled:K,download:Et,draggable:nA,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:K,formTarget:null,headers:z,height:b,hidden:Et,high:b,href:null,hrefLang:null,htmlFor:z,httpEquiv:z,id:null,imageSizes:null,imageSrcSet:null,inert:K,inputMode:null,integrity:null,is:null,isMap:K,itemId:null,itemProp:z,itemRef:z,itemScope:K,itemType:z,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:K,low:b,manifest:null,max:null,maxLength:b,media:null,method:null,min:null,minLength:b,multiple:K,muted:K,name:null,nonce:null,noModule:K,noValidate:K,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:K,optimum:b,pattern:null,ping:z,placeholder:null,playsInline:K,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:K,referrerPolicy:null,rel:z,required:K,reversed:K,rows:b,rowSpan:b,sandbox:z,scope:null,scoped:K,seamless:K,selected:K,shadowRootClonable:K,shadowRootDelegatesFocus:K,shadowRootMode:null,shape:null,size:b,sizes:null,slot:null,span:b,spellCheck:nA,src:null,srcDoc:null,srcLang:null,srcSet:null,start:b,step:null,style:null,tabIndex:b,target:null,title:null,translate:null,type:null,typeMustMatch:K,useMap:null,value:nA,width:b,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:z,axis:null,background:null,bgColor:null,border:b,borderColor:null,bottomMargin:b,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:K,declare:K,event:null,face:null,frame:null,frameBorder:null,hSpace:b,leftMargin:b,link:null,longDesc:null,lowSrc:null,marginHeight:b,marginWidth:b,noResize:K,noHref:K,noShade:K,noWrap:K,object:null,profile:null,prompt:null,rev:null,rightMargin:b,rules:null,scheme:null,scrolling:nA,standby:null,summary:null,text:null,topMargin:b,valueType:null,version:null,vAlign:null,vLink:null,vSpace:b,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:K,disableRemotePlayback:K,prefix:null,property:null,results:b,security:null,unselectable:null},space:"html",transform:pt});var ia=OA({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:hA,accentHeight:b,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:b,amplitude:b,arabicForm:null,ascent:b,attributeName:null,attributeType:null,azimuth:b,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:b,by:null,calcMode:null,capHeight:b,className:z,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:b,diffuseConstant:b,direction:null,display:null,dur:null,divisor:b,dominantBaseline:null,download:K,dx:null,dy:null,edgeMode:null,editable:null,elevation:b,enableBackground:null,end:null,event:null,exponent:b,externalResourcesRequired:null,fill:null,fillOpacity:b,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ij,g2:ij,glyphName:ij,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:b,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:b,horizOriginX:b,horizOriginY:b,id:null,ideographic:b,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:b,k:b,k1:b,k2:b,k3:b,k4:b,kernelMatrix:hA,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:b,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:b,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:b,overlineThickness:b,paintOrder:null,panose1:null,path:null,pathLength:b,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:z,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:b,pointsAtY:b,pointsAtZ:b,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:hA,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:hA,rev:hA,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:hA,requiredFeatures:hA,requiredFonts:hA,requiredFormats:hA,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:b,specularExponent:b,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:b,strikethroughThickness:b,string:null,stroke:null,strokeDashArray:hA,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:b,strokeOpacity:b,strokeWidth:null,style:null,surfaceScale:b,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:hA,tabIndex:b,tableValues:null,target:null,targetX:b,targetY:b,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:hA,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:b,underlineThickness:b,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:b,values:null,vAlphabetic:b,vMathematical:b,vectorEffect:null,vHanging:b,vIdeographic:b,version:null,vertAdvY:b,vertOriginX:b,vertOriginY:b,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:b,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Bt});var Lr=OA({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(A,e){return"xlink:"+e.slice(5).toLowerCase()}});var Kr=OA({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:pt});var Jr=OA({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(A,e){return"xml:"+e.slice(3).toLowerCase()}});var nk=/[A-Z]/g,aa=/-[a-z]/g,ok=/^data[-\w.:]+$/i;function Hr(A,e){let j=Re(e),t=e,r=dA;if(j in A.normal)return A.property[A.normal[j]];if(j.length>4&&j.slice(0,4)==="data"&&ok.test(e)){if(e.charAt(4)==="-"){let o=e.slice(5).replace(aa,ak);t="data"+o.charAt(0).toUpperCase()+o.slice(1)}else{let o=e.slice(4);if(!aa.test(o)){let n=o.replace(nk,ik);n.charAt(0)!=="-"&&(n="-"+n),e="data"+n}}r=Ij}return new r(t,e)}function ik(A){return"-"+A.toLowerCase()}function ak(A){return A.charAt(1).toUpperCase()}var sa=wr([Nr,oa,Lr,Kr,Jr],"html"),mt=wr([Nr,ia,Lr,Kr,Jr],"svg");function la(A,e){let j=e||{};return(A[A.length-1]===""?[...A,""]:A).join((j.padRight?" ":"")+","+(j.padLeft===!1?"":" ")).trim()}function ka(A){return A.join(" ").trim()}function aj(A){return!A||typeof A!="object"?"":"position"in A||"type"in A?ca(A.position):"start"in A||"end"in A?ca(A):"line"in A||"column"in A?Qr(A):""}function Qr(A){return ua(A&&A.line)+":"+ua(A&&A.column)}function ca(A){return Qr(A&&A.start)+"-"+Qr(A&&A.end)}function ua(A){return A&&typeof A=="number"?A:1}var EA=class extends Error{constructor(e,j,t){super(),typeof j=="string"&&(t=j,j=void 0);let r="",o={},n=!1;if(j&&("line"in j&&"column"in j?o={place:j}:"start"in j&&"end"in j?o={place:j}:"type"in j?o={ancestors:[j],place:j.position}:o={...j}),typeof e=="string"?r=e:!o.cause&&e&&(n=!0,r=e.message,o.cause=e),!o.ruleId&&!o.source&&typeof t=="string"){let a=t.indexOf(":");a===-1?o.ruleId=t:(o.source=t.slice(0,a),o.ruleId=t.slice(a+1))}if(!o.place&&o.ancestors&&o.ancestors){let a=o.ancestors[o.ancestors.length-1];a&&(o.place=a.position)}let i=o.place&&"start"in o.place?o.place.start:o.place;this.ancestors=o.ancestors||void 0,this.cause=o.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=r,this.line=i?i.line:void 0,this.name=aj(o.place)||"1:1",this.place=o.place||void 0,this.reason=this.message,this.ruleId=o.ruleId||void 0,this.source=o.source||void 0,this.stack=n&&o.cause&&typeof o.cause.stack=="string"?o.cause.stack:"",this.actual,this.expected,this.note,this.url}};EA.prototype.file="";EA.prototype.name="";EA.prototype.reason="";EA.prototype.message="";EA.prototype.stack="";EA.prototype.column=void 0;EA.prototype.line=void 0;EA.prototype.ancestors=void 0;EA.prototype.cause=void 0;EA.prototype.fatal=void 0;EA.prototype.place=void 0;EA.prototype.ruleId=void 0;EA.prototype.source=void 0;var qA={basename:sk,dirname:lk,extname:kk,join:ck,sep:"/"};function sk(A,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');ge(A);let j=0,t=-1,r=A.length,o;if(e===void 0||e.length===0||e.length>A.length){for(;r--;)if(A.codePointAt(r)===47){if(o){j=r+1;break}}else t<0&&(o=!0,t=r+1);return t<0?"":A.slice(j,t)}if(e===A)return"";let n=-1,i=e.length-1;for(;r--;)if(A.codePointAt(r)===47){if(o){j=r+1;break}}else n<0&&(o=!0,n=r+1),i>-1&&(A.codePointAt(r)===e.codePointAt(i--)?i<0&&(t=r):(i=-1,t=n));return j===t?t=n:t<0&&(t=A.length),A.slice(j,t)}function lk(A){if(ge(A),A.length===0)return".";let e=-1,j=A.length,t;for(;--j;)if(A.codePointAt(j)===47){if(t){e=j;break}}else t||(t=!0);return e<0?A.codePointAt(0)===47?"/":".":e===1&&A.codePointAt(0)===47?"//":A.slice(0,e)}function kk(A){ge(A);let e=A.length,j=-1,t=0,r=-1,o=0,n;for(;e--;){let i=A.codePointAt(e);if(i===47){if(n){t=e+1;break}continue}j<0&&(n=!0,j=e+1),i===46?r<0?r=e:o!==1&&(o=1):r>-1&&(o=-1)}return r<0||j<0||o===0||o===1&&r===j-1&&r===t+1?"":A.slice(r,j)}function ck(...A){let e=-1,j;for(;++e<A.length;)ge(A[e]),A[e]&&(j=j===void 0?A[e]:j+"/"+A[e]);return j===void 0?".":uk(j)}function uk(A){ge(A);let e=A.codePointAt(0)===47,j=$k(A,!e);return j.length===0&&!e&&(j="."),j.length>0&&A.codePointAt(A.length-1)===47&&(j+="/"),e?"/"+j:j}function $k(A,e){let j="",t=0,r=-1,o=0,n=-1,i,a;for(;++n<=A.length;){if(n<A.length)i=A.codePointAt(n);else{if(i===47)break;i=47}if(i===47){if(!(r===n-1||o===1))if(r!==n-1&&o===2){if(j.length<2||t!==2||j.codePointAt(j.length-1)!==46||j.codePointAt(j.length-2)!==46){if(j.length>2){if(a=j.lastIndexOf("/"),a!==j.length-1){a<0?(j="",t=0):(j=j.slice(0,a),t=j.length-1-j.lastIndexOf("/")),r=n,o=0;continue}}else if(j.length>0){j="",t=0,r=n,o=0;continue}}e&&(j=j.length>0?j+"/..":"..",t=2)}else j.length>0?j+="/"+A.slice(r+1,n):j=A.slice(r+1,n),t=n-r-1;r=n,o=0}else i===46&&o>-1?o++:o=-1}return j}function ge(A){if(typeof A!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(A))}var $a={cwd:dk};function dk(){return"/"}function Hj(A){return!!(A!==null&&typeof A=="object"&&"href"in A&&A.href&&"protocol"in A&&A.protocol&&A.auth===void 0)}function da(A){if(typeof A=="string")A=new URL(A);else if(!Hj(A)){let e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+A+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(A.protocol!=="file:"){let e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return Ek(A)}function Ek(A){if(A.hostname!==""){let t=new TypeError('File URL host must be "localhost" or empty on darwin');throw t.code="ERR_INVALID_FILE_URL_HOST",t}let e=A.pathname,j=-1;for(;++j<e.length;)if(e.codePointAt(j)===37&&e.codePointAt(j+1)===50){let t=e.codePointAt(j+2);if(t===70||t===102){let r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}var Ur=["history","path","basename","stem","extname","dirname"],he=class{constructor(e){let j;e?Hj(e)?j={path:e}:typeof e=="string"||Bk(e)?j={value:e}:j=e:j={},this.cwd="cwd"in j?"":$a.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let t=-1;for(;++t<Ur.length;){let o=Ur[t];o in j&&j[o]!==void 0&&j[o]!==null&&(this[o]=o==="history"?[...j[o]]:j[o])}let r;for(r in j)Ur.includes(r)||(this[r]=j[r])}get basename(){return typeof this.path=="string"?qA.basename(this.path):void 0}set basename(e){Xr(e,"basename"),Vr(e,"basename"),this.path=qA.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?qA.dirname(this.path):void 0}set dirname(e){Ea(this.basename,"dirname"),this.path=qA.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?qA.extname(this.path):void 0}set extname(e){if(Vr(e,"extname"),Ea(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=qA.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Hj(e)&&(e=da(e)),Xr(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?qA.basename(this.path,this.extname):void 0}set stem(e){Xr(e,"stem"),Vr(e,"stem"),this.path=qA.join(this.dirname||"",e+(this.extname||""))}fail(e,j,t){let r=this.message(e,j,t);throw r.fatal=!0,r}info(e,j,t){let r=this.message(e,j,t);return r.fatal=void 0,r}message(e,j,t){let r=new EA(e,j,t);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}};function Vr(A,e){if(A&&A.includes(qA.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+qA.sep+"`")}function Xr(A,e){if(!A)throw new Error("`"+e+"` cannot be empty")}function Ea(A,e){if(!A)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Bk(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}function Ba(A,e,j,t){let r=fi(A,e,j,"duplicate",{enterIsolation:!1,preferredName:t,insertionIndex:A.tree.root.children.findIndex(o=>o.id===e.id)+1});A.stores.persistedUserDefaults.newContentAsDraft&&r.set({isDraft:!0,duplicatedFrom:bo(r.duplicatedFrom,e.id)}),A.stores.scopeStore.select(r.id,{keepHistory:!1})}async function Z0(A,e){let j=new Map,t=new Set(A.stores.scopeStore.getDesignPageNodes().map(a=>a.resolveValue("name")).filter(IA)),r=ni(e.resolveValue("name")??"Design",t),o=e.isLoaded()?e:await e.load();if(!o)return;let n=o.clone({name:r,children:[]});j.set(o.id,n.id);let i=[];for(let a of o.children){let s=mi(a,new Map,new Map,j,!1);i.push(s),j.set(a.id,s.id),n.addChild(s)}A.tree.insertNode(n,void 0,A.tree.root.children.findIndex(a=>a.id===e.id)+1);for(let a of i)Bi(A.tree,a,j,!1);return DA("design_page_create",{pageId:n.id,source:"duplicate"}),n}function pa(A,e){let[j,...t]=e.stores.selectionStore.ids;if(!j||t.length)return null;let r=e.tree,o=r.getNode(j),n=!1;for(;!n&&o&&(n=ce(r,o,A,e.stores.scopeStore.active.id,pA),!n);)o=r.getParent(o.id);return o}var sj=".tsx";var pk=["arguments","await","break","case","catch","class","const","continue","debugger","default","delete","do","else","enum","eval","export","extends","false","finally","for","function","if","implements","import","in","instanceof","interface","let","new","null","package","private","protected","public","return","static","super","switch","this","throw","true","try","typeof","var","void","while","with","yield","Infinity","NaN","document","undefined","window"],mk=["toolbar"],fk=/^[$A-Z_a-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7C6\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB67\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10140}-\u{10174}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{1031F}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{103A0}-\u{103C3}\u{103C8}-\u{103CF}\u{103D1}-\u{103D5}\u{10400}-\u{1049D}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10860}-\u{10876}\u{10880}-\u{1089E}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{10900}-\u{10915}\u{10920}-\u{10939}\u{10980}-\u{109B7}\u{109BE}\u{109BF}\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A60}-\u{10A7C}\u{10A80}-\u{10A9C}\u{10AC0}-\u{10AC7}\u{10AC9}-\u{10AE4}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B60}-\u{10B72}\u{10B80}-\u{10B91}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10D00}-\u{10D23}\u{10F00}-\u{10F1C}\u{10F27}\u{10F30}-\u{10F45}\u{10FE0}-\u{10FF6}\u{11003}-\u{11037}\u{11083}-\u{110AF}\u{110D0}-\u{110E8}\u{11103}-\u{11126}\u{11144}\u{11150}-\u{11172}\u{11176}\u{11183}-\u{111B2}\u{111C1}-\u{111C4}\u{111DA}\u{111DC}\u{11200}-\u{11211}\u{11213}-\u{1122B}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A8}\u{112B0}-\u{112DE}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}\u{11350}\u{1135D}-\u{11361}\u{11400}-\u{11434}\u{11447}-\u{1144A}\u{1145F}\u{11480}-\u{114AF}\u{114C4}\u{114C5}\u{114C7}\u{11580}-\u{115AE}\u{115D8}-\u{115DB}\u{11600}-\u{1162F}\u{11644}\u{11680}-\u{116AA}\u{116B8}\u{11700}-\u{1171A}\u{11800}-\u{1182B}\u{118A0}-\u{118DF}\u{118FF}\u{119A0}-\u{119A7}\u{119AA}-\u{119D0}\u{119E1}\u{119E3}\u{11A00}\u{11A0B}-\u{11A32}\u{11A3A}\u{11A50}\u{11A5C}-\u{11A89}\u{11A9D}\u{11AC0}-\u{11AF8}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2E}\u{11C40}\u{11C72}-\u{11C8F}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D89}\u{11D98}\u{11EE0}-\u{11EF2}\u{12000}-\u{12399}\u{12400}-\u{1246E}\u{12480}-\u{12543}\u{13000}-\u{1342E}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16AD0}-\u{16AED}\u{16B00}-\u{16B2F}\u{16B40}-\u{16B43}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E7F}\u{16F00}-\u{16F4A}\u{16F50}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{17000}-\u{187F7}\u{18800}-\u{18AF2}\u{1B000}-\u{1B11E}\u{1B150}-\u{1B152}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6C0}\u{1D6C2}-\u{1D6DA}\u{1D6DC}-\u{1D6FA}\u{1D6FC}-\u{1D714}\u{1D716}-\u{1D734}\u{1D736}-\u{1D74E}\u{1D750}-\u{1D76E}\u{1D770}-\u{1D788}\u{1D78A}-\u{1D7A8}\u{1D7AA}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E14E}\u{1E2C0}-\u{1E2EB}\u{1E800}-\u{1E8C4}\u{1E900}-\u{1E943}\u{1E94B}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{20000}-\u{2A6D6}\u{2A700}-\u{2B734}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}]+/u,Gk=/[\0-#%-/:-@[-^`{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0488\u0489\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08BE-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D04\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1ABE-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u200C\u200E-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20DD-\u20E0\u20E2-\u20E4\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u220B\u220D-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31BB-\u31EF\u3200-\u33FF\u4DB6-\u4DFF\u9FF0-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA670-\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7C7-\uA7F6\uA828-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB68-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF\u{1000C}\u{10027}\u{1003B}\u{1003E}\u{1004E}\u{1004F}\u{1005E}-\u{1007F}\u{100FB}-\u{1013F}\u{10175}-\u{101FC}\u{101FE}-\u{1027F}\u{1029D}-\u{1029F}\u{102D1}-\u{102DF}\u{102E1}-\u{102FF}\u{10320}-\u{1032C}\u{1034B}-\u{1034F}\u{1037B}-\u{1037F}\u{1039E}\u{1039F}\u{103C4}-\u{103C7}\u{103D0}\u{103D6}-\u{103FF}\u{1049E}\u{1049F}\u{104AA}-\u{104AF}\u{104D4}-\u{104D7}\u{104FC}-\u{104FF}\u{10528}-\u{1052F}\u{10564}-\u{105FF}\u{10737}-\u{1073F}\u{10756}-\u{1075F}\u{10768}-\u{107FF}\u{10806}\u{10807}\u{10809}\u{10836}\u{10839}-\u{1083B}\u{1083D}\u{1083E}\u{10856}-\u{1085F}\u{10877}-\u{1087F}\u{1089F}-\u{108DF}\u{108F3}\u{108F6}-\u{108FF}\u{10916}-\u{1091F}\u{1093A}-\u{1097F}\u{109B8}-\u{109BD}\u{109C0}-\u{109FF}\u{10A04}\u{10A07}-\u{10A0B}\u{10A14}\u{10A18}\u{10A36}\u{10A37}\u{10A3B}-\u{10A3E}\u{10A40}-\u{10A5F}\u{10A7D}-\u{10A7F}\u{10A9D}-\u{10ABF}\u{10AC8}\u{10AE7}-\u{10AFF}\u{10B36}-\u{10B3F}\u{10B56}-\u{10B5F}\u{10B73}-\u{10B7F}\u{10B92}-\u{10BFF}\u{10C49}-\u{10C7F}\u{10CB3}-\u{10CBF}\u{10CF3}-\u{10CFF}\u{10D28}-\u{10D2F}\u{10D3A}-\u{10EFF}\u{10F1D}-\u{10F26}\u{10F28}-\u{10F2F}\u{10F51}-\u{10FDF}\u{10FF7}-\u{10FFF}\u{11047}-\u{11065}\u{11070}-\u{1107E}\u{110BB}-\u{110CF}\u{110E9}-\u{110EF}\u{110FA}-\u{110FF}\u{11135}\u{11140}-\u{11143}\u{11147}-\u{1114F}\u{11174}\u{11175}\u{11177}-\u{1117F}\u{111C5}-\u{111C8}\u{111CD}-\u{111CF}\u{111DB}\u{111DD}-\u{111FF}\u{11212}\u{11238}-\u{1123D}\u{1123F}-\u{1127F}\u{11287}\u{11289}\u{1128E}\u{1129E}\u{112A9}-\u{112AF}\u{112EB}-\u{112EF}\u{112FA}-\u{112FF}\u{11304}\u{1130D}\u{1130E}\u{11311}\u{11312}\u{11329}\u{11331}\u{11334}\u{1133A}\u{11345}\u{11346}\u{11349}\u{1134A}\u{1134E}\u{1134F}\u{11351}-\u{11356}\u{11358}-\u{1135C}\u{11364}\u{11365}\u{1136D}-\u{1136F}\u{11375}-\u{113FF}\u{1144B}-\u{1144F}\u{1145A}-\u{1145D}\u{11460}-\u{1147F}\u{114C6}\u{114C8}-\u{114CF}\u{114DA}-\u{1157F}\u{115B6}\u{115B7}\u{115C1}-\u{115D7}\u{115DE}-\u{115FF}\u{11641}-\u{11643}\u{11645}-\u{1164F}\u{1165A}-\u{1167F}\u{116B9}-\u{116BF}\u{116CA}-\u{116FF}\u{1171B}\u{1171C}\u{1172C}-\u{1172F}\u{1173A}-\u{117FF}\u{1183B}-\u{1189F}\u{118EA}-\u{118FE}\u{11900}-\u{1199F}\u{119A8}\u{119A9}\u{119D8}\u{119D9}\u{119E2}\u{119E5}-\u{119FF}\u{11A3F}-\u{11A46}\u{11A48}-\u{11A4F}\u{11A9A}-\u{11A9C}\u{11A9E}-\u{11ABF}\u{11AF9}-\u{11BFF}\u{11C09}\u{11C37}\u{11C41}-\u{11C4F}\u{11C5A}-\u{11C71}\u{11C90}\u{11C91}\u{11CA8}\u{11CB7}-\u{11CFF}\u{11D07}\u{11D0A}\u{11D37}-\u{11D39}\u{11D3B}\u{11D3E}\u{11D48}-\u{11D4F}\u{11D5A}-\u{11D5F}\u{11D66}\u{11D69}\u{11D8F}\u{11D92}\u{11D99}-\u{11D9F}\u{11DAA}-\u{11EDF}\u{11EF7}-\u{11FFF}\u{1239A}-\u{123FF}\u{1246F}-\u{1247F}\u{12544}-\u{12FFF}\u{1342F}-\u{143FF}\u{14647}-\u{167FF}\u{16A39}-\u{16A3F}\u{16A5F}\u{16A6A}-\u{16ACF}\u{16AEE}\u{16AEF}\u{16AF5}-\u{16AFF}\u{16B37}-\u{16B3F}\u{16B44}-\u{16B4F}\u{16B5A}-\u{16B62}\u{16B78}-\u{16B7C}\u{16B90}-\u{16E3F}\u{16E80}-\u{16EFF}\u{16F4B}-\u{16F4E}\u{16F88}-\u{16F8E}\u{16FA0}-\u{16FDF}\u{16FE2}\u{16FE4}-\u{16FFF}\u{187F8}-\u{187FF}\u{18AF3}-\u{1AFFF}\u{1B11F}-\u{1B14F}\u{1B153}-\u{1B163}\u{1B168}-\u{1B16F}\u{1B2FC}-\u{1BBFF}\u{1BC6B}-\u{1BC6F}\u{1BC7D}-\u{1BC7F}\u{1BC89}-\u{1BC8F}\u{1BC9A}-\u{1BC9C}\u{1BC9F}-\u{1D164}\u{1D16A}-\u{1D16C}\u{1D173}-\u{1D17A}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D241}\u{1D245}-\u{1D3FF}\u{1D455}\u{1D49D}\u{1D4A0}\u{1D4A1}\u{1D4A3}\u{1D4A4}\u{1D4A7}\u{1D4A8}\u{1D4AD}\u{1D4BA}\u{1D4BC}\u{1D4C4}\u{1D506}\u{1D50B}\u{1D50C}\u{1D515}\u{1D51D}\u{1D53A}\u{1D53F}\u{1D545}\u{1D547}-\u{1D549}\u{1D551}\u{1D6A6}\u{1D6A7}\u{1D6C1}\u{1D6DB}\u{1D6FB}\u{1D715}\u{1D735}\u{1D74F}\u{1D76F}\u{1D789}\u{1D7A9}\u{1D7C3}\u{1D7CC}\u{1D7CD}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA9A}\u{1DAA0}\u{1DAB0}-\u{1DFFF}\u{1E007}\u{1E019}\u{1E01A}\u{1E022}\u{1E025}\u{1E02B}-\u{1E0FF}\u{1E12D}-\u{1E12F}\u{1E13E}\u{1E13F}\u{1E14A}-\u{1E14D}\u{1E14F}-\u{1E2BF}\u{1E2FA}-\u{1E7FF}\u{1E8C5}-\u{1E8CF}\u{1E8D7}-\u{1E8FF}\u{1E94C}-\u{1E94F}\u{1E95A}-\u{1EDFF}\u{1EE04}\u{1EE20}\u{1EE23}\u{1EE25}\u{1EE26}\u{1EE28}\u{1EE33}\u{1EE38}\u{1EE3A}\u{1EE3C}-\u{1EE41}\u{1EE43}-\u{1EE46}\u{1EE48}\u{1EE4A}\u{1EE4C}\u{1EE50}\u{1EE53}\u{1EE55}\u{1EE56}\u{1EE58}\u{1EE5A}\u{1EE5C}\u{1EE5E}\u{1EE60}\u{1EE63}\u{1EE65}\u{1EE66}\u{1EE6B}\u{1EE73}\u{1EE78}\u{1EE7D}\u{1EE7F}\u{1EE8A}\u{1EE9C}-\u{1EEA0}\u{1EEA4}\u{1EEAA}\u{1EEBC}-\u{1FFFF}\u{2A6D7}-\u{2A6FF}\u{2B735}-\u{2B73F}\u{2B81E}\u{2B81F}\u{2CEA2}-\u{2CEAF}\u{2EBE1}-\u{2F7FF}\u{2FA1E}-\u{E00FF}\u{E01F0}-\u{10FFFF}]+/gu,Fk=/^\.+$/u,np=(A,e)=>{if(A===null||A.trim().length===0)return null;let j=1,t=A.replace(/_\d+$/u,""),r=A;for(;e.includes(r)||Rk(r);)r=`${t}_${j}`,j++;return r},Rk=A=>pk.includes(A)||window.hasOwnProperty(A)&&!mk.includes(A);function zr(A,e){if(!e)return null;let j=e.trim();if(j.length===0)return null;let t=A==="selector"?"_":"$";if(A==="directory"){if(Fk.test(j))return null}else fk.test(j)||(j=t+j);return j=j.replace(Gk,"_"),j=j.replace(/_+/gu,"_"),j=j.replace(/^\$_/u,t),j}function Qj(A){return zr("variable",A)}function op(A){let e=zr("selector",A);return e&&(e=e.replace(/^\$/gu,"_")),e}function ma(A){return zr("directory",A)}function fa(A){let j=Qj(A)||"MyComponent",t=j+sj,r=Ik(j);return{name:t,content:r}}function Ik(A){return`// Get Started: https://www.framer.com/developers

import { addPropertyControls, ControlType } from "framer"
import { motion } from "framer-motion"

/**
 * @framerSupportedLayoutWidth auto
 * @framerSupportedLayoutHeight auto
 */
export default function ${A}(props) {
    const { tint } = props

    return (
        <motion.div
            style={{
                margin: 50,
                width: 100,
                height: 100,
                borderRadius: 25,
                backgroundColor: tint,
            }}
            animate={{ scale: 1.5 }}
            whileHover={{ rotate: 90 }}
        />
    )
}

addPropertyControls(${A}, {
    tint: {
        title: "Tint",
        type: ControlType.Color,
        defaultValue: "#09F",
    },
})
`}function gk(A){return`import { forwardRef, type ComponentType } from "react"
import { createStore } from "https://framer.com/m/framer/store.js@^1.0.0"
import { randomColor } from "https://framer.com/m/framer/utils.js@^0.9.0"

// Learn more: https://www.framer.com/developers/overrides/

const useStore = createStore({
    background: "#0099FF",
})

export function withRotate(Component): ComponentType {
    return forwardRef((props, ref) => {
        return (
            <Component
                ref={ref}
                {...props}
                animate={{ rotate: 90 }}
                transition={{ duration: 2 }}
            />
        )
    })
}

export function withHover(Component): ComponentType {
    return forwardRef((props, ref) => {
        return <Component ref={ref} {...props} whileHover={{ scale: 1.05 }} />
    })
}

export function withRandomColor(Component): ComponentType {
    return forwardRef((props, ref) => {
        const [store, setStore] = useStore()

        return (
            <Component
                ref={ref}
                {...props}
                animate={{
                    background: store.background,
                }}
                onClick={() => {
                    setStore({ background: randomColor() })
                }}
            />
        )
    })
}
`}function Ga(A){let j=Qj(A)||"MyOverrides",t=j+sj,r=gk(j);return{name:t,content:r}}function be(A){return A.endsWith(".json")?!0:/\.[tj]sx?$/u.test(A)}var hk=/^(?:[\w-]+\/)*[\w-]+(?:\.[\w-]+)*$/u;function fp(A){let{path:e}=Fa(A);return hk.test(e)}function bk(A,e){if(be(A))return A;let[j,t]=Ze(e);return t&&(t=`.${t}`),(!t||!be(t))&&(t=sj),A+t}function Gp(A){return be(A)||(A+=".tsx"),A}function _k(A){let e=A.lastIndexOf("/");return e<0?"":A.slice(0,e)}function Sk(A){let e=A.lastIndexOf("/")+1;return A.slice(e)}function Wr(...A){let e="";return A.forEach(j=>{for(;j.startsWith("/");)j=j.slice(1);for(;j.endsWith("/");)j=j.slice(0,-1);j!==""&&(e!==""&&(e+="/"),e+=j)}),e}function Fa(A,e=!0){A=A.trim();let[j,t]=Ze(Sk(A));t&&(t=`.${t}`);let r=_k(A).split("/").map(i=>ma(i)).filter(i=>!!i).join("/"),o=Qj(j)||"MyComponent";return(!be(t)||t===sj)&&e&&(o=ro(o)),{path:Wr(r,o+t),dirName:r,name:o,extension:t}}function Fp(A,e="component",j=!0){A=A.trim();let{dirName:t,name:r,extension:o}=Fa(A,j);if(be(o)&&o!==sj){let a=r+o;return{path:Wr(t,a),content:""}}let n=e==="component"?fa(r):Ga(r),i=bk(r+o,n.name);return{path:Wr(t,i),content:n.content}}function Ra(A,e){if(!A.has(e))return e;let j=1,t,[r,o]=Ze(e);o&&(o=`.${o}`);do t=r+"_"+String(j++)+o;while(A.has(t));return t}function Rp(A){return A==="typescript"||A==="javascript"}var Uj,_e,Vj=class{constructor(e){this.limit=e;rj(this,Uj,0);rj(this,_e,[])}async run(e,j){if(GA(this,Uj)===this.limit){let t=new Promise(r=>{GA(this,_e).push(r)});j&&(t=Promise.race([t,yk(j)])),await t}ga(j),mr(this,Uj)._++;try{return await e()}finally{mr(this,Uj)._--,GA(this,_e).shift()?.()}}};Uj=new WeakMap,_e=new WeakMap;var Ia=new WeakMap;function yk(A){let e=Ia.get(A);return e||(ga(A),e=new Promise((j,t)=>{A.addEventListener("abort",()=>{t(A.reason)},{once:!0})}),Ia.set(A,e)),e}function ga(A){if(A?.aborted)throw A.reason}function Se(A){let e=new Set;if(!A)return e;if(SA(A)&&po(A)){let j=ha(A.layoutTemplateIdentifier);j&&e.add(j)}for(let{node:j,skipChildren:t}of A.walkWithSkipChildren()){if(!mA(j))continue;if(wA(j)){t();continue}let r=ha(j.codeComponentIdentifier);r&&e.add(r)}return e}function ha(A){let e=rA(A);if(!(!e||!CA(e)))return X({type:e.type,name:e.localIdName})}var ba;(function(A){A[A.Static=1]="Static",A[A.Dynamic=2]="Dynamic",A[A.ImportMeta=3]="ImportMeta",A[A.StaticSourcePhase=4]="StaticSourcePhase",A[A.DynamicSourcePhase=5]="DynamicSourcePhase"})(ba||(ba={}));var Mk=new Uint8Array(new Uint16Array([1]).buffer)[0]===1;function Zr(A,e="@"){if(!W)return A6.then(()=>Zr(A));let j=A.length+1,t=(W.__heap_base.value||W.__heap_base)+4*j-W.memory.buffer.byteLength;t>0&&W.memory.grow(Math.ceil(t/65536));let r=W.sa(j-1);if((Mk?Dk:Ck)(A,new Uint16Array(W.memory.buffer,r,j)),!W.parse())throw Object.assign(new Error(`Parse error ${e}:${A.slice(0,W.e()).split(`
`).length}:${W.e()-A.lastIndexOf(`
`,W.e()-1)}`),{idx:W.e()});let o=[],n=[];for(;W.ri();){let a=W.is(),s=W.ie(),l=W.it(),k=W.ai(),c=W.id(),u=W.ss(),$=W.se(),E;W.ip()&&(E=i(A.slice(c===-1?a-1:a,c===-1?s+1:s))),o.push({n:E,t:l,s:a,e:s,ss:u,se:$,d:c,a:k})}for(;W.re();){let a=W.es(),s=W.ee(),l=W.els(),k=W.ele(),c=A.slice(a,s),u=c[0],$=l<0?void 0:A.slice(l,k),E=$?$[0]:"";n.push({s:a,e:s,ls:l,le:k,n:u==='"'||u==="'"?i(c):c,ln:E==='"'||E==="'"?i($):$})}function i(a){try{return(0,eval)(a)}catch{}}return[o,n,!!W.f(),!!W.ms()]}function Ck(A,e){let j=A.length,t=0;for(;t<j;){let r=A.charCodeAt(t);e[t++]=(255&r)<<8|r>>>8}}function Dk(A,e){let j=A.length,t=0;for(;t<j;)e[t]=A.charCodeAt(t++)}var W,A6=WebAssembly.compile((Yr="AGFzbQEAAAABKwhgAX8Bf2AEf39/fwBgAAF/YAAAYAF/AGADf39/AX9gAn9/AX9gA39/fwADMTAAAQECAgICAgICAgICAgICAgICAgIAAwMDBAQAAAUAAAAAAAMDAwAGAAAABwAGAgUEBQFwAQEBBQMBAAEGDwJ/AUHA8gALfwBBwPIACwd6FQZtZW1vcnkCAAJzYQAAAWUAAwJpcwAEAmllAAUCc3MABgJzZQAHAml0AAgCYWkACQJpZAAKAmlwAAsCZXMADAJlZQANA2VscwAOA2VsZQAPAnJpABACcmUAEQFmABICbXMAEwVwYXJzZQAUC19faGVhcF9iYXNlAwEKm0EwaAEBf0EAIAA2AoAKQQAoAtwJIgEgAEEBdGoiAEEAOwEAQQAgAEECaiIANgKECkEAIAA2AogKQQBBADYC4AlBAEEANgLwCUEAQQA2AugJQQBBADYC5AlBAEEANgL4CUEAQQA2AuwJIAEL0wEBA39BACgC8AkhBEEAQQAoAogKIgU2AvAJQQAgBDYC9AlBACAFQSRqNgKICiAEQSBqQeAJIAQbIAU2AgBBACgC1AkhBEEAKALQCSEGIAUgATYCACAFIAA2AgggBSACIAJBAmpBACAGIANGIgAbIAQgA0YiBBs2AgwgBSADNgIUIAVBADYCECAFIAI2AgQgBUEANgIgIAVBA0EBQQIgABsgBBs2AhwgBUEAKALQCSADRiICOgAYAkACQCACDQBBACgC1AkgA0cNAQtBAEEBOgCMCgsLXgEBf0EAKAL4CSIEQRBqQeQJIAQbQQAoAogKIgQ2AgBBACAENgL4CUEAIARBFGo2AogKQQBBAToAjAogBEEANgIQIAQgAzYCDCAEIAI2AgggBCABNgIEIAQgADYCAAsIAEEAKAKQCgsVAEEAKALoCSgCAEEAKALcCWtBAXULHgEBf0EAKALoCSgCBCIAQQAoAtwJa0EBdUF/IAAbCxUAQQAoAugJKAIIQQAoAtwJa0EBdQseAQF/QQAoAugJKAIMIgBBACgC3AlrQQF1QX8gABsLCwBBACgC6AkoAhwLHgEBf0EAKALoCSgCECIAQQAoAtwJa0EBdUF/IAAbCzsBAX8CQEEAKALoCSgCFCIAQQAoAtAJRw0AQX8PCwJAIABBACgC1AlHDQBBfg8LIABBACgC3AlrQQF1CwsAQQAoAugJLQAYCxUAQQAoAuwJKAIAQQAoAtwJa0EBdQsVAEEAKALsCSgCBEEAKALcCWtBAXULHgEBf0EAKALsCSgCCCIAQQAoAtwJa0EBdUF/IAAbCx4BAX9BACgC7AkoAgwiAEEAKALcCWtBAXVBfyAAGwslAQF/QQBBACgC6AkiAEEgakHgCSAAGygCACIANgLoCSAAQQBHCyUBAX9BAEEAKALsCSIAQRBqQeQJIAAbKAIAIgA2AuwJIABBAEcLCABBAC0AlAoLCABBAC0AjAoL3Q0BBX8jAEGA0ABrIgAkAEEAQQE6AJQKQQBBACgC2Ak2ApwKQQBBACgC3AlBfmoiATYCsApBACABQQAoAoAKQQF0aiICNgK0CkEAQQA6AIwKQQBBADsBlgpBAEEAOwGYCkEAQQA6AKAKQQBBADYCkApBAEEAOgD8CUEAIABBgBBqNgKkCkEAIAA2AqgKQQBBADoArAoCQAJAAkACQANAQQAgAUECaiIDNgKwCiABIAJPDQECQCADLwEAIgJBd2pBBUkNAAJAAkACQAJAAkAgAkGbf2oOBQEICAgCAAsgAkEgRg0EIAJBL0YNAyACQTtGDQIMBwtBAC8BmAoNASADEBVFDQEgAUEEakGCCEEKEC8NARAWQQAtAJQKDQFBAEEAKAKwCiIBNgKcCgwHCyADEBVFDQAgAUEEakGMCEEKEC8NABAXC0EAQQAoArAKNgKcCgwBCwJAIAEvAQQiA0EqRg0AIANBL0cNBBAYDAELQQEQGQtBACgCtAohAkEAKAKwCiEBDAALC0EAIQIgAyEBQQAtAPwJDQIMAQtBACABNgKwCkEAQQA6AJQKCwNAQQAgAUECaiIDNgKwCgJAAkACQAJAAkACQAJAIAFBACgCtApPDQAgAy8BACICQXdqQQVJDQYCQAJAAkACQAJAAkACQAJAAkACQCACQWBqDgoQDwYPDw8PBQECAAsCQAJAAkACQCACQaB/ag4KCxISAxIBEhISAgALIAJBhX9qDgMFEQYJC0EALwGYCg0QIAMQFUUNECABQQRqQYIIQQoQLw0QEBYMEAsgAxAVRQ0PIAFBBGpBjAhBChAvDQ8QFwwPCyADEBVFDQ4gASkABELsgISDsI7AOVINDiABLwEMIgNBd2oiAUEXSw0MQQEgAXRBn4CABHFFDQwMDQtBAEEALwGYCiIBQQFqOwGYCkEAKAKkCiABQQN0aiIBQQE2AgAgAUEAKAKcCjYCBAwNC0EALwGYCiIDRQ0JQQAgA0F/aiIDOwGYCkEALwGWCiICRQ0MQQAoAqQKIANB//8DcUEDdGooAgBBBUcNDAJAIAJBAnRBACgCqApqQXxqKAIAIgMoAgQNACADQQAoApwKQQJqNgIEC0EAIAJBf2o7AZYKIAMgAUEEajYCDAwMCwJAQQAoApwKIgEvAQBBKUcNAEEAKALwCSIDRQ0AIAMoAgQgAUcNAEEAQQAoAvQJIgM2AvAJAkAgA0UNACADQQA2AiAMAQtBAEEANgLgCQtBAEEALwGYCiIDQQFqOwGYCkEAKAKkCiADQQN0aiIDQQZBAkEALQCsChs2AgAgAyABNgIEQQBBADoArAoMCwtBAC8BmAoiAUUNB0EAIAFBf2oiATsBmApBACgCpAogAUH//wNxQQN0aigCAEEERg0EDAoLQScQGgwJC0EiEBoMCAsgAkEvRw0HAkACQCABLwEEIgFBKkYNACABQS9HDQEQGAwKC0EBEBkMCQsCQAJAAkACQEEAKAKcCiIBLwEAIgMQG0UNAAJAAkAgA0FVag4EAAkBAwkLIAFBfmovAQBBK0YNAwwICyABQX5qLwEAQS1GDQIMBwsgA0EpRw0BQQAoAqQKQQAvAZgKIgJBA3RqKAIEEBxFDQIMBgsgAUF+ai8BAEFQakH//wNxQQpPDQULQQAvAZgKIQILAkACQCACQf//A3EiAkUNACADQeYARw0AQQAoAqQKIAJBf2pBA3RqIgQoAgBBAUcNACABQX5qLwEAQe8ARw0BIAQoAgRBlghBAxAdRQ0BDAULIANB/QBHDQBBACgCpAogAkEDdGoiAigCBBAeDQQgAigCAEEGRg0ECyABEB8NAyADRQ0DIANBL0ZBAC0AoApBAEdxDQMCQEEAKAL4CSICRQ0AIAEgAigCAEkNACABIAIoAgRNDQQLIAFBfmohAUEAKALcCSECAkADQCABQQJqIgQgAk0NAUEAIAE2ApwKIAEvAQAhAyABQX5qIgQhASADECBFDQALIARBAmohBAsCQCADQf//A3EQIUUNACAEQX5qIQECQANAIAFBAmoiAyACTQ0BQQAgATYCnAogAS8BACEDIAFBfmoiBCEBIAMQIQ0ACyAEQQJqIQMLIAMQIg0EC0EAQQE6AKAKDAcLQQAoAqQKQQAvAZgKIgFBA3QiA2pBACgCnAo2AgRBACABQQFqOwGYCkEAKAKkCiADakEDNgIACxAjDAULQQAtAPwJQQAvAZYKQQAvAZgKcnJFIQIMBwsQJEEAQQA6AKAKDAMLECVBACECDAULIANBoAFHDQELQQBBAToArAoLQQBBACgCsAo2ApwKC0EAKAKwCiEBDAALCyAAQYDQAGokACACCxoAAkBBACgC3AkgAEcNAEEBDwsgAEF+ahAmC/4KAQZ/QQBBACgCsAoiAEEMaiIBNgKwCkEAKAL4CSECQQEQKSEDAkACQAJAAkACQAJAAkACQAJAQQAoArAKIgQgAUcNACADEChFDQELAkACQAJAAkACQAJAAkAgA0EqRg0AIANB+wBHDQFBACAEQQJqNgKwCkEBECkhA0EAKAKwCiEEA0ACQAJAIANB//8DcSIDQSJGDQAgA0EnRg0AIAMQLBpBACgCsAohAwwBCyADEBpBAEEAKAKwCkECaiIDNgKwCgtBARApGgJAIAQgAxAtIgNBLEcNAEEAQQAoArAKQQJqNgKwCkEBECkhAwsgA0H9AEYNA0EAKAKwCiIFIARGDQ8gBSEEIAVBACgCtApNDQAMDwsLQQAgBEECajYCsApBARApGkEAKAKwCiIDIAMQLRoMAgtBAEEAOgCUCgJAAkACQAJAAkACQCADQZ9/ag4MAgsEAQsDCwsLCwsFAAsgA0H2AEYNBAwKC0EAIARBDmoiAzYCsAoCQAJAAkBBARApQZ9/ag4GABICEhIBEgtBACgCsAoiBSkAAkLzgOSD4I3AMVINESAFLwEKECFFDRFBACAFQQpqNgKwCkEAECkaC0EAKAKwCiIFQQJqQbIIQQ4QLw0QIAUvARAiAkF3aiIBQRdLDQ1BASABdEGfgIAEcUUNDQwOC0EAKAKwCiIFKQACQuyAhIOwjsA5Ug0PIAUvAQoiAkF3aiIBQRdNDQYMCgtBACAEQQpqNgKwCkEAECkaQQAoArAKIQQLQQAgBEEQajYCsAoCQEEBECkiBEEqRw0AQQBBACgCsApBAmo2ArAKQQEQKSEEC0EAKAKwCiEDIAQQLBogA0EAKAKwCiIEIAMgBBACQQBBACgCsApBfmo2ArAKDwsCQCAEKQACQuyAhIOwjsA5Ug0AIAQvAQoQIEUNAEEAIARBCmo2ArAKQQEQKSEEQQAoArAKIQMgBBAsGiADQQAoArAKIgQgAyAEEAJBAEEAKAKwCkF+ajYCsAoPC0EAIARBBGoiBDYCsAoLQQAgBEEGajYCsApBAEEAOgCUCkEBECkhBEEAKAKwCiEDIAQQLCEEQQAoArAKIQIgBEHf/wNxIgFB2wBHDQNBACACQQJqNgKwCkEBECkhBUEAKAKwCiEDQQAhBAwEC0EAQQE6AIwKQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0AQQAgA0EIajYCsAogAEEBEClBABArIAJBEGpB5AkgAhshAwNAIAMoAgAiA0UNBSADQgA3AgggA0EQaiEDDAALC0EAIANBfmo2ArAKDAMLQQEgAXRBn4CABHFFDQMMBAtBASEECwNAAkACQCAEDgIAAQELIAVB//8DcRAsGkEBIQQMAQsCQAJAQQAoArAKIgQgA0YNACADIAQgAyAEEAJBARApIQQCQCABQdsARw0AIARBIHJB/QBGDQQLQQAoArAKIQMCQCAEQSxHDQBBACADQQJqNgKwCkEBECkhBUEAKAKwCiEDIAVBIHJB+wBHDQILQQAgA0F+ajYCsAoLIAFB2wBHDQJBACACQX5qNgKwCg8LQQAhBAwACwsPCyACQaABRg0AIAJB+wBHDQQLQQAgBUEKajYCsApBARApIgVB+wBGDQMMAgsCQCACQVhqDgMBAwEACyACQaABRw0CC0EAIAVBEGo2ArAKAkBBARApIgVBKkcNAEEAQQAoArAKQQJqNgKwCkEBECkhBQsgBUEoRg0BC0EAKAKwCiEBIAUQLBpBACgCsAoiBSABTQ0AIAQgAyABIAUQAkEAQQAoArAKQX5qNgKwCg8LIAQgA0EAQQAQAkEAIARBDGo2ArAKDwsQJQvcCAEGf0EAIQBBAEEAKAKwCiIBQQxqIgI2ArAKQQEQKSEDQQAoArAKIQQCQAJAAkACQAJAAkACQAJAIANBLkcNAEEAIARBAmo2ArAKAkBBARApIgNB8wBGDQAgA0HtAEcNB0EAKAKwCiIDQQJqQZwIQQYQLw0HAkBBACgCnAoiBBAqDQAgBC8BAEEuRg0ICyABIAEgA0EIakEAKALUCRABDwtBACgCsAoiA0ECakGiCEEKEC8NBgJAQQAoApwKIgQQKg0AIAQvAQBBLkYNBwsgA0EMaiEDDAELIANB8wBHDQEgBCACTQ0BQQYhAEEAIQIgBEECakGiCEEKEC8NAiAEQQxqIQMCQCAELwEMIgVBd2oiBEEXSw0AQQEgBHRBn4CABHENAQsgBUGgAUcNAgtBACADNgKwCkEBIQBBARApIQMLAkACQAJAAkAgA0H7AEYNACADQShHDQFBACgCpApBAC8BmAoiA0EDdGoiBEEAKAKwCjYCBEEAIANBAWo7AZgKIARBBTYCAEEAKAKcCi8BAEEuRg0HQQBBACgCsAoiBEECajYCsApBARApIQMgAUEAKAKwCkEAIAQQAQJAAkAgAA0AQQAoAvAJIQQMAQtBACgC8AkiBEEFNgIcC0EAQQAvAZYKIgBBAWo7AZYKQQAoAqgKIABBAnRqIAQ2AgACQCADQSJGDQAgA0EnRg0AQQBBACgCsApBfmo2ArAKDwsgAxAaQQBBACgCsApBAmoiAzYCsAoCQAJAAkBBARApQVdqDgQBAgIAAgtBAEEAKAKwCkECajYCsApBARApGkEAKALwCSIEIAM2AgQgBEEBOgAYIARBACgCsAoiAzYCEEEAIANBfmo2ArAKDwtBACgC8AkiBCADNgIEIARBAToAGEEAQQAvAZgKQX9qOwGYCiAEQQAoArAKQQJqNgIMQQBBAC8BlgpBf2o7AZYKDwtBAEEAKAKwCkF+ajYCsAoPCyAADQJBACgCsAohA0EALwGYCg0BA0ACQAJAAkAgA0EAKAK0Ck8NAEEBECkiA0EiRg0BIANBJ0YNASADQf0ARw0CQQBBACgCsApBAmo2ArAKC0EBECkhBEEAKAKwCiEDAkAgBEHmAEcNACADQQJqQawIQQYQLw0JC0EAIANBCGo2ArAKAkBBARApIgNBIkYNACADQSdHDQkLIAEgA0EAECsPCyADEBoLQQBBACgCsApBAmoiAzYCsAoMAAsLIAANAUEGIQBBACECAkAgA0FZag4EBAMDBAALIANBIkYNAwwCC0EAIANBfmo2ArAKDwtBDCEAQQEhAgtBACgCsAoiAyABIABBAXRqRw0AQQAgA0F+ajYCsAoPC0EALwGYCg0CQQAoArAKIQNBACgCtAohAANAIAMgAE8NAQJAAkAgAy8BACIEQSdGDQAgBEEiRw0BCyABIAQgAhArDwtBACADQQJqIgM2ArAKDAALCxAlCw8LQQBBACgCsApBfmo2ArAKC0cBA39BACgCsApBAmohAEEAKAK0CiEBAkADQCAAIgJBfmogAU8NASACQQJqIQAgAi8BAEF2ag4EAQAAAQALC0EAIAI2ArAKC5gBAQN/QQBBACgCsAoiAUECajYCsAogAUEGaiEBQQAoArQKIQIDQAJAAkACQCABQXxqIAJPDQAgAUF+ai8BACEDAkACQCAADQAgA0EqRg0BIANBdmoOBAIEBAIECyADQSpHDQMLIAEvAQBBL0cNAkEAIAFBfmo2ArAKDAELIAFBfmohAQtBACABNgKwCg8LIAFBAmohAQwACwuIAQEEf0EAKAKwCiEBQQAoArQKIQICQAJAA0AgASIDQQJqIQEgAyACTw0BIAEvAQAiBCAARg0CAkAgBEHcAEYNACAEQXZqDgQCAQECAQsgA0EEaiEBIAMvAQRBDUcNACADQQZqIAEgAy8BBkEKRhshAQwACwtBACABNgKwChAlDwtBACABNgKwCgtsAQF/AkACQCAAQV9qIgFBBUsNAEEBIAF0QTFxDQELIABBRmpB//8DcUEGSQ0AIABBKUcgAEFYakH//wNxQQdJcQ0AAkAgAEGlf2oOBAEAAAEACyAAQf0ARyAAQYV/akH//wNxQQRJcQ8LQQELLgEBf0EBIQECQCAAQaYJQQUQHQ0AIABBlghBAxAdDQAgAEGwCUECEB0hAQsgAQtGAQN/QQAhAwJAIAAgAkEBdCICayIEQQJqIgBBACgC3AkiBUkNACAAIAEgAhAvDQACQCAAIAVHDQBBAQ8LIAQQJiEDCyADC4MBAQJ/QQEhAQJAAkACQAJAAkACQCAALwEAIgJBRWoOBAUEBAEACwJAIAJBm39qDgQDBAQCAAsgAkEpRg0EIAJB+QBHDQMgAEF+akG8CUEGEB0PCyAAQX5qLwEAQT1GDwsgAEF+akG0CUEEEB0PCyAAQX5qQcgJQQMQHQ8LQQAhAQsgAQu0AwECf0EAIQECQAJAAkACQAJAAkACQAJAAkACQCAALwEAQZx/ag4UAAECCQkJCQMJCQQFCQkGCQcJCQgJCwJAAkAgAEF+ai8BAEGXf2oOBAAKCgEKCyAAQXxqQcoIQQIQHQ8LIABBfGpBzghBAxAdDwsCQAJAAkAgAEF+ai8BAEGNf2oOAwABAgoLAkAgAEF8ai8BACICQeEARg0AIAJB7ABHDQogAEF6akHlABAnDwsgAEF6akHjABAnDwsgAEF8akHUCEEEEB0PCyAAQXxqQdwIQQYQHQ8LIABBfmovAQBB7wBHDQYgAEF8ai8BAEHlAEcNBgJAIABBemovAQAiAkHwAEYNACACQeMARw0HIABBeGpB6AhBBhAdDwsgAEF4akH0CEECEB0PCyAAQX5qQfgIQQQQHQ8LQQEhASAAQX5qIgBB6QAQJw0EIABBgAlBBRAdDwsgAEF+akHkABAnDwsgAEF+akGKCUEHEB0PCyAAQX5qQZgJQQQQHQ8LAkAgAEF+ai8BACICQe8ARg0AIAJB5QBHDQEgAEF8akHuABAnDwsgAEF8akGgCUEDEB0hAQsgAQs0AQF/QQEhAQJAIABBd2pB//8DcUEFSQ0AIABBgAFyQaABRg0AIABBLkcgABAocSEBCyABCzABAX8CQAJAIABBd2oiAUEXSw0AQQEgAXRBjYCABHENAQsgAEGgAUYNAEEADwtBAQtOAQJ/QQAhAQJAAkAgAC8BACICQeUARg0AIAJB6wBHDQEgAEF+akH4CEEEEB0PCyAAQX5qLwEAQfUARw0AIABBfGpB3AhBBhAdIQELIAEL3gEBBH9BACgCsAohAEEAKAK0CiEBAkACQAJAA0AgACICQQJqIQAgAiABTw0BAkACQAJAIAAvAQAiA0Gkf2oOBQIDAwMBAAsgA0EkRw0CIAIvAQRB+wBHDQJBACACQQRqIgA2ArAKQQBBAC8BmAoiAkEBajsBmApBACgCpAogAkEDdGoiAkEENgIAIAIgADYCBA8LQQAgADYCsApBAEEALwGYCkF/aiIAOwGYCkEAKAKkCiAAQf//A3FBA3RqKAIAQQNHDQMMBAsgAkEEaiEADAALC0EAIAA2ArAKCxAlCwtwAQJ/AkACQANAQQBBACgCsAoiAEECaiIBNgKwCiAAQQAoArQKTw0BAkACQAJAIAEvAQAiAUGlf2oOAgECAAsCQCABQXZqDgQEAwMEAAsgAUEvRw0CDAQLEC4aDAELQQAgAEEEajYCsAoMAAsLECULCzUBAX9BAEEBOgD8CUEAKAKwCiEAQQBBACgCtApBAmo2ArAKQQAgAEEAKALcCWtBAXU2ApAKC0MBAn9BASEBAkAgAC8BACICQXdqQf//A3FBBUkNACACQYABckGgAUYNAEEAIQEgAhAoRQ0AIAJBLkcgABAqcg8LIAELPQECf0EAIQICQEEAKALcCSIDIABLDQAgAC8BACABRw0AAkAgAyAARw0AQQEPCyAAQX5qLwEAECAhAgsgAgtoAQJ/QQEhAQJAAkAgAEFfaiICQQVLDQBBASACdEExcQ0BCyAAQfj/A3FBKEYNACAAQUZqQf//A3FBBkkNAAJAIABBpX9qIgJBA0sNACACQQFHDQELIABBhX9qQf//A3FBBEkhAQsgAQucAQEDf0EAKAKwCiEBAkADQAJAAkAgAS8BACICQS9HDQACQCABLwECIgFBKkYNACABQS9HDQQQGAwCCyAAEBkMAQsCQAJAIABFDQAgAkF3aiIBQRdLDQFBASABdEGfgIAEcUUNAQwCCyACECFFDQMMAQsgAkGgAUcNAgtBAEEAKAKwCiIDQQJqIgE2ArAKIANBACgCtApJDQALCyACCzEBAX9BACEBAkAgAC8BAEEuRw0AIABBfmovAQBBLkcNACAAQXxqLwEAQS5GIQELIAELnAQBAX8CQCABQSJGDQAgAUEnRg0AECUPC0EAKAKwCiEDIAEQGiAAIANBAmpBACgCsApBACgC0AkQAQJAIAJFDQBBACgC8AlBBDYCHAtBAEEAKAKwCkECajYCsAoCQAJAAkACQEEAECkiAUHhAEYNACABQfcARg0BQQAoArAKIQEMAgtBACgCsAoiAUECakHACEEKEC8NAUEGIQAMAgtBACgCsAoiAS8BAkHpAEcNACABLwEEQfQARw0AQQQhACABLwEGQegARg0BC0EAIAFBfmo2ArAKDwtBACABIABBAXRqNgKwCgJAQQEQKUH7AEYNAEEAIAE2ArAKDwtBACgCsAoiAiEAA0BBACAAQQJqNgKwCgJAAkACQEEBECkiAEEiRg0AIABBJ0cNAUEnEBpBAEEAKAKwCkECajYCsApBARApIQAMAgtBIhAaQQBBACgCsApBAmo2ArAKQQEQKSEADAELIAAQLCEACwJAIABBOkYNAEEAIAE2ArAKDwtBAEEAKAKwCkECajYCsAoCQEEBECkiAEEiRg0AIABBJ0YNAEEAIAE2ArAKDwsgABAaQQBBACgCsApBAmo2ArAKAkACQEEBECkiAEEsRg0AIABB/QBGDQFBACABNgKwCg8LQQBBACgCsApBAmo2ArAKQQEQKUH9AEYNAEEAKAKwCiEADAELC0EAKALwCSIBIAI2AhAgAUEAKAKwCkECajYCDAttAQJ/AkACQANAAkAgAEH//wNxIgFBd2oiAkEXSw0AQQEgAnRBn4CABHENAgsgAUGgAUYNASAAIQIgARAoDQJBACECQQBBACgCsAoiAEECajYCsAogAC8BAiIADQAMAgsLIAAhAgsgAkH//wNxC6sBAQR/AkACQEEAKAKwCiICLwEAIgNB4QBGDQAgASEEIAAhBQwBC0EAIAJBBGo2ArAKQQEQKSECQQAoArAKIQUCQAJAIAJBIkYNACACQSdGDQAgAhAsGkEAKAKwCiEEDAELIAIQGkEAQQAoArAKQQJqIgQ2ArAKC0EBECkhA0EAKAKwCiECCwJAIAIgBUYNACAFIARBACAAIAAgAUYiAhtBACABIAIbEAILIAMLcgEEf0EAKAKwCiEAQQAoArQKIQECQAJAA0AgAEECaiECIAAgAU8NAQJAAkAgAi8BACIDQaR/ag4CAQQACyACIQAgA0F2ag4EAgEBAgELIABBBGohAAwACwtBACACNgKwChAlQQAPC0EAIAI2ArAKQd0AC0kBA39BACEDAkAgAkUNAAJAA0AgAC0AACIEIAEtAAAiBUcNASABQQFqIQEgAEEBaiEAIAJBf2oiAg0ADAILCyAEIAVrIQMLIAMLC+wBAgBBgAgLzgEAAHgAcABvAHIAdABtAHAAbwByAHQAZgBvAHIAZQB0AGEAbwB1AHIAYwBlAHIAbwBtAHUAbgBjAHQAaQBvAG4AcwBzAGUAcgB0AHYAbwB5AGkAZQBkAGUAbABlAGMAbwBuAHQAaQBuAGkAbgBzAHQAYQBuAHQAeQBiAHIAZQBhAHIAZQB0AHUAcgBkAGUAYgB1AGcAZwBlAGEAdwBhAGkAdABoAHIAdwBoAGkAbABlAGkAZgBjAGEAdABjAGYAaQBuAGEAbABsAGUAbABzAABB0AkLEAEAAAACAAAAAAQAAEA5AAA=",typeof Buffer<"u"?Buffer.from(Yr,"base64"):Uint8Array.from(atob(Yr),A=>A.charCodeAt(0)))).then(WebAssembly.instantiate).then(({exports:A})=>{W=A}),Yr;function j6(A){return A!==void 0?{ok:!0,value:A}:{ok:!0}}function e6(A){return{ok:!1,error:A}}function _a(A){return A.then(e=>j6(e),e=>e6(e))}var Ok=/^\s*(['"](\..*)['"])\s*$/mu,ye=class extends Error{constructor(j){super();this.persistedMissingRelativeImports=j;this.name="RewriteRelativeImportsError"}};function ft(A){return A instanceof ye}async function Gt(A,e){await A6;let[j]=Zr(A),t=A,r=new Set,o=[...j].reverse();for(let{s:n,e:i,d:a}of o){if(a===-2)continue;if(a===-1){let m=A.substring(n,i);if(!m.startsWith("."))continue;let d=e[m];d===void 0&&(r.add(m),d=ya(m)),t=Sa(t,d,n,i);continue}let s=A.substring(n,i),k=s.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1").trim().match(Ok);if(!k)continue;let c=k[1],u=k[2];if(c===void 0||u===void 0)continue;let $=e[u];$===void 0&&(r.add(u),$=ya(u));let E=s.replace(new RegExp(t6(c),"g"),JSON.stringify($));t=Sa(t,E,n,i)}return r.size>0?e6({partiallyProcessedCode:t,unresolvedRelativeImports:r,parsedImports:j}):j6(t)}function Sa(A,e,j,t){return A.slice(0,j)+e+A.slice(t)}function t6(A){return A.replace(/[.*+\-?^${}()|[\]\\]/gu,"\\$&")}function ya(A){return`!missing/${A}`}var x=LA("modules-storage"),xk="kit",Ca=Object.freeze({}),Da=Object.freeze({});function Gm(A){return A&&A.type==="codeFile"?(I(IA(A.sourceContent),"code module entry is missing source content"),!0):!1}function r6(A){return A.name===Fr&&A.type===Qn}function vk(A){return A.id===WA}function Oa(A,e){return!!A&&A.saveId===e.saveId&&A.id===e.moduleId}var Ft=class extends Error{constructor(){super("A circular dependency was detected."),this.name="CircularDependencyError"}},Me="update-modules-storage",Pk=0;async function eA(A){let e=performance.now(),j=`acquire-modules-storage-lock-${Pk++}`;return pe(j),Tr.request(Me,()=>{let t=performance.now()-e;return st(`\u{1F513} Acquire ${Me} lock`,j),lt(j),x.debug("\u{1F513} Acquired the",Me,"lock in",t.toFixed(2),"ms"),t>1e3&&x.warn("\u2757 Long wait: it took",t.toFixed(0),"ms to acquire the",Me,"lock."),A()})}var Rt=class{constructor(e,j,t,r){this.storage=e;this.localId=j;this.type=t;this.debugModuleStoreAndComponentLoaderRevisionsMatch=r}get id(){let e=this.storage.getPersistedModuleByLocalId(this.localId);if(e)return e.id;let j=this.storage.getModuleTreeData(this.localId);return I(j,"Module must exist"),j.moduleId}get saveId(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.saveId;let j=this.storage.getPersistedModuleByLocalId(this.localId);return I(j,"Module must exist"),j.saveId}get transientSVGIcon(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.svgIcon}get lastPublish(){return this.storage.getPersistedModuleByLocalId(this.localId)?.lastPublish??null}externalModuleIdentifier(e="default"){let j=this.storage.getTransientSaveByLocalId(this.localId);if(j){let r=yA(j.name);return nj(this.id,j.saveId,r.module,e)}let t=this.storage.getPersistedModuleByLocalId(this.localId);return I(t?.files.module,"ModulesStorage: Expected module typed file in persisted module."),nj(this.id,t.saveId,t.files.module,e)}delete(){return this.storage.delete(this.localId)}publish(e,j,t){return this.storage.publish(this.localId,{namespace:e,name:j,version:t})}sourceRevision(){let e=this.storage.getTransientSaveByLocalId(this.localId);if(e)return e.sourceRevision;let j=this.storage.getPersistedModuleByLocalId(this.localId);if(j)return s6(j)}annotations(e,j){let t=this.storage.getTransientSaveByLocalId(this.localId),r=t?.annotations?Kj(t.annotations):this.storage.getModuleTreeData(this.localId)?.annotations;return e&&this.debugModuleStoreAndComponentLoaderRevisionsMatch()&&Tk(r,e),j?r?.[j]:r}},o6=class extends Rt{constructor(j,t,r,o,n){super(j,t,r,o);this.name=n}currentSourceEquals(j,t){let r=this.storage.getPersistedModuleByLocalId(this.localId);return!r||r.submodules.length||t.submodules?.size?!1:r.sourceContent===j}updateSource(j,t={}){return this.storage.updateSources([{localId:this.localId,source:j,options:{...t,stableName:!0}}])}persist(j){return this.storage.upsert(this.localId,{...j,type:this.type,name:this.name})}getKitSectionsStructure(){let j=this.storage.getTransientSaveByLocalId(this.localId);return j?j.kitSectionsStructure:this.storage.getKitSectionsStructure(this.name)}};function Tk(A,e){if(!A)return;let j=rA(e.identifier);I(CA(j)&&KA(j),"Entity must have an identifier."),e.annotations&&j.exportSpecifier in A&&!Yn(A[j.exportSpecifier],Kj({default:e.annotations}).default,!0)&&x.reportError("Static annotations are not synchronized with runtime annotations.",{identifier:e.identifier})}function s6(A){let e=A?.metadata.sourceRevision;return oj(e)?e:void 0}var i6=class extends Rt{updateSource(e,j){return this.storage.updateSources([{localId:this.localId,source:e,options:j??{}}])}persist(e){return this.storage.update(this.localId,e)}rename(e){return this.storage.rename(this.localId,e)}},It=class{constructor(e,j,t=()=>!0){this.storage=e;this.type=j;this.moduleStoreAndComponentLoaderRevisionsMatch=t}async create(e){return this.storage.create({...e,type:this.type})}getByStableName(e){return new o6(this.storage,Gr(this.type,e),this.type,this.moduleStoreAndComponentLoaderRevisionsMatch,e)}getByLocalId(e){return new i6(this.storage,e,this.type,this.moduleStoreAndComponentLoaderRevisionsMatch)}getUniqueName(e){return this.storage.getUniqueNameForType(this.type,e)}},gt=class{constructor(e,j,t,r,o,n,i,a){this.getModulesService=e;this.compile=j;this.process=t;this.processWhenReady=r;this.runWhenIdle=o;this.treeStore=n;this.getActiveScope=i;this.makeDocumentReadOnly=a;N(this,"useTreeAsLocalModuleList",!1);N(this,"writeLocalModulesToTree",!1);N(this,"dependenciesModule");N(this,"persistedModules",new Map);N(this,"persistedLocalIdsByTypeSlashNameCache",new WeakMap);N(this,"transientSaves",new Map);N(this,"lastSnapshot",{dependenciesModule:void 0,modules:new Map,depsGraph:{},initialized:!1});N(this,"modulesService");N(this,"lazyServerModulesForTransientSaves",new Map);N(this,"backgroundJob",null);N(this,"backgroundAbortController",null);N(this,"initialized",!1);N(this,"initializationStarted",!1);N(this,"readOnlyTree",!1);N(this,"resolveInitialization",()=>{throw new Error("initializationPromise has not executed yet")});N(this,"rejectInitialization",()=>{throw new Error("initializationPromise has not executed yet")});N(this,"initializationPromise",new Promise((e,j)=>{this.resolveInitialization=e,this.rejectInitialization=j}));N(this,"didSetupModuleEventStream",!1);N(this,"transientInfo",null);N(this,"previousLocalModuleNodes",[]);N(this,"treeNodesToUpdate",new Map);N(this,"treeNodesToDelete",[]);N(this,"goingToStartUsingLocalModulesInTree",!1);N(this,"listeners",new Set);N(this,"transientSaveRetries",new Map);N(this,"transientSaveRelativeImportRetries",new Set);N(this,"downloadQueue",new Vj(1200))}hasPendingServerModules(){return this.lazyServerModulesForTransientSaves.size>0}processOnePendingServerModule(){return this.lazyServerModulesForTransientSaves.size===0?Promise.resolve(!1):eA(async()=>{for(let[,e]of this.lazyServerModulesForTransientSaves)for(let j of e){let t=this.persistedModules.get(j)?.localId;if(!t)continue;let r=this.persistedModules.get(t);if(r?.kind!=="server")continue;x.debug("\u{1F343} Process one server \u2192 local module",j);let o=await this.createLocalModuleFromModule(r),n=lA(this.persistedModules,i=>{i.set(r.localId,o)});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1,transientSaves:this.transientSaves}),!0}return!1})}async changeScope(e){if(!this.hasPendingServerModules())return;let j=Se(e);!j||j.size===0||(await eA(async()=>{let t=new Set,r=this.lastSnapshot.depsGraph;for(let[a,s]of this.lazyServerModulesForTransientSaves)Fj(r,a,s,j,t);let o=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&o.push(this.createLocalModuleFromModule(s))}if(x.debug("\u{1F343} Prioritizing making visible modules local after changing scope:",e.id,"/ Visible:",j,"/ Visible Dependencies:",t,"/ Server modules:",o.length),o.length===0)return;let n=await Promise.all(o),i=lA(this.persistedModules,a=>{for(let s of n)a.set(s.localId,s)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,depsGraph:r,didRemoteChange:!1,transientSaves:this.transientSaves})}),this.makeLazyServerModulesLocalWhenIdle().catch(BA))}async makeVisibleDependentServerModulesLocal(e){if(!ie.isOn("prioritizedModuleEvaluation"))return;let j=this.getActiveScope(),t=new Set,r=Se(j),o=new Set;for(let a of e){let s=this.typeAndNameFromLocalId(a.localId,a.options.stableName),l=X(s),k=this.lastSnapshot.depsGraph;Fj(k,l,o,r,t),this.lazyServerModulesForTransientSaves.set(l,o),t.delete(l)}let n=[];for(let a of t){let s=this.getModuleWithTypeSlashName(a);s?.kind==="server"&&n.push(this.createLocalModuleFromModule(s))}x.debug("\u{1F343} Prioritizing dependent server modules after updating:",e.map(a=>a.localId),"/ Visible:",t,"/ Lazy:",o,"/ Server modules:",n.length);let i=this.persistedModules;if(n.length>0){let a=await Promise.all(n);i=lA(i,s=>{for(let l of a)s.set(l.localId,l)})}this.persistedModules=i}async makeLazyServerModulesLocalWhenIdle(){this.cancelBackgroundJob(),this.backgroundAbortController=new AbortController;let{signal:e}=this.backgroundAbortController;return this.backgroundJob=(async()=>{try{for(;this.hasPendingServerModules()&&!e.aborted;){let j=new Xn;if(this.runWhenIdle(()=>{if(e.aborted){j.resolve(!1);return}this.processOnePendingServerModule().then(j.resolve,j.reject)}),!await j)break}}finally{this.backgroundJob=null,this.backgroundAbortController=null}})(),this.backgroundJob}cancelBackgroundJob(){this.backgroundAbortController&&this.backgroundAbortController.abort()}getTransientSave(e){return this.transientSaves.get(e)}resetModuleStateAndPermissions(e){this.readOnlyTree=e==="readonly",this.useTreeAsLocalModuleList=this.readOnlyTree,!this.readOnlyTree&&this.modulesService&&this.setupModuleEventStreamIfNeeded(),this.treeNodesToUpdate.clear(),this.treeNodesToDelete=[],this.transientSaves.size>0&&(x.reportErrorOncePerMinute(new Error("Discarding transient saves"),{count:this.transientSaves.size}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:new Map,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}))}async waitForModulesToSave(){let e=Array.from(this.transientSaves.keys());for(let t of e)this.transientSaves.has(t)&&await this.update(t,{});let j=this.transientSaves.size;j>0&&x.warn("waitForModulesToSave: transientSaves seems to be growing, ignoring rest:",j)}async initialize(){return this.initializationStarted?this.initializationPromise:(this.initializationStarted=!0,this.initializeInternal().then(this.resolveInitialization,e=>{x.reportError(e,{context:"Failed to initialize ModulesStorage: "}),this.rejectInitialization(e)}),this.initializationPromise)}setupModuleEventStreamIfNeeded(){this.didSetupModuleEventStream||(this.didSetupModuleEventStream=!0,I(this.modulesService,"ModulesStorage.useModuleEventStream: expected modules service to be initialized"),this.modulesService.moduleEventsStream().read(async({events:e})=>{let j=e.filter(Nk);this.handleRemoteModuleSaveEvents(j).catch(x.reportError);let t=e.filter(Lk);this.handleRemoteModuleDeleteEvents(t).catch(x.reportError)}).catch(e=>{x.reportError(e,{context:"Failed to read ModulesAPI event stream: "})}))}async initializeInternal(){if(this.modulesService=await this.getModulesService(),!this.modulesService)return;let e=this.treeStore.tree.getLocalModuleNodes();this.writeLocalModulesToTree=!!e,this.useTreeAsLocalModuleList||this.setupModuleEventStreamIfNeeded();let j,t=performance.now();if(kt("modulesStorageStart"),this.useTreeAsLocalModuleList&&e){x.info("init from tree data"),this.previousLocalModuleNodes=e;let s=e.map(l=>({moduleId:l.save.moduleId,saveId:l.save.saveId}));j=await this.modulesService.lookUpModules({queries:s})}else x.info("init from module list"),j=await this.modulesService.list({});kt("modulesStorageInit"),x.debug("listing modules took:",performance.now()-t,"millis");let r=j.data.find(r6);r&&await this.updateDependenciesModule(r);let o=new Map,n=0,i=new Set;await Promise.all(j.data.map(async s=>{if(X(s)===WA)return;let l=await this.createServerModuleFromData(s);x.trace("init - create module",l.localId,l.id,l.saveId,l.savedAt),o.set(l.localId,l),Jk(e,s)&&(n+=1),i.add(l.localId)}));let a=this.createDependencyGraph(o);this.initialized=!0,this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:o,transientSaves:this.transientSaves,depsGraph:a,didRemoteChange:!0}),kt("modulesStorageFirstPublish"),this.processTreeUpdates(),n>0&&x.reportError("Data loss detected based on modules saves and modules in tree.",{dataLossCount:n})}createDependencyGraph(e){let j=[];for(let t of e.values()){let r=X(t),o=t.imports.relative;j.push([r,o])}return Pr(j)}processTreeUpdates(){if(this.initialized){if(this.readOnlyTree)if(this.useTreeAsLocalModuleList){if(!this.treeStore.tree.has(Gj)){x.info("detected removal of local modules list node, stopping to use tree as local module list"),this.useTreeAsLocalModuleList=!1,this.setupModuleEventStreamIfNeeded();return}}else{if(!this.treeStore.tree.has(Gj))return;x.info("detected insertion of a local modules list node, starting to use tree as local module list"),this.useTreeAsLocalModuleList=!0}this.syncLocalModules(),this.tryWriteTreeData()}}async syncLocalModules(){if(!this.useTreeAsLocalModuleList)return;let e=this.treeStore.tree.getLocalModulesListNode()?.children;if(!e||this.previousLocalModuleNodes===e)return;let j=[],t=Nn(this.previousLocalModuleNodes,r=>[r.id,r]);this.previousLocalModuleNodes=e;for(let r of e){let o=t.get(r.id);if(t.delete(r.id),o===r)continue;let n=r.save,i=this.persistedModules.get(r.id);Oa(i,n)||vk(r)&&Oa(this.dependenciesModule,n)||(j.push({moduleId:n.moduleId,saveId:n.saveId}),x.debug("syncLocalModules to update:",r.id))}if(t.size>0&&(x.debug("syncLocalModules removing:",t.keys()),this.handleRemoteModuleDeletes(Array.from(t.values()).map(r=>r.save.moduleId))),j.length>0){x.debug("syncLocalModules updating:",j),I(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let r=performance.now(),o=await this.modulesService.lookUpModules({queries:j});x.debug("lookupModules took:",performance.now()-r,"millis"),await this.handleRemoteModuleSaves(o.data)}}canWriteTree(){return!this.treeStore.tree.isViewOnly}tryWriteTreeData(){this.canWriteTree()&&(this.treeNodesToUpdate.size===0&&this.treeNodesToDelete.length===0||this.processWhenReady(()=>{if(!this.canWriteTree())return;let e=this.treeStore.tree;e.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(e);for(let j of this.treeNodesToDelete)this.persistedModules.get(j)||(x.debug("tryWriteTreeData, remove:",j),e.remove(j));this.treeNodesToDelete=[];for(let[j,{treeVersion:t,errors:r,persistedModule:o}]of this.treeNodesToUpdate.entries())this.persistedModules.get(j)?.saveId===o.saveId&&(x.debug("tryWriteTreeData, write:",j,t,o.id,o.saveId,r),this.updateNode(e,j,t,o,r));this.treeNodesToUpdate.clear()},"nonUserEvent"))}updateTreeNodeWithOwnTreeVersion(e,j){!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()||this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree);let r=this.treeStore.tree.get(e)?.save.treeVersion??this.treeStore.remoteTreeVersion;x.debug("updateTreeNodeWithCurrentTreeVersion:",e,r,j.id,j.saveId),this.updateNode(this.treeStore.tree,e,r,j)},"nonUserEvent")}updateTreeNode(e,j,t,r,o){return!this.writeLocalModulesToTree&&!this.maybeUpgradeDocument()?!0:this.canWriteTree()?(this.process(()=>{this.treeStore.tree.lineage.setEditReason("localmodules"),this.createLocalModulesListNodeIfNeeded(this.treeStore.tree),x.debug("updateTreeNode:",e,j,t.id,t.saveId),this.updateNode(this.treeStore.tree,e,j,t,r,o)},"nonUserEvent"),!0):(x.debug("updateTreeNode - readonly, buffering change"),this.treeNodesToUpdate.set(e,{treeVersion:j,persistedModule:t,errors:r,kitSectionsStructure:o}),!0)}removeTreeNode(e){this.writeLocalModulesToTree&&(this.canWriteTree()?this.process(()=>{x.debug("removeTreeNode:",e),this.treeStore.tree.remove(e)}):this.treeNodesToDelete.push(e))}updateNode(e,j,t,r,o,n){I(this.writeLocalModulesToTree,"not using tree for local modules");let i=e.get(j)?.asDraft()??new Or({id:j});I(i instanceof Or);let a=r.metadata.pluginId,s={treeVersion:t,moduleId:r.id,saveId:r.saveId,imports:r.imports?.relative,title:r.title,name:r.name,type:r.type,sourceRevision:r.sourceRevision,annotations:r.annotations?Kj(r.annotations):i.save.annotations,pluginId:IA(a)?a:i.save.pluginId};i.set({save:s}),i.tree()||e.insertNode(i,Gj);let l=r.name;if(!e.has(l))return;if(Zn(n)){let u=e.get(l);SA(u)&&u.set({kitSectionsStructure:n})}if(!o)return;let k=e.get(Ai);if(x.debug("Writing serialization errors from artifacts to tree for",l),k?.children?.forEach(u=>{let $=u.sourceNodeId??u.scopeId,E=At(u.sourceNodeModuleType)||r.type===u.sourceNodeModuleType;!$||$!==l||!E||!ji(u.type)||e.remove(u.id)}),o.length===0)return;let c=e.ensureErrorListNode();o.forEach(u=>e.insertNode(u,c.id))}getModuleTreeData(e){return this.treeStore.tree.getNodeWithTrait(e,xr)?.save}getKitSectionsStructure(e){return this.treeStore.tree.getNodeWithTrait(e,SA)?.kitSectionsStructure}createLocalModulesListNodeIfNeeded(e){if(I(this.writeLocalModulesToTree,"not using tree for local modules"),e.has(Gj)||!this.canWriteTree())return;x.debug("ensureAllModulesExistInTree:",this.persistedModules.size),e.insertNode(new Wo);let j=this.treeStore.remoteTreeVersion;this.persistedModules.forEach(t=>{this.updateNode(e,t.localId,j,t)}),this.dependenciesModule&&this.updateNode(e,WA,j,this.dependenciesModule)}usingLocalModulesInTree(){return this.treeStore.tree.has(Gj)||this.goingToStartUsingLocalModulesInTree}async startUsingLocalModulesInTree(){if(!this.canWriteTree())throw Error("Project is read only.");this.goingToStartUsingLocalModulesInTree=!0,this.process(()=>{if(this.startUsingLocalModulesInTree){if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("startUsingLocalModulesInTree"),this.goingToStartUsingLocalModulesInTree=!1,this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)}})}stopUsingLocalModulesInTree(){this.goingToStartUsingLocalModulesInTree=!1,this.process(()=>{if(!this.canWriteTree())throw Error("Project is read only.");this.treeStore.tree.lineage.setEditReason("stopUsingLocalModulesInTree"),this.treeStore.tree.remove(Gj),this.writeLocalModulesToTree=!1,this.setupModuleEventStreamIfNeeded()})}maybeUpgradeDocument(){return this.process(()=>{if(!this.canWriteTree()){x.warn("cannot upgrade document if we cannot write, but should not be saving modules either");return}x.info("upgrading document to use local modules list node"),this.treeStore.tree.lineage.setEditReason("maybeUpgradeDocument"),this.writeLocalModulesToTree=!0,this.createLocalModulesListNodeIfNeeded(this.treeStore.tree)},"nonUserEvent"),this.writeLocalModulesToTree}getModuleWithTypeSlashName(e){let j=this.findPersistedModuleLocalIdByTypeSlashName(this.persistedModules,e);if(j)return this.persistedModules.get(j)}async updateDependenciesModule(e){I(r6(e),"updateDependenciesModule called with non dependencies module data");let j=await this.getDependenciesFiles(e),t=j?.dependenciesMapContent;if(!t){let r=JSON.parse(j.importMapContent),o=Lj(r);t=JSON.stringify(o),this.readOnlyTree?x.reportError(new Error("modules storage is read only"),{context:"modules storage is read only while calling updateDependenciesModule"}):(await this.updateDependenciesLocked(r,o),x.info("The missing dependencies file has now been created."))}this.dependenciesModule={kind:"dependencies",...e,id:e.id,localId:e.localId,type:"config",name:e.name,importMapContent:j.importMapContent,dependenciesMapContent:t}}async createServerModuleFromData(e){let j={kind:"server",...e,id:e.id,localId:e.localId,moduleURL:e.baseURL+(e.type==="kit"?e.files.source:e.files.module),update:performance.now()};if((j.type==="codeFile"||j.type==="webPageMetadata")&&(j.sourceContent=await this.fetchSourceContentFromData(e)),Ni(j)&&qi(j)===0){j.sourceContent=await this.fetchSourceContentFromData(e);let t=j.sourceContent.includes("useQueryData")?1:0;j.metadata={...j.metadata,compatibleCmsVersion:t}}return j}async fetchSourceContentFromData(e){return this.downloadQueue.run(async()=>{let j=e.baseURL+e.files.source;return(await fetch(j)).text()})}async refresh(){if(this.initialized&&!this.useTreeAsLocalModuleList)return x.debug("refresh: acquiring lock"),eA(()=>this.refreshLocked())}async refreshLocked(){x.debug("refresh: start"),I(this.modulesService,"ModulesStorage.refresh: expected modules service to be initialized");let{data:e}=await this.modulesService.list({});x.debug("refresh: there's",e.length,"modules to process");let j=new Map,t=new Set;await Promise.all(e.map(async o=>{let n=o.localId;if(r6(o)){this.dependenciesModule?.saveId!==o.saveId&&await this.updateDependenciesModule(o);return}let i=this.persistedModules.get(n);if(i?.saveId===o.saveId)j.set(n,i);else{let a=await this.createServerModuleFromData(o);x.debug("refresh - updating module",a.localId,a.id,a.saveId,a.savedAt),j.set(n,a)}t.add(n)}));let r=this.createDependencyGraph(j);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0}),x.debug("refresh: finish")}whenInitialized(){return this.initializationPromise}async whenIdle(){await Promise.all([this.whenInitialized(),eA(()=>{})])}isProcessing(){return!!(!this.initialized||this.transientSaves.size>0||Tr.isLocked(Me))}hasLocalChanges(){return this.transientSaves.size>0}hasLocalCodeFileChanges(){if(this.transientSaves.size===0)return!1;for(let e of this.transientSaves.values())if(e.type==="codeFile"||e.type==="config")return!0;return!1}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(e){this.listeners.forEach(j=>{try{j(e)}catch(t){x.reportError(t)}})}subscribe(e){return this.addListener(e),e(xa(this.dependenciesModule,void 0,this.persistedModules,this.transientSaves,this.lastSnapshot.depsGraph,new Map,this.initialized,!1,!1)),()=>this.removeListener(e)}getDependentsOfModule(e){return this.lastSnapshot.depsGraph[e]?.dependents}getUniqueNameForType(e,j){let t=new Set;for(let r of this.persistedModules.values())r.type===e&&t.add(r.name);return Ra(t,j)}async updateSources(e){return eA(async()=>{let j=!1;for(let{localId:t,source:r,options:o}of e){let n=Date.now();try{await this.updateSourceLocked(t,{...o,source:r}),j=!0}catch(i){i instanceof Ft&&$A({type:"add",variant:"error",text:"Instances of your component won't update if they are nested within themselves.",key:"component-circular-dependency",icon:"error",duration:Number.POSITIVE_INFINITY}),x.reportError(i)}finally{let i=Date.now()-n;x.debug("\u23F1 update source",t,"in",i,"ms")}}return await this.makeVisibleDependentServerModulesLocal(e),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!1}),this.makeLazyServerModulesLocalWhenIdle().catch(BA),j})}async updateDependenciesSource(e,j){return eA(async()=>{I(this.dependenciesModule,"Dependency files must already exist to be updated.");let t=e===Un?j:this.dependenciesModule.importMapContent,r=e===Vn?j:this.dependenciesModule.dependenciesMapContent;return this.updateDependenciesLocked(JSON.parse(t),JSON.parse(r))})}async compileSubmodules(e,j){let t={};return await Promise.all([...j].map(async([r,o])=>{let n=await this.compile({name:r,source:o,type:e,includeSourceMap:!1,addFramerMetadata:!1});for(let a of n.imports.relative){let s=bi(a);if(!(s&&j.has(s)))throw new Error("Submodules only support relative imports of other submodules")}let i=gi(r);t[i]=n.code})),t}typeAndNameFromLocalId(e,j=!1){if(j)return We(e);for(let t of this.lastSnapshot.modules.values())if(t?.localId===e)return t;throw new Error(`Module entry for local id ${e} missing in internal snapshot`)}async updateSourceLocked(e,{source:j,submodules:t,binaryAssets:r=Da,stableName:o=!1,assets:n,preventCircularImports:i,telemetrySession:a,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c}){await this.whenInitialized();let u=this.typeAndNameFromLocalId(e,o),$=X(u),E=await this.compile({localId:e,name:$,source:j,type:u.type,includeSourceMap:n6(u.type),telemetrySession:a}),m=Ca;t&&(m=await this.compileSubmodules(u.type,t));let d=Jj(this.lastSnapshot.depsGraph,$,E.imports.relative);if(i&&wi(d,$))throw new Ft;let f=Kk(u.type,E.annotations),R=lA(this.transientSaves,_=>{let h=_.get(e),G,O=f?.framerIntrinsicWidth;O&&(G={...G,intrinsicWidth:Number.parseInt(O,10)});let w=f?.framerIntrinsicHeight;if(w&&(G={...G,intrinsicHeight:Number.parseInt(w,10)}),G={...G,compilerContractVersion:1,treeAnnotations:!0,localModuleImportMapEntries:this.moduleUsesLocalImportMapSpecifiers($)},h)h.saveId=lj(),h.moduleContent=E.code,h.sourceContent=j,h.sourceMapContent=E.sourceMap,h.submoduleContents=m,h.binaryAssetContents=r,h.imports=E.imports,h.exports=E.exportedNames,h.reExportedModules=E.reExportedModules,h.treeVersion=s??this.treeStore.remoteTreeVersion,h.sourceRevision=l??h.sourceRevision,h.annotations=E.annotations,h.svgIcon=k??h.svgIcon,h.kitSectionsStructure=c??h.kitSectionsStructure,h.update=performance.now(),n&&(h.assets=Array.from(n)),G&&(h.metadata={...h.metadata,...G});else{let v={localId:e,type:u.type,name:u.name,saveId:lj(),moduleContent:E.code,sourceContent:j,sourceMapContent:E.sourceMap,submoduleContents:m,binaryAssetContents:r,imports:E.imports,exports:E.exportedNames,reExportedModules:E.reExportedModules,treeVersion:s,sourceRevision:l,svgIcon:k,kitSectionsStructure:c,annotations:E.annotations,update:performance.now()};n&&(v.assets=Array.from(n)),G&&(v.metadata=G),_.set(e,v)}});this.transientInfo||=new Set,this.transientInfo.add(e),this.transientSaves=R,this.lastSnapshot={...this.lastSnapshot,depsGraph:d}}async create(e){return eA(()=>this.createLocked(e))}async createLocked(e){await this.whenInitialized();let{type:j,name:t,source:r,...o}=e,n=X({type:j,name:t}),i=await this.compile({name:n,source:r,type:j,includeSourceMap:n6(j)}),a={localId:void 0,type:j,name:t,saveId:lj(),moduleContent:i.code,sourceContent:r,sourceMapContent:i.sourceMap,submoduleContents:Ca,binaryAssetContents:Da,imports:i.imports,exports:i.exportedNames,reExportedModules:i.reExportedModules,treeVersion:e.treeVersion||this.treeStore.remoteTreeVersion,sourceRevision:e.sourceRevision,svgIcon:e.svgIcon,kitSectionsStructure:e.kitSectionsStructure,annotations:i.annotations,update:performance.now()},s=await this.createBatchSaveForUpdatedModule("$new",a,this.persistedModules,new Map,new Map,{type:j,name:t,...o});I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:l}=await this.modulesService.saveBatch({batch:[s]}),{updatedModuleLocalId:k,nextPersistedModules:c}=this.processTransientSaveData({nextPersistedModules:this.persistedModules,transientSave:a,data:l}),u=Jj(this.lastSnapshot.depsGraph,n,i.imports.relative);return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:c,transientSaves:this.transientSaves,depsGraph:u,didRemoteChange:!0}),k}async update(e,j){let t=this.persistedModules.get(e);return I(t,"Trying to update an unknown module with localId:",e),eA(async()=>{let r=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:{...j,name:t.name,type:t.type}})}finally{let o=Date.now()-r;x.debug("\u23F1 update",e,"in",o,"ms")}})}async rename(e,j){return eA(()=>this.renameLocked(e,j))}async renameLocked(e,j){await this.whenInitialized();let t=this.persistedModules,r=this.lastSnapshot.depsGraph,o=t.get(e);I(o,"Trying to rename an unknown module with localId:",e);let n=this.treeStore.remoteTreeVersion,i=X(o);I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let a=await this.modulesService.update({moduleId:o.id,name:j});I(a,"invalid update reply");let s=r[i]?.dependents,l=[],k={},c=X(a);if(i!==c&&(r=$t(r,i),r=Jj(r,c,o.imports.relative)),s){let u=[],$=[];for(let d of t.values()){let f=X(d);s.has(f)&&(d.kind==="local"?u.push(d):$.push(d))}if($.length>0){let d=await Promise.all($.map(f=>this.createLocalModuleFromModule(f)));t=lA(t,f=>{for(let R of d)f.set(R.localId,R),u.push(R)})}let E=[];for(let d of u){let f=X(d),R=Dr(f,`${o.type}/${j}`);I(R,"Failed to create relative path to",o.type,"/",j);let _=Dr(f,i);I(_);let h=d.imports.relative.indexOf(_);if(h===-1){x.warn(d.localId,"doesn't import",_);continue}let G=[...d.imports.relative];G[h]=R;let O={absolute:d.imports.absolute,bare:d.imports.bare,relative:G},w=Ta(d.sourceContent,_,R),v=Ta(d.moduleContent,_,R);k[d.localId]={sourceContent:w,moduleContent:v,imports:O},I(d.files.source);let F={type:d.type,moduleId:d.id,name:d.name,saveId:lj(),patchSaveId:d.saveId,files:[{name:d.files.source,type:"source",content:w}],imports:O};E.push(F)}I(!this.readOnlyTree,"modules storage is read only");let{data:m}=await this.modulesService.saveBatch({batch:E});l=m}t=lA(t,u=>{if(this.updateTreeNode(e,n,a)){o.kind==="server"?u.set(e,{...a,kind:"server",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:o.sourceContent,update:performance.now()}):u.set(e,{...a,kind:"local",localId:a.localId,id:a.id,moduleURL:a.baseURL+a.files.module,sourceContent:o.sourceContent,moduleContent:o.moduleContent,sourceMapContent:o.sourceMapContent,submoduleContents:o.submoduleContents,binaryAssetContents:o.binaryAssetContents,update:performance.now()});for(let E of l){let m=E.localId,d=u.get(m);I(d?.kind==="local","dependent module must be local:",m);let f=k[m];I(f,"dependent module update must exist:",m),this.updateTreeNode(m,n,E)&&(u.set(m,{...E,kind:"local",localId:m,id:E.id,moduleURL:E.baseURL+E.files.module,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:d.sourceMapContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,imports:f.imports,exports:E.exports,reExportedModules:E.reExportedModules,submodules:E.submodules,binaryAssets:E.binaryAssets,sourceRevision:d.sourceRevision,update:d.update}),r=Jj(r,X(E),f.imports.relative))}}}),this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:t,transientSaves:this.transientSaves,depsGraph:r,didRemoteChange:!0})}async upsert(e,j){return eA(async()=>{let t=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked({[e]:j})}finally{let r=Date.now()-t;x.debug("\u23F1 upsert",e,"in",r,"ms")}})}async upsertBatch(e){return eA(async()=>{let j=Date.now();try{return await this.whenInitialized(),await this.upsertBatchLocked(e)}finally{let t=Date.now()-j;x.debug("\u23F1 upsert batch in",t,"ms")}})}async delete(e){return eA(()=>this.deleteLocked(e))}async deleteLocked(e){let j=Array.isArray(e)?e:[e];if(!j.length)return;await this.whenInitialized();let t=j.map(k=>{let c=this.persistedModules.get(k);return I(c,"Trying to delete an unknown module",k,"It was never persisted."),c}),{modulesService:r}=this;I(r);let o=await Promise.allSettled(t.map(k=>r.delete({moduleId:k.id}))),n=new Set,i=new Set;for(let k of o){if(k.status==="rejected"){x.warn(String(k.reason));continue}n.add(k.value.localId),i.add(k.value.id)}j=j.filter(k=>n.has(k)),t=t.filter(k=>i.has(k.id)),I(j.length>0,"Failed to delete module(s)");let a=this.lastSnapshot.depsGraph;for(let k of t){let c=X(k);a=$t(a,c)}let s=lA(this.persistedModules,k=>{for(let c of j)k.delete(c),this.removeTreeNode(c)}),l=lA(this.transientSaves,k=>{for(let c of j)k.delete(c)});this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:s,transientSaves:l,depsGraph:a,didRemoteChange:!0})}async publish(e,j){return eA(()=>this.publishLocked(e,j))}async publishLocked(e,{namespace:j,name:t,version:r}){await this.whenInitialized();let o=this.persistedModules.get(e);I(o,"Trying to publish an unknown module",e,"It was never persisted."),I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let n=await this.modulesService.publish({moduleId:o.id,saveId:o.saveId,namespace:j,name:t,version:r}),i=lA(this.persistedModules,a=>{let s=a.get(e);s&&a.set(e,{...s,lastPublish:{namespaceId:n.namespaceId,name:n.name,version:n.version,importURL:n.importURL}})});return this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:i,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),n}async addNpmDependencies(e){return eA(async()=>{await this.whenInitialized();let j;this.dependenciesModule?.importMapContent?j=JSON.parse(this.dependenciesModule?.importMapContent):j={imports:{}};let t;this.dependenciesModule?.dependenciesMapContent?t=JSON.parse(this.dependenciesModule?.dependenciesMapContent):t={dependencies:{}};let r=Array.isArray(e)?e:[e];if(r=r.filter(a=>{if(ue.has(a.target)||Ee(a.target))return!1;let s=de(a);return!j.imports[s]}),r.length===0)return{dependenciesMap:t};r=r.map(a=>{if(t.dependencies[a.target]){let l=j.imports[a.target]??Object.entries(j?.imports).find(([c])=>c.startsWith(a.target))?.[1];I(l,"The import map should contain a import that is in the dependencies map");let k=Uo(l)?.version;return k?{...a,target:`${a.target}@${k}`}:a}let s=$e[a.target];return s?{...a,target:`${a.target}@${s}`}:a});let{importMap:o,resolvedDependencies:n}=await No(j,r,ue,$e),i=await this.extendCurrentDependenciesMap(n);return n.forEach(({name:a,version:s})=>DA("npm_dependency_add",{name:a,semver:s})),x.debug({newImportMap:o,newDependenciesMap:i}),await this.updateDependenciesLocked(o,i),{dependenciesMap:i}})}async reinstallNpmDependencies(){return eA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies();delete e.scopes;let{importMap:t}=await Lo(e,ue,$e);return await this.updateDependenciesLocked(t,j),t})}async uninstallBlockedNpmDependencies(){return eA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=Cr(j),r=await Jo(e);return await this.updateDependenciesLocked(r,t),r})}async clearNpmDependencies(){return eA(async()=>this.updateDependenciesLocked({imports:{}},{dependencies:{}}))}async removeBlockedNpmDependencies(){return eA(async()=>{let{currentImportMap:e,currentDependenciesMap:j}=this.getCurrentDependencies(),t=Cr(j);return await this.updateDependenciesLocked(e,j),t})}async rebuildImportMapFromDependencies(){return eA(async()=>{let e=this.dependenciesModule?.dependenciesMapContent,j=e?JSON.parse(e):{dependencies:{}},t=await Qo(j,ue,$e);return await this.updateDependenciesLocked(t,j),t})}async unsafeUpgradeDependency(e,j,t){return eA(async()=>{let{currentImportMap:r,currentDependenciesMap:o}=this.getCurrentDependencies(),n=await Ho(r,e,j,t),i=Lj(n),a=Nj(i,o);return await this.updateDependenciesLocked(n,a),n})}async extendCurrentImportMap(e,j){return eA(async()=>{let{currentImportMap:t,currentDependenciesMap:r}=this.getCurrentDependencies(),o=qj(t,e),n=Nj(r,j);return this.updateDependenciesLocked(o,n)})}async extendCurrentDependenciesMap(e){let j={};for(let r of e)j[r.name]=r.version;let t=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return t.dependencies=Object.assign(j,t.dependencies),t}getCurrentDependencies(){let e=this.dependenciesModule?.importMapContent?JSON.parse(this.dependenciesModule?.importMapContent):{imports:{}},j=this.dependenciesModule?.dependenciesMapContent?JSON.parse(this.dependenciesModule?.dependenciesMapContent):{dependencies:{}};return{currentImportMap:e,currentDependenciesMap:j}}async updateDependenciesLocked(e,j){let t=JSON.stringify(e,null,4),r=JSON.stringify(j,null,4);if(t===this.dependenciesModule?.importMapContent&&r===this.dependenciesModule?.dependenciesMapContent)return;let o={moduleId:"$upsertName",name:Fr,saveId:lj(),type:"config",files:[{name:"importMap.json",type:"importMap",content:t},{name:"dependencies.json",type:"dependencies",content:r}],imports:{absolute:[],relative:[],bare:[]}};I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:[n]}=await this.modulesService.saveBatch({batch:[o]});I(n,"Modules API must return an updated import map after savebatch"),this.updateTreeNodeWithOwnTreeVersion(WA,n);let i={kind:"dependencies",importMapContent:t,dependenciesMapContent:r,...n,id:n.id,localId:n.localId,type:n.type,name:n.name};this.setNextInternalState({dependenciesModule:i,persistedModules:this.persistedModules,transientSaves:this.transientSaves,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})}getPersistedDependenciesModule(){return this.dependenciesModule}getPersistedModuleByGlobalId(e){for(let j of this.persistedModules.values())if(j.id===e)return j}getPersistedModuleByLocalId(e){return this.persistedModules.get(e)}getTransientSaveByLocalId(e){return this.transientSaves.get(e)}async handleRemoteModuleDeleteEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleDeletes(e.map(j=>j.id))}async handleRemoteModuleDeletes(e){await eA(async()=>{let j=[],t=[];for(let i of e){let a=this.getPersistedModuleByGlobalId(i);a&&(t.push(X(a)),j.push(a.localId))}let r=lA(this.persistedModules,i=>{for(let a of j)i.delete(a)}),o=lA(this.transientSaves,i=>{for(let a of j)i.delete(a)}),n=this.lastSnapshot.depsGraph;for(let i of t)n=$t(n,i);this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:r,transientSaves:o,depsGraph:n,didRemoteChange:!0})})}async handleRemoteModuleSaveEvents(e){if(!this.useTreeAsLocalModuleList)return this.handleRemoteModuleSaves(e.map(j=>j.module))}async handleRemoteModuleSaves(e){let j=[],t=[];for(let n of e)X(n)===WA?j.push(n):t.push(n);let r,o=j.length>0?j[j.length-1]:void 0;if(o){let{importMapContent:n,dependenciesMapContent:i}=await this.getDependenciesFiles(o);I(i,"No dependencies file exists for the remote update!"),r={kind:"dependencies",...o,id:o.id,localId:o.localId,type:"config",name:o.name,importMapContent:n,dependenciesMapContent:i}}await eA(async()=>{r&&(this.dependenciesModule=r);let n=this.persistedModules,i=this.lastSnapshot.depsGraph,a=await Promise.all(t.map(s=>this.createServerModuleFromData(s)));for(let s of a){let l=X(s),k=s.localId;n=lA(n,c=>{c.set(k,s)}),this.transientSaves.has(k)||(i=Jj(this.lastSnapshot.depsGraph,l,s.imports.relative))}this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:n,transientSaves:this.transientSaves,depsGraph:i,didRemoteChange:!0,multiplayerChange:!0})})}getPatchTransientSave(e,j,t){return{saveId:t,type:j.type,name:j.name,localId:e,moduleContent:j.moduleContent,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,imports:j.imports,exports:j.exports,reExportedModules:j.reExportedModules,sourceRevision:j.sourceRevision,update:j.update}}async upsertBatchLocked(e){if(this.readOnlyTree)return;let j=this.persistedModules,t=new Map,r=[],o=new Map;for(let k of j.values()){let c=X(k);o.set(c,k.localId),r.push([c,k.imports.relative])}let n=new Map;for(let k in e){let c=k,u=e[c];I(u,"No persist params found for",c);let $=this.transientSaves.get(c),E=$??j.get(c);I(E,"No module found for",c);let m=X(E);n.set(m,$?.saveId??lj()),t.set(m,yA(u.name)),o.set(m,c),$&&r.push([m,$.imports.relative])}let i=Pr(r),a=new Map,s=lA(this.transientSaves,k=>{for(let c in e)k.delete(c)}),l;try{let{batch:k,nextPersistedModules:c}=await this.createBatch(e,a,j,i,o,n,t);I(!this.readOnlyTree,"modules storage is read only"),I(this.modulesService);let{data:u}=await this.modulesService.saveBatch({batch:k});j=lA(c,$=>{for(let E of u.values()){let m=E.localId,d=a.get(m);if(!d){let O=$.get(m);I(O,m,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(m,E),O.saveId=E.saveId,O.moduleURL=E.baseURL+E.files.module;continue}let f={kind:"local",...E,id:E.id,localId:E.localId,imports:d.imports,moduleURL:E.baseURL+E.files.module,sourceContent:d.sourceContent,sourceMapContent:d.sourceMapContent,moduleContent:d.moduleContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,sourceRevision:d.sourceRevision,annotations:d.annotations,update:d.update},R=e[m]?.errors,_=d.kitSectionsStructure,h=d.treeVersion??this.treeStore.remoteTreeVersion;if(!this.updateTreeNode(E.localId,h,f,R,_))return;$.set(m,f)}})}catch(k){j=this.persistedModules;let c=Array.from(a.values()).map(m=>m.saveId).join("-"),u=this.transientSaveRetries.get(c)??0,{error:$,dropTransient:E}=this.handlePersistenceError(k,u,()=>{this.transientSaveRetries.set(c,u+1),setTimeout(async()=>{let m=Object.entries(a).every(([d,f])=>{let R=d,_=this.transientSaves.get(R);return _&&_.saveId===f.saveId});ft($)&&(this.transientSaveRelativeImportRetries.add(c),await this.refresh()),m&&(x.debug("retrying saving batchId with id:",c),this.upsertBatchLocked(e))},1e3+u*1e3)});if(!E)return;l=$}if(this.setNextInternalState({dependenciesModule:this.dependenciesModule,persistedModules:j,transientSaves:s,depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0}),l)throw l}async createBatch(e,j,t,r,o,n,i){let a=[];for(let c in e){let u=c,$=e[u];I($,"No persist params found for",u);let E=this.transientSaves.get(u);if(!E){let d=t.get(u);I(d,`Trying to persist ${u} but it doesn't have neither a corresponding transient save nor an existing persisted module.`),d.kind==="server"&&(d=await this.createLocalModuleFromModule(d),t=lA(t,R=>{d&&R.set(d.localId,d)}));let f=n.get(u);I(f,"No save id found for",u),E=this.getPatchTransientSave(u,d,f)}j.set(u,E);let m=await this.createBatchSaveForUpdatedModule(this.persistedModules.get(u)?.id??"$upsertName",E,t,n,i,$);a.push(m)}let s=new Map;for(let c in e){let u=c,$=e[u];I($,"No persist params found for",u);let E=X($),m=new Set;Fj(r,E,m),s.set(u,m)}let l=[];for(let c of s.values())for(let u of c){let $=o.get(u);I($,"Cannot find localId for",u);let E=t.get($);E?.kind==="server"&&l.push(this.createLocalModuleFromModule(E))}if(l.length>0){let c=await Promise.all(l);t=lA(t,u=>{for(let $ of c)u.set($.localId,$)})}for(let c of s.values())for(let u of c)n.has(u)||n.set(u,lj());let k=new Set;for(let[c,u]of s){let[$]=at(c);for(let E of u){let m=o.get(E);if(I(m,"Cannot find localId for",E),j.has(m)||k.has(E)||t.get(m)?.metadata.localModuleImportMapEntries===!0&&this.moduleUsesLocalImportMapSpecifiers(E)&&($!=="codeFile"||!r[E]?.dependencies.has(c)))continue;k.add(E);let R=await this.createBatchSaveForDependentModule(m,t,n,i);a.push(R)}}return{batch:a,nextPersistedModules:t}}handlePersistenceError(e,j,t){let r=e instanceof Error?e.message:"",o=e instanceof Ir?e.code:0,n=e instanceof Ir?e.status:0,i=o===1002,a=o===-1e3,s=n>=300&&n!==400&&n!==403,l=a||s||ft(e),k=20,c=2;if(ft(e))return!l||j>=c?(x.reportError("Relative imports error, exceeded max retries, making document read only:",{missing:e.persistedMissingRelativeImports}),this.makeDocumentReadOnly(),$A({type:"add",variant:"warning",text:"Framer can\u2019t save your latest changes. Please reload the page to continue working.",key:"client-outdated",duration:Number.POSITIVE_INFINITY,icon:"warning",showCloseButton:"never",action:{title:"Reload",onClick:()=>{x.reportError("ModulesStorage: Reloaded due to relative imports error.",{missing:e.persistedMissingRelativeImports}),window.top.location.reload()}}}),{error:e,dropTransient:!0}):(x.debug("Relative imports error, will retry:",{missing:e.persistedMissingRelativeImports}),t(),{error:e,dropTransient:!1});if(i&&j>0)x.debug("Ignoring duplicated save id.");else{if(i)return x.debug("Duplicate save id error, will drop transient save:",e),{error:e,dropTransient:!0};if(l&&j<k)return x.info("Connection error, will retry:",{message:r,code:o,status:n,retryCount:j}),t(),{dropTransient:!1};if(l)x.error("Error saving: too many retries, will drop transient save:",{message:r,code:o,status:n,retryCount:j});else return x.debug("Error saving, will drop transient save:",e),{error:e,dropTransient:!0}}return{dropTransient:!1}}moduleUsesLocalImportMapSpecifiers(e){let[j,t]=at(e);if(j==="layoutTemplate")return!0;if(j==="collection")return ie.isOn("collectionLocalModuleImportMapEntries");if(j==="screen"){let r=this.treeStore.tree.get(t);if(jo(r)||SA(r))return!0}return!1}processTransientSaveData({nextPersistedModules:e,transientSave:j,data:t},r,o){let n=j.treeVersion??this.treeStore.remoteTreeVersion,i;return e=lA(e,a=>{let s=t.values(),l=s.next().value;i=l.localId;let k={kind:"local",...l,id:l.id,localId:i,imports:j.imports,moduleURL:l.baseURL+l.files.module,sourceContent:j.sourceContent,sourceMapContent:j.sourceMapContent,moduleContent:j.moduleContent,submoduleContents:j.submoduleContents,binaryAssetContents:j.binaryAssetContents,sourceRevision:j.sourceRevision,annotations:j.annotations,update:j.update};if(this.updateTreeNode(l.localId,n,k,r,o)){a.set(i,k);for(let u of s){let $=a.get(u.localId);I($,u.localId,"is not in persistedModules"),this.updateTreeNodeWithOwnTreeVersion(u.localId,u),$.saveId=u.saveId,$.moduleURL=u.baseURL+u.files.module}}}),I(i,"Updated module",j,"is not found in the response"),{nextPersistedModules:e,updatedModuleLocalId:i}}setNextInternalState({dependenciesModule:e,persistedModules:j,transientSaves:t,depsGraph:r,didRemoteChange:o,multiplayerChange:n=!1}){this.dependenciesModule=e,this.persistedModules=j,this.transientSaves=t;let i=xa(e,this.lastSnapshot.dependenciesModule,j,t,r,this.lastSnapshot.modules,this.initialized,o,n),a=this.lastSnapshot.initialized;this.lastSnapshot={dependenciesModule:i.dependenciesModule,modules:i.modules,depsGraph:i.depsGraph,initialized:i.initialized},!(i.metadata.patches.length===0&&i.initialized===a)&&this.notifyListeners(i)}async createLocalModuleFromModule(e){x.debug("compiling server module:",e.localId);let j=e.sourceContent;j||(j=await this.fetchSourceContentFromData(e));let t={},r={},o=this.downloadQueue,n=new Array;for(let s of e.submodules)n.push(o.run(async()=>{let l=await fetch(e.baseURL+s);t[s]=await l.text()}));for(let s of e.binaryAssets)n.push(o.run(async()=>{let k=await(await fetch(e.baseURL+s)).arrayBuffer();r[s]=new Uint8Array(k)}));await Promise.all(n);let i=X(e),a=await this.compile({localId:e.localId,name:i,source:j,type:e.type,includeSourceMap:n6(e.type)});for(let[s,l]of this.lazyServerModulesForTransientSaves)l.delete(i),l.size===0&&this.lazyServerModulesForTransientSaves.delete(s);return{...e,kind:"local",id:e.id,localId:e.localId,sourceContent:j,moduleContent:a.code,sourceMapContent:a.sourceMap,submoduleContents:t,binaryAssetContents:r,imports:a.imports,sourceRevision:s6(e),annotations:a.annotations}}async createBatchSaveForUpdatedModule(e,j,t,r,o,n){let i=X(j),{localId:a,moduleContent:s,sourceContent:l,sourceMapContent:k,submoduleContents:c={},binaryAssetContents:u={},metadata:$,sourceRevision:E,imports:m,type:d,name:f,annotations:R,update:_,...h}=j;switch(e){case"$new":I(a===void 0,`Attempted to create ${i} but it already has localId: ${a}`);break;case"$upsertName":default:I(a!==void 0,`The transient save for the provided moduleId: ${e} doesn't have localId`)}let{type:G,name:O,metadata:w,files:v,...F}=n;I(G===d&&O===f,`Mismatched type/name between save and parameters: ${G}/${O} !== ${d}/${f}`);let U=yA(O),P=s;m.relative.length>0&&(P=await this.replaceRelativeImportsWithAbsolute(i,s,m.relative,t,r,br(c),o)),k&&(P+=`
//# sourceMappingURL=./${U.sourceMap}`);let S=(v??[]).concat([{name:U.module,type:"module",content:P},{name:U.source,type:"source",content:l}]);k&&S.push({name:U.sourceMap,type:"sourceMap",content:k});for(let[D,J]of Object.entries(c))S.push({name:D,type:"submodule",content:J});for(let[D,J]of Object.entries(u))S.push({name:D,type:"binaryAsset",bytes:J});let M={};if($||w)if(a){let D=t.get(a);I(D||e==="$upsertName",`Cannot safely update metadata for ${e} (${a})`),M.metadata={...D?.metadata,...$,...w,sourceRevision:E}}else M.metadata={...$,...w,sourceRevision:E};return{...h,moduleId:e,type:G,name:O,files:S,imports:m,...F,...M}}async createBatchSaveForDependentModule(e,j,t,r){let o=j.get(e);I(o,e,"is not found in persistedModules"),I(o.kind==="local","persisted module is not a local module");let n=X(o),i=yA(o.name),a=o.imports,s=o.moduleContent;a.relative.length>0&&(s=await this.replaceRelativeImportsWithAbsolute(n,o.moduleContent,a.relative,j,t,br(o.submoduleContents),r));let l=t.get(n);I(l,"newSaveIds don't contain saveId for",n);let k={},c=this.moduleUsesLocalImportMapSpecifiers(n);return o.metadata.localModuleImportMapEntries!==c&&(k.metadata={...o.metadata,localModuleImportMapEntries:c}),{type:o.type,moduleId:o.id,name:o.name,saveId:l,patchSaveId:o.saveId,files:[{name:i.module,type:"module",content:s}],imports:a,...k}}findPersistedModuleLocalIdByTypeSlashName(e,j){return this.ensurePersistedLocalIdsByTypeSlashNameCacheFor(e).get(j)}ensurePersistedLocalIdsByTypeSlashNameCacheFor(e){let j=this.persistedLocalIdsByTypeSlashNameCache.get(e);if(!j){j=new Map;for(let[t,r]of e.entries())j.set(X(r),t);this.persistedLocalIdsByTypeSlashNameCache.set(e,j)}return j}async replaceRelativeImportsWithAbsolute(e,j,t,r,o,n,i){let{modulesCDN:a}=fr(),s={};for(let E of n){let m=hi(E);s[m]=m}let l=this.moduleUsesLocalImportMapSpecifiers(e),k=new Set;for(let E of t){if(E in s)continue;let m=fj(E,e);if(!m)continue;let d=this.findPersistedModuleLocalIdByTypeSlashName(r,m);if(!d){k.add(m),x.error("Cannot resolve",E,"from",e);continue}let f=r.get(d);I(f);let{id:R,files:_}=f,h=o.get(m)??f.saveId,G=i?.get(m)?.module??_.module;I(IA(G),"Must have a module file name to build a local module import map specifier."),s[E]=l?Ye(d,G):`${a}/${R}/${h}/${G}`}let c=await Gt(j,s);if(c.ok)return c.value;if(e.startsWith("codeFile"))return c.error.partiallyProcessedCode;let u=new Set,$=this.treeStore.tree;for(let E of c.error.unresolvedRelativeImports){let m=fj(E,e);if(!m)continue;let[d]=at(m);if(!(d==="codeFile"||!$.getNodeWithTrait(m,xr))){u.add(m);break}}if(u.size===0)return x.reportError("Failed to rewrite relative imports due to unpersisted relative dependencies",{relativeImports:t,unresolved:Array.from(c.error.unresolvedRelativeImports)}),c.error.partiallyProcessedCode;throw x.reportError("Failed to rewrite relative imports",{typeSlashName:e,missing:Array.from(u)}),new ye(u)}async getDependenciesFiles({baseURL:e,files:j}){let[t,r]=await Promise.allSettled([this.downloadQueue.run(async()=>{let i=await fetch(e+j.importMap);if(i.ok!==!0)throw new Error("failed to load importMap file");return i.text()}),this.downloadQueue.run(async()=>{let i=await fetch(e+j.dependencies);if(i.ok!==!0)throw new Error("failed to load dependencies file");return i.text()})]);I(t.status==="fulfilled","The importMap has to exist on the module");let o=t.value,n;return r.status==="fulfilled"?n=r.value:x.warn("No dependencies file was found!"),{importMapContent:o,dependenciesMapContent:n}}async upsertKit(e,j,t,r,o){return eA(async()=>{let n=JSON.stringify(e),i=[{name:"kit.json",type:"source",content:n},...t.map(c=>({name:`${c.id}.json`,type:"kitSection",content:JSON.stringify(c.content)})),...r.map(c=>({name:`${c.id}.json`,type:"kitVectorSetNames",content:JSON.stringify(c.content)}))],a=performance.now(),s="kit/kit",l={type:"kit",files:i,assets:o.size>0?Array.from(o):void 0,name:xk,moduleId:this.persistedModules.get(s)?.id??"$upsertName",saveId:lj(),metadata:{kit:{id:e.id,title:e.title,icon:j}},imports:{absolute:[],relative:[],bare:[]}};I(this.modulesService);let{data:k}=await this.modulesService.saveBatch({batch:[l]});this.setNextInternalState({dependenciesModule:this.dependenciesModule,transientSaves:this.transientSaves,persistedModules:lA(this.persistedModules,c=>{for(let u of k.values()){if(u.localId!==s)continue;let $={kind:"local",...u,id:u.id,localId:u.localId,imports:u.imports,moduleURL:u.baseURL+u.files.source,sourceContent:n,sourceMapContent:void 0,moduleContent:n,submoduleContents:{},binaryAssetContents:{},sourceRevision:void 0,annotations:void 0,update:a};c.set(s,$)}}),depsGraph:this.lastSnapshot.depsGraph,didRemoteChange:!0})})}async enqueueKitScreenshots(e,j,t){let r=this.persistedModules.get(Gr("kit","kit"));I(r,"Kit module must have been persisted to enqueue screenshots");let o=t?"draft":r.saveId;I(o,"Kit Save ID must be set"),I(this.modulesService),await this.modulesService.enqueueKitScreenshots({moduleId:r.id,saveId:o,ids:Array.from(j),kitPageContent:e})}};function wk(A,e){return`${fr().modulesCDN}/${e.id}/${A.saveId}/${e.files.module}`}function xa(A,e,j,t,r,o,n,i,a){let s=new Set(o.keys()),l=new Set(t.keys()),k=[],[c,u]=ut(o,m=>{for(let d of j.values()){let f=d.localId,R=X(d),_=t.get(f),h=_?.type??d.type;if(!zo(h))continue;let G;if(_)G={kind:"local",localId:f,type:_.type,name:_.name,moduleURL:wk(_,d),moduleContent:_.moduleContent,sourceContent:_.sourceContent,sourceMapContent:_.sourceMapContent,submoduleContents:_.submoduleContents,binaryAssetContents:_.binaryAssetContents,relativeImports:_.imports.relative,files:d.files,sourceRevision:_.sourceRevision,kitSectionsStructure:_.kitSectionsStructure,svgIcon:_.svgIcon,update:_.update};else{let O=s6(d);G=d.kind==="local"?{kind:"local",localId:f,type:d.type,name:d.name,moduleURL:d.moduleURL,moduleContent:d.moduleContent,sourceContent:d.sourceContent,sourceMapContent:d.sourceMapContent,submoduleContents:d.submoduleContents,binaryAssetContents:d.binaryAssetContents,relativeImports:d.imports.relative,files:d.files,sourceRevision:O,svgIcon:void 0,kitSectionsStructure:void 0,update:d.update}:{kind:"server",localId:f,type:d.type,name:d.name,moduleURL:d.moduleURL,sourceContent:d.sourceContent,relativeImports:d.imports.relative,files:d.files,sourceRevision:O,update:d.update}}va(m,R,G),l.delete(f),s.delete(R)}for(let d of l){let f=t.get(d);if(I(f),!f.localId)continue;let R=yA(f.name),_={kind:"local",localId:f.localId,type:f.type,name:f.name,moduleURL:`./transient/${f.saveId}/${R.module}`,moduleContent:f.moduleContent,sourceContent:f.sourceContent,sourceMapContent:f.sourceMapContent,submoduleContents:f.submoduleContents,binaryAssetContents:f.binaryAssetContents,relativeImports:f.imports.relative,files:R,sourceRevision:f.sourceRevision,svgIcon:f.svgIcon,kitSectionsStructure:f.kitSectionsStructure,update:f.update};va(m,d,_),s.delete(X(_))}for(let d of s)m.delete(d),k.push(d)}),$={};for(let m of k){let d=o.get(m);d&&($[m]=d.localId)}let E=lA(e,m=>{if(A){if(!m)return{kind:"dependencies",localId:WA,type:A.type,name:A.name,importMapContent:A.importMapContent,dependenciesMapContent:A.dependenciesMapContent};m.importMapContent=A.importMapContent,m.dependenciesMapContent=A.dependenciesMapContent}});return E&&E!==e&&u.push({op:e?"replace":"add",path:[X(E)],value:E}),{dependenciesModule:E,modules:c,deletedLocalIdsByTypeSlashNames:$,depsGraph:r,initialized:n,metadata:{patches:u,hasLocalChanges:t.size>0,didRemoteChange:i,multiplayerChange:a}}}function va(A,e,j){let t=A.get(e);if(!t){A.set(e,j);return}if(t.kind!==j.kind){A.set(e,j);return}if(t.kind==="server"){I(j.kind==="server"),Pa(t,j);return}I(j.kind==="local"),qk(t.relativeImports,j.relativeImports)||(t.relativeImports=j.relativeImports),to(t.files,j.files)||(t.files=j.files);let{relativeImports:r,files:o,...n}=j;Pa(t,n)}function Pa(A,e){Object.assign(A,e)}function qk(A,e){if(!A&&!e)return!0;if(A&&e){let j=A.length;if(j!==e.length)return!1;for(let t=0;t<j;t++)if(A[t]!==e[t])return!1;return!0}else return!1}function Nk(A){return A.type==="save"}function Lk(A){return A.type==="delete"}function lj(){return Be()}function n6(A){return A==="codeFile"||A==="canvasComponent"}function Ta(A,e,j){return A.replace(new RegExp(`\\b(from\\s*)(["'])${t6(e)}\\2`,"g"),`$1${JSON.stringify(j)}`)}function Kk(A,e){switch(A){case"canvasComponent":case"layoutTemplate":case"screen":case"prototype":case"collection":case"draftCollection":case"webPageMetadata":case"siteMetadata":case"snippets":case"vector":case"vectorSet":case"kit":return e.default;case"codeFile":case"css":case"componentPresets":case"config":case"localization":case"design":return Object.values(e)[0];default:Bj(A)}}var wa={start:new Date("2025-09-03T10:00:00Z").getTime(),end:new Date("2025-09-07T13:00:00Z").getTime()};function Jk(A,e){for(let j of A){if(j.id!==e.localId)continue;if(j.save.saveId===e.saveId)return!1;let t=new Date(e.savedAt).getTime();return Number.isNaN(t)?!1:t>wa.start&&t<wa.end}return!1}function La(A,e){if(!A||A.length===0)return e?.placeholder??"";if(A.length===1)return A[0]&&A[0]!==""?A[0]:e?.placeholder??"";let j=[...A],t="";if(e?.max&&e.max<A.length){let r=A.length-e.max;j=j.slice(0,e.max),t=`${r} ${r>1?"others":"other"}`}else t=j.pop()??"";return j.length>1?`${j.join(", ")}, and ${t}`:`${j.join(", ")} and ${t}`}function Ce(A){let e=rA(A);if(!(!e||!KA(e)||!pj(e)))return`${e.moduleId}:${e.exportSpecifier}`}function Ka(A){let e=new Map;for(let j of A){let t=Ce(j);t&&e.set(t,j)}return e}function Ja(A,e){let j=A.getRawControlProps();for(let t in j){let r=j[t]?.type,o=j[t]?.value;if(r!=="vectorsetitem"||!IA(o)||!KA(o))continue;let n=Ce(o);if(!n||!e.has(n))continue;let i=e.get(n);i&&A.setControlProp(t,{type:"vectorsetitem",value:i})}}function Ha(A,e){for(let j of e){Ja(j,A);let t=Ce(j.codeComponentIdentifier);if(!t||!A.has(t))continue;let r=A.get(t);r&&j.set({codeComponentIdentifier:r})}}function Qa(A,e){let j=e.getContentManagementNode();if(j){I(j.isLoaded(),"CMS Should always be loaded.");for(let{node:t,skipChildren:r}of j.walkWithSkipChildren()){if(et(t)){if(!t.variables.some(i=>i.type==="vectorsetitem")){r();continue}Ua(t,A)}if(!ke(t))continue;let o=t.getControlProps();for(let n in o){let i=o[n]?.value;if(o[n]?.type!=="vectorsetitem"||!IA(i)||!KA(i))continue;let s=Ce(i);if(!s||!A.has(s))continue;let l=A.get(s);l&&t.setControlProp(n,{...o[n],value:l})}}}}function Ua(A,e){let j=!1,t=A.variables.map(r=>{if(r.type!=="vectorsetitem")return r;let{initialValue:o}=r,n=o.identifier;if(!n)return r;let i=Ce(n);if(!i||!e.has(i))return r;let a=e.get(i);return a?(j=!0,{...r,initialValue:{...o,identifier:a}}):r});j&&A.set({variables:t})}function Va(A,e){for(let j of e.root.children){if(SA(j)){Ja(j,A);continue}(vj(j)||so(j))&&Ua(j,A)}}var fA=LA("modules-store"),Xa=new Set(["codeFile","canvasComponent","screen","layoutTemplate","vector"]),Uk=500;function ht(A){let{module:e,exportSpecifier:j}=A,{id:t,saveId:r,files:o}=e;return I(o.module,"module file must exist for a saved module"),nj(t,r,o.module,j)}var Xj,De,Oe,kj,za=class extends wo{constructor(j,t,r,o,n,i,a){super();this.treeStore=j;this.loadedExternalModulesStore=t;this.chromeStore=r;this.modulesAPIServicePromise=o;this.makeDocumentReadOnly=n;this.insertTemporaryImportMap=i;this.loadAllLocalModules=a;N(this,"dependenciesModule");N(this,"localModules",new Map);N(this,"fastRefreshModules",new Map);N(this,"externalModulesDynamicInfo",new Map);N(this,"revision",0);rj(this,Xj,new Map);N(this,"moduleDepsGraph",{});N(this,"modulesStorage");N(this,"moduleUpdatesEmitter",new gr);N(this,"fastRefreshModulesEmitter",new gr);rj(this,De);rj(this,Oe,new Map);rj(this,kj,new Map);N(this,"debugModuleStoreAndComponentLoaderRevisionsMatch",()=>this.revision===pA.modulesRevision);N(this,"checkForExternalModuleUpdates",async()=>{if(this.treeStore.tree.isViewOnly)return;let j=this.treeStore.tree.getExternalModulesListNode();if(!j||!j.children?.length)return;let t=[],r=new Map;j.children.forEach(a=>{let s=rA(a.codeComponentIdentifier);if(I(s?.kind==="externalModuleExport","expected ExternalModuleNode identifier to be of kind externalModuleExport"),a.type==="vector"){let l=a.annotation("framerVector");if(!it(l))return;let k=l.set.moduleId,c=r.get(k)??[];c.push(s),r.set(k,c)}else t.push(s)});for(let[a,s]of r){let l=this.treeStore.tree.get(a);if(!mj(l))continue;let k=l.annotation("framerVectorSet");Mr(k)&&(Po(k)||t.push(...s))}let o=t.map(({moduleId:a,saveId:s})=>({moduleId:a,saveId:s}));if(!o.length)return;let n=[],i=[];for(let a=0;a<o.length;a++){let s=o[a];if(I(s,"query is expected to be defined."),n.push(s),n.length<Uk&&a<o.length-1)continue;let{modules:l}=await this.lookUpModules(n,{includeStatus:!0});i.push(...l),n=[]}this.treeStore.tree.isViewOnly||this.updateExternalModuleNodes(i.map((a,s)=>{let l=t[s];return I(l,"External module missing a matching identifier"),{module:a,exportSpecifier:l.exportSpecifier}}),{onTreeUpdate(){}}).catch(BA)});N(this,"updatesPollId");N(this,"compileFastRefreshModule",async({localId:j,name:t,source:r,includeSourceMap:o=!0})=>{let{type:n,name:i}=We(j);if(!Xa.has(n))return;let a=n==="codeFile"?yA(t).source:i,{code:s,imports:l,sourceMap:k}=await Zi({localId:j,source:r,name:a,includeSourceMap:o}),c={kind:"fast-refresh",localId:j,type:n,name:a,sourceContent:r,moduleContent:s,relativeImports:l.relative,sourceMapContent:k,binaryAssetContents:void 0,submoduleContents:{},update:0},[u,$]=ut(this.fastRefreshModules,E=>{E.set(t,c)});this.fastRefreshModules=u,this.fastRefreshModulesEmitter.emit({patches:$,dependentModules:[],prioritizedModules:[],revision:++this.revision,initialized:!0})});N(this,"compile",({localId:j,name:t,source:r,includeSourceMap:o=!0,type:n,telemetrySession:i})=>{let a=Aa({name:t,source:r,includeSourceMap:o,type:n,telemetrySession:i});return this.fastRefreshEnabled&&j&&this.compileFastRefreshModule({localId:j,name:t,source:r,includeSourceMap:o}).catch(BA),a});this.modulesStorage=new gt(()=>this.modulesAPIServicePromise.catch(s=>{throw fA.error(s,{context:"Failed to discover ModulesAPI service:"}),s}),this.compile,s=>this.scheduler.process(s),s=>this.scheduler.processWhenReady(s),s=>this.scheduler.runWhenIdle(s),j,()=>this.getActiveScope(),()=>this.makeDocumentReadOnly()),this.fastRefreshModulesEmitter.onNewStream=s=>(fA.debug("onNewStream - fast refresh",s),{latest:this.getAllModulesAsUpdateEvent(!0)}),this.moduleUpdatesEmitter.onNewStream=s=>(fA.debug("onNewStream - module updates",s),{latest:this.getAllModulesAsUpdateEvent(!1)}),this.modulesStorage.subscribe(s=>{let l=s.dependenciesModule?.importMapContent,k=this.dependenciesModule?.importMapContent,c=!1,u=!1,$=!1,E=!1;if(l&&k&&l!==k){let w=JSON.parse(l),v=k?JSON.parse(k):void 0;for(let[F,U]of Object.entries(w.imports??{})){GA(this,Xj).set(F,"success");let P=v?.imports?.[F];if(!P){c=!0;continue}P!==U&&(u=!0)}$=!u&&!c,E=s.metadata.multiplayerChange||u||$}E&&s.metadata.multiplayerChange,this.dependenciesModule=s.dependenciesModule,this.localModules=s.modules;let m=this.moduleDepsGraph;this.moduleDepsGraph=s.depsGraph;let d=s.metadata.patches,f=new Set,R=[],_=[],h;for(let w of d){let v=w.path[0];if(I(typeof v=="string"),v===WA){h=w;for(let F of s.modules.keys())f.add(F);break}w.op==="remove"&&w.path.length===1?_.push(v):R.push(v)}let G=new Set;if(!h){let w=this.getActiveScope(),v=Se(w);fA.debug("Calculated visible code component module typeSlashNames",v);for(let F of R)Fj(s.depsGraph,F,f,v,G);for(let F of _)Fj(m,F,f,v,G);R.forEach(F=>{f.delete(F)}),_.forEach(F=>{f.delete(F),G.delete(F)})}fA.debug("prioritized evaluation sending to sandbox",{dependentModules:f,visibleDependentModules:G},"highprio size",G.size,"dep size",f.size);let O={patches:d,dependentModules:Array.from(f),prioritizedModules:Array.from(G),revision:++this.revision,initialized:s.initialized};this.moduleUpdatesEmitter.emit(O),this.fastRefreshEnabled&&h&&this.fastRefreshModulesEmitter.emit({patches:[h],dependentModules:[],prioritizedModules:[],revision:O.revision,initialized:s.initialized})})}getActiveScope(){if(this.chromeStore.mainView===5)return;let j=this.treeStore.tree.getNode(GA(this,De));if(j)return I(j?.loaded,"Active scope node should be loaded"),j.loaded}setActiveScope(j){qn(this,De,j)}getLatestDependencyGraph(){return this.moduleDepsGraph}initialize(){return this.initialized?this.modulesStorage.refresh():(this.setupPollingExternalModulesUpdates(),this.modulesStorage.initialize())}get initialized(){return this.modulesStorage.initialized}whenInitialized(){return this.modulesStorage.whenInitialized()}whenIdle(){return this.modulesStorage.whenIdle()}refresh(){return this.modulesStorage.refresh()}deleteModules(j){return this.modulesStorage.delete(j)}upsertBatch(j){return this.modulesStorage.upsertBatch(j)}forType(j){return new It(this.modulesStorage,j,this.debugModuleStoreAndComponentLoaderRevisionsMatch)}getNpmDependencyInstallStatus(j){return GA(this,Xj).get(de(j))??"unknown"}async addNpmDependencies(j){let r=typeof this.dependenciesModule>"u"&&!Ui(),o=await _a(this.modulesStorage.addNpmDependencies(j)),n=Array.isArray(j)?j:[j],i=n.filter(({target:l})=>!Ee(l));for(let l of i)GA(this,Xj).set(de(l),o.ok?"success":"failure");if(!o.ok)throw o.error;r&&Vi();let a=Object.keys(o.value.dependenciesMap.dependencies),s=n.map(({target:l})=>l).filter(l=>!a.includes(l)&&Ee(l));if(s.length>0){let l=La(s,{max:5,placeholder:"package"});$A({type:"add",variant:"warning",text:`${l} ${s.length===1?"is":"are"} incompatible with Framer`,duration:5e3})}return o.value}changeScope(j){this.setActiveScope(j.id),this.modulesStorage.changeScope(j)}async reinstallNpmDependencies(){return{importMap:await this.modulesStorage.reinstallNpmDependencies()}}async uninstallBlockedNpmDependencies(){return{importMap:await this.modulesStorage.uninstallBlockedNpmDependencies()}}async unsafeUpgradeDependency(j,t,r){return{importMap:await this.modulesStorage.unsafeUpgradeDependency(j,t,r)}}async clearNpmDependencies(){return this.modulesStorage.clearNpmDependencies()}async removeBlockedNpmDependencies(){return{dependenciesMap:await this.modulesStorage.removeBlockedNpmDependencies()}}async rebuildImportMapFromDependencies(){return{importMap:await this.modulesStorage.rebuildImportMapFromDependencies()}}async updateSources(j){return this.modulesStorage.updateSources(j)}async updateKit(...j){return await this.modulesStorage.whenInitialized(),this.modulesStorage.upsertKit(...j)}async listKits(){let j=await this.modulesAPIServicePromise;return I(j,"Modules API service not initialized correctly"),await j.kits()}async enqueueKitScreenshots(...j){return this.modulesStorage.enqueueKitScreenshots(...j)}async updateDependenciesSource(j,t){await this.modulesStorage.updateDependenciesSource(j,t)}getDependentsOfModule(j){return this.modulesStorage.getDependentsOfModule(j)}subscribeToModulesStorage(j){return this.modulesStorage.subscribe(j)}async getModuleDependencies(j){let t=await this.modulesAPIServicePromise;return I(t,"Modules API service not initialized correctly"),await t.getModuleDependencies(j)}getModuleEntryByLocalId(j){for(let t of this.localModules.values())if(t.localId===j)return t}getModuleEntryByUniqueName(j){for(let t of this.localModules.values())if(t.name===j)return t}getPersistedDependenciesModule(){return this.modulesStorage.getPersistedDependenciesModule()}getPersistedModuleByGlobalId(j){return this.modulesStorage.getPersistedModuleByGlobalId(j)}getPersistedModuleByLocalId(j){return this.modulesStorage.getPersistedModuleByLocalId(j)}getPersistedModuleByLocalIdentifier(j){let t=rA(j);if(CA(t))return this.getPersistedModuleByLocalId(t.localId)}tryConvertExternalCodeComponentIdentifierToLocal(j){let t=rA(j);if(t?.kind!=="externalModuleExport")return;let r=this.getPersistedModuleByGlobalId(t.moduleId);if(r)return ze(r.localId,t.exportSpecifier).value}async listNamespaces(){let j=await this.modulesAPIServicePromise;return I(j,"Modules API service not initialized correctly"),await j.listNamespaces()}async createNamespace(j,t){let r=await this.modulesAPIServicePromise;return I(r,"Modules API service not initialized correctly"),await r.createNamespace({ownerId:j,ownerType:t})}async lookUpModule(j,t){let{modules:r,dependencies:o}=await this.lookUpModules([j],t),n=r[0];I(n,"Module does not exist, looking up:",j);let i={module:n};return o&&(i.dependencies=o[n.ownerType]?.[n.ownerId]),i}async lookUpModules(j,t){let r=await this.modulesAPIServicePromise;if(!r)return fA.error("Modules API service not initialized correctly"),{modules:[],dependencies:{}};let{data:o,dependencies:n}=await r.lookUpModules({queries:j,...t}),i=new Map(this.externalModulesDynamicInfo);for(let s of o){let l=s.id,{localId:k,title:c,description:u,lastPublish:$,status:E}=s;i.set(l,{localId:k,title:c,description:u,lastPublish:$,status:E??i.get(l)?.status})}this.externalModulesDynamicInfo=i;let a={modules:o};return n&&(a.dependencies=n),a}trackExternalComponentInsert(j,t){let r=So();for(let o of j)zi({insertId:r,insertType:t,codeComponentId:o})}async installExternalModulesDependencies(j){let t=[],r=[];for(let o of j){let n=GA(this,Oe).get(o);n?r.push(n):t.push(o)}if(t.length>0){let o=this.installDependenciesForModuleURLs(t);for(let n of t)GA(this,Oe).set(n,o);r.push(o)}return Promise.allSettled(r).then(o=>{for(let n of o)n.status!=="fulfilled"&&fA.error("Failed to install external module",n.reason)})}isProcessingModules(){return this.modulesStorage.isProcessing()}hasLocalCodeFileChanges(){return this.modulesStorage.hasLocalCodeFileChanges()}resetModuleStateAndPermissions(j){this.modulesStorage.resetModuleStateAndPermissions(j)}getTransientSave(j){return this.modulesStorage.getTransientSave(j)}startUsingLocalModulesInTree(){return this.modulesStorage.startUsingLocalModulesInTree()}stopUsingLocalModulesInTree(){return this.modulesStorage.stopUsingLocalModulesInTree()}usingLocalModulesInTree(){return this.modulesStorage.usingLocalModulesInTree()}createFastRefreshModuleFromModule(j){if(Xa.has(j.type)){if(j.kind==="server"){let t=this.getPersistedModuleByLocalId(j.localId);I(t?.kind==="server","Only server modules should have no sourceContent"),this.modulesStorage.createLocalModuleFromModule(t).catch(BA);return}this.compileFastRefreshModule({name:X(j),localId:j.localId,source:j.sourceContent}).catch(BA)}}getModuleWithTypeSlashName(j){return this.modulesStorage.getModuleWithTypeSlashName(j)}waitForModulesToSave(){return this.modulesStorage.waitForModulesToSave()}installDependenciesForModuleURLs(j){return fA.info(`\u{1F986} Installing external modules:
	`,j.join(`
	`)),this.lookUpModules(j.map(t=>({url:t})),{includeDependencies:!0}).then(async({dependencies:t={}})=>{let r=Object.values(t).flatMap(i=>Object.values(i)),o,n;for(let{dependencies:i,importMap:a}of r)if(a){o=qj(o??{imports:{}},a);let s=i??Lj(a);n=Nj(n??{dependencies:{}},s)}o&&n&&await this.modulesStorage.extendCurrentImportMap(o,n)})}async addOrUpdateExternalVectors(j){await this.modulesStorage.whenInitialized();let{modules:t}=await this.lookUpModules(j.filter(n=>{let i=this.treeStore.tree.getNodeWithTrait(n.moduleId,mj);return i?rA(i.codeComponentIdentifier).saveId!==n.saveId:!0}),{includeDependencies:!1,includeStatus:!0}),r=new Map,o="default";for(let n of t){let i=ht({module:n,exportSpecifier:o}),a=this.treeStore.tree.getNodeWithTrait(n.id,mj);KA(a?.codeComponentIdentifier)&&rA(a.codeComponentIdentifier).saveId===n.saveId||r.set(i.value,{module:n,exportSpecifier:o})}await Promise.all(Array.from(r.keys(),n=>{let i=rA(n);return I(i,"Identifier must be a valid module identifier"),this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(i).catch(a=>{fA.error(`Failed to evaluate external module "${n}"`,a)})})),await new Promise((n,i)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes(Array.from(r.values()),{onTreeUpdate:()=>{let a=Ka(r.keys());Ha(a,this.treeStore.getLoadedIndexes().codeComponents),Qa(a,this.treeStore.tree),Va(a,this.treeStore.tree)},updateSave:!0}).then(n).catch(i)},{name:"update_external_module_version",runInBackground:!0})})}async addOrUpdateVectorSetAndVectors(j){await this.addOrUpdateExternalVectors([j]);let r=this.treeStore.tree.getNodeWithTrait(j.moduleId,mj)?.annotation("framerVectorSet");Mr(r)&&await this.addOrUpdateExternalVectors(r.items.map(o=>({moduleId:o.moduleId,saveId:o.saveId??""})))}async addExternalModulesToProject(j,t){let r=j.map(n=>typeof n=="string"?rA(n):n),o=await this.preloadExternalModules(r);return this.updateExternalModuleNodes(o,t)}async preloadExternalModules(j){await this.modulesStorage.whenInitialized();let t=new Map;for(let s of j)t.set(s.bareValue,s);let r=[],o=[],n=[];for(let[s,l]of t){let{moduleId:k,saveId:c}=l;if(!!this.modulesStorage.getPersistedModuleByGlobalId(k)){fA.reportError("Attempted to treat local module as external module",{identifier:l});continue}let $=this.treeStore.tree.getNode(k);if($&&rA($.codeComponentIdentifier).saveId===c&&!this.loadedExternalModulesStore.hasModuleForIdentifier(l)){o.push(l);continue}let E=GA(this,kj).get(s);if(E){n.push({identifier:l,preloadPromise:E});continue}GA(this,kj).set(s,Rr()),r.push(l)}let i=new Map;for(let{identifier:s,preloadPromise:l}of n)try{let k=await l;i.set(s.value,k)}catch{GA(this,kj).set(s.bareValue,Rr()),r.push(s)}if(r.length)try{let s=Array.from(r.values(),({moduleId:u,saveId:$})=>({moduleId:u,saveId:$})),{modules:l,dependencies:k}=await this.lookUpModules(s,{includeDependencies:!0,includeStatus:!0}),c=0;for(let u of r){let $=l[c++];I($,"Module must be defined"),i.set(u.value,{module:$,dependencies:k?.[$.ownerType]?.[$.ownerId],exportSpecifier:u.exportSpecifier}),o.push(u)}}catch(s){fA.reportError(s);for(let l of r)GA(this,kj).get(l.bareValue)?.reject(s);throw Error(`Failed to preload modules: ${s}`)}let a;for(let s of o){let l=i.get(s.value);if(!l)continue;let{dependencies:k}=l;k?.importMap&&(a=qj(a??{imports:{}},k.importMap))}a&&await this.insertTemporaryImportMap(a),await Promise.all(Array.from(o.values(),s=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(l=>{fA.error(`Failed to evaluate external module "${s.value}"`,l)})));for(let s of r){let l=i.get(s.value);I(l,"Expected to have module information for:",s.value);let k=GA(this,kj).get(s.bareValue);I(k,"Expected to find a preload promise for:",s.bareValue),k.resolve(l)}return[...i.values()]}async updateExternalModuleNodes(j,{onTreeUpdate:t,updateSave:r=!1}){let o,n;for(let{dependencies:i}of j)if(i?.importMap){o=qj(o??{imports:{}},i.importMap);let a=i.dependencies??Lj(i?.importMap);n=Nj(n??{dependencies:{}},a)}return o&&!Ko(o)&&n&&await this.modulesStorage.extendCurrentImportMap(o,n),await Promise.all(j.map(i=>this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(ht(i)))),this.scheduler.processWhenReadyAsync(()=>{if(this.treeStore.tree.isViewOnly)throw Error("unable to edit");for(let i of j){let{id:a}=i.module,s=this.treeStore.tree.getNode(a);if(s&&!r){let l=ht(i),k=this.externalModulesDynamicInfo.get(l.moduleId)?.status??i.module.status;s.set({group:k?.group,updateSaveId:k?.updateSaveId})}else{let{type:l,metadata:k,ownerId:c,ownerType:u}=i.module,$=ht(i),{title:E,status:m}=this.externalModulesDynamicInfo.get($.moduleId)??i.module,d=this.treeStore.tree.getExternalModulesListNode();d||(d=new ei,this.treeStore.tree.insertNode(d,this.treeStore.tree.root.id)),I(lo(d));let f=k.pluginId,R={codeComponentIdentifier:$.value,type:l,scopeNodeId:Xo(i.module),intrinsicWidth:Tj(k.intrinsicWidth)??200,intrinsicHeight:Tj(k.intrinsicHeight)??200,ownerId:c,ownerType:u,group:m?.group,updateSaveId:m?.updateSaveId,namespaceId:i.module.lastPublish?.namespaceId,pluginId:IA(f)?f:void 0},_=pA.componentForIdentifier($.value);I(_,"Component not found in the component loader",$.value);let h=_.annotations??void 0;R.annotations=ti(l)?Kj({default:h}).default:h;let G=_.name??E;if(R.title=G,s)s.set(R);else{let O=new ri({id:a,...R});this.treeStore.tree.insertNode(O,d.id)}}}return t()})}setupPollingExternalModulesUpdates(){let j=Li(()=>{this.checkForExternalModuleUpdates().catch(fA.reportError)},1e4),t=()=>{j(),this.updatesPollId===void 0&&(this.updatesPollId=window.setInterval(this.checkForExternalModuleUpdates,6e4))},r=()=>{window.clearInterval(this.updatesPollId),this.updatesPollId=void 0};function o(){return!document.hidden&&navigator.onLine}o()&&t();function n(){setTimeout(()=>{o()?t():r()},500)}document.addEventListener("visibilitychange",n),window.addEventListener("offline",n),window.addEventListener("online",n)}getCodeComponentNodesForExternalModuleExport(j){return this.treeStore.getLoadedIndexes().codeComponents.filter(t=>{if(!mA(t)||wA(t)&&!t.isVectorInstance)return!1;let r=rA(t.codeComponentIdentifier);return r?.kind!=="externalModuleExport"?!1:r.moduleId===j.moduleId&&r.exportSpecifier===j.exportSpecifier})}get fastRefreshEnabled(){return this.chromeStore.codeEditorPreviewVisible}async updateExternalModuleComponentInstances(j){let t=rA(j);I(t?.kind==="externalModuleExport","parsed 'ExternalModuleNodes.id' should be of kind externalModuleExport");let{moduleId:r,exportSpecifier:o}=t,n=this.externalModulesDynamicInfo.get(r)?.status?.updateSaveId;if(!n){fA.warn("Could not update module",r,"latest status missing");return}let{module:i,dependencies:a}=await this.lookUpModule({moduleId:r,saveId:n},{includeDependencies:!0,includeStatus:!0});I(i.files.module,"Module file must be defined");let s=nj(r,n,i.files.module,o);try{await this.loadedExternalModulesStore.ensureModuleEvaluatedInSandbox(s).catch(fA.reportError),await new Promise((l,k)=>{this.scheduler.runWithFullyLoadedTree(()=>{this.updateExternalModuleNodes([{module:i,dependencies:a,exportSpecifier:o}],{onTreeUpdate:()=>{this.getCodeComponentNodesForExternalModuleExport(t).forEach(u=>u.set({codeComponentIdentifier:s.value})),Ei(this.treeStore.tree,t.value,s.value),Ri(this.treeStore.tree,t.value,s.value)},updateSave:!0}).then(l).catch(k)},{name:"update_external_module_version",modalTitle:"Updating the module version"})}),this.trackExternalComponentInsert([s.value],"update")}catch(l){fA.reportError(l)}}async replaceRelativeImportsWithImportMapSpecifiers(j,t,r){let o={};for(let i of r){let a=fj(i,j);if(!a)continue;let s;if(s=this.fastRefreshModules.get(a),s||(s=this.modulesStorage.getModuleWithTypeSlashName(a)),!s){fA.error("Cannot resolve",i,"from",j);continue}let l,{name:k,localId:c}=s;if(s.kind==="fast-refresh")l=yA(k).module;else{let{files:u}=s;I(IA(u.module),"Must have a module file name to build a local module import map specifier."),l=u.module}o[i]=Ye(c,l)}let n=await Gt(t,o);return I(n.ok),n.value}getModules(j=!1){let t={};for(let[r,o]of this.localModules)t[r]=o;if(j)for(let[r,o]of this.fastRefreshModules)t[r]=o;return{dependenciesModule:this.dependenciesModule,modules:t,revision:this.revision,initialized:this.modulesStorage.initialized}}getAllModulesAsUpdateEvent(j=!1){let{dependenciesModule:t,modules:r,initialized:o,revision:n}=this.getModules(j),i=[];t&&i.push({op:"add",path:[`${t.type}/${t.name}`],value:t});for(let a of Object.values(r))i.push({op:"add",path:[`${a.type}/${a.name}`],value:a});return{patches:i,dependentModules:[],prioritizedModules:[],initialized:o,revision:n}}getModulesUpdatesService(j=!1){return{moduleUpdatesStream:()=>j?this.fastRefreshModulesEmitter.newStream({replay:"latest"}):this.moduleUpdatesEmitter.newStream({replay:"latest"})}}hasScreenModuleLoaded(j){let t=Jn("screen",j,"default").value;return pA.componentForIdentifier(t)!==null}postProcess(){this.modulesStorage.processTreeUpdates()}};Xj=new WeakMap,De=new WeakMap,Oe=new WeakMap,kj=new WeakMap;var Xk={defaultComponent:{insert:"insert-default",drag:"insert-default-drag"},libraryModule:{insert:"insert-library",drag:"insert-library-drag"},externalModuleComponent:{insert:"insert",drag:"insert-drag"}},l6="default_component_",bt="external_",k6="local_",Wa="legacy_design_component",Ya="legacy_code_component",Za=`${k6}${Ya}`,zk=`${bt}${Ya}`,As=`${k6}${Wa}`,js=`${bt}${Wa}`;var Wk=new Set(["form","frame","image-frame","stack","repeater"]),Yk=A=>A.startsWith(l6),es=A=>A===As||A===js,Zk=A=>Wk.has(A);function ts({canvasNode:A,source:e,isDrag:j,engine:t}){let r=Ac(A,t);switch(DA("component_instance",{componentType:r.type,source:e}),e){case"insert_menu":{let o=jc(r);DA("insert_menu_add",{type_added:o});break}}if(r.type==="local_module_canvasComponent_component"&&DA("component_canvas_instance",{componentId:A.id}),es(r.type)&&DA("component_design_instance",{}),mA(A)&&pj(A.codeComponentIdentifier)){let o=r.type.startsWith(l6)?"defaultComponent":e==="team_library"?"libraryModule":"externalModuleComponent",n=Xk[o][j?"drag":"insert"];t.stores.modulesStore.trackExternalComponentInsert([A.codeComponentIdentifier],n)}}function Ac(A,e){if(mA(A)){let r=A.codeComponentIdentifier,o=rA(r);if(!o)return{type:A.codeComponentIdentifier.startsWith(".")?Za:zk,codeComponentIdentifier:r};if(CA(o))return{type:`${k6}module_${o.type}_component`,codeComponentIdentifier:r};if(pj(o)){let n=e.stores.treeStore.tree.getNode(o.moduleId);return ct(e.stores.treeStore.tree,r)?{type:`${l6}${n?.title}`,codeComponentIdentifier:r}:{type:`${bt}module_${n?.type??"unknown"}_component`,codeComponentIdentifier:r}}}let t=A.replicaInfo?.master&&e.tree.getNode(A.replicaInfo.master)||A;return no(t)?oo(t)?{type:js}:{type:As}:ao(A)?{type:"repeater"}:_o(A)?{type:"form"}:JA(A)?{type:"stack"}:ae(A)?A.fillType==="image"?{type:"image-frame"}:{type:"frame"}:{type:"unknown"}}function jc({type:A}){return A.startsWith("local_module_")||A===Za?"code_component":es(A)?"design_component":A.startsWith(bt)?"package":Yk(A)||Zk(A)?A:"unknown"}function rs(A,e){let j=A.children;return io(A)?!j||j.length===0?[]:e.getChildrenRects(A.id)??[]:null}function ns(A,e,j){if(A>=e&&A<=j||A<=e&&A>=j)return 0;let t=Math.abs(e-A),r=Math.abs(j-A);return Math.min(t,r)}function ec(A,e,j){let t=A?"y":"x",r=A?"height":"width",o=e[t],n=0,i=1/0;return j.forEach((a,s)=>{if(i===0)return;let l=a[t],k=l+a[r],c=ns(o,l,k);c<i&&(n=s,i=c)}),n}function tc(A,e,j,t){let r=Math.max(A,j),o=Math.min(e,t);return r<o}function rc(A,e,j){let t=A?"y":"x",r=A?"height":"width",o=j[e];I(o,"Out of bound access to childRects:",e,j);let n=o[t],i=n+o[r],a=new Set([e]);return j.forEach((s,l)=>{if(l===e)return;let k=s[t],c=k+s[r];tc(n,i,k,c)&&a.add(l)}),{startIndex:Math.min(...a),endIndex:Math.max(...a)}}function nc(A,e,j,t,r,o){if(r)return t.startIndex;if(o)return t.endIndex;let n=e?"x":"y",i=e?"width":"height",a=A[n],s=1/0,l=t.startIndex;for(let k=t.startIndex;k<=t.endIndex;k++){let c=j[k];I(c,"Ouf of bound access to childRects:",k,t,j);let u=c[n],$=u+c[i],E=ns(a,u,$);E<s&&(s=E,l=k)}return l}function oc(A,e){let j=[];for(let t=e.startIndex;t<=e.endIndex;t++){let r=A[t];I(r,"Ouf of bound access to childRects:",t,e,A),j.push(r)}return sA.merge(...j)}function ic(A,e,j,t){let r=se(A)||A.resolveValue("stackDirection")==="horizontal",o=sA.merge(...e),n=r?"x":"y",i=r?"y":"x",a=r?"width":"height",s=r?"height":"width",l=j[n],k=j[i],c=o[i],u=c+o[s],$=k<c,E=!$&&k>u,m=ec(r,j,e),d=rc(r,m,e),f=nc(j,r,e,d,$,E),R=e[f];I(R,"Closest rect is not defined:",f);let _=R[n]+R[a]/2,h=$||E?$:l<_,G=h?f:f+1;$&&(G=0),E&&(G=e.length);let O=R[n],w=O+R[a],v=h?O:w,F=null,U=h?f-1:f+1;if(U>=d.startIndex&&U<=d.endIndex){let Y=e[U];if(Y){let jA=Y[n],p=jA+Y[a];F=h?p:jA}}let P=v;oj(F)&&(P=Math.round((P+F)/2));let S=oc(e,d),M=Math.round(S[i]+S[s]/2),D={[n]:P,[i]:M},J={...D},V={...D},tA=t[s],AA=Math.round(tA/2);return r?(J.y-=AA,V.y+=AA):(J.x-=AA,V.x+=AA),{index:G,line:{a:J,b:V}}}function ac(A,e){let j={index:0,line:{a:{...e},b:{...e}}};if(A.length===0)return j;let t=new Map,r=1e3;A.forEach((c,u)=>{let $=Math.round(c.x*r),E=t.get($);E?(E.indices.push(u),c.width>E.width&&(E.width=c.width)):t.set($,{x:c.x,width:c.width,indices:[u]})});let o=Array.from(t.values()).sort((c,u)=>c.x-u.x),n=o.find(c=>e.x>=c.x&&e.x<=c.x+c.width);if(n||(n=o.reduce((c,u)=>{if(!c)return u;let $=u.x+u.width/2,E=c.x+c.width/2;return Math.abs(e.x-$)<Math.abs(e.x-E)?u:c},o[0])),!n)return j;let i=[...n.indices].sort((c,u)=>{let $=A[c],E=A[u];return!$||!E?0:$.y-E.y}),a=i.findIndex(c=>{let u=A[c];return u?e.y<u.y+u.height/2:!1});a===-1&&(a=i.length);let s;a<i.length?s=i[a]??0:s=(i[i.length-1]??0)+1;let l;if(a<=0){if(!i[0])return j;l=A[i[0]]?.y??0}else if(a>=i.length){let c=i[i.length-1];if(!c)return j;let u=A[c];if(!u)return j;l=u.y+u.height}else{let c=i[a];if(!c)return j;let u=A[c];if(!u)return j;l=u.y}let k={a:{x:n.x,y:l},b:{x:n.x+n.width,y:l}};return{index:s,line:k}}function os(A,e,j,t,r){if(I(e.length,"childInsertion only works correctly if there are more than 0 child rects"),se(A)||A.stackWrapEnabled)return jt(A)?ac(e,t):ic(A,e,t,r);let o=1/0,n=null,i=A.stackDirection==="vertical";e.forEach((k,c)=>{let u=Math.abs(i?t.y-k.y:t.x-k.x);u>o||(o=u,n=c)});let a=0;if(n!==null){let k=e[n];I(k,"Closest child rect is not defined:",n);let c=sA.center(k);(i?t.y>c.y:t.x>c.x)&&n++,a=Math.min(Math.max(0,n),e.length)}let s=lc(A),l=kc(A.resolveValue("stackDirection"),A.resolveValue("stackAlignment"),s,j,e,a,r);return{index:sc(A,a),line:l}}function sc(A,e){I(wj(A),"A node must support children to consider an insertion index.");let j=e;for(let t=0;t<A.children.length&&t!==e;t++){let r=A.children[t];r&&(yr(r)||j++)}return j}function lc(A){let e=A.resolveValue("stackDirection"),j=A.resolveValue("stackAlignment");if(j==="center")return 0;let t=vo(A);if(!t.perSide)return t.top;let r=j==="start";return e==="vertical"?r?t.left:t.right:r?t.top:t.bottom}function kc(A,e,j,t,r,o,n){let i=r[o-1],a=r[o],s=A==="vertical",l={x:t.width/2,y:t.height/2};if(!(!i&&!a)){if(r.length===1){let k=i||a;I(k,"Child rect must be defined"),o===0?s?l.y=k.y-10:l.x=k.x-10:s?l.y=k.y+k.height+10:l.x=k.x+k.width+10}else if(i&&a){let k=Math.abs(s?i.y+i.height-a.y:i.x+i.width-a.x);s?l.y=a.y-k/2:l.x=a.x-k/2}else if(i){let k=r[o-2];I(k,"Child rect must be defined");let c=Math.abs(s?k.y+k.height-i.y:k.x+k.width-i.x);s?l.y=i.y+i.height+c/2:l.x=i.x+i.width+c/2}else if(a){let k=r[o+1];I(k,"Child rect must be defined");let c=Math.abs(s?a.y+a.height-k.y:a.x+a.width-k.x);s?l.y=a.y-c/2:l.x=a.x-c/2}}return l.x=Math.min(Math.max(4,l.x),t.width-4),l.y=Math.min(Math.max(4,l.y),t.height-4),cc(A,e,j,l,t,n)}function cc(A,e,j,t,r,o){let n=A==="vertical",i,a,s=j??0;switch(e){case"center":i={x:n?t.x-o.width/2:t.x,y:n?t.y:t.y-o.height/2},a={x:n?t.x+o.width/2:t.x,y:n?t.y:t.y+o.height/2};break;case"start":i={x:n?s:t.x,y:n?t.y:s},a={x:n?o.width+s:t.x,y:n?t.y:o.height+s};break;case"end":default:i={x:n?r.width-o.width-s:t.x,y:n?t.y:r.height-o.height-s},a={x:n?r.width-s:t.x,y:n?t.y:r.height-s};break}return{a:i,b:a}}var is=6;function uc(A,e){for(let j of A)if(e.includes(j))return!0;return!1}function $c(A,e,j,t,r){if(r.length===0||A.stackWrapEnabled||uo(A)||wA(A))return null;let{tree:o}=e,{zoom:n}=e.stores.canvasStore,i=o.getParent(A.id);if(i&&JA(i)&&(i.stackDirection!==A.stackDirection||i.stackWrapEnabled))return null;let a=o.convertPointToNode(A,j),s=o.getRect(A),l=A.stackDirection==="vertical",k=l?"x":"y",c=l?"y":"x",u=l?"width":"height",$=l?"height":"width",E=s[u],m=s[$],d=E*n,f=E*n;if(d<40||f<40)return null;let R=a[k],_=10/n,h=sA.merge(...r),G=h[k],O=G+h[u],w=Math.max(_,G/2),v=Math.max(_,(E-O)/2),F=R<=w,U=R>=E-v;if(!F&&!U)return null;let P=F?0:1,S=t[$],M=4/n,D=F?M:E-M,J=m/2,V=S/2,tA=m/3,AA=a[c],B="end";S>m?B="center":AA<tA?B="start":AA<2*tA&&(B="center");let Y,jA;switch(B){case"start":{Y=0,jA=S;break}case"end":{jA=m,Y=jA-S;break}case"center":default:{Y=J-V,jA=J+V;break}}let p={[k]:D,[c]:Y},iA={[k]:D,[c]:jA},bA=o.convertPointToCanvas(A,p),vA=o.convertPointToCanvas(A,iA);return{insertionIndex:P,insertionLine:{a:bA,b:vA},wrap:{wrapAlignment:B}}}function c6(A,e,j,t,{allowWrapping:r=!0}={}){if(!wj(A))return{insertionIndex:null,insertionLine:null};let o=rs(A,e.stores.layoutCache);if(!o)return{insertionIndex:null,insertionLine:null};if(JA(A)&&r){let c=$c(A,e,j,t,o);if(c)return c}let n=e.tree,i=n.getRect(A),a=n.convertPointToNode(A,j);if(o.length===0)return{insertionIndex:0,insertionLine:null};let{index:s,line:l}=os(A,o,i,a,t),k={a:n.convertPointToCanvas(A,l.a),b:n.convertPointToCanvas(A,l.b)};return{insertionIndex:s,insertionLine:k}}var dc={width:10,height:10};function as(A,e,j,t,r,o=!1){I(j.length,"getStackOrGridInRange(): expects at least a single selected node");let n=A.stores.scopeStore.active;if(j.some(Mo))return null;let a=A.tree.getNodesAtPoint(n,e).filter(k=>!(Yo(k)&&k.locked||!wj(k)||Si(k)||xo(A.tree,A.stores.overlayStore.activeOverlays,k))).reverse();if(t){let k=t.id,c=a.find(u=>u.id===k);if(c)return c}let s=null,l=j.map(k=>k.id);for(let k of a){if(!co(k)||o&&!Pj(k))continue;let c=A.tree.getAncestors(k.id);if(c.push(k.id),uc(c,l)||(s||(s=k),!le(k)))continue;let{insertionLine:$}=c6(k,A,e,dc);if(!$)continue;if($.a.x===$.b.x){if(Math.abs(e.x-$.a.x)*A.stores.canvasStore.zoom>is)continue}else if($.a.y===$.b.y){if(Math.abs(e.y-$.a.y)*A.stores.canvasStore.zoom>is)continue}else continue;if(j.every(m=>ce(A.tree,k,m,n.id,r)))return k}if(le(s)){let k=s;if(j.every(u=>ce(A.tree,k,u,n.id,r)))return s}return null}function ss(A,e,{wrapAlignment:j}){let t=Oi.addStack(A,[e]);if(!t)return null;let r=A.tree.getNode(t);return!r||!JA(r)?null:(r.set({stackDirection:e.stackDirection==="horizontal"?"vertical":"horizontal",stackAlignment:j}),r)}function u6(A,e){let{width:j,height:t}=A.tree.getRect(e);return Sr(e)&&_r(e)&&(e.widthType===2&&e.width>0&&(j=e.width),e.heightType===2&&e.height>0&&(t=e.height)),{width:j,height:t}}function Ec(A,e,j){let t=u6(A,e);return{...t,x:j.x-t.width/2,y:j.y-t.height/2}}function Bc(A,e){let j=u6(A,e),t=A.stores.scopeStore.active,r=A.tree.getCommonGroundNode(A.stores.selectionStore.nodes),o,n;if(r){let a=A.tree.convertFrameToCanvas(r);o=sA.center(a).x-j.width/2,n=a.y}else if(SA(t)||vj(t)){let a=t.getPrimaryVariant(),s=A.tree.convertFrameToCanvas(a);o=sA.center(s).x-j.width/2,n=s.y}else{let a=A.stores.canvasStore.getCanvasCenter();o=a.x-j.width/2,n=a.y-j.height/2}let i={x:o,y:n};for(;;){let a={...j,...i},s=A.tree.getNodesInRect(t,a,!0);if(s.length===0)return a;let l=A.tree.getBoundingFrameForNodes(s);i.x=l.x-j.width-100}}function pc(A,e,j,t=!1){let{tree:r}=A,o=r.getPotentialParents(A.stores.scopeStore.active,A.stores.overlayStore.activeOverlays,sA.cornerPoints({...j,width:1,height:1}),j,pA,e);return t&&(o=o.filter(Pj)),o=r.sortVisually(o).reverse(),o.length>0&&o[0]?o[0]:null}var ls={width:1,widthType:1,heightType:2,left:0,right:null};function ks({engine:A,component:e,canvasPoint:j,source:t,type:r,shouldBecomeFullWidthForVariants:o=new Set,isLayoutSection:n=!1,notDraggedOntoCanvas:i=!1,insertAsGroundNode:a=!1,insertAsOverlayType:s,imageToUpload:l,parentId:k}){ts({canvasNode:e,source:r==="libraryModule"?"team_library":t,isDrag:!0,engine:A});let{selectionStore:c,canvasStore:u,scopeStore:$}=A.stores,E=a?Bc(A,e):Ec(A,e,j);s===1&&nt(e)&&e.set({floatingPositionEnabled:!0,floatingPlacement:Co,floatingAlignment:Do,floatingOffsetX:0,floatingOffsetY:10});let m=yi(A,e),d=as(A,j,[m],null,pA,n);if(i&&n&&!d){let S=u.getCanvasVisibleRectTakingOverlaysIntoAccount(),M=c.ids.length===1&&c.ids[0]?A.tree.getNode(c.ids[0]):null,D=M?A.tree.getGroundNodeFor(M):null;le(D)&&sA.intersects(A.tree.convertFrameToCanvas(D),S)&&(d=D)}let f=k?A.tree.getNode(k):d??pc(A,e,j,n),R=c.ids.length===0,_=$.active,h=Bo(_)?_.getPrimaryVariant():null;if(i&&n&&h&&R&&(f=h),s===1&&f&&nt(m)&&!Pj(f)){I(f,"Parent should exist");let S=f.getPrimaryId(),M=_i(A.stores,"framer/useShowRelativeOverlay",S,m.draftOrCurrent());if(!M)return;A.tree.move(M.id,S);return}else nt(m)&&m.set(yo);if(a&&(f=null,d=null,!sA.containsRect(u.getCanvasVisibleRectTakingOverlaysIntoAccount(),E))){let S=sA.center(E),M=u.zoom,D=Math.min(M,1);u.scrollToCenter(S,{animate:!0,zoom:D})}let G=-1,O=null;if(f){ci(A,f,e,E),ui(A,f,e);let S=f.draftOrCurrent();JA(S)&&(d=S)}if(d){let S=u6(A,e);if(k)G=d.children.length;else{let{insertionIndex:M,wrap:D}=c6(d,A,j,S);D&&(O=D),oj(M)&&(G=M)}if(i&&n){if(G=d.children.length,c.ids.length===1){let MA=c.ids[0],PA=MA&&A.tree.getNode(MA);if(PA){let VA=new Set([PA.id]);for(let re of PA.ancestors())VA.add(re.id);let Oj=d.children.findIndex(re=>VA.has(re.id));Oj>=0&&(G=Oj+1)}}let M,D=d.children[G-1];D?(M=A.tree.convertFrameToCanvas(D),M.y+=M.height):M=A.tree.convertFrameToCanvas(d),M.height=S.height;let J=A.tree.convertFrameToCanvas(d),V=Math.min(M.x,J.x),tA=Math.max(sA.maxX(M),sA.maxX(J));M.x=V,M.width=tA-V;let{zoom:AA}=u,B=u.getCanvasVisibleRectTakingOverlaysIntoAccount(),Y=B.width*AA,jA=B.height*AA,p=40,iA=Math.max(Y-p*2,100),bA=Math.max(jA-p*2,100),vA=iA/(M.width||1),NA=bA/(M.height||1),cA=Math.min(vA,NA,.5),dj=sA.center(M);u.scrollToCenter(dj,{animate:!0,zoom:cA})}$i(A,d,e,E)}let w;if(f){let{width:S,height:M}=E;w={...A.tree.convertCanvasFrameToNode(f,E),width:S,height:M}}else w=E;let v=m.updateForRect({rect:w,parentSizeInfo:null,constraintsLocked:!1,shouldGuessPinToBottom:f?oi(A.tree,m,f):!0,shouldGuessPinToRight:f?ii(A.tree,m,f):!0});f&&JA(f)&&_r(m)&&Sr(m)&&(v=fc(m,v)),ta(m,v),m.set(v,A.tree);let F=m.id,U=!1,P=null;if(f){if(P=f,Eo(f)&&(P=A.tree.getNode(f.originalid),U=!0,I(P,"Fail to insert node into variants: the original parent should exist")),O&&!wA(P)&&JA(P)){let J=ss(A,P,O);if(!J)return;P=J}A.moveNode(m.id,P.id,G),U&&(I(wA(f),"Fail to insert node into variants: the new parent should be a replica node"),F=ai(A,m,f,P));let S=A.tree.getGroundNodeFor(P),M=S.resolveValue("name"),D=!!(M&&o.has(M.toLowerCase()));if(ae(m)&&D&&m.set({left:0,width:1,widthType:1},A.tree),mA(m)&&$o(S)&&Pj(S)){let V={width:m.width,widthType:m.widthType,left:m.left,right:m.right};D&&m.set(ls);let tA=li(m);if(tA){let AA=A.tree.getScopeNodeFor(S);SA(AA)&&AA.getTopLevelReplicaVariants().forEach(Y=>{let jA=Y.resolveValue("name");if(!jA)return;let p=ki(jA,tA);if(!p||p===tA.defaultVariant)return;let iA={...Y.replicaInfo.overrides},bA={...Y.replicaInfo,overrides:iA},vA={...iA[m.id]},NA=mc(D,o,jA,V);NA&&Object.assign(vA,NA),vA[ko(tA.key)]={type:"enum",value:p},iA[m.id]=vA,Y.set({replicaInfo:bA})})}}se(f)&&ho(m)&&(D||m.set({gridItemFillCellWidth:!0}),jt(f)||m.set({gridItemFillCellHeight:!0}))}l&&ae(e)&&Ti(l,e,A).catch(BA),!k&&c.set(F,{switchToLayers:!!k})}function mc(A,e,j,t){let r=e.has(j.toLowerCase());if(A!==r)return r?ls:t}function fc(A,e){let j={...e};return(A.widthType===3||A.widthType===1)&&oj(e.width)&&e.widthType!==A.widthType&&(delete j.width,delete j.widthType),(A.heightType===3||A.heightType===1)&&oj(e.height)&&e.heightType!==A.heightType&&(delete j.height,delete j.heightType),j}function _t({engine:A,module:e,identifier:j,position:t,centerInParent:r,insertAsGroundNode:o,update:n,parentId:i}){let a={width:Tj(e.metadata.intrinsicWidth)??200,height:Tj(e.metadata.intrinsicHeight)??200},s=new Zo({codeComponentIdentifier:j,slotsAreChildNodes:ie.isOn("componentSlotsAreChildNodes"),...a});n&&n(s);let l=t;if(r&&!o&&!i){let k=pa(s,A),c=k?sA.center(A.tree.convertFrameToCanvas(k)):null,u=A.stores.canvasStore.getCanvasVisibleRectTakingOverlaysIntoAccount();c&&sA.containsPoint(u,c)&&(l=c)}return ks({engine:A,component:s,canvasPoint:l,source:"context_menu",insertAsGroundNode:i?!1:o,parentId:i}),s}var xe=LA("unlinking");async function Gc(A,e,j){let{codeEditorStore:t,selectionStore:r,treeStore:o}=A.stores;t.closeEditor();let[n]=r.nodes;if(r.nodes.length===1&&mA(n)&&n.codeComponentIdentifier===e)return!0;let i=await A.runWithFullyLoadedTreeAsync(()=>{for(let a of o.treeIndex.codeComponentNodeIds){let s=A.tree.getNodeWithTrait(a,mA);if(s?.codeComponentIdentifier===e)return s}},{runInBackground:!0,name:`findCodeComponentInstance: ${e}`});return i?(ra(A,i),!0):($A({type:"add",variant:"info",key:"add-component-instance-to-edit-in-plugin",text:`Add this Component to Canvas to edit in ${j.name}`}),!1)}async function cs(A,e,j){return await Gc(A,e,j)?(A.stores.pluginStore.openPlugin(j,A,{mode:"canvas"}),!0):!1}function us(A,e){let j=A.componentForIdentifier(e);if(j)return j;let t=rA(e);return!CA(t)||!KA(t)?null:A.componentForIdentifier(Kn(t))}var Fc=0;async function St(A,e,j=Fc){if(j===0){let r=rA(e),o=Ii(A.stores.treeStore,A.stores.modulesStore,A.stores.pluginStore,r);if(o&&await cs(A,e,o))return}let t=us(pA,e);t&&A.stores.codeEditorStore.editFile(t.file)}async function $s(A,{identifier:e,info:j,instance:t,enterIsolation:r,codeComponentIsolationMode:o}){let n=j.module.baseURL+j.module.files.source,a=await(await fetch(n)).text(),[s,l]=await Promise.all([ja(a),A.stores.modulesStore.getModuleDependencies(e)]);if(s.ok){let E=new Map;for(let d of s.value.relative){let f=fj(d.specifier,`${j.module.type}/`);if(!f){xe.warn("Failed to normalize relative import",d.specifier);continue}let R=E.get(f)??[];R.push(d),E.set(f,R)}let m;for(let d of l.imports){if(d.type!=="local")continue;let f=`${d.moduleType}/${d.moduleName}`,R=E.get(f);if(!R){xe.warn("Unable to get source location of import",f,"when unlinking");continue}for(let _ of R){m||(m=a.split(`
`));let h=_.specifierLine;m[h]=m[h].replace(JSON.stringify(_.specifier),JSON.stringify(d.importURL))}}m&&(a=m.join(`
`))}let k=A.stores.modulesStore.forType("codeFile"),c=k.getUniqueName(j.module.name),u=await k.create({name:c,source:a,metadata:{pluginId:j.module.metadata.pluginId}}),$=Hn(e,u).value;return t&&A.scheduler.processWhenReady(()=>{let E=A.tree.get(t.getPrimaryId());E&&E.set({codeComponentIdentifier:$})}),r&&(A.stores.chromeStore.contentPanelTab="Assets",St(A,$,o)),$}var ds={canvasComponent:Gi,codeFile:$s};function Ic(A){return IA(A)?A in ds:!1}async function d6(A,{identifier:e,moduleType:j,instance:t,enterIsolation:r=!0,codeComponentIsolationMode:o,renamedIds:n=new Map,isAutoDetach:i=!1}){if(!Ic(j))throw Error(`Cannot import external module of type ${j}`);let[a]=await A.stores.modulesStore.preloadExternalModules([e]);I(a,"external module must exist on preload");let s={identifier:e,info:a,instance:t,enterIsolation:r,codeComponentIsolationMode:o,renamedIds:n,isAutoDetach:i},l=ds[j],k=await l(A,s);if(!At(k))return!IA(k)&&vj(k)?{...a,codeComponentIdentifier:k.instanceIdentifier,node:k}:{...a,codeComponentIdentifier:k,node:void 0}}var $6=new Set;async function gc(A,e){let{instance:j,withUnlinkModal:t,...r}=e,o=ct(A.stores.treeStore.tree,e.identifier),n=A.stores.insertSidebarStore.getEditBehavior(e.identifier.moduleId);if(t&&n!=="autoUnlink"&&(!o||vi.isOn("openPrimaryForBuiltInModules"))){A.stores.modalStore.set({type:"UnlinkComponent",source:"edit_action",...r,nodeId:j?.id});return}if(!$6.has(e.identifier)){$6.add(e.identifier),A.scheduler.process(()=>{A.beginUndoGroup()});try{return(await d6(A,{instance:j,enterIsolation:n!=="autoDetach",...r}))?.codeComponentIdentifier}catch(i){xe.reportError(i),$A({type:"add",variant:"error",text:"Failed to unlink component",key:"external-component-unlink-error",icon:"error"})}finally{A.scheduler.processWhenReady(()=>{A.endUndoGroup()}),$6.delete(e.identifier)}}}async function RF(A,e){let{instance:j,moduleType:t,enterIsolation:r,codeComponentIsolationMode:o}=e;if(!mA(j))return;let n=await gc(A,{...e,enterIsolation:!1});if(!n)return;await di(pA,[n],A.stores.modulesStore);let i=pA.componentForIdentifier(n);if(!i)return;let a=Di(i);a&&A.scheduler.processWhenReady(()=>{if(A.tree.getNodes(Array.from(A.stores.treeStore.treeIndex.codeComponentNodeIds)).forEach(l=>{if(!a||a.id===l.id||!mA(l)||l.codeComponentIdentifier!==j.codeComponentIdentifier||wA(l)||!Mi(l,{allowLockedNodes:!0}))return;let k=A.cloneNode(a,!1,!1);Ci(A,l,k).catch(BA)}),!!r)if(t==="canvasComponent"){let l=ot(n);l&&A.stores.scopeStore.select(l,{keepHistory:!1})}else t==="codeFile"&&St(A,n,o)})}var hc=LA("clipboard:modules");async function PF(A,e,j){if(!e||!Vo(e))return!1;let t="insert-external-component";try{await _c({engine:A,moduleURL:e,position:j,centerInParent:!0,toastKey:t}),$A({type:"remove",key:t})}catch(r){console.error("Failed to insert external component",r),$A({type:"add",variant:"error",key:t,text:"Failed to insert external component",icon:"error"})}return!0}async function bc(A,e){let j=new URL(e),t=j.hash.substring(1).split(","),r=t[0]||"default",o=t.some((k,c)=>c>0&&k==="unlink"),{module:n}=await A.stores.modulesStore.lookUpModule({url:j.href}),i=n.id,a=A.stores.modulesStore.getPersistedModuleByGlobalId(i);I(n.files.module,"Module file must be defined");let s=nj(i,n.saveId,n.files.module,r),l=a?ze(a.localId,r):s;return{module:n,moduleIdentifier:l,externalIdentifier:s,insertUnlinked:o}}async function _c({engine:A,moduleURL:e,position:j,centerInParent:t,insertAsGroundNode:r,toastKey:o,update:n,parentId:i}){let{module:a,moduleIdentifier:s,externalIdentifier:l,insertUnlinked:k}=await bc(A,e);if(a.type==="screen")if(CA(s)){let c=ot(s.value);if(!c)return;let u=A.tree.getNode(c);if(!SA(u))return;await A.loadScopesThenProcess([u],([$])=>{$&&Ba(A,$,$.getPrimaryVariant())})}else o&&$A({type:"add",variant:"progress",key:o,text:E6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"}),await Fi(A,l);else if(k){o&&$A({type:"add",variant:"progress",key:o,text:E6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"});let c=await d6(A,{identifier:l,moduleType:a.type,enterIsolation:!1});await A.scheduler.processWhenReadyAsync(()=>{c&&_t({engine:A,module:a,identifier:c.codeComponentIdentifier,position:j,centerInParent:t,insertAsGroundNode:r,update:n,parentId:i})})}else{if(o&&$A({type:"add",variant:"progress",key:o,text:E6(a.type),icon:"reconnecting",duration:1/0,showCloseButton:"never"}),!pj(s)){await A.scheduler.processWhenReadyAsync(()=>{_t({engine:A,module:a,identifier:s.value,position:j,centerInParent:t,insertAsGroundNode:r,update:n,parentId:i})});return}await A.stores.modulesStore.addExternalModulesToProject([s],{onTreeUpdate:()=>{if(_t({engine:A,module:a,identifier:s.value,position:j,centerInParent:t,insertAsGroundNode:r,update:n,parentId:i}),a.type!=="vector")return;let c=A.tree.getNodeWithTrait(a.id,mj)?.annotation("framerVector");it(c)&&A.stores.modulesStore.addOrUpdateVectorSetAndVectors({moduleId:c.set.moduleId,saveId:""}).catch(BA)}}).catch(hc.reportError),A.stores.modulesStore.trackExternalComponentInsert([s.value],"paste-url")}return a}function E6(A){switch(A){case"screen":return"Inserting web page";case"vector":return"Inserting vector set";default:return"Inserting external component"}}function Es(A,e){if(A.stores.projectStore.projectLicenseType===si())return A.stores.modalStore.set({type:"UpsellEnterprise",source:"upsell",description:"Sign up for an Enterprise plan to increase your file upload limit to 150MB and unlock other powerful features that help scale your site.",upsell:"file-limit-enterprise-upsell",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let j=A.stores.projectStore.resourceLimits?.fileUploadLimitInMB;I(typeof j=="number","fileUploadLimitInMB is not a number");let t=j.toLocaleString()+"MB",r=(e/Ki).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:1})+"MB";return A.stores.modalStore.set({source:"upsell",type:"UpsellFeature",upsellFeature:"fileUploadLimitInMB",title:"File Upload Limit",description:`Your current plan limits file uploads to ${t}, and you\u2019re trying to upload a file that\u2019s ${r}. Upgrade your site to increase the limit and upload your file.`})}var Bs=class{constructor(e,{concurrency:j=5,silent:t=!1}={}){this.engine=e;N(this,"uploads",new Map);N(this,"completed",0);N(this,"failed",0);N(this,"generating",!1);N(this,"resolveStatusUpdate");N(this,"limiter");N(this,"silent");this.limiter=new Vj(j),this.silent=t}add(e){return this.createTask(e,j=>j)()}createTask(e,j){let t=this.uploads.get(e);t||(t={task:async()=>{try{return typeof e=="string"?e.startsWith("data:")?await this.uploadFile(await Pi(e,"imported")):await me.uploadAssetByURL(e,{silent:this.silent,refreshAssetService:!1}):await this.uploadFile(e)}catch(n){throw this.failed++,n}finally{this.completed++,this.resolveStatusUpdate?.()}}},this.uploads.set(e,t));let r=t;return async()=>{r.resultPromise||(r.resultPromise=this.limiter.run(r.task),this.resolveStatusUpdate?.());let o=await r.resultPromise;return this.engine.stores.assetStore.assetService?.addAssets([o.asset]),j(o)}}async uploadFile(e){let j=this.engine.stores.projectStore.resourceLimits?.fileUploadLimitInMB??void 0,t={silent:this.silent,maxFileSize:j,onExceedsCustomMaxSize:o=>Es(this.engine,o),refreshAssetService:!1},r;if(e.type.startsWith("image/")?r=await me.uploadImage(e,t):e.type.startsWith("video/")?r=await me.uploadVideo(e,t):r=await me.uploadFile(e,t),!r)throw Error("Failed to upload file");return r}get active(){return[...this.uploads.values()].map(({resultPromise:e})=>e).filter(Ao)}get status(){let{active:e,completed:j,failed:t}=this;return{started:e.length,completed:j,failed:t}}async*statusUpdates(){if(this.generating)throw Error("`statusUpdates` is in use by another call");for(this.generating=!0,yield this.status;this.completed<this.active.length;)await new Promise(e=>{this.resolveStatusUpdate=()=>{e(),this.resolveStatusUpdate=void 0}}),yield this.status;await this.engine.stores.assetStore.assetService?.refresh().catch(BA),this.generating=!1}async results(){let e=await Promise.allSettled(this.active).then(j=>j.filter(eo).map(t=>t.value));return await this.engine.stores.assetStore.assetService?.refresh().catch(BA),e}};var Sc={}.hasOwnProperty;function B6(A,e){let j=-1,t;if(e.extensions)for(;++j<e.extensions.length;)B6(A,e.extensions[j]);for(t in e)if(Sc.call(e,t))switch(t){case"extensions":break;case"unsafe":{ps(A[t],e[t]);break}case"join":{ps(A[t],e[t]);break}case"handlers":{yc(A[t],e[t]);break}default:A.options[t]=e[t]}return A}function ps(A,e){e&&A.push(...e)}function yc(A,e){e&&Object.assign(A,e)}function ms(A,e,j,t){let r=j.enter("blockquote"),o=j.createTracker(t);o.move("> "),o.shift(2);let n=j.indentLines(j.containerFlow(A,o.current()),Mc);return r(),n}function Mc(A,e,j){return">"+(j?"":" ")+A}function yt(A,e){return fs(A,e.inConstruct,!0)&&!fs(A,e.notInConstruct,!1)}function fs(A,e,j){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return j;let t=-1;for(;++t<e.length;)if(A.includes(e[t]))return!0;return!1}function p6(A,e,j,t){let r=-1;for(;++r<j.unsafe.length;)if(j.unsafe[r].character===`
`&&yt(j.stack,j.unsafe[r]))return/[ \t]/.test(t.before)?"":" ";return`\\
`}function Gs(A,e){let j=String(A),t=j.indexOf(e),r=t,o=0,n=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;t!==-1;)t===r?++o>n&&(n=o):o=1,r=t+e.length,t=j.indexOf(e,r);return n}function ve(A,e){return!!(e.options.fences===!1&&A.value&&!A.lang&&/[^ \r\n]/.test(A.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(A.value))}function Fs(A){let e=A.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function Rs(A,e,j,t){let r=Fs(j),o=A.value||"",n=r==="`"?"GraveAccent":"Tilde";if(ve(A,j)){let k=j.enter("codeIndented"),c=j.indentLines(o,Cc);return k(),c}let i=j.createTracker(t),a=r.repeat(Math.max(Gs(o,r)+1,3)),s=j.enter("codeFenced"),l=i.move(a);if(A.lang){let k=j.enter(`codeFencedLang${n}`);l+=i.move(j.safe(A.lang,{before:l,after:" ",encode:["`"],...i.current()})),k()}if(A.lang&&A.meta){let k=j.enter(`codeFencedMeta${n}`);l+=i.move(" "),l+=i.move(j.safe(A.meta,{before:l,after:`
`,encode:["`"],...i.current()})),k()}return l+=i.move(`
`),o&&(l+=i.move(o+`
`)),l+=i.move(a),s(),l}function Cc(A,e,j){return(j?"":"    ")+A}function zj(A){let e=A.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function Is(A,e,j,t){let r=zj(j),o=r==='"'?"Quote":"Apostrophe",n=j.enter("definition"),i=j.enter("label"),a=j.createTracker(t),s=a.move("[");return s+=a.move(j.safe(j.associationId(A),{before:s,after:"]",...a.current()})),s+=a.move("]: "),i(),!A.url||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":`
`,...a.current()}))),i(),A.title&&(i=j.enter(`title${o}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),n(),s}function gs(A){let e=A.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}m6.peek=Dc;function m6(A,e,j,t){let r=gs(j),o=j.enter("emphasis"),n=j.createTracker(t),i=n.move(r);return i+=n.move(j.containerPhrasing(A,{before:i,after:r,...n.current()})),i+=n.move(r),o(),i}function Dc(A,e,j){return j.options.emphasis||"*"}var Oc={};function gj(A,e){let j=e||Oc,t=typeof j.includeImageAlt=="boolean"?j.includeImageAlt:!0,r=typeof j.includeHtml=="boolean"?j.includeHtml:!0;return bs(A,t,r)}function bs(A,e,j){if(xc(A)){if("value"in A)return A.type==="html"&&!j?"":A.value;if(e&&"alt"in A&&A.alt)return A.alt;if("children"in A)return hs(A.children,e,j)}return Array.isArray(A)?hs(A,e,j):""}function hs(A,e,j){let t=[],r=-1;for(;++r<A.length;)t[r]=bs(A[r],e,j);return t.join("")}function xc(A){return!!(A&&typeof A=="object")}function Mt(A,e){let j=!1;return tt(A,function(t){if("value"in t&&/\r?\n|\r/.test(t.value)||t.type==="break")return j=!0,Fo}),!!((!A.depth||A.depth<3)&&gj(A)&&(e.options.setext||j))}function _s(A,e,j,t){let r=Math.max(Math.min(6,A.depth||1),1),o=j.createTracker(t);if(Mt(A,j)){let l=j.enter("headingSetext"),k=j.enter("phrasing"),c=j.containerPhrasing(A,{...o.current(),before:`
`,after:`
`});return k(),l(),c+`
`+(r===1?"=":"-").repeat(c.length-(Math.max(c.lastIndexOf("\r"),c.lastIndexOf(`
`))+1))}let n="#".repeat(r),i=j.enter("headingAtx"),a=j.enter("phrasing");o.move(n+" ");let s=j.containerPhrasing(A,{before:"# ",after:`
`,...o.current()});return/^[\t ]/.test(s)&&(s="&#x"+s.charCodeAt(0).toString(16).toUpperCase()+";"+s.slice(1)),s=s?n+" "+s:n,j.options.closeAtx&&(s+=" "+n),a(),i(),s}f6.peek=vc;function f6(A){return A.value||""}function vc(){return"<"}G6.peek=Pc;function G6(A,e,j,t){let r=zj(j),o=r==='"'?"Quote":"Apostrophe",n=j.enter("image"),i=j.enter("label"),a=j.createTracker(t),s=a.move("![");return s+=a.move(j.safe(A.alt,{before:s,after:"]",...a.current()})),s+=a.move("]("),i(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(i=j.enter("destinationLiteral"),s+=a.move("<"),s+=a.move(j.safe(A.url,{before:s,after:">",...a.current()})),s+=a.move(">")):(i=j.enter("destinationRaw"),s+=a.move(j.safe(A.url,{before:s,after:A.title?" ":")",...a.current()}))),i(),A.title&&(i=j.enter(`title${o}`),s+=a.move(" "+r),s+=a.move(j.safe(A.title,{before:s,after:r,...a.current()})),s+=a.move(r),i()),s+=a.move(")"),n(),s}function Pc(){return"!"}F6.peek=Tc;function F6(A,e,j,t){let r=A.referenceType,o=j.enter("imageReference"),n=j.enter("label"),i=j.createTracker(t),a=i.move("!["),s=j.safe(A.alt,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),n();let l=j.stack;j.stack=[],n=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return n(),j.stack=l,o(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function Tc(){return"!"}R6.peek=wc;function R6(A,e,j){let t=A.value||"",r="`",o=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(t);)r+="`";for(/[^ \r\n]/.test(t)&&(/^[ \r\n]/.test(t)&&/[ \r\n]$/.test(t)||/^`|`$/.test(t))&&(t=" "+t+" ");++o<j.unsafe.length;){let n=j.unsafe[o],i=j.compilePattern(n),a;if(n.atBreak)for(;a=i.exec(t);){let s=a.index;t.charCodeAt(s)===10&&t.charCodeAt(s-1)===13&&s--,t=t.slice(0,s)+" "+t.slice(a.index+1)}}return r+t+r}function wc(){return"`"}function I6(A,e){let j=gj(A);return!!(!e.options.resourceLink&&A.url&&!A.title&&A.children&&A.children.length===1&&A.children[0].type==="text"&&(j===A.url||"mailto:"+j===A.url)&&/^[a-z][a-z+.-]+:/i.test(A.url)&&!/[\0- <>\u007F]/.test(A.url))}g6.peek=qc;function g6(A,e,j,t){let r=zj(j),o=r==='"'?"Quote":"Apostrophe",n=j.createTracker(t),i,a;if(I6(A,j)){let l=j.stack;j.stack=[],i=j.enter("autolink");let k=n.move("<");return k+=n.move(j.containerPhrasing(A,{before:k,after:">",...n.current()})),k+=n.move(">"),i(),j.stack=l,k}i=j.enter("link"),a=j.enter("label");let s=n.move("[");return s+=n.move(j.containerPhrasing(A,{before:s,after:"](",...n.current()})),s+=n.move("]("),a(),!A.url&&A.title||/[\0- \u007F]/.test(A.url)?(a=j.enter("destinationLiteral"),s+=n.move("<"),s+=n.move(j.safe(A.url,{before:s,after:">",...n.current()})),s+=n.move(">")):(a=j.enter("destinationRaw"),s+=n.move(j.safe(A.url,{before:s,after:A.title?" ":")",...n.current()}))),a(),A.title&&(a=j.enter(`title${o}`),s+=n.move(" "+r),s+=n.move(j.safe(A.title,{before:s,after:r,...n.current()})),s+=n.move(r),a()),s+=n.move(")"),i(),s}function qc(A,e,j){return I6(A,j)?"<":"["}h6.peek=Nc;function h6(A,e,j,t){let r=A.referenceType,o=j.enter("linkReference"),n=j.enter("label"),i=j.createTracker(t),a=i.move("["),s=j.containerPhrasing(A,{before:a,after:"]",...i.current()});a+=i.move(s+"]["),n();let l=j.stack;j.stack=[],n=j.enter("reference");let k=j.safe(j.associationId(A),{before:a,after:"]",...i.current()});return n(),j.stack=l,o(),r==="full"||!s||s!==k?a+=i.move(k+"]"):r==="shortcut"?a=a.slice(0,-1):a+=i.move("]"),a}function Nc(){return"["}function Wj(A){let e=A.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function Ss(A){let e=Wj(A),j=A.options.bulletOther;if(!j)return e==="*"?"-":"*";if(j!=="*"&&j!=="+"&&j!=="-")throw new Error("Cannot serialize items with `"+j+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(j===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+j+"`) to be different");return j}function ys(A){let e=A.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function Ct(A){let e=A.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function Ms(A,e,j,t){let r=j.enter("list"),o=j.bulletCurrent,n=A.ordered?ys(j):Wj(j),i=A.ordered?n==="."?")":".":Ss(j),a=e&&j.bulletLastUsed?n===j.bulletLastUsed:!1;if(!A.ordered){let l=A.children?A.children[0]:void 0;if((n==="*"||n==="-")&&l&&(!l.children||!l.children[0])&&j.stack[j.stack.length-1]==="list"&&j.stack[j.stack.length-2]==="listItem"&&j.stack[j.stack.length-3]==="list"&&j.stack[j.stack.length-4]==="listItem"&&j.indexStack[j.indexStack.length-1]===0&&j.indexStack[j.indexStack.length-2]===0&&j.indexStack[j.indexStack.length-3]===0&&(a=!0),Ct(j)===n&&l){let k=-1;for(;++k<A.children.length;){let c=A.children[k];if(c&&c.type==="listItem"&&c.children&&c.children[0]&&c.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(n=i),j.bulletCurrent=n;let s=j.containerFlow(A,t);return j.bulletLastUsed=n,j.bulletCurrent=o,r(),s}function Cs(A){let e=A.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function Ds(A,e,j,t){let r=Cs(j),o=j.bulletCurrent||Wj(j);e&&e.type==="list"&&e.ordered&&(o=(typeof e.start=="number"&&e.start>-1?e.start:1)+(j.options.incrementListMarker===!1?0:e.children.indexOf(A))+o);let n=o.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||A.spread))&&(n=Math.ceil(n/4)*4);let i=j.createTracker(t);i.move(o+" ".repeat(n-o.length)),i.shift(n);let a=j.enter("listItem"),s=j.indentLines(j.containerFlow(A,i.current()),l);return a(),s;function l(k,c,u){return c?(u?"":" ".repeat(n))+k:(u?o:o+" ".repeat(n-o.length))+k}}function Os(A,e,j,t){let r=j.enter("paragraph"),o=j.enter("phrasing"),n=j.containerPhrasing(A,t);return o(),r(),n}function xs(A,e,j,t){return(A.children.some(function(n){return go(n)})?j.containerPhrasing:j.containerFlow).call(j,A,t)}function vs(A){let e=A.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}b6.peek=Lc;function b6(A,e,j,t){let r=vs(j),o=j.enter("strong"),n=j.createTracker(t),i=n.move(r+r);return i+=n.move(j.containerPhrasing(A,{before:i,after:r,...n.current()})),i+=n.move(r+r),o(),i}function Lc(A,e,j){return j.options.strong||"*"}function Ps(A,e,j,t){return j.safe(A.value,t)}function Ts(A){let e=A.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function ws(A,e,j){let t=(Ct(j)+(j.options.ruleSpaces?" ":"")).repeat(Ts(j));return j.options.ruleSpaces?t.slice(0,-1):t}var jj={blockquote:ms,break:p6,code:Rs,definition:Is,emphasis:m6,hardBreak:p6,heading:_s,html:f6,image:G6,imageReference:F6,inlineCode:R6,link:g6,linkReference:h6,list:Ms,listItem:Ds,paragraph:Os,root:xs,strong:b6,text:Ps,thematicBreak:ws};var qs=[Kc];function Kc(A,e,j,t){if(e.type==="code"&&ve(e,t)&&(A.type==="list"||A.type===e.type&&ve(A,t)))return!1;if("spread"in j&&typeof j.spread=="boolean")return A.type==="paragraph"&&(A.type===e.type||e.type==="definition"||e.type==="heading"&&Mt(e,t))?void 0:j.spread?1:0}var hj=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],Ns=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:hj},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:hj},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:hj},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:hj},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:hj},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:hj},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:hj},{atBreak:!0,character:"~"}];var Ls=document.createElement("i");function Yj(A){let e="&"+A+";";Ls.innerHTML=e;let j=Ls.textContent;return j.charCodeAt(j.length-1)===59&&A!=="semi"||j===e?!1:j}function Dt(A,e){let j=Number.parseInt(A,e);return j<9||j===11||j>13&&j<32||j>126&&j<160||j>55295&&j<57344||j>64975&&j<65008||(j&65535)===65535||(j&65535)===65534||j>1114111?"\uFFFD":String.fromCodePoint(j)}var Jc=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Ot(A){return A.replace(Jc,Hc)}function Hc(A,e,j){if(e)return e;if(j.charCodeAt(0)===35){let r=j.charCodeAt(1),o=r===120||r===88;return Dt(j.slice(o?2:1),o?16:10)}return Yj(j)||A}function Ks(A){return A.label||!A.identifier?A.label||"":Ot(A.identifier)}function Js(A){if(!A._compiled){let e=(A.atBreak?"[\\r\\n][\\t ]*":"")+(A.before?"(?:"+A.before+")":"");A._compiled=new RegExp((e?"("+e+")":"")+(/[|\\{}()[\]^$+*?.-]/.test(A.character)?"\\":"")+A.character+(A.after?"(?:"+A.after+")":""),"g")}return A._compiled}function Hs(A,e,j){let t=e.indexStack,r=A.children||[],o=[],n=-1,i=j.before;t.push(-1);let a=e.createTracker(j);for(;++n<r.length;){let s=r[n],l;if(t[t.length-1]=n,n+1<r.length){let k=e.handle.handlers[r[n+1].type];k&&k.peek&&(k=k.peek),l=k?k(r[n+1],A,e,{before:"",after:"",...a.current()}).charAt(0):""}else l=j.after;o.length>0&&(i==="\r"||i===`
`)&&s.type==="html"&&(o[o.length-1]=o[o.length-1].replace(/(\r?\n|\r)$/," "),i=" ",a=e.createTracker(j),a.move(o.join(""))),o.push(a.move(e.handle(s,A,e,{...a.current(),before:i,after:l}))),i=o[o.length-1].slice(-1)}return t.pop(),o.join("")}function Qs(A,e,j){let t=e.indexStack,r=A.children||[],o=e.createTracker(j),n=[],i=-1;for(t.push(-1);++i<r.length;){let a=r[i];t[t.length-1]=i,n.push(o.move(e.handle(a,A,e,{before:`
`,after:`
`,...o.current()}))),a.type!=="list"&&(e.bulletLastUsed=void 0),i<r.length-1&&n.push(o.move(Qc(a,r[i+1],A,e)))}return t.pop(),n.join("")}function Qc(A,e,j,t){let r=t.join.length;for(;r--;){let o=t.join[r](A,e,j,t);if(o===!0||o===1)break;if(typeof o=="number")return`
`.repeat(1+o);if(o===!1)return`

<!---->

`}return`

`}var Uc=/\r?\n|\r/g;function Us(A,e){let j=[],t=0,r=0,o;for(;o=Uc.exec(A);)n(A.slice(t,o.index)),j.push(o[0]),t=o.index+o[0].length,r++;return n(A.slice(t)),j.join("");function n(i){j.push(e(i,r,!i))}}function Xs(A,e,j){let t=(j.before||"")+(e||"")+(j.after||""),r=[],o=[],n={},i=-1;for(;++i<A.unsafe.length;){let l=A.unsafe[i];if(!yt(A.stack,l))continue;let k=A.compilePattern(l),c;for(;c=k.exec(t);){let u="before"in l||!!l.atBreak,$="after"in l,E=c.index+(u?c[1].length:0);r.includes(E)?(n[E].before&&!u&&(n[E].before=!1),n[E].after&&!$&&(n[E].after=!1)):(r.push(E),n[E]={before:u,after:$})}}r.sort(Vc);let a=j.before?j.before.length:0,s=t.length-(j.after?j.after.length:0);for(i=-1;++i<r.length;){let l=r[i];l<a||l>=s||l+1<s&&r[i+1]===l+1&&n[l].after&&!n[l+1].before&&!n[l+1].after||r[i-1]===l-1&&n[l].before&&!n[l-1].before&&!n[l-1].after||(a!==l&&o.push(Vs(t.slice(a,l),"\\")),a=l,/[!-/:-@[-`{-~]/.test(t.charAt(l))&&(!j.encode||!j.encode.includes(t.charAt(l)))?o.push("\\"):(o.push("&#x"+t.charCodeAt(l).toString(16).toUpperCase()+";"),a++))}return o.push(Vs(t.slice(a,s),j.after)),o.join("")}function Vc(A,e){return A-e}function Vs(A,e){let j=/\\(?=[!-/:-@[-`{-~])/g,t=[],r=[],o=A+e,n=-1,i=0,a;for(;a=j.exec(o);)t.push(a.index);for(;++n<t.length;)i!==t[n]&&r.push(A.slice(i,t[n])),r.push("\\"),i=t[n];return r.push(A.slice(i)),r.join("")}function zs(A){let e=A||{},j=e.now||{},t=e.lineShift||0,r=j.line||1,o=j.column||1;return{move:a,current:n,shift:i};function n(){return{now:{line:r,column:o},lineShift:t}}function i(s){t+=s}function a(s){let l=s||"",k=l.split(/\r?\n|\r/g),c=k[k.length-1];return r+=k.length-1,o=k.length===1?o+c.length:1+c.length+t,l}}function _6(A,e={}){let j={enter:r,indentLines:Us,associationId:Ks,containerPhrasing:Yc,containerFlow:Zc,createTracker:zs,compilePattern:Js,safe:Au,stack:[],unsafe:[...Ns],join:[...qs],handlers:{...jj},options:{},indexStack:[],handle:void 0};B6(j,e),j.options.tightDefinitions&&j.join.push(Wc),j.handle=rt("type",{invalid:Xc,unknown:zc,handlers:j.handlers});let t=j.handle(A,void 0,j,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return t&&t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t;function r(o){return j.stack.push(o),n;function n(){j.stack.pop()}}}function Xc(A){throw new Error("Cannot handle value `"+A+"`, expected node")}function zc(A){let e=A;throw new Error("Cannot handle unknown node `"+e.type+"`")}function Wc(A,e){if(A.type==="definition"&&A.type===e.type)return 0}function Yc(A,e){return Hs(A,this,e)}function Zc(A,e){return Qs(A,this,e)}function Au(A,e){return Xs(this,A,e)}var Ws=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"];var ju=/["&'<>`]/g,eu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tu=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,ru=/[|\\{}()[\]^$+*?.]/g,Ys=new WeakMap;function Zs(A,e){if(A=A.replace(e.subset?nu(e.subset):ju,t),e.subset||e.escapeOnly)return A;return A.replace(eu,j).replace(tu,t);function j(r,o,n){return e.format((r.charCodeAt(0)-55296)*1024+r.charCodeAt(1)-56320+65536,n.charCodeAt(o+2),e)}function t(r,o,n){return e.format(r.charCodeAt(0),n.charCodeAt(o+1),e)}}function nu(A){let e=Ys.get(A);return e||(e=ou(A),Ys.set(A,e)),e}function ou(A){let e=[],j=-1;for(;++j<A.length;)e.push(A[j].replace(ru,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}var iu=/[\dA-Fa-f]/;function A7(A,e,j){let t="&#x"+A.toString(16).toUpperCase();return j&&e&&!iu.test(String.fromCharCode(e))?t:t+";"}var au=/\d/;function j7(A,e,j){let t="&#"+String(A);return j&&e&&!au.test(String.fromCharCode(e))?t:t+";"}var e7=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"];var xt={nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",fnof:"\u0192",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",bull:"\u2022",hellip:"\u2026",prime:"\u2032",Prime:"\u2033",oline:"\u203E",frasl:"\u2044",weierp:"\u2118",image:"\u2111",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",lang:"\u2329",rang:"\u232A",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",quot:'"',amp:"&",lt:"<",gt:">",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",circ:"\u02C6",tilde:"\u02DC",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",permil:"\u2030",lsaquo:"\u2039",rsaquo:"\u203A",euro:"\u20AC"};var t7=["cent","copy","divide","gt","lt","not","para","times"];var r7={}.hasOwnProperty,S6={},vt;for(vt in xt)r7.call(xt,vt)&&(S6[xt[vt]]=vt);var su=/[^\dA-Za-z]/;function n7(A,e,j,t){let r=String.fromCharCode(A);if(r7.call(S6,r)){let o=S6[r],n="&"+o;return j&&e7.includes(o)&&!t7.includes(o)&&(!t||e&&e!==61&&su.test(String.fromCharCode(e)))?n:n+";"}return""}function o7(A,e,j){let t=A7(A,e,j.omitOptionalSemicolons),r;if((j.useNamedReferences||j.useShortestReferences)&&(r=n7(A,e,j.omitOptionalSemicolons,j.attribute)),(j.useShortestReferences||!r)&&j.useShortestReferences){let o=j7(A,e,j.omitOptionalSemicolons);o.length<t.length&&(t=o)}return r&&(!j.useShortestReferences||r.length<t.length)?r:t}function ej(A,e){return Zs(A,Object.assign({format:o7},e))}var lu=/^>|^->|<!--|-->|--!>|<!-$/g,ku=[">"],cu=["<",">"];function i7(A,e,j,t){return t.settings.bogusComments?"<?"+ej(A.value,Object.assign({},t.settings.characterReferences,{subset:ku}))+">":"<!--"+A.value.replace(lu,r)+"-->";function r(o){return ej(o,Object.assign({},t.settings.characterReferences,{subset:cu}))}}function a7(A,e,j,t){return"<!"+(t.settings.upperDoctype?"DOCTYPE":"doctype")+(t.settings.tightDoctype?"":" ")+"html>"}function Zj(A,e){let j=String(A);if(typeof e!="string")throw new TypeError("Expected character");let t=0,r=j.indexOf(e);for(;r!==-1;)t++,r=j.indexOf(e,r+e.length);return t}var uu=/[ \t\n\f\r]/g;function bj(A){return typeof A=="object"?A.type==="text"?s7(A.value):!1:s7(A)}function s7(A){return A.replace(uu,"")===""}var aA=l7(1),y6=l7(-1),$u=[];function l7(A){return e;function e(j,t,r){let o=j?j.children:$u,n=(t||0)+A,i=o[n];if(!r)for(;i&&bj(i);)n+=A,i=o[n];return i}}var du={}.hasOwnProperty;function Pt(A){return e;function e(j,t,r){return du.call(A,j.tagName)&&A[j.tagName](j,t,r)}}var Pe=Pt({body:Bu,caption:M6,colgroup:M6,dd:Gu,dt:fu,head:M6,html:Eu,li:mu,optgroup:Fu,option:Ru,p:pu,rp:k7,rt:k7,tbody:gu,td:c7,tfoot:hu,th:c7,thead:Iu,tr:bu});function M6(A,e,j){let t=aA(j,e,!0);return!t||t.type!=="comment"&&!(t.type==="text"&&bj(t.value.charAt(0)))}function Eu(A,e,j){let t=aA(j,e);return!t||t.type!=="comment"}function Bu(A,e,j){let t=aA(j,e);return!t||t.type!=="comment"}function pu(A,e,j){let t=aA(j,e);return t?t.type==="element"&&(t.tagName==="address"||t.tagName==="article"||t.tagName==="aside"||t.tagName==="blockquote"||t.tagName==="details"||t.tagName==="div"||t.tagName==="dl"||t.tagName==="fieldset"||t.tagName==="figcaption"||t.tagName==="figure"||t.tagName==="footer"||t.tagName==="form"||t.tagName==="h1"||t.tagName==="h2"||t.tagName==="h3"||t.tagName==="h4"||t.tagName==="h5"||t.tagName==="h6"||t.tagName==="header"||t.tagName==="hgroup"||t.tagName==="hr"||t.tagName==="main"||t.tagName==="menu"||t.tagName==="nav"||t.tagName==="ol"||t.tagName==="p"||t.tagName==="pre"||t.tagName==="section"||t.tagName==="table"||t.tagName==="ul"):!j||!(j.type==="element"&&(j.tagName==="a"||j.tagName==="audio"||j.tagName==="del"||j.tagName==="ins"||j.tagName==="map"||j.tagName==="noscript"||j.tagName==="video"))}function mu(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&t.tagName==="li"}function fu(A,e,j){let t=aA(j,e);return!!(t&&t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd"))}function Gu(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&(t.tagName==="dt"||t.tagName==="dd")}function k7(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&(t.tagName==="rp"||t.tagName==="rt")}function Fu(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&t.tagName==="optgroup"}function Ru(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&(t.tagName==="option"||t.tagName==="optgroup")}function Iu(A,e,j){let t=aA(j,e);return!!(t&&t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot"))}function gu(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&(t.tagName==="tbody"||t.tagName==="tfoot")}function hu(A,e,j){return!aA(j,e)}function bu(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&t.tagName==="tr"}function c7(A,e,j){let t=aA(j,e);return!t||t.type==="element"&&(t.tagName==="td"||t.tagName==="th")}var u7=Pt({body:yu,colgroup:Mu,head:Su,html:_u,tbody:Cu});function _u(A){let e=aA(A,-1);return!e||e.type!=="comment"}function Su(A){let e=new Set;for(let t of A.children)if(t.type==="element"&&(t.tagName==="base"||t.tagName==="title")){if(e.has(t.tagName))return!1;e.add(t.tagName)}let j=A.children[0];return!j||j.type==="element"}function yu(A){let e=aA(A,-1,!0);return!e||e.type!=="comment"&&!(e.type==="text"&&bj(e.value.charAt(0)))&&!(e.type==="element"&&(e.tagName==="meta"||e.tagName==="link"||e.tagName==="script"||e.tagName==="style"||e.tagName==="template"))}function Mu(A,e,j){let t=y6(j,e),r=aA(A,-1,!0);return j&&t&&t.type==="element"&&t.tagName==="colgroup"&&Pe(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="col")}function Cu(A,e,j){let t=y6(j,e),r=aA(A,-1);return j&&t&&t.type==="element"&&(t.tagName==="thead"||t.tagName==="tbody")&&Pe(t,j.children.indexOf(t),j)?!1:!!(r&&r.type==="element"&&r.tagName==="tr")}var Tt={name:[[`	
\f\r &/=>`.split(""),`	
\f\r "&'/=>\``.split("")],[`\0	
\f\r "&'/<=>`.split(""),`\0	
\f\r "&'/<=>\``.split("")]],unquoted:[[`	
\f\r &>`.split(""),`\0	
\f\r "&'<=>\``.split("")],[`\0	
\f\r "&'<=>\``.split(""),`\0	
\f\r "&'<=>\``.split("")]],single:[["&'".split(""),"\"&'`".split("")],["\0&'".split(""),"\0\"&'`".split("")]],double:[['"&'.split(""),"\"&'`".split("")],['\0"&'.split(""),"\0\"&'`".split("")]]};function $7(A,e,j,t){let r=t.schema,o=r.space==="svg"?!1:t.settings.omitOptionalTags,n=r.space==="svg"?t.settings.closeEmptyElements:t.settings.voids.includes(A.tagName.toLowerCase()),i=[],a;r.space==="html"&&A.tagName==="svg"&&(t.schema=mt);let s=Du(t,A.properties),l=t.all(r.space==="html"&&A.tagName==="template"?A.content:A);return t.schema=r,l&&(n=!1),(s||!o||!u7(A,e,j))&&(i.push("<",A.tagName,s?" "+s:""),n&&(r.space==="svg"||t.settings.closeSelfClosing)&&(a=s.charAt(s.length-1),(!t.settings.tightSelfClosing||a==="/"||a&&a!=='"'&&a!=="'")&&i.push(" "),i.push("/")),i.push(">")),i.push(l),!n&&(!o||!Pe(A,e,j))&&i.push("</"+A.tagName+">"),i.join("")}function Du(A,e){let j=[],t=-1,r;if(e){for(r in e)if(e[r]!==null&&e[r]!==void 0){let o=Ou(A,r,e[r]);o&&j.push(o)}}for(;++t<j.length;){let o=A.settings.tightAttributes?j[t].charAt(j[t].length-1):void 0;t!==j.length-1&&o!=='"'&&o!=="'"&&(j[t]+=" ")}return j.join("")}function Ou(A,e,j){let t=Hr(A.schema,e),r=A.settings.allowParseErrors&&A.schema.space==="html"?0:1,o=A.settings.allowDangerousCharacters?0:1,n=A.quote,i;if(t.overloadedBoolean&&(j===t.attribute||j==="")?j=!0:(t.boolean||t.overloadedBoolean)&&(typeof j!="string"||j===t.attribute||j==="")&&(j=!!j),j==null||j===!1||typeof j=="number"&&Number.isNaN(j))return"";let a=ej(t.attribute,Object.assign({},A.settings.characterReferences,{subset:Tt.name[r][o]}));return j===!0||(j=Array.isArray(j)?(t.commaSeparated?la:ka)(j,{padLeft:!A.settings.tightCommaSeparatedLists}):String(j),A.settings.collapseEmptyAttributes&&!j)?a:(A.settings.preferUnquoted&&(i=ej(j,Object.assign({},A.settings.characterReferences,{attribute:!0,subset:Tt.unquoted[r][o]}))),i!==j&&(A.settings.quoteSmart&&Zj(j,n)>Zj(j,A.alternative)&&(n=A.alternative),i=n+ej(j,Object.assign({},A.settings.characterReferences,{subset:(n==="'"?Tt.single:Tt.double)[r][o],attribute:!0}))+n),a+(i&&"="+i))}var xu=["<","&"];function wt(A,e,j,t){return j&&j.type==="element"&&(j.tagName==="script"||j.tagName==="style")?A.value:ej(A.value,Object.assign({},t.settings.characterReferences,{subset:xu}))}function d7(A,e,j,t){return t.settings.allowDangerousHtml?A.value:wt(A,e,j,t)}function E7(A,e,j,t){return t.all(A)}var B7=rt("type",{invalid:vu,unknown:Pu,handlers:{comment:i7,doctype:a7,element:$7,raw:d7,root:E7,text:wt}});function vu(A){throw new Error("Expected node, not `"+A+"`")}function Pu(A){let e=A;throw new Error("Cannot compile unknown node `"+e.type+"`")}var Tu={},wu={},qu=[];function C6(A,e){let j=e||Tu,t=j.quote||'"',r=t==='"'?"'":'"';if(t!=='"'&&t!=="'")throw new Error("Invalid quote `"+t+"`, expected `'` or `\"`");return{one:Nu,all:Lu,settings:{omitOptionalTags:j.omitOptionalTags||!1,allowParseErrors:j.allowParseErrors||!1,allowDangerousCharacters:j.allowDangerousCharacters||!1,quoteSmart:j.quoteSmart||!1,preferUnquoted:j.preferUnquoted||!1,tightAttributes:j.tightAttributes||!1,upperDoctype:j.upperDoctype||!1,tightDoctype:j.tightDoctype||!1,bogusComments:j.bogusComments||!1,tightCommaSeparatedLists:j.tightCommaSeparatedLists||!1,tightSelfClosing:j.tightSelfClosing||!1,collapseEmptyAttributes:j.collapseEmptyAttributes||!1,allowDangerousHtml:j.allowDangerousHtml||!1,voids:j.voids||Ws,characterReferences:j.characterReferences||wu,closeSelfClosing:j.closeSelfClosing||!1,closeEmptyElements:j.closeEmptyElements||!1},schema:j.space==="svg"?mt:sa,quote:t,alternative:r}.one(Array.isArray(A)?{type:"root",children:A}:A,void 0,void 0)}function Nu(A,e,j){return B7(A,e,j,this)}function Lu(A){let e=[],j=A&&A.children||qu,t=-1;for(;++t<j.length;)e[t]=this.one(j[t],t,A);return e.join("")}function qt(A){let e=this,j={...e.data("settings"),...A};e.compiler=t;function t(r){return C6(r,j)}}function D6(A){if(typeof A!="string")throw new TypeError("Expected a string");return A.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Te(A,e,j){let r=Go((j||{}).ignore||[]),o=Ku(e),n=-1;for(;++n<o.length;)Ro(A,"text",i);function i(s,l){let k=-1,c;for(;++k<l.length;){let u=l[k],$=c?c.children:void 0;if(r(u,$?$.indexOf(u):void 0,c))return;c=u}if(c)return a(s,l)}function a(s,l){let k=l[l.length-1],c=o[n][0],u=o[n][1],$=0,m=k.children.indexOf(s),d=!1,f=[];c.lastIndex=0;let R=c.exec(s.value);for(;R;){let _=R.index,h={index:R.index,input:R.input,stack:[...l,s]},G=u(...R,h);if(typeof G=="string"&&(G=G.length>0?{type:"text",value:G}:void 0),G===!1?c.lastIndex=_+1:($!==_&&f.push({type:"text",value:s.value.slice($,_)}),Array.isArray(G)?f.push(...G):G&&f.push(G),$=_+R[0].length,d=!0),!c.global)break;R=c.exec(s.value)}return d?($<s.value.length&&f.push({type:"text",value:s.value.slice($)}),k.children.splice(m,1,...f)):f=[s],m+f.length}}function Ku(A){let e=[];if(!Array.isArray(A))throw new TypeError("Expected find and replace tuple or list of tuples");let j=!A[0]||Array.isArray(A[0])?A:[A],t=-1;for(;++t<j.length;){let r=j[t];e.push([Ju(r[0]),Hu(r[1])])}return e}function Ju(A){return typeof A=="string"?new RegExp(D6(A),"g"):A}function Hu(A){return typeof A=="function"?A:function(){return A}}function O6(A){Te(A,[/\r?\n|\r/g,Qu])}function Qu(){return{type:"break"}}function Nt(){return function(A){O6(A)}}var uA=cj(/[A-Za-z]/),oA=cj(/[\dA-Za-z]/),p7=cj(/[#-'*+\--9=?A-Z^-~]/);function _j(A){return A!==null&&(A<32||A===127)}var we=cj(/\d/),m7=cj(/[\dA-Fa-f]/),f7=cj(/[!-/:-@[-`{-~]/);function C(A){return A!==null&&A<-2}function H(A){return A!==null&&(A<0||A===32)}function q(A){return A===-2||A===-1||A===32}var Sj=cj(new RegExp("\\p{P}|\\p{S}","u")),HA=cj(/\s/);function cj(A){return e;function e(j){return j!==null&&j>-1&&A.test(String.fromCharCode(j))}}var x6="phrasing",v6=["autolink","link","image","label"];function T6(){return{transforms:[Yu],enter:{literalAutolink:Uu,literalAutolinkEmail:P6,literalAutolinkHttp:P6,literalAutolinkWww:P6},exit:{literalAutolink:Wu,literalAutolinkEmail:zu,literalAutolinkHttp:Vu,literalAutolinkWww:Xu}}}function w6(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:x6,notInConstruct:v6},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:x6,notInConstruct:v6},{character:":",before:"[ps]",after:"\\/",inConstruct:x6,notInConstruct:v6}]}}function Uu(A){this.enter({type:"link",title:null,url:"",children:[]},A)}function P6(A){this.config.enter.autolinkProtocol.call(this,A)}function Vu(A){this.config.exit.autolinkProtocol.call(this,A)}function Xu(A){this.config.exit.data.call(this,A);let e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(A)}function zu(A){this.config.exit.autolinkEmail.call(this,A)}function Wu(A){this.exit(A)}function Yu(A){Te(A,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,Zu],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),A$]],{ignore:["link","linkReference"]})}function Zu(A,e,j,t,r){let o="";if(!G7(r)||(/^w/i.test(e)&&(j=e+j,e="",o="http://"),!j$(j)))return!1;let n=e$(j+t);if(!n[0])return!1;let i={type:"link",title:null,url:o+e+n[0],children:[{type:"text",value:e+n[0]}]};return n[1]?[i,{type:"text",value:n[1]}]:i}function A$(A,e,j,t){return!G7(t,!0)||/[-\d_]$/.test(j)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+j,children:[{type:"text",value:e+"@"+j}]}}function j$(A){let e=A.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function e$(A){let e=/[!"&'),.:;<>?\]}]+$/.exec(A);if(!e)return[A,void 0];A=A.slice(0,e.index);let j=e[0],t=j.indexOf(")"),r=Zj(A,"("),o=Zj(A,")");for(;t!==-1&&r>o;)A+=j.slice(0,t+1),j=j.slice(t+1),t=j.indexOf(")"),o++;return[A,j]}function G7(A,e){let j=A.input.charCodeAt(A.index-1);return(A.index===0||HA(j)||Sj(j))&&(!e||j!==47)}function FA(A){return A.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}F7.peek=k$;function t$(){this.buffer()}function r$(A){this.enter({type:"footnoteReference",identifier:"",label:""},A)}function n$(){this.buffer()}function o$(A){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},A)}function i$(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=FA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function a$(A){this.exit(A)}function s$(A){let e=this.resume(),j=this.stack[this.stack.length-1];j.type,j.identifier=FA(this.sliceSerialize(A)).toLowerCase(),j.label=e}function l$(A){this.exit(A)}function k$(){return"["}function F7(A,e,j,t){let r=j.createTracker(t),o=r.move("[^"),n=j.enter("footnoteReference"),i=j.enter("reference");return o+=r.move(j.safe(j.associationId(A),{after:"]",before:o})),i(),n(),o+=r.move("]"),o}function q6(){return{enter:{gfmFootnoteCallString:t$,gfmFootnoteCall:r$,gfmFootnoteDefinitionLabelString:n$,gfmFootnoteDefinition:o$},exit:{gfmFootnoteCallString:i$,gfmFootnoteCall:a$,gfmFootnoteDefinitionLabelString:s$,gfmFootnoteDefinition:l$}}}function N6(A){let e=!1;return A&&A.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:j,footnoteReference:F7},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function j(t,r,o,n){let i=o.createTracker(n),a=i.move("[^"),s=o.enter("footnoteDefinition"),l=o.enter("label");return a+=i.move(o.safe(o.associationId(t),{before:a,after:"]"})),l(),a+=i.move("]:"),t.children&&t.children.length>0&&(i.shift(4),a+=i.move((e?`
`:" ")+o.indentLines(o.containerFlow(t,i.current()),e?R7:c$))),s(),a}}function c$(A,e,j){return e===0?A:R7(A,e,j)}function R7(A,e,j){return(j?"":"    ")+A}var u$=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];I7.peek=E$;function L6(){return{canContainEols:["delete"],enter:{strikethrough:$$},exit:{strikethrough:d$}}}function K6(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:u$}],handlers:{delete:I7}}}function $$(A){this.enter({type:"delete",children:[]},A)}function d$(A){this.exit(A)}function I7(A,e,j,t){let r=j.createTracker(t),o=j.enter("strikethrough"),n=r.move("~~");return n+=j.containerPhrasing(A,{...r.current(),before:n,after:"~"}),n+=r.move("~~"),o(),n}function E$(){return"~"}function B$(A){return A.length}function h7(A,e){let j=e||{},t=(j.align||[]).concat(),r=j.stringLength||B$,o=[],n=[],i=[],a=[],s=0,l=-1;for(;++l<A.length;){let E=[],m=[],d=-1;for(A[l].length>s&&(s=A[l].length);++d<A[l].length;){let f=p$(A[l][d]);if(j.alignDelimiters!==!1){let R=r(f);m[d]=R,(a[d]===void 0||R>a[d])&&(a[d]=R)}E.push(f)}n[l]=E,i[l]=m}let k=-1;if(typeof t=="object"&&"length"in t)for(;++k<s;)o[k]=g7(t[k]);else{let E=g7(t);for(;++k<s;)o[k]=E}k=-1;let c=[],u=[];for(;++k<s;){let E=o[k],m="",d="";E===99?(m=":",d=":"):E===108?m=":":E===114&&(d=":");let f=j.alignDelimiters===!1?1:Math.max(1,a[k]-m.length-d.length),R=m+"-".repeat(f)+d;j.alignDelimiters!==!1&&(f=m.length+f+d.length,f>a[k]&&(a[k]=f),u[k]=f),c[k]=R}n.splice(1,0,c),i.splice(1,0,u),l=-1;let $=[];for(;++l<n.length;){let E=n[l],m=i[l];k=-1;let d=[];for(;++k<s;){let f=E[k]||"",R="",_="";if(j.alignDelimiters!==!1){let h=a[k]-(m[k]||0),G=o[k];G===114?R=" ".repeat(h):G===99?h%2?(R=" ".repeat(h/2+.5),_=" ".repeat(h/2-.5)):(R=" ".repeat(h/2),_=R):_=" ".repeat(h)}j.delimiterStart!==!1&&!k&&d.push("|"),j.padding!==!1&&!(j.alignDelimiters===!1&&f==="")&&(j.delimiterStart!==!1||k)&&d.push(" "),j.alignDelimiters!==!1&&d.push(R),d.push(f),j.alignDelimiters!==!1&&d.push(_),j.padding!==!1&&d.push(" "),(j.delimiterEnd!==!1||k!==s-1)&&d.push("|")}$.push(j.delimiterEnd===!1?d.join("").replace(/ +$/,""):d.join(""))}return $.join(`
`)}function p$(A){return A==null?"":String(A)}function g7(A){let e=typeof A=="string"?A.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function H6(){return{enter:{table:m$,tableData:b7,tableHeader:b7,tableRow:G$},exit:{codeText:F$,table:f$,tableData:J6,tableHeader:J6,tableRow:J6}}}function m$(A){let e=A._align;this.enter({type:"table",align:e.map(function(j){return j==="none"?null:j}),children:[]},A),this.data.inTable=!0}function f$(A){this.exit(A),this.data.inTable=void 0}function G$(A){this.enter({type:"tableRow",children:[]},A)}function J6(A){this.exit(A)}function b7(A){this.enter({type:"tableCell",children:[]},A)}function F$(A){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,R$));let j=this.stack[this.stack.length-1];j.type,j.value=e,this.exit(A)}function R$(A,e){return e==="|"?e:A}function Q6(A){let e=A||{},j=e.tableCellPadding,t=e.tablePipeAlign,r=e.stringLength,o=j?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:c,table:n,tableCell:a,tableRow:i}};function n(u,$,E,m){return s(l(u,E,m),u.align)}function i(u,$,E,m){let d=k(u,E,m),f=s([d]);return f.slice(0,f.indexOf(`
`))}function a(u,$,E,m){let d=E.enter("tableCell"),f=E.enter("phrasing"),R=E.containerPhrasing(u,{...m,before:o,after:o});return f(),d(),R}function s(u,$){return h7(u,{align:$,alignDelimiters:t,padding:j,stringLength:r})}function l(u,$,E){let m=u.children,d=-1,f=[],R=$.enter("table");for(;++d<m.length;)f[d]=k(m[d],$,E);return R(),f}function k(u,$,E){let m=u.children,d=-1,f=[],R=$.enter("tableRow");for(;++d<m.length;)f[d]=a(m[d],u,$,E);return R(),f}function c(u,$,E){let m=jj.inlineCode(u,$,E);return E.stack.includes("tableCell")&&(m=m.replace(/\|/g,"\\$&")),m}}function U6(){return{exit:{taskListCheckValueChecked:_7,taskListCheckValueUnchecked:_7,paragraph:I$}}}function V6(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:g$}}}function _7(A){let e=this.stack[this.stack.length-2];e.type,e.checked=A.type==="taskListCheckValueChecked"}function I$(A){let e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){let j=this.stack[this.stack.length-1];j.type;let t=j.children[0];if(t&&t.type==="text"){let r=e.children,o=-1,n;for(;++o<r.length;){let i=r[o];if(i.type==="paragraph"){n=i;break}}n===j&&(t.value=t.value.slice(1),t.value.length===0?j.children.shift():j.position&&t.position&&typeof t.position.start.offset=="number"&&(t.position.start.column++,t.position.start.offset++,j.position.start=Object.assign({},t.position.start)))}}this.exit(A)}function g$(A,e,j,t){let r=A.children[0],o=typeof A.checked=="boolean"&&r&&r.type==="paragraph",n="["+(A.checked?"x":" ")+"] ",i=j.createTracker(t);o&&i.move(n);let a=jj.listItem(A,e,j,{...t,...i.current()});return o&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,s)),a;function s(l){return l+n}}function X6(){return[T6(),q6(),L6(),H6(),U6()]}function z6(A){return{extensions:[w6(),N6(A),K6(),Q6(A),V6()]}}function kA(A,e,j,t){let r=A.length,o=0,n;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,j=j>0?j:0,t.length<1e4)n=Array.from(t),n.unshift(e,j),A.splice(...n);else for(j&&A.splice(e,j);o<t.length;)n=t.slice(o,o+1e4),n.unshift(e,0),A.splice(...n),o+=1e4,e+=1e4}function gA(A,e){return A.length>0?(kA(A,A.length,0,e),A):e}var S7={}.hasOwnProperty;function Lt(A){let e={},j=-1;for(;++j<A.length;)h$(e,A[j]);return e}function h$(A,e){let j;for(j in e){let r=(S7.call(A,j)?A[j]:void 0)||(A[j]={}),o=e[j],n;if(o)for(n in o){S7.call(r,n)||(r[n]=[]);let i=o[n];b$(r[n],Array.isArray(i)?i:i?[i]:[])}}}function b$(A,e){let j=-1,t=[];for(;++j<e.length;)(e[j].add==="after"?A:t).push(e[j]);kA(A,0,0,t)}var _$={tokenize:D$,partial:!0},y7={tokenize:O$,partial:!0},M7={tokenize:x$,partial:!0},C7={tokenize:v$,partial:!0},S$={tokenize:P$,partial:!0},D7={name:"wwwAutolink",tokenize:M$,previous:x7},O7={name:"protocolAutolink",tokenize:C$,previous:v7},tj={name:"emailAutolink",tokenize:y$,previous:P7},QA={};function Y6(){return{text:QA}}var yj=48;for(;yj<123;)QA[yj]=tj,yj++,yj===58?yj=65:yj===91&&(yj=97);QA[43]=tj;QA[45]=tj;QA[46]=tj;QA[95]=tj;QA[72]=[tj,O7];QA[104]=[tj,O7];QA[87]=[tj,D7];QA[119]=[tj,D7];function y$(A,e,j){let t=this,r,o;return n;function n(k){return!W6(k)||!P7.call(t,t.previous)||Z6(t.events)?j(k):(A.enter("literalAutolink"),A.enter("literalAutolinkEmail"),i(k))}function i(k){return W6(k)?(A.consume(k),i):k===64?(A.consume(k),a):j(k)}function a(k){return k===46?A.check(S$,l,s)(k):k===45||k===95||oA(k)?(o=!0,A.consume(k),a):l(k)}function s(k){return A.consume(k),r=!0,a}function l(k){return o&&r&&uA(t.previous)?(A.exit("literalAutolinkEmail"),A.exit("literalAutolink"),e(k)):j(k)}}function M$(A,e,j){let t=this;return r;function r(n){return n!==87&&n!==119||!x7.call(t,t.previous)||Z6(t.events)?j(n):(A.enter("literalAutolink"),A.enter("literalAutolinkWww"),A.check(_$,A.attempt(y7,A.attempt(M7,o),j),j)(n))}function o(n){return A.exit("literalAutolinkWww"),A.exit("literalAutolink"),e(n)}}function C$(A,e,j){let t=this,r="",o=!1;return n;function n(k){return(k===72||k===104)&&v7.call(t,t.previous)&&!Z6(t.events)?(A.enter("literalAutolink"),A.enter("literalAutolinkHttp"),r+=String.fromCodePoint(k),A.consume(k),i):j(k)}function i(k){if(uA(k)&&r.length<5)return r+=String.fromCodePoint(k),A.consume(k),i;if(k===58){let c=r.toLowerCase();if(c==="http"||c==="https")return A.consume(k),a}return j(k)}function a(k){return k===47?(A.consume(k),o?s:(o=!0,a)):j(k)}function s(k){return k===null||_j(k)||H(k)||HA(k)||Sj(k)?j(k):A.attempt(y7,A.attempt(M7,l),j)(k)}function l(k){return A.exit("literalAutolinkHttp"),A.exit("literalAutolink"),e(k)}}function D$(A,e,j){let t=0;return r;function r(n){return(n===87||n===119)&&t<3?(t++,A.consume(n),r):n===46&&t===3?(A.consume(n),o):j(n)}function o(n){return n===null?j(n):e(n)}}function O$(A,e,j){let t,r,o;return n;function n(s){return s===46||s===95?A.check(C7,a,i)(s):s===null||H(s)||HA(s)||s!==45&&Sj(s)?a(s):(o=!0,A.consume(s),n)}function i(s){return s===95?t=!0:(r=t,t=void 0),A.consume(s),n}function a(s){return r||t||!o?j(s):e(s)}}function x$(A,e){let j=0,t=0;return r;function r(n){return n===40?(j++,A.consume(n),r):n===41&&t<j?o(n):n===33||n===34||n===38||n===39||n===41||n===42||n===44||n===46||n===58||n===59||n===60||n===63||n===93||n===95||n===126?A.check(C7,e,o)(n):n===null||H(n)||HA(n)?e(n):(A.consume(n),r)}function o(n){return n===41&&t++,A.consume(n),r}}function v$(A,e,j){return t;function t(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(A.consume(i),t):i===38?(A.consume(i),o):i===93?(A.consume(i),r):i===60||i===null||H(i)||HA(i)?e(i):j(i)}function r(i){return i===null||i===40||i===91||H(i)||HA(i)?e(i):t(i)}function o(i){return uA(i)?n(i):j(i)}function n(i){return i===59?(A.consume(i),t):uA(i)?(A.consume(i),n):j(i)}}function P$(A,e,j){return t;function t(o){return A.consume(o),r}function r(o){return oA(o)?j(o):e(o)}}function x7(A){return A===null||A===40||A===42||A===95||A===91||A===93||A===126||H(A)}function v7(A){return!uA(A)}function P7(A){return!(A===47||W6(A))}function W6(A){return A===43||A===45||A===46||A===95||oA(A)}function Z6(A){let e=A.length,j=!1;for(;e--;){let t=A[e][1];if((t.type==="labelLink"||t.type==="labelImage")&&!t._balanced){j=!0;break}if(t._gfmAutolinkLiteralWalkedInto){j=!1;break}}return A.length>0&&!j&&(A[A.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),j}function xA(A){let e=[],j=-1,t=0,r=0;for(;++j<A.length;){let o=A.charCodeAt(j),n="";if(o===37&&oA(A.charCodeAt(j+1))&&oA(A.charCodeAt(j+2)))r=2;else if(o<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(o))||(n=String.fromCharCode(o));else if(o>55295&&o<57344){let i=A.charCodeAt(j+1);o<56320&&i>56319&&i<57344?(n=String.fromCharCode(o,i),r=1):n="\uFFFD"}else n=String.fromCharCode(o);n&&(e.push(A.slice(t,j),encodeURIComponent(n)),t=j+r+1,n=""),r&&(j+=r,r=0)}return e.join("")+A.slice(t)}function Ae(A){if(A===null||H(A)||HA(A))return 1;if(Sj(A))return 2}function uj(A,e,j){let t=[],r=-1;for(;++r<A.length;){let o=A[r].resolveAll;o&&!t.includes(o)&&(e=o(e,j),t.push(o))}return e}var qe={name:"attention",tokenize:w$,resolveAll:T$};function T$(A,e){let j=-1,t,r,o,n,i,a,s,l;for(;++j<A.length;)if(A[j][0]==="enter"&&A[j][1].type==="attentionSequence"&&A[j][1]._close){for(t=j;t--;)if(A[t][0]==="exit"&&A[t][1].type==="attentionSequence"&&A[t][1]._open&&e.sliceSerialize(A[t][1]).charCodeAt(0)===e.sliceSerialize(A[j][1]).charCodeAt(0)){if((A[t][1]._close||A[j][1]._open)&&(A[j][1].end.offset-A[j][1].start.offset)%3&&!((A[t][1].end.offset-A[t][1].start.offset+A[j][1].end.offset-A[j][1].start.offset)%3))continue;a=A[t][1].end.offset-A[t][1].start.offset>1&&A[j][1].end.offset-A[j][1].start.offset>1?2:1;let k=Object.assign({},A[t][1].end),c=Object.assign({},A[j][1].start);T7(k,-a),T7(c,a),n={type:a>1?"strongSequence":"emphasisSequence",start:k,end:Object.assign({},A[t][1].end)},i={type:a>1?"strongSequence":"emphasisSequence",start:Object.assign({},A[j][1].start),end:c},o={type:a>1?"strongText":"emphasisText",start:Object.assign({},A[t][1].end),end:Object.assign({},A[j][1].start)},r={type:a>1?"strong":"emphasis",start:Object.assign({},n.start),end:Object.assign({},i.end)},A[t][1].end=Object.assign({},n.start),A[j][1].start=Object.assign({},i.end),s=[],A[t][1].end.offset-A[t][1].start.offset&&(s=gA(s,[["enter",A[t][1],e],["exit",A[t][1],e]])),s=gA(s,[["enter",r,e],["enter",n,e],["exit",n,e],["enter",o,e]]),s=gA(s,uj(e.parser.constructs.insideSpan.null,A.slice(t+1,j),e)),s=gA(s,[["exit",o,e],["enter",i,e],["exit",i,e],["exit",r,e]]),A[j][1].end.offset-A[j][1].start.offset?(l=2,s=gA(s,[["enter",A[j][1],e],["exit",A[j][1],e]])):l=0,kA(A,t-1,j-t+3,s),j=t+s.length-l-2;break}}for(j=-1;++j<A.length;)A[j][1].type==="attentionSequence"&&(A[j][1].type="data");return A}function w$(A,e){let j=this.parser.constructs.attentionMarkers.null,t=this.previous,r=Ae(t),o;return n;function n(a){return o=a,A.enter("attentionSequence"),i(a)}function i(a){if(a===o)return A.consume(a),i;let s=A.exit("attentionSequence"),l=Ae(a),k=!l||l===2&&r||j.includes(a),c=!r||r===2&&l||j.includes(t);return s._open=!!(o===42?k:k&&(r||!c)),s._close=!!(o===42?c:c&&(l||!k)),e(a)}}function T7(A,e){A.column+=e,A.offset+=e,A._bufferIndex+=e}var An={name:"autolink",tokenize:q$};function q$(A,e,j){let t=0;return r;function r(u){return A.enter("autolink"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.enter("autolinkProtocol"),o}function o(u){return uA(u)?(A.consume(u),n):u===64?j(u):s(u)}function n(u){return u===43||u===45||u===46||oA(u)?(t=1,i(u)):s(u)}function i(u){return u===58?(A.consume(u),t=0,a):(u===43||u===45||u===46||oA(u))&&t++<32?(A.consume(u),i):(t=0,s(u))}function a(u){return u===62?(A.exit("autolinkProtocol"),A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):u===null||u===32||u===60||_j(u)?j(u):(A.consume(u),a)}function s(u){return u===64?(A.consume(u),l):p7(u)?(A.consume(u),s):j(u)}function l(u){return oA(u)?k(u):j(u)}function k(u){return u===46?(A.consume(u),t=0,l):u===62?(A.exit("autolinkProtocol").type="autolinkEmail",A.enter("autolinkMarker"),A.consume(u),A.exit("autolinkMarker"),A.exit("autolink"),e):c(u)}function c(u){if((u===45||oA(u))&&t++<63){let $=u===45?c:k;return A.consume(u),$}return j(u)}}function T(A,e,j,t){let r=t?t-1:Number.POSITIVE_INFINITY,o=0;return n;function n(a){return q(a)?(A.enter(j),i(a)):e(a)}function i(a){return q(a)&&o++<r?(A.consume(a),i):(A.exit(j),e(a))}}var UA={tokenize:N$,partial:!0};function N$(A,e,j){return t;function t(o){return q(o)?T(A,r,"linePrefix")(o):r(o)}function r(o){return o===null||C(o)?e(o):j(o)}}var Kt={name:"blockQuote",tokenize:L$,continuation:{tokenize:K$},exit:J$};function L$(A,e,j){let t=this;return r;function r(n){if(n===62){let i=t.containerState;return i.open||(A.enter("blockQuote",{_container:!0}),i.open=!0),A.enter("blockQuotePrefix"),A.enter("blockQuoteMarker"),A.consume(n),A.exit("blockQuoteMarker"),o}return j(n)}function o(n){return q(n)?(A.enter("blockQuotePrefixWhitespace"),A.consume(n),A.exit("blockQuotePrefixWhitespace"),A.exit("blockQuotePrefix"),e):(A.exit("blockQuotePrefix"),e(n))}}function K$(A,e,j){let t=this;return r;function r(n){return q(n)?T(A,o,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(n):o(n)}function o(n){return A.attempt(Kt,e,j)(n)}}function J$(A){A.exit("blockQuote")}var Jt={name:"characterEscape",tokenize:H$};function H$(A,e,j){return t;function t(o){return A.enter("characterEscape"),A.enter("escapeMarker"),A.consume(o),A.exit("escapeMarker"),r}function r(o){return f7(o)?(A.enter("characterEscapeValue"),A.consume(o),A.exit("characterEscapeValue"),A.exit("characterEscape"),e):j(o)}}var Ht={name:"characterReference",tokenize:Q$};function Q$(A,e,j){let t=this,r=0,o,n;return i;function i(k){return A.enter("characterReference"),A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),a}function a(k){return k===35?(A.enter("characterReferenceMarkerNumeric"),A.consume(k),A.exit("characterReferenceMarkerNumeric"),s):(A.enter("characterReferenceValue"),o=31,n=oA,l(k))}function s(k){return k===88||k===120?(A.enter("characterReferenceMarkerHexadecimal"),A.consume(k),A.exit("characterReferenceMarkerHexadecimal"),A.enter("characterReferenceValue"),o=6,n=m7,l):(A.enter("characterReferenceValue"),o=7,n=we,l(k))}function l(k){if(k===59&&r){let c=A.exit("characterReferenceValue");return n===oA&&!Yj(t.sliceSerialize(c))?j(k):(A.enter("characterReferenceMarker"),A.consume(k),A.exit("characterReferenceMarker"),A.exit("characterReference"),e)}return n(k)&&r++<o?(A.consume(k),l):j(k)}}var w7={tokenize:V$,partial:!0},Qt={name:"codeFenced",tokenize:U$,concrete:!0};function U$(A,e,j){let t=this,r={tokenize:h,partial:!0},o=0,n=0,i;return a;function a(G){return s(G)}function s(G){let O=t.events[t.events.length-1];return o=O&&O[1].type==="linePrefix"?O[2].sliceSerialize(O[1],!0).length:0,i=G,A.enter("codeFenced"),A.enter("codeFencedFence"),A.enter("codeFencedFenceSequence"),l(G)}function l(G){return G===i?(n++,A.consume(G),l):n<3?j(G):(A.exit("codeFencedFenceSequence"),q(G)?T(A,k,"whitespace")(G):k(G))}function k(G){return G===null||C(G)?(A.exit("codeFencedFence"),t.interrupt?e(G):A.check(w7,E,_)(G)):(A.enter("codeFencedFenceInfo"),A.enter("chunkString",{contentType:"string"}),c(G))}function c(G){return G===null||C(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),k(G)):q(G)?(A.exit("chunkString"),A.exit("codeFencedFenceInfo"),T(A,u,"whitespace")(G)):G===96&&G===i?j(G):(A.consume(G),c)}function u(G){return G===null||C(G)?k(G):(A.enter("codeFencedFenceMeta"),A.enter("chunkString",{contentType:"string"}),$(G))}function $(G){return G===null||C(G)?(A.exit("chunkString"),A.exit("codeFencedFenceMeta"),k(G)):G===96&&G===i?j(G):(A.consume(G),$)}function E(G){return A.attempt(r,_,m)(G)}function m(G){return A.enter("lineEnding"),A.consume(G),A.exit("lineEnding"),d}function d(G){return o>0&&q(G)?T(A,f,"linePrefix",o+1)(G):f(G)}function f(G){return G===null||C(G)?A.check(w7,E,_)(G):(A.enter("codeFlowValue"),R(G))}function R(G){return G===null||C(G)?(A.exit("codeFlowValue"),f(G)):(A.consume(G),R)}function _(G){return A.exit("codeFenced"),e(G)}function h(G,O,w){let v=0;return F;function F(D){return G.enter("lineEnding"),G.consume(D),G.exit("lineEnding"),U}function U(D){return G.enter("codeFencedFence"),q(D)?T(G,P,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):P(D)}function P(D){return D===i?(G.enter("codeFencedFenceSequence"),S(D)):w(D)}function S(D){return D===i?(v++,G.consume(D),S):v>=n?(G.exit("codeFencedFenceSequence"),q(D)?T(G,M,"whitespace")(D):M(D)):w(D)}function M(D){return D===null||C(D)?(G.exit("codeFencedFence"),O(D)):w(D)}}}function V$(A,e,j){let t=this;return r;function r(n){return n===null?j(n):(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),o)}function o(n){return t.parser.lazy[t.now().line]?j(n):e(n)}}var Ne={name:"codeIndented",tokenize:z$},X$={tokenize:W$,partial:!0};function z$(A,e,j){let t=this;return r;function r(s){return A.enter("codeIndented"),T(A,o,"linePrefix",5)(s)}function o(s){let l=t.events[t.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?n(s):j(s)}function n(s){return s===null?a(s):C(s)?A.attempt(X$,n,a)(s):(A.enter("codeFlowValue"),i(s))}function i(s){return s===null||C(s)?(A.exit("codeFlowValue"),n(s)):(A.consume(s),i)}function a(s){return A.exit("codeIndented"),e(s)}}function W$(A,e,j){let t=this;return r;function r(n){return t.parser.lazy[t.now().line]?j(n):C(n)?(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),r):T(A,o,"linePrefix",5)(n)}function o(n){let i=t.events[t.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(n):C(n)?r(n):j(n)}}var jn={name:"codeText",tokenize:Ad,resolve:Y$,previous:Z$};function Y$(A){let e=A.length-4,j=3,t,r;if((A[j][1].type==="lineEnding"||A[j][1].type==="space")&&(A[e][1].type==="lineEnding"||A[e][1].type==="space")){for(t=j;++t<e;)if(A[t][1].type==="codeTextData"){A[j][1].type="codeTextPadding",A[e][1].type="codeTextPadding",j+=2,e-=2;break}}for(t=j-1,e++;++t<=e;)r===void 0?t!==e&&A[t][1].type!=="lineEnding"&&(r=t):(t===e||A[t][1].type==="lineEnding")&&(A[r][1].type="codeTextData",t!==r+2&&(A[r][1].end=A[t-1][1].end,A.splice(r+2,t-r-2),e-=t-r-2,t=r+2),r=void 0);return A}function Z$(A){return A!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ad(A,e,j){let t=this,r=0,o,n;return i;function i(c){return A.enter("codeText"),A.enter("codeTextSequence"),a(c)}function a(c){return c===96?(A.consume(c),r++,a):(A.exit("codeTextSequence"),s(c))}function s(c){return c===null?j(c):c===32?(A.enter("space"),A.consume(c),A.exit("space"),s):c===96?(n=A.enter("codeTextSequence"),o=0,k(c)):C(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),s):(A.enter("codeTextData"),l(c))}function l(c){return c===null||c===32||c===96||C(c)?(A.exit("codeTextData"),s(c)):(A.consume(c),l)}function k(c){return c===96?(A.consume(c),o++,k):o===r?(A.exit("codeTextSequence"),A.exit("codeText"),e(c)):(n.type="codeTextData",l(c))}}var Ut=class{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,j){let t=j??Number.POSITIVE_INFINITY;return t<this.left.length?this.left.slice(e,t):e>this.left.length?this.right.slice(this.right.length-t+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-t+this.left.length).reverse())}splice(e,j,t){let r=j||0;this.setCursor(Math.trunc(e));let o=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return t&&Le(this.left,t),o.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Le(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Le(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){let j=this.left.splice(e,Number.POSITIVE_INFINITY);Le(this.right,j.reverse())}else{let j=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Le(this.left,j.reverse())}}};function Le(A,e){let j=0;if(e.length<1e4)A.push(...e);else for(;j<e.length;)A.push(...e.slice(j,j+1e4)),j+=1e4}function Vt(A){let e={},j=-1,t,r,o,n,i,a,s,l=new Ut(A);for(;++j<l.length;){for(;j in e;)j=e[j];if(t=l.get(j),j&&t[1].type==="chunkFlow"&&l.get(j-1)[1].type==="listItemPrefix"&&(a=t[1]._tokenizer.events,o=0,o<a.length&&a[o][1].type==="lineEndingBlank"&&(o+=2),o<a.length&&a[o][1].type==="content"))for(;++o<a.length&&a[o][1].type!=="content";)a[o][1].type==="chunkText"&&(a[o][1]._isInFirstContentOfListItem=!0,o++);if(t[0]==="enter")t[1].contentType&&(Object.assign(e,jd(l,j)),j=e[j],s=!0);else if(t[1]._container){for(o=j,r=void 0;o--&&(n=l.get(o),n[1].type==="lineEnding"||n[1].type==="lineEndingBlank");)n[0]==="enter"&&(r&&(l.get(r)[1].type="lineEndingBlank"),n[1].type="lineEnding",r=o);r&&(t[1].end=Object.assign({},l.get(r)[1].start),i=l.slice(r,j),i.unshift(t),l.splice(r,j-r+1,i))}}return kA(A,0,Number.POSITIVE_INFINITY,l.slice(0)),!s}function jd(A,e){let j=A.get(e)[1],t=A.get(e)[2],r=e-1,o=[],n=j._tokenizer||t.parser[j.contentType](j.start),i=n.events,a=[],s={},l,k,c=-1,u=j,$=0,E=0,m=[E];for(;u;){for(;A.get(++r)[1]!==u;);o.push(r),u._tokenizer||(l=t.sliceStream(u),u.next||l.push(null),k&&n.defineSkip(u.start),u._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=!0),n.write(l),u._isInFirstContentOfListItem&&(n._gfmTasklistFirstContentOfListItem=void 0)),k=u,u=u.next}for(u=j;++c<i.length;)i[c][0]==="exit"&&i[c-1][0]==="enter"&&i[c][1].type===i[c-1][1].type&&i[c][1].start.line!==i[c][1].end.line&&(E=c+1,m.push(E),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(n.events=[],u?(u._tokenizer=void 0,u.previous=void 0):m.pop(),c=m.length;c--;){let d=i.slice(m[c],m[c+1]),f=o.pop();a.push([f,f+d.length-1]),A.splice(f,2,d)}for(a.reverse(),c=-1;++c<a.length;)s[$+a[c][0]]=$+a[c][1],$+=a[c][1]-a[c][0]-1;return s}var en={tokenize:rd,resolve:td},ed={tokenize:nd,partial:!0};function td(A){return Vt(A),A}function rd(A,e){let j;return t;function t(i){return A.enter("content"),j=A.enter("chunkContent",{contentType:"content"}),r(i)}function r(i){return i===null?o(i):C(i)?A.check(ed,n,o)(i):(A.consume(i),r)}function o(i){return A.exit("chunkContent"),A.exit("content"),e(i)}function n(i){return A.consume(i),A.exit("chunkContent"),j.next=A.enter("chunkContent",{contentType:"content",previous:j}),j=j.next,r}}function nd(A,e,j){let t=this;return r;function r(n){return A.exit("chunkContent"),A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),T(A,o,"linePrefix")}function o(n){if(n===null||C(n))return j(n);let i=t.events[t.events.length-1];return!t.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?e(n):A.interrupt(t.parser.constructs.flow,j,e)(n)}}function Xt(A,e,j,t,r,o,n,i,a){let s=a||Number.POSITIVE_INFINITY,l=0;return k;function k(d){return d===60?(A.enter(t),A.enter(r),A.enter(o),A.consume(d),A.exit(o),c):d===null||d===32||d===41||_j(d)?j(d):(A.enter(t),A.enter(n),A.enter(i),A.enter("chunkString",{contentType:"string"}),E(d))}function c(d){return d===62?(A.enter(o),A.consume(d),A.exit(o),A.exit(r),A.exit(t),e):(A.enter(i),A.enter("chunkString",{contentType:"string"}),u(d))}function u(d){return d===62?(A.exit("chunkString"),A.exit(i),c(d)):d===null||d===60||C(d)?j(d):(A.consume(d),d===92?$:u)}function $(d){return d===60||d===62||d===92?(A.consume(d),u):u(d)}function E(d){return!l&&(d===null||d===41||H(d))?(A.exit("chunkString"),A.exit(i),A.exit(n),A.exit(t),e(d)):l<s&&d===40?(A.consume(d),l++,E):d===41?(A.consume(d),l--,E):d===null||d===32||d===40||_j(d)?j(d):(A.consume(d),d===92?m:E)}function m(d){return d===40||d===41||d===92?(A.consume(d),E):E(d)}}function zt(A,e,j,t,r,o){let n=this,i=0,a;return s;function s(u){return A.enter(t),A.enter(r),A.consume(u),A.exit(r),A.enter(o),l}function l(u){return i>999||u===null||u===91||u===93&&!a||u===94&&!i&&"_hiddenFootnoteSupport"in n.parser.constructs?j(u):u===93?(A.exit(o),A.enter(r),A.consume(u),A.exit(r),A.exit(t),e):C(u)?(A.enter("lineEnding"),A.consume(u),A.exit("lineEnding"),l):(A.enter("chunkString",{contentType:"string"}),k(u))}function k(u){return u===null||u===91||u===93||C(u)||i++>999?(A.exit("chunkString"),l(u)):(A.consume(u),a||(a=!q(u)),u===92?c:k)}function c(u){return u===91||u===92||u===93?(A.consume(u),i++,k):k(u)}}function Wt(A,e,j,t,r,o){let n;return i;function i(c){return c===34||c===39||c===40?(A.enter(t),A.enter(r),A.consume(c),A.exit(r),n=c===40?41:c,a):j(c)}function a(c){return c===n?(A.enter(r),A.consume(c),A.exit(r),A.exit(t),e):(A.enter(o),s(c))}function s(c){return c===n?(A.exit(o),a(n)):c===null?j(c):C(c)?(A.enter("lineEnding"),A.consume(c),A.exit("lineEnding"),T(A,s,"linePrefix")):(A.enter("chunkString",{contentType:"string"}),l(c))}function l(c){return c===n||c===null||C(c)?(A.exit("chunkString"),s(c)):(A.consume(c),c===92?k:l)}function k(c){return c===n||c===92?(A.consume(c),l):l(c)}}function Mj(A,e){let j;return t;function t(r){return C(r)?(A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),j=!0,t):q(r)?T(A,t,j?"linePrefix":"lineSuffix")(r):e(r)}}var tn={name:"definition",tokenize:id},od={tokenize:ad,partial:!0};function id(A,e,j){let t=this,r;return o;function o(u){return A.enter("definition"),n(u)}function n(u){return zt.call(t,A,i,j,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function i(u){return r=FA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)),u===58?(A.enter("definitionMarker"),A.consume(u),A.exit("definitionMarker"),a):j(u)}function a(u){return H(u)?Mj(A,s)(u):s(u)}function s(u){return Xt(A,l,j,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function l(u){return A.attempt(od,k,k)(u)}function k(u){return q(u)?T(A,c,"whitespace")(u):c(u)}function c(u){return u===null||C(u)?(A.exit("definition"),t.parser.defined.push(r),e(u)):j(u)}}function ad(A,e,j){return t;function t(i){return H(i)?Mj(A,r)(i):j(i)}function r(i){return Wt(A,o,j,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function o(i){return q(i)?T(A,n,"whitespace")(i):n(i)}function n(i){return i===null||C(i)?e(i):j(i)}}var rn={name:"hardBreakEscape",tokenize:sd};function sd(A,e,j){return t;function t(o){return A.enter("hardBreakEscape"),A.consume(o),r}function r(o){return C(o)?(A.exit("hardBreakEscape"),e(o)):j(o)}}var nn={name:"headingAtx",tokenize:kd,resolve:ld};function ld(A,e){let j=A.length-2,t=3,r,o;return A[t][1].type==="whitespace"&&(t+=2),j-2>t&&A[j][1].type==="whitespace"&&(j-=2),A[j][1].type==="atxHeadingSequence"&&(t===j-1||j-4>t&&A[j-2][1].type==="whitespace")&&(j-=t+1===j?2:4),j>t&&(r={type:"atxHeadingText",start:A[t][1].start,end:A[j][1].end},o={type:"chunkText",start:A[t][1].start,end:A[j][1].end,contentType:"text"},kA(A,t,j-t+1,[["enter",r,e],["enter",o,e],["exit",o,e],["exit",r,e]])),A}function kd(A,e,j){let t=0;return r;function r(l){return A.enter("atxHeading"),o(l)}function o(l){return A.enter("atxHeadingSequence"),n(l)}function n(l){return l===35&&t++<6?(A.consume(l),n):l===null||H(l)?(A.exit("atxHeadingSequence"),i(l)):j(l)}function i(l){return l===35?(A.enter("atxHeadingSequence"),a(l)):l===null||C(l)?(A.exit("atxHeading"),e(l)):q(l)?T(A,i,"whitespace")(l):(A.enter("atxHeadingText"),s(l))}function a(l){return l===35?(A.consume(l),a):(A.exit("atxHeadingSequence"),i(l))}function s(l){return l===null||l===35||H(l)?(A.exit("atxHeadingText"),i(l)):(A.consume(l),s)}}var q7=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],on=["pre","script","style","textarea"];var an={name:"htmlFlow",tokenize:dd,resolveTo:$d,concrete:!0},cd={tokenize:Bd,partial:!0},ud={tokenize:Ed,partial:!0};function $d(A){let e=A.length;for(;e--&&!(A[e][0]==="enter"&&A[e][1].type==="htmlFlow"););return e>1&&A[e-2][1].type==="linePrefix"&&(A[e][1].start=A[e-2][1].start,A[e+1][1].start=A[e-2][1].start,A.splice(e-2,2)),A}function dd(A,e,j){let t=this,r,o,n,i,a;return s;function s(p){return l(p)}function l(p){return A.enter("htmlFlow"),A.enter("htmlFlowData"),A.consume(p),k}function k(p){return p===33?(A.consume(p),c):p===47?(A.consume(p),o=!0,E):p===63?(A.consume(p),r=3,t.interrupt?e:B):uA(p)?(A.consume(p),n=String.fromCharCode(p),m):j(p)}function c(p){return p===45?(A.consume(p),r=2,u):p===91?(A.consume(p),r=5,i=0,$):uA(p)?(A.consume(p),r=4,t.interrupt?e:B):j(p)}function u(p){return p===45?(A.consume(p),t.interrupt?e:B):j(p)}function $(p){let iA="CDATA[";return p===iA.charCodeAt(i++)?(A.consume(p),i===iA.length?t.interrupt?e:P:$):j(p)}function E(p){return uA(p)?(A.consume(p),n=String.fromCharCode(p),m):j(p)}function m(p){if(p===null||p===47||p===62||H(p)){let iA=p===47,bA=n.toLowerCase();return!iA&&!o&&on.includes(bA)?(r=1,t.interrupt?e(p):P(p)):q7.includes(n.toLowerCase())?(r=6,iA?(A.consume(p),d):t.interrupt?e(p):P(p)):(r=7,t.interrupt&&!t.parser.lazy[t.now().line]?j(p):o?f(p):R(p))}return p===45||oA(p)?(A.consume(p),n+=String.fromCharCode(p),m):j(p)}function d(p){return p===62?(A.consume(p),t.interrupt?e:P):j(p)}function f(p){return q(p)?(A.consume(p),f):F(p)}function R(p){return p===47?(A.consume(p),F):p===58||p===95||uA(p)?(A.consume(p),_):q(p)?(A.consume(p),R):F(p)}function _(p){return p===45||p===46||p===58||p===95||oA(p)?(A.consume(p),_):h(p)}function h(p){return p===61?(A.consume(p),G):q(p)?(A.consume(p),h):R(p)}function G(p){return p===null||p===60||p===61||p===62||p===96?j(p):p===34||p===39?(A.consume(p),a=p,O):q(p)?(A.consume(p),G):w(p)}function O(p){return p===a?(A.consume(p),a=null,v):p===null||C(p)?j(p):(A.consume(p),O)}function w(p){return p===null||p===34||p===39||p===47||p===60||p===61||p===62||p===96||H(p)?h(p):(A.consume(p),w)}function v(p){return p===47||p===62||q(p)?R(p):j(p)}function F(p){return p===62?(A.consume(p),U):j(p)}function U(p){return p===null||C(p)?P(p):q(p)?(A.consume(p),U):j(p)}function P(p){return p===45&&r===2?(A.consume(p),J):p===60&&r===1?(A.consume(p),V):p===62&&r===4?(A.consume(p),Y):p===63&&r===3?(A.consume(p),B):p===93&&r===5?(A.consume(p),AA):C(p)&&(r===6||r===7)?(A.exit("htmlFlowData"),A.check(cd,jA,S)(p)):p===null||C(p)?(A.exit("htmlFlowData"),S(p)):(A.consume(p),P)}function S(p){return A.check(ud,M,jA)(p)}function M(p){return A.enter("lineEnding"),A.consume(p),A.exit("lineEnding"),D}function D(p){return p===null||C(p)?S(p):(A.enter("htmlFlowData"),P(p))}function J(p){return p===45?(A.consume(p),B):P(p)}function V(p){return p===47?(A.consume(p),n="",tA):P(p)}function tA(p){if(p===62){let iA=n.toLowerCase();return on.includes(iA)?(A.consume(p),Y):P(p)}return uA(p)&&n.length<8?(A.consume(p),n+=String.fromCharCode(p),tA):P(p)}function AA(p){return p===93?(A.consume(p),B):P(p)}function B(p){return p===62?(A.consume(p),Y):p===45&&r===2?(A.consume(p),B):P(p)}function Y(p){return p===null||C(p)?(A.exit("htmlFlowData"),jA(p)):(A.consume(p),Y)}function jA(p){return A.exit("htmlFlow"),e(p)}}function Ed(A,e,j){let t=this;return r;function r(n){return C(n)?(A.enter("lineEnding"),A.consume(n),A.exit("lineEnding"),o):j(n)}function o(n){return t.parser.lazy[t.now().line]?j(n):e(n)}}function Bd(A,e,j){return t;function t(r){return A.enter("lineEnding"),A.consume(r),A.exit("lineEnding"),A.attempt(UA,e,j)}}var sn={name:"htmlText",tokenize:pd};function pd(A,e,j){let t=this,r,o,n;return i;function i(B){return A.enter("htmlText"),A.enter("htmlTextData"),A.consume(B),a}function a(B){return B===33?(A.consume(B),s):B===47?(A.consume(B),h):B===63?(A.consume(B),R):uA(B)?(A.consume(B),w):j(B)}function s(B){return B===45?(A.consume(B),l):B===91?(A.consume(B),o=0,$):uA(B)?(A.consume(B),f):j(B)}function l(B){return B===45?(A.consume(B),u):j(B)}function k(B){return B===null?j(B):B===45?(A.consume(B),c):C(B)?(n=k,V(B)):(A.consume(B),k)}function c(B){return B===45?(A.consume(B),u):k(B)}function u(B){return B===62?J(B):B===45?c(B):k(B)}function $(B){let Y="CDATA[";return B===Y.charCodeAt(o++)?(A.consume(B),o===Y.length?E:$):j(B)}function E(B){return B===null?j(B):B===93?(A.consume(B),m):C(B)?(n=E,V(B)):(A.consume(B),E)}function m(B){return B===93?(A.consume(B),d):E(B)}function d(B){return B===62?J(B):B===93?(A.consume(B),d):E(B)}function f(B){return B===null||B===62?J(B):C(B)?(n=f,V(B)):(A.consume(B),f)}function R(B){return B===null?j(B):B===63?(A.consume(B),_):C(B)?(n=R,V(B)):(A.consume(B),R)}function _(B){return B===62?J(B):R(B)}function h(B){return uA(B)?(A.consume(B),G):j(B)}function G(B){return B===45||oA(B)?(A.consume(B),G):O(B)}function O(B){return C(B)?(n=O,V(B)):q(B)?(A.consume(B),O):J(B)}function w(B){return B===45||oA(B)?(A.consume(B),w):B===47||B===62||H(B)?v(B):j(B)}function v(B){return B===47?(A.consume(B),J):B===58||B===95||uA(B)?(A.consume(B),F):C(B)?(n=v,V(B)):q(B)?(A.consume(B),v):J(B)}function F(B){return B===45||B===46||B===58||B===95||oA(B)?(A.consume(B),F):U(B)}function U(B){return B===61?(A.consume(B),P):C(B)?(n=U,V(B)):q(B)?(A.consume(B),U):v(B)}function P(B){return B===null||B===60||B===61||B===62||B===96?j(B):B===34||B===39?(A.consume(B),r=B,S):C(B)?(n=P,V(B)):q(B)?(A.consume(B),P):(A.consume(B),M)}function S(B){return B===r?(A.consume(B),r=void 0,D):B===null?j(B):C(B)?(n=S,V(B)):(A.consume(B),S)}function M(B){return B===null||B===34||B===39||B===60||B===61||B===96?j(B):B===47||B===62||H(B)?v(B):(A.consume(B),M)}function D(B){return B===47||B===62||H(B)?v(B):j(B)}function J(B){return B===62?(A.consume(B),A.exit("htmlTextData"),A.exit("htmlText"),e):j(B)}function V(B){return A.exit("htmlTextData"),A.enter("lineEnding"),A.consume(B),A.exit("lineEnding"),tA}function tA(B){return q(B)?T(A,AA,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(B):AA(B)}function AA(B){return A.enter("htmlTextData"),n(B)}}var Cj={name:"labelEnd",tokenize:Id,resolveTo:Rd,resolveAll:Fd},md={tokenize:gd},fd={tokenize:hd},Gd={tokenize:bd};function Fd(A){let e=-1;for(;++e<A.length;){let j=A[e][1];(j.type==="labelImage"||j.type==="labelLink"||j.type==="labelEnd")&&(A.splice(e+1,j.type==="labelImage"?4:2),j.type="data",e++)}return A}function Rd(A,e){let j=A.length,t=0,r,o,n,i;for(;j--;)if(r=A[j][1],o){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;A[j][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(n){if(A[j][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(o=j,r.type!=="labelLink")){t=2;break}}else r.type==="labelEnd"&&(n=j);let a={type:A[o][1].type==="labelLink"?"link":"image",start:Object.assign({},A[o][1].start),end:Object.assign({},A[A.length-1][1].end)},s={type:"label",start:Object.assign({},A[o][1].start),end:Object.assign({},A[n][1].end)},l={type:"labelText",start:Object.assign({},A[o+t+2][1].end),end:Object.assign({},A[n-2][1].start)};return i=[["enter",a,e],["enter",s,e]],i=gA(i,A.slice(o+1,o+t+3)),i=gA(i,[["enter",l,e]]),i=gA(i,uj(e.parser.constructs.insideSpan.null,A.slice(o+t+4,n-3),e)),i=gA(i,[["exit",l,e],A[n-2],A[n-1],["exit",s,e]]),i=gA(i,A.slice(n+1)),i=gA(i,[["exit",a,e]]),kA(A,o,A.length,i),A}function Id(A,e,j){let t=this,r=t.events.length,o,n;for(;r--;)if((t.events[r][1].type==="labelImage"||t.events[r][1].type==="labelLink")&&!t.events[r][1]._balanced){o=t.events[r][1];break}return i;function i(c){return o?o._inactive?k(c):(n=t.parser.defined.includes(FA(t.sliceSerialize({start:o.end,end:t.now()}))),A.enter("labelEnd"),A.enter("labelMarker"),A.consume(c),A.exit("labelMarker"),A.exit("labelEnd"),a):j(c)}function a(c){return c===40?A.attempt(md,l,n?l:k)(c):c===91?A.attempt(fd,l,n?s:k)(c):n?l(c):k(c)}function s(c){return A.attempt(Gd,l,k)(c)}function l(c){return e(c)}function k(c){return o._balanced=!0,j(c)}}function gd(A,e,j){return t;function t(k){return A.enter("resource"),A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),r}function r(k){return H(k)?Mj(A,o)(k):o(k)}function o(k){return k===41?l(k):Xt(A,n,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(k)}function n(k){return H(k)?Mj(A,a)(k):l(k)}function i(k){return j(k)}function a(k){return k===34||k===39||k===40?Wt(A,s,j,"resourceTitle","resourceTitleMarker","resourceTitleString")(k):l(k)}function s(k){return H(k)?Mj(A,l)(k):l(k)}function l(k){return k===41?(A.enter("resourceMarker"),A.consume(k),A.exit("resourceMarker"),A.exit("resource"),e):j(k)}}function hd(A,e,j){let t=this;return r;function r(i){return zt.call(t,A,o,n,"reference","referenceMarker","referenceString")(i)}function o(i){return t.parser.defined.includes(FA(t.sliceSerialize(t.events[t.events.length-1][1]).slice(1,-1)))?e(i):j(i)}function n(i){return j(i)}}function bd(A,e,j){return t;function t(o){return A.enter("reference"),A.enter("referenceMarker"),A.consume(o),A.exit("referenceMarker"),r}function r(o){return o===93?(A.enter("referenceMarker"),A.consume(o),A.exit("referenceMarker"),A.exit("reference"),e):j(o)}}var ln={name:"labelStartImage",tokenize:_d,resolveAll:Cj.resolveAll};function _d(A,e,j){let t=this;return r;function r(i){return A.enter("labelImage"),A.enter("labelImageMarker"),A.consume(i),A.exit("labelImageMarker"),o}function o(i){return i===91?(A.enter("labelMarker"),A.consume(i),A.exit("labelMarker"),A.exit("labelImage"),n):j(i)}function n(i){return i===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(i):e(i)}}var kn={name:"labelStartLink",tokenize:Sd,resolveAll:Cj.resolveAll};function Sd(A,e,j){let t=this;return r;function r(n){return A.enter("labelLink"),A.enter("labelMarker"),A.consume(n),A.exit("labelMarker"),A.exit("labelLink"),o}function o(n){return n===94&&"_hiddenFootnoteSupport"in t.parser.constructs?j(n):e(n)}}var Ke={name:"lineEnding",tokenize:yd};function yd(A,e){return j;function j(t){return A.enter("lineEnding"),A.consume(t),A.exit("lineEnding"),T(A,e,"linePrefix")}}var Dj={name:"thematicBreak",tokenize:Md};function Md(A,e,j){let t=0,r;return o;function o(s){return A.enter("thematicBreak"),n(s)}function n(s){return r=s,i(s)}function i(s){return s===r?(A.enter("thematicBreakSequence"),a(s)):t>=3&&(s===null||C(s))?(A.exit("thematicBreak"),e(s)):j(s)}function a(s){return s===r?(A.consume(s),t++,a):(A.exit("thematicBreakSequence"),q(s)?T(A,i,"whitespace")(s):i(s))}}var RA={name:"list",tokenize:Od,continuation:{tokenize:xd},exit:Pd},Cd={tokenize:Td,partial:!0},Dd={tokenize:vd,partial:!0};function Od(A,e,j){let t=this,r=t.events[t.events.length-1],o=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,n=0;return i;function i(u){let $=t.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if($==="listUnordered"?!t.containerState.marker||u===t.containerState.marker:we(u)){if(t.containerState.type||(t.containerState.type=$,A.enter($,{_container:!0})),$==="listUnordered")return A.enter("listItemPrefix"),u===42||u===45?A.check(Dj,j,s)(u):s(u);if(!t.interrupt||u===49)return A.enter("listItemPrefix"),A.enter("listItemValue"),a(u)}return j(u)}function a(u){return we(u)&&++n<10?(A.consume(u),a):(!t.interrupt||n<2)&&(t.containerState.marker?u===t.containerState.marker:u===41||u===46)?(A.exit("listItemValue"),s(u)):j(u)}function s(u){return A.enter("listItemMarker"),A.consume(u),A.exit("listItemMarker"),t.containerState.marker=t.containerState.marker||u,A.check(UA,t.interrupt?j:l,A.attempt(Cd,c,k))}function l(u){return t.containerState.initialBlankLine=!0,o++,c(u)}function k(u){return q(u)?(A.enter("listItemPrefixWhitespace"),A.consume(u),A.exit("listItemPrefixWhitespace"),c):j(u)}function c(u){return t.containerState.size=o+t.sliceSerialize(A.exit("listItemPrefix"),!0).length,e(u)}}function xd(A,e,j){let t=this;return t.containerState._closeFlow=void 0,A.check(UA,r,o);function r(i){return t.containerState.furtherBlankLines=t.containerState.furtherBlankLines||t.containerState.initialBlankLine,T(A,e,"listItemIndent",t.containerState.size+1)(i)}function o(i){return t.containerState.furtherBlankLines||!q(i)?(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,n(i)):(t.containerState.furtherBlankLines=void 0,t.containerState.initialBlankLine=void 0,A.attempt(Dd,e,n)(i))}function n(i){return t.containerState._closeFlow=!0,t.interrupt=void 0,T(A,A.attempt(RA,e,j),"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function vd(A,e,j){let t=this;return T(A,r,"listItemIndent",t.containerState.size+1);function r(o){let n=t.events[t.events.length-1];return n&&n[1].type==="listItemIndent"&&n[2].sliceSerialize(n[1],!0).length===t.containerState.size?e(o):j(o)}}function Pd(A){A.exit(this.containerState.type)}function Td(A,e,j){let t=this;return T(A,r,"listItemPrefixWhitespace",t.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(o){let n=t.events[t.events.length-1];return!q(o)&&n&&n[1].type==="listItemPrefixWhitespace"?e(o):j(o)}}var Yt={name:"setextUnderline",tokenize:qd,resolveTo:wd};function wd(A,e){let j=A.length,t,r,o;for(;j--;)if(A[j][0]==="enter"){if(A[j][1].type==="content"){t=j;break}A[j][1].type==="paragraph"&&(r=j)}else A[j][1].type==="content"&&A.splice(j,1),!o&&A[j][1].type==="definition"&&(o=j);let n={type:"setextHeading",start:Object.assign({},A[r][1].start),end:Object.assign({},A[A.length-1][1].end)};return A[r][1].type="setextHeadingText",o?(A.splice(r,0,["enter",n,e]),A.splice(o+1,0,["exit",A[t][1],e]),A[t][1].end=Object.assign({},A[o][1].end)):A[t][1]=n,A.push(["exit",n,e]),A}function qd(A,e,j){let t=this,r;return o;function o(s){let l=t.events.length,k;for(;l--;)if(t.events[l][1].type!=="lineEnding"&&t.events[l][1].type!=="linePrefix"&&t.events[l][1].type!=="content"){k=t.events[l][1].type==="paragraph";break}return!t.parser.lazy[t.now().line]&&(t.interrupt||k)?(A.enter("setextHeadingLine"),r=s,n(s)):j(s)}function n(s){return A.enter("setextHeadingLineSequence"),i(s)}function i(s){return s===r?(A.consume(s),i):(A.exit("setextHeadingLineSequence"),q(s)?T(A,a,"lineSuffix")(s):a(s))}function a(s){return s===null||C(s)?(A.exit("setextHeadingLine"),e(s)):j(s)}}var Nd={tokenize:Vd,partial:!0};function cn(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Hd,continuation:{tokenize:Qd},exit:Ud}},text:{91:{name:"gfmFootnoteCall",tokenize:Jd},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Ld,resolveTo:Kd}}}}function Ld(A,e,j){let t=this,r=t.events.length,o=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),n;for(;r--;){let a=t.events[r][1];if(a.type==="labelImage"){n=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return i;function i(a){if(!n||!n._balanced)return j(a);let s=FA(t.sliceSerialize({start:n.end,end:t.now()}));return s.codePointAt(0)!==94||!o.includes(s.slice(1))?j(a):(A.enter("gfmFootnoteCallLabelMarker"),A.consume(a),A.exit("gfmFootnoteCallLabelMarker"),e(a))}}function Kd(A,e){let j=A.length,t;for(;j--;)if(A[j][1].type==="labelImage"&&A[j][0]==="enter"){t=A[j][1];break}A[j+1][1].type="data",A[j+3][1].type="gfmFootnoteCallLabelMarker";let r={type:"gfmFootnoteCall",start:Object.assign({},A[j+3][1].start),end:Object.assign({},A[A.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},A[j+3][1].end),end:Object.assign({},A[j+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;let n={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},A[A.length-1][1].start)},i={type:"chunkString",contentType:"string",start:Object.assign({},n.start),end:Object.assign({},n.end)},a=[A[j+1],A[j+2],["enter",r,e],A[j+3],A[j+4],["enter",o,e],["exit",o,e],["enter",n,e],["enter",i,e],["exit",i,e],["exit",n,e],A[A.length-2],A[A.length-1],["exit",r,e]];return A.splice(j,A.length-j+1,...a),A}function Jd(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o=0,n;return i;function i(k){return A.enter("gfmFootnoteCall"),A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),a}function a(k){return k!==94?j(k):(A.enter("gfmFootnoteCallMarker"),A.consume(k),A.exit("gfmFootnoteCallMarker"),A.enter("gfmFootnoteCallString"),A.enter("chunkString").contentType="string",s)}function s(k){if(o>999||k===93&&!n||k===null||k===91||H(k))return j(k);if(k===93){A.exit("chunkString");let c=A.exit("gfmFootnoteCallString");return r.includes(FA(t.sliceSerialize(c)))?(A.enter("gfmFootnoteCallLabelMarker"),A.consume(k),A.exit("gfmFootnoteCallLabelMarker"),A.exit("gfmFootnoteCall"),e):j(k)}return H(k)||(n=!0),o++,A.consume(k),k===92?l:s}function l(k){return k===91||k===92||k===93?(A.consume(k),o++,s):s(k)}}function Hd(A,e,j){let t=this,r=t.parser.gfmFootnotes||(t.parser.gfmFootnotes=[]),o,n=0,i;return a;function a($){return A.enter("gfmFootnoteDefinition")._container=!0,A.enter("gfmFootnoteDefinitionLabel"),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume($),A.exit("gfmFootnoteDefinitionLabelMarker"),s}function s($){return $===94?(A.enter("gfmFootnoteDefinitionMarker"),A.consume($),A.exit("gfmFootnoteDefinitionMarker"),A.enter("gfmFootnoteDefinitionLabelString"),A.enter("chunkString").contentType="string",l):j($)}function l($){if(n>999||$===93&&!i||$===null||$===91||H($))return j($);if($===93){A.exit("chunkString");let E=A.exit("gfmFootnoteDefinitionLabelString");return o=FA(t.sliceSerialize(E)),A.enter("gfmFootnoteDefinitionLabelMarker"),A.consume($),A.exit("gfmFootnoteDefinitionLabelMarker"),A.exit("gfmFootnoteDefinitionLabel"),c}return H($)||(i=!0),n++,A.consume($),$===92?k:l}function k($){return $===91||$===92||$===93?(A.consume($),n++,l):l($)}function c($){return $===58?(A.enter("definitionMarker"),A.consume($),A.exit("definitionMarker"),r.includes(o)||r.push(o),T(A,u,"gfmFootnoteDefinitionWhitespace")):j($)}function u($){return e($)}}function Qd(A,e,j){return A.check(UA,e,A.attempt(Nd,e,j))}function Ud(A){A.exit("gfmFootnoteDefinition")}function Vd(A,e,j){let t=this;return T(A,r,"gfmFootnoteDefinitionIndent",5);function r(o){let n=t.events[t.events.length-1];return n&&n[1].type==="gfmFootnoteDefinitionIndent"&&n[2].sliceSerialize(n[1],!0).length===4?e(o):j(o)}}function un(A){let j=(A||{}).singleTilde,t={name:"strikethrough",tokenize:o,resolveAll:r};return j==null&&(j=!0),{text:{126:t},insideSpan:{null:[t]},attentionMarkers:{null:[126]}};function r(n,i){let a=-1;for(;++a<n.length;)if(n[a][0]==="enter"&&n[a][1].type==="strikethroughSequenceTemporary"&&n[a][1]._close){let s=a;for(;s--;)if(n[s][0]==="exit"&&n[s][1].type==="strikethroughSequenceTemporary"&&n[s][1]._open&&n[a][1].end.offset-n[a][1].start.offset===n[s][1].end.offset-n[s][1].start.offset){n[a][1].type="strikethroughSequence",n[s][1].type="strikethroughSequence";let l={type:"strikethrough",start:Object.assign({},n[s][1].start),end:Object.assign({},n[a][1].end)},k={type:"strikethroughText",start:Object.assign({},n[s][1].end),end:Object.assign({},n[a][1].start)},c=[["enter",l,i],["enter",n[s][1],i],["exit",n[s][1],i],["enter",k,i]],u=i.parser.constructs.insideSpan.null;u&&kA(c,c.length,0,uj(u,n.slice(s+1,a),i)),kA(c,c.length,0,[["exit",k,i],["enter",n[a][1],i],["exit",n[a][1],i],["exit",l,i]]),kA(n,s-1,a-s+3,c),a=s+c.length-2;break}}for(a=-1;++a<n.length;)n[a][1].type==="strikethroughSequenceTemporary"&&(n[a][1].type="data");return n}function o(n,i,a){let s=this.previous,l=this.events,k=0;return c;function c($){return s===126&&l[l.length-1][1].type!=="characterEscape"?a($):(n.enter("strikethroughSequenceTemporary"),u($))}function u($){let E=Ae(s);if($===126)return k>1?a($):(n.consume($),k++,u);if(k<2&&!j)return a($);let m=n.exit("strikethroughSequenceTemporary"),d=Ae($);return m._open=!d||d===2&&!!E,m._close=!E||E===2&&!!d,i($)}}}var Zt=class{constructor(){this.map=[]}add(e,j,t){Xd(this,e,j,t)}consume(e){if(this.map.sort(function(o,n){return o[0]-n[0]}),this.map.length===0)return;let j=this.map.length,t=[];for(;j>0;)j-=1,t.push(e.slice(this.map[j][0]+this.map[j][1]),this.map[j][2]),e.length=this.map[j][0];t.push(e.slice()),e.length=0;let r=t.pop();for(;r;){for(let o of r)e.push(o);r=t.pop()}this.map.length=0}};function Xd(A,e,j,t){let r=0;if(!(j===0&&t.length===0)){for(;r<A.map.length;){if(A.map[r][0]===e){A.map[r][1]+=j,A.map[r][2].push(...t);return}r+=1}A.map.push([e,j,t])}}function N7(A,e){let j=!1,t=[];for(;e<A.length;){let r=A[e];if(j){if(r[0]==="enter")r[1].type==="tableContent"&&t.push(A[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(A[e-1][1].type==="tableDelimiterMarker"){let o=t.length-1;t[o]=t[o]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(j=!0);e+=1}return t}function $n(){return{flow:{null:{name:"table",tokenize:zd,resolveAll:Wd}}}}function zd(A,e,j){let t=this,r=0,o=0,n;return i;function i(F){let U=t.events.length-1;for(;U>-1;){let M=t.events[U][1].type;if(M==="lineEnding"||M==="linePrefix")U--;else break}let P=U>-1?t.events[U][1].type:null,S=P==="tableHead"||P==="tableRow"?G:a;return S===G&&t.parser.lazy[t.now().line]?j(F):S(F)}function a(F){return A.enter("tableHead"),A.enter("tableRow"),s(F)}function s(F){return F===124||(n=!0,o+=1),l(F)}function l(F){return F===null?j(F):C(F)?o>1?(o=0,t.interrupt=!0,A.exit("tableRow"),A.enter("lineEnding"),A.consume(F),A.exit("lineEnding"),u):j(F):q(F)?T(A,l,"whitespace")(F):(o+=1,n&&(n=!1,r+=1),F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),n=!0,l):(A.enter("data"),k(F)))}function k(F){return F===null||F===124||H(F)?(A.exit("data"),l(F)):(A.consume(F),F===92?c:k)}function c(F){return F===92||F===124?(A.consume(F),k):k(F)}function u(F){return t.interrupt=!1,t.parser.lazy[t.now().line]?j(F):(A.enter("tableDelimiterRow"),n=!1,q(F)?T(A,$,"linePrefix",t.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):$(F))}function $(F){return F===45||F===58?m(F):F===124?(n=!0,A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),E):h(F)}function E(F){return q(F)?T(A,m,"whitespace")(F):m(F)}function m(F){return F===58?(o+=1,n=!0,A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),d):F===45?(o+=1,d(F)):F===null||C(F)?_(F):h(F)}function d(F){return F===45?(A.enter("tableDelimiterFiller"),f(F)):h(F)}function f(F){return F===45?(A.consume(F),f):F===58?(n=!0,A.exit("tableDelimiterFiller"),A.enter("tableDelimiterMarker"),A.consume(F),A.exit("tableDelimiterMarker"),R):(A.exit("tableDelimiterFiller"),R(F))}function R(F){return q(F)?T(A,_,"whitespace")(F):_(F)}function _(F){return F===124?$(F):F===null||C(F)?!n||r!==o?h(F):(A.exit("tableDelimiterRow"),A.exit("tableHead"),e(F)):h(F)}function h(F){return j(F)}function G(F){return A.enter("tableRow"),O(F)}function O(F){return F===124?(A.enter("tableCellDivider"),A.consume(F),A.exit("tableCellDivider"),O):F===null||C(F)?(A.exit("tableRow"),e(F)):q(F)?T(A,O,"whitespace")(F):(A.enter("data"),w(F))}function w(F){return F===null||F===124||H(F)?(A.exit("data"),O(F)):(A.consume(F),F===92?v:w)}function v(F){return F===92||F===124?(A.consume(F),w):w(F)}}function Wd(A,e){let j=-1,t=!0,r=0,o=[0,0,0,0],n=[0,0,0,0],i=!1,a=0,s,l,k,c=new Zt;for(;++j<A.length;){let u=A[j],$=u[1];u[0]==="enter"?$.type==="tableHead"?(i=!1,a!==0&&(L7(c,e,a,s,l),l=void 0,a=0),s={type:"table",start:Object.assign({},$.start),end:Object.assign({},$.end)},c.add(j,0,[["enter",s,e]])):$.type==="tableRow"||$.type==="tableDelimiterRow"?(t=!0,k=void 0,o=[0,0,0,0],n=[0,j+1,0,0],i&&(i=!1,l={type:"tableBody",start:Object.assign({},$.start),end:Object.assign({},$.end)},c.add(j,0,[["enter",l,e]])),r=$.type==="tableDelimiterRow"?2:l?3:1):r&&($.type==="data"||$.type==="tableDelimiterMarker"||$.type==="tableDelimiterFiller")?(t=!1,n[2]===0&&(o[1]!==0&&(n[0]=n[1],k=Ar(c,e,o,r,void 0,k),o=[0,0,0,0]),n[2]=j)):$.type==="tableCellDivider"&&(t?t=!1:(o[1]!==0&&(n[0]=n[1],k=Ar(c,e,o,r,void 0,k)),o=n,n=[o[1],j,0,0])):$.type==="tableHead"?(i=!0,a=j):$.type==="tableRow"||$.type==="tableDelimiterRow"?(a=j,o[1]!==0?(n[0]=n[1],k=Ar(c,e,o,r,j,k)):n[1]!==0&&(k=Ar(c,e,n,r,j,k)),r=0):r&&($.type==="data"||$.type==="tableDelimiterMarker"||$.type==="tableDelimiterFiller")&&(n[3]=j)}for(a!==0&&L7(c,e,a,s,l),c.consume(e.events),j=-1;++j<e.events.length;){let u=e.events[j];u[0]==="enter"&&u[1].type==="table"&&(u[1]._align=N7(e.events,j))}return A}function Ar(A,e,j,t,r,o){let n=t===1?"tableHeader":t===2?"tableDelimiter":"tableData",i="tableContent";j[0]!==0&&(o.end=Object.assign({},je(e.events,j[0])),A.add(j[0],0,[["exit",o,e]]));let a=je(e.events,j[1]);if(o={type:n,start:Object.assign({},a),end:Object.assign({},a)},A.add(j[1],0,[["enter",o,e]]),j[2]!==0){let s=je(e.events,j[2]),l=je(e.events,j[3]),k={type:i,start:Object.assign({},s),end:Object.assign({},l)};if(A.add(j[2],0,[["enter",k,e]]),t!==2){let c=e.events[j[2]],u=e.events[j[3]];if(c[1].end=Object.assign({},u[1].end),c[1].type="chunkText",c[1].contentType="text",j[3]>j[2]+1){let $=j[2]+1,E=j[3]-j[2]-1;A.add($,E,[])}}A.add(j[3]+1,0,[["exit",k,e]])}return r!==void 0&&(o.end=Object.assign({},je(e.events,r)),A.add(r,0,[["exit",o,e]]),o=void 0),o}function L7(A,e,j,t,r){let o=[],n=je(e.events,j);r&&(r.end=Object.assign({},n),o.push(["exit",r,e])),t.end=Object.assign({},n),o.push(["exit",t,e]),A.add(j+1,0,o)}function je(A,e){let j=A[e],t=j[0]==="enter"?"start":"end";return j[1][t]}var Yd={name:"tasklistCheck",tokenize:Zd};function dn(){return{text:{91:Yd}}}function Zd(A,e,j){let t=this;return r;function r(a){return t.previous!==null||!t._gfmTasklistFirstContentOfListItem?j(a):(A.enter("taskListCheck"),A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),o)}function o(a){return H(a)?(A.enter("taskListCheckValueUnchecked"),A.consume(a),A.exit("taskListCheckValueUnchecked"),n):a===88||a===120?(A.enter("taskListCheckValueChecked"),A.consume(a),A.exit("taskListCheckValueChecked"),n):j(a)}function n(a){return a===93?(A.enter("taskListCheckMarker"),A.consume(a),A.exit("taskListCheckMarker"),A.exit("taskListCheck"),i):j(a)}function i(a){return C(a)?e(a):q(a)?A.check({tokenize:AE},e,j)(a):j(a)}}function AE(A,e,j){return T(A,t,"whitespace");function t(r){return r===null?j(r):e(r)}}function K7(A){return Lt([Y6(),cn(),un(A),$n(),dn()])}var jE={};function Je(A){let e=this,j=A||jE,t=e.data(),r=t.micromarkExtensions||(t.micromarkExtensions=[]),o=t.fromMarkdownExtensions||(t.fromMarkdownExtensions=[]),n=t.toMarkdownExtensions||(t.toMarkdownExtensions=[]);r.push(K7(j)),o.push(X6()),n.push(z6(j))}var J7={tokenize:eE};function eE(A){let e=A.attempt(this.parser.constructs.contentInitial,t,r),j;return e;function t(i){if(i===null){A.consume(i);return}return A.enter("lineEnding"),A.consume(i),A.exit("lineEnding"),T(A,e,"linePrefix")}function r(i){return A.enter("paragraph"),o(i)}function o(i){let a=A.enter("chunkText",{contentType:"text",previous:j});return j&&(j.next=a),j=a,n(i)}function n(i){if(i===null){A.exit("chunkText"),A.exit("paragraph"),A.consume(i);return}return C(i)?(A.consume(i),A.exit("chunkText"),o):(A.consume(i),n)}}var Q7={tokenize:tE},H7={tokenize:rE};function tE(A){let e=this,j=[],t=0,r,o,n;return i;function i(R){if(t<j.length){let _=j[t];return e.containerState=_[1],A.attempt(_[0].continuation,a,s)(R)}return s(R)}function a(R){if(t++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&f();let _=e.events.length,h=_,G;for(;h--;)if(e.events[h][0]==="exit"&&e.events[h][1].type==="chunkFlow"){G=e.events[h][1].end;break}d(t);let O=_;for(;O<e.events.length;)e.events[O][1].end=Object.assign({},G),O++;return kA(e.events,h+1,0,e.events.slice(_)),e.events.length=O,s(R)}return i(R)}function s(R){if(t===j.length){if(!r)return c(R);if(r.currentConstruct&&r.currentConstruct.concrete)return $(R);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},A.check(H7,l,k)(R)}function l(R){return r&&f(),d(t),c(R)}function k(R){return e.parser.lazy[e.now().line]=t!==j.length,n=e.now().offset,$(R)}function c(R){return e.containerState={},A.attempt(H7,u,$)(R)}function u(R){return t++,j.push([e.currentConstruct,e.containerState]),c(R)}function $(R){if(R===null){r&&f(),d(0),A.consume(R);return}return r=r||e.parser.flow(e.now()),A.enter("chunkFlow",{contentType:"flow",previous:o,_tokenizer:r}),E(R)}function E(R){if(R===null){m(A.exit("chunkFlow"),!0),d(0),A.consume(R);return}return C(R)?(A.consume(R),m(A.exit("chunkFlow")),t=0,e.interrupt=void 0,i):(A.consume(R),E)}function m(R,_){let h=e.sliceStream(R);if(_&&h.push(null),R.previous=o,o&&(o.next=R),o=R,r.defineSkip(R.start),r.write(h),e.parser.lazy[R.start.line]){let G=r.events.length;for(;G--;)if(r.events[G][1].start.offset<n&&(!r.events[G][1].end||r.events[G][1].end.offset>n))return;let O=e.events.length,w=O,v,F;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){if(v){F=e.events[w][1].end;break}v=!0}for(d(t),G=O;G<e.events.length;)e.events[G][1].end=Object.assign({},F),G++;kA(e.events,w+1,0,e.events.slice(O)),e.events.length=G}}function d(R){let _=j.length;for(;_-- >R;){let h=j[_];e.containerState=h[1],h[0].exit.call(e,A)}j.length=R}function f(){r.write([null]),o=void 0,r=void 0,e.containerState._closeFlow=void 0}}function rE(A,e,j){return T(A,A.attempt(this.parser.constructs.document,e,j),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}var U7={tokenize:nE};function nE(A){let e=this,j=A.attempt(UA,t,A.attempt(this.parser.constructs.flowInitial,r,T(A,A.attempt(this.parser.constructs.flow,r,A.attempt(en,r)),"linePrefix")));return j;function t(o){if(o===null){A.consume(o);return}return A.enter("lineEndingBlank"),A.consume(o),A.exit("lineEndingBlank"),e.currentConstruct=void 0,j}function r(o){if(o===null){A.consume(o);return}return A.enter("lineEnding"),A.consume(o),A.exit("lineEnding"),e.currentConstruct=void 0,j}}var V7={resolveAll:Y7()},X7=W7("string"),z7=W7("text");function W7(A){return{tokenize:e,resolveAll:Y7(A==="text"?oE:void 0)};function e(j){let t=this,r=this.parser.constructs[A],o=j.attempt(r,n,i);return n;function n(l){return s(l)?o(l):i(l)}function i(l){if(l===null){j.consume(l);return}return j.enter("data"),j.consume(l),a}function a(l){return s(l)?(j.exit("data"),o(l)):(j.consume(l),a)}function s(l){if(l===null)return!0;let k=r[l],c=-1;if(k)for(;++c<k.length;){let u=k[c];if(!u.previous||u.previous.call(t,t.previous))return!0}return!1}}}function Y7(A){return e;function e(j,t){let r=-1,o;for(;++r<=j.length;)o===void 0?j[r]&&j[r][1].type==="data"&&(o=r,r++):(!j[r]||j[r][1].type!=="data")&&(r!==o+2&&(j[o][1].end=j[r-1][1].end,j.splice(o+2,r-o-2),r=o+2),o=void 0);return A?A(j,t):j}}function oE(A,e){let j=0;for(;++j<=A.length;)if((j===A.length||A[j][1].type==="lineEnding")&&A[j-1][1].type==="data"){let t=A[j-1][1],r=e.sliceStream(t),o=r.length,n=-1,i=0,a;for(;o--;){let s=r[o];if(typeof s=="string"){for(n=s.length;s.charCodeAt(n-1)===32;)i++,n--;if(n)break;n=-1}else if(s===-2)a=!0,i++;else if(s!==-1){o++;break}}if(i){let s={type:j===A.length||a||i<2?"lineSuffix":"hardBreakTrailing",start:{line:t.end.line,column:t.end.column-i,offset:t.end.offset-i,_index:t.start._index+o,_bufferIndex:o?n:t.start._bufferIndex+n},end:Object.assign({},t.end)};t.end=Object.assign({},s.start),t.start.offset===t.end.offset?Object.assign(t,s):(A.splice(j,0,["enter",s,e],["exit",s,e]),j+=2)}j++}return A}function Z7(A,e,j){let t=Object.assign(j?Object.assign({},j):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1}),r={},o=[],n=[],i=[],a=!0,s={consume:_,enter:h,exit:G,attempt:v(O),check:v(w),interrupt:v(w,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:A,sliceStream:E,sliceSerialize:$,now:m,defineSkip:d,write:u},k=e.tokenize.call(l,s),c;return e.resolveAll&&o.push(e),l;function u(S){return n=gA(n,S),f(),n[n.length-1]!==null?[]:(F(e,0),l.events=uj(o,l.events,l),l.events)}function $(S,M){return aE(E(S),M)}function E(S){return iE(n,S)}function m(){let{line:S,column:M,offset:D,_index:J,_bufferIndex:V}=t;return{line:S,column:M,offset:D,_index:J,_bufferIndex:V}}function d(S){r[S.line]=S.column,P()}function f(){let S;for(;t._index<n.length;){let M=n[t._index];if(typeof M=="string")for(S=t._index,t._bufferIndex<0&&(t._bufferIndex=0);t._index===S&&t._bufferIndex<M.length;)R(M.charCodeAt(t._bufferIndex));else R(M)}}function R(S){a=void 0,c=S,k=k(S)}function _(S){C(S)?(t.line++,t.column=1,t.offset+=S===-3?2:1,P()):S!==-1&&(t.column++,t.offset++),t._bufferIndex<0?t._index++:(t._bufferIndex++,t._bufferIndex===n[t._index].length&&(t._bufferIndex=-1,t._index++)),l.previous=S,a=!0}function h(S,M){let D=M||{};return D.type=S,D.start=m(),l.events.push(["enter",D,l]),i.push(D),D}function G(S){let M=i.pop();return M.end=m(),l.events.push(["exit",M,l]),M}function O(S,M){F(S,M.from)}function w(S,M){M.restore()}function v(S,M){return D;function D(J,V,tA){let AA,B,Y,jA;return Array.isArray(J)?iA(J):"tokenize"in J?iA([J]):p(J);function p(cA){return dj;function dj(MA){let PA=MA!==null&&cA[MA],VA=MA!==null&&cA.null,Oj=[...Array.isArray(PA)?PA:PA?[PA]:[],...Array.isArray(VA)?VA:VA?[VA]:[]];return iA(Oj)(MA)}}function iA(cA){return AA=cA,B=0,cA.length===0?tA:bA(cA[B])}function bA(cA){return dj;function dj(MA){return jA=U(),Y=cA,cA.partial||(l.currentConstruct=cA),cA.name&&l.parser.constructs.disable.null.includes(cA.name)?NA(MA):cA.tokenize.call(M?Object.assign(Object.create(l),M):l,s,vA,NA)(MA)}}function vA(cA){return a=!0,S(Y,jA),V}function NA(cA){return a=!0,jA.restore(),++B<AA.length?bA(AA[B]):tA}}}function F(S,M){S.resolveAll&&!o.includes(S)&&o.push(S),S.resolve&&kA(l.events,M,l.events.length-M,S.resolve(l.events.slice(M),l)),S.resolveTo&&(l.events=S.resolveTo(l.events,l))}function U(){let S=m(),M=l.previous,D=l.currentConstruct,J=l.events.length,V=Array.from(i);return{restore:tA,from:J};function tA(){t=S,l.previous=M,l.currentConstruct=D,l.events.length=J,i=V,P()}}function P(){t.line in r&&t.column<2&&(t.column=r[t.line],t.offset+=r[t.line]-1)}}function iE(A,e){let j=e.start._index,t=e.start._bufferIndex,r=e.end._index,o=e.end._bufferIndex,n;if(j===r)n=[A[j].slice(t,o)];else{if(n=A.slice(j,r),t>-1){let i=n[0];typeof i=="string"?n[0]=i.slice(t):n.shift()}o>0&&n.push(A[r].slice(0,o))}return n}function aE(A,e){let j=-1,t=[],r;for(;++j<A.length;){let o=A[j],n;if(typeof o=="string")n=o;else switch(o){case-5:{n="\r";break}case-4:{n=`
`;break}case-3:{n=`\r
`;break}case-2:{n=e?" ":"	";break}case-1:{if(!e&&r)continue;n=" ";break}default:n=String.fromCharCode(o)}r=o===-2,t.push(n)}return t.join("")}var En={};wn(En,{attentionMarkers:()=>EE,contentInitial:()=>lE,disable:()=>BE,document:()=>sE,flow:()=>cE,flowInitial:()=>kE,insideSpan:()=>dE,string:()=>uE,text:()=>$E});var sE={42:RA,43:RA,45:RA,48:RA,49:RA,50:RA,51:RA,52:RA,53:RA,54:RA,55:RA,56:RA,57:RA,62:Kt},lE={91:tn},kE={[-2]:Ne,[-1]:Ne,32:Ne},cE={35:nn,42:Dj,45:[Yt,Dj],60:an,61:Yt,95:Dj,96:Qt,126:Qt},uE={38:Ht,92:Jt},$E={[-5]:Ke,[-4]:Ke,[-3]:Ke,33:ln,38:Ht,42:qe,60:[An,sn],91:kn,92:[rn,Jt],93:Cj,95:qe,96:jn},dE={null:[qe,V7]},EE={null:[42,95]},BE={null:[]};function Bn(A){let j=Lt([En,...(A||{}).extensions||[]]),t={defined:[],lazy:{},constructs:j,content:r(J7),document:r(Q7),flow:r(U7),string:r(X7),text:r(z7)};return t;function r(o){return n;function n(i){return Z7(t,o,i)}}}function pn(A){for(;!Vt(A););return A}var Al=/[\0\t\n\r]/g;function mn(){let A=1,e="",j=!0,t;return r;function r(o,n,i){let a=[],s,l,k,c,u;for(o=e+(typeof o=="string"?o.toString():new TextDecoder(n||void 0).decode(o)),k=0,e="",j&&(o.charCodeAt(0)===65279&&k++,j=void 0);k<o.length;){if(Al.lastIndex=k,s=Al.exec(o),c=s&&s.index!==void 0?s.index:o.length,u=o.charCodeAt(c),!s){e=o.slice(k);break}if(u===10&&k===c&&t)a.push(-3),t=void 0;else switch(t&&(a.push(-5),t=void 0),k<c&&(a.push(o.slice(k,c)),A+=c-k),u){case 0:{a.push(65533),A++;break}case 9:{for(l=Math.ceil(A/4)*4,a.push(-2);A++<l;)a.push(-1);break}case 10:{a.push(-4),A=1;break}default:t=!0,A=1}k=c+1}return i&&(t&&a.push(-5),e&&a.push(e),a.push(null)),a}}var el={}.hasOwnProperty;function fn(A,e,j){return typeof e!="string"&&(j=e,e=void 0),pE(j)(pn(Bn(j).document().write(mn()(A,e,!0))))}function pE(A){let e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:o(Pn),autolinkProtocol:v,autolinkEmail:v,atxHeading:o(On),blockQuote:o(MA),characterEscape:v,characterReference:v,codeFenced:o(PA),codeFencedFenceInfo:n,codeFencedFenceMeta:n,codeIndented:o(PA,n),codeText:o(VA,n),codeTextData:v,data:v,codeFlowValue:v,definition:o(Oj),definitionDestinationString:n,definitionLabelString:n,definitionTitleString:n,emphasis:o(re),hardBreakEscape:o(xn),hardBreakTrailing:o(xn),htmlFlow:o(vn,n),htmlFlowData:v,htmlText:o(vn,n),htmlTextData:v,image:o(Ul),label:n,link:o(Pn),listItem:o(Vl),listItemValue:c,listOrdered:o(Tn,k),listUnordered:o(Tn),paragraph:o(Xl),reference:p,referenceString:n,resourceDestinationString:n,resourceTitleString:n,setextHeading:o(On),strong:o(zl),thematicBreak:o(Yl)},exit:{atxHeading:a(),atxHeadingSequence:h,autolink:a(),autolinkEmail:dj,autolinkProtocol:cA,blockQuote:a(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:bA,characterReferenceMarkerNumeric:bA,characterReferenceValue:vA,characterReference:NA,codeFenced:a(m),codeFencedFence:E,codeFencedFenceInfo:u,codeFencedFenceMeta:$,codeFlowValue:F,codeIndented:a(d),codeText:a(D),codeTextData:F,data:F,definition:a(),definitionDestinationString:_,definitionLabelString:f,definitionTitleString:R,emphasis:a(),hardBreakEscape:a(P),hardBreakTrailing:a(P),htmlFlow:a(S),htmlFlowData:F,htmlText:a(M),htmlTextData:F,image:a(V),label:AA,labelText:tA,lineEnding:U,link:a(J),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:iA,resourceDestinationString:B,resourceTitleString:Y,resource:jA,setextHeading:a(w),setextHeadingLineSequence:O,setextHeadingText:G,strong:a(),thematicBreak:a()}};tl(e,(A||{}).mdastExtensions||[]);let j={};return t;function t(g){let y={type:"root",children:[]},L={stack:[y],tokenStack:[],config:e,enter:i,exit:s,buffer:n,resume:l,data:j},Q=[],Z=-1;for(;++Z<g.length;)if(g[Z][1].type==="listOrdered"||g[Z][1].type==="listUnordered")if(g[Z][0]==="enter")Q.push(Z);else{let TA=Q.pop();Z=r(g,TA,Z)}for(Z=-1;++Z<g.length;){let TA=e[g[Z][0]];el.call(TA,g[Z][1].type)&&TA[g[Z][1].type].call(Object.assign({sliceSerialize:g[Z][2].sliceSerialize},L),g[Z][1])}if(L.tokenStack.length>0){let TA=L.tokenStack[L.tokenStack.length-1];(TA[1]||jl).call(L,void 0,TA[0])}for(y.position={start:$j(g.length>0?g[0][1].start:{line:1,column:1,offset:0}),end:$j(g.length>0?g[g.length-2][1].end:{line:1,column:1,offset:0})},Z=-1;++Z<e.transforms.length;)y=e.transforms[Z](y)||y;return y}function r(g,y,L){let Q=y-1,Z=-1,TA=!1,Ej,XA,ne,oe;for(;++Q<=L;){let _A=g[Q];switch(_A[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{_A[0]==="enter"?Z++:Z--,oe=void 0;break}case"lineEndingBlank":{_A[0]==="enter"&&(Ej&&!oe&&!Z&&!ne&&(ne=Q),oe=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:oe=void 0}if(!Z&&_A[0]==="enter"&&_A[1].type==="listItemPrefix"||Z===-1&&_A[0]==="exit"&&(_A[1].type==="listUnordered"||_A[1].type==="listOrdered")){if(Ej){let xj=Q;for(XA=void 0;xj--;){let zA=g[xj];if(zA[1].type==="lineEnding"||zA[1].type==="lineEndingBlank"){if(zA[0]==="exit")continue;XA&&(g[XA][1].type="lineEndingBlank",TA=!0),zA[1].type="lineEnding",XA=xj}else if(!(zA[1].type==="linePrefix"||zA[1].type==="blockQuotePrefix"||zA[1].type==="blockQuotePrefixWhitespace"||zA[1].type==="blockQuoteMarker"||zA[1].type==="listItemIndent"))break}ne&&(!XA||ne<XA)&&(Ej._spread=!0),Ej.end=Object.assign({},XA?g[XA][1].start:_A[1].end),g.splice(XA||Q,0,["exit",Ej,_A[2]]),Q++,L++}if(_A[1].type==="listItemPrefix"){let xj={type:"listItem",_spread:!1,start:Object.assign({},_A[1].start),end:void 0};Ej=xj,g.splice(Q,0,["enter",xj,_A[2]]),Q++,L++,ne=void 0,oe=!0}}}return g[y][1]._spread=TA,L}function o(g,y){return L;function L(Q){i.call(this,g(Q),Q),y&&y.call(this,Q)}}function n(){this.stack.push({type:"fragment",children:[]})}function i(g,y,L){this.stack[this.stack.length-1].children.push(g),this.stack.push(g),this.tokenStack.push([y,L]),g.position={start:$j(y.start),end:void 0}}function a(g){return y;function y(L){g&&g.call(this,L),s.call(this,L)}}function s(g,y){let L=this.stack.pop(),Q=this.tokenStack.pop();if(Q)Q[0].type!==g.type&&(y?y.call(this,g,Q[0]):(Q[1]||jl).call(this,g,Q[0]));else throw new Error("Cannot close `"+g.type+"` ("+aj({start:g.start,end:g.end})+"): it\u2019s not open");L.position.end=$j(g.end)}function l(){return gj(this.stack.pop())}function k(){this.data.expectingFirstListItemValue=!0}function c(g){if(this.data.expectingFirstListItemValue){let y=this.stack[this.stack.length-2];y.start=Number.parseInt(this.sliceSerialize(g),10),this.data.expectingFirstListItemValue=void 0}}function u(){let g=this.resume(),y=this.stack[this.stack.length-1];y.lang=g}function $(){let g=this.resume(),y=this.stack[this.stack.length-1];y.meta=g}function E(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function m(){let g=this.resume(),y=this.stack[this.stack.length-1];y.value=g.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function d(){let g=this.resume(),y=this.stack[this.stack.length-1];y.value=g.replace(/(\r?\n|\r)$/g,"")}function f(g){let y=this.resume(),L=this.stack[this.stack.length-1];L.label=y,L.identifier=FA(this.sliceSerialize(g)).toLowerCase()}function R(){let g=this.resume(),y=this.stack[this.stack.length-1];y.title=g}function _(){let g=this.resume(),y=this.stack[this.stack.length-1];y.url=g}function h(g){let y=this.stack[this.stack.length-1];if(!y.depth){let L=this.sliceSerialize(g).length;y.depth=L}}function G(){this.data.setextHeadingSlurpLineEnding=!0}function O(g){let y=this.stack[this.stack.length-1];y.depth=this.sliceSerialize(g).codePointAt(0)===61?1:2}function w(){this.data.setextHeadingSlurpLineEnding=void 0}function v(g){let L=this.stack[this.stack.length-1].children,Q=L[L.length-1];(!Q||Q.type!=="text")&&(Q=Wl(),Q.position={start:$j(g.start),end:void 0},L.push(Q)),this.stack.push(Q)}function F(g){let y=this.stack.pop();y.value+=this.sliceSerialize(g),y.position.end=$j(g.end)}function U(g){let y=this.stack[this.stack.length-1];if(this.data.atHardBreak){let L=y.children[y.children.length-1];L.position.end=$j(g.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(y.type)&&(v.call(this,g),F.call(this,g))}function P(){this.data.atHardBreak=!0}function S(){let g=this.resume(),y=this.stack[this.stack.length-1];y.value=g}function M(){let g=this.resume(),y=this.stack[this.stack.length-1];y.value=g}function D(){let g=this.resume(),y=this.stack[this.stack.length-1];y.value=g}function J(){let g=this.stack[this.stack.length-1];if(this.data.inReference){let y=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=y,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function V(){let g=this.stack[this.stack.length-1];if(this.data.inReference){let y=this.data.referenceType||"shortcut";g.type+="Reference",g.referenceType=y,delete g.url,delete g.title}else delete g.identifier,delete g.label;this.data.referenceType=void 0}function tA(g){let y=this.sliceSerialize(g),L=this.stack[this.stack.length-2];L.label=Ot(y),L.identifier=FA(y).toLowerCase()}function AA(){let g=this.stack[this.stack.length-1],y=this.resume(),L=this.stack[this.stack.length-1];if(this.data.inReference=!0,L.type==="link"){let Q=g.children;L.children=Q}else L.alt=y}function B(){let g=this.resume(),y=this.stack[this.stack.length-1];y.url=g}function Y(){let g=this.resume(),y=this.stack[this.stack.length-1];y.title=g}function jA(){this.data.inReference=void 0}function p(){this.data.referenceType="collapsed"}function iA(g){let y=this.resume(),L=this.stack[this.stack.length-1];L.label=y,L.identifier=FA(this.sliceSerialize(g)).toLowerCase(),this.data.referenceType="full"}function bA(g){this.data.characterReferenceType=g.type}function vA(g){let y=this.sliceSerialize(g),L=this.data.characterReferenceType,Q;L?(Q=Dt(y,L==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Q=Yj(y);let Z=this.stack[this.stack.length-1];Z.value+=Q}function NA(g){let y=this.stack.pop();y.position.end=$j(g.end)}function cA(g){F.call(this,g);let y=this.stack[this.stack.length-1];y.url=this.sliceSerialize(g)}function dj(g){F.call(this,g);let y=this.stack[this.stack.length-1];y.url="mailto:"+this.sliceSerialize(g)}function MA(){return{type:"blockquote",children:[]}}function PA(){return{type:"code",lang:null,meta:null,value:""}}function VA(){return{type:"inlineCode",value:""}}function Oj(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function re(){return{type:"emphasis",children:[]}}function On(){return{type:"heading",depth:0,children:[]}}function xn(){return{type:"break"}}function vn(){return{type:"html",value:""}}function Ul(){return{type:"image",title:null,url:"",alt:null}}function Pn(){return{type:"link",title:null,url:"",children:[]}}function Tn(g){return{type:"list",ordered:g.type==="listOrdered",start:null,spread:g._spread,children:[]}}function Vl(g){return{type:"listItem",spread:g._spread,checked:null,children:[]}}function Xl(){return{type:"paragraph",children:[]}}function zl(){return{type:"strong",children:[]}}function Wl(){return{type:"text",value:""}}function Yl(){return{type:"thematicBreak"}}}function $j(A){return{line:A.line,column:A.column,offset:A.offset}}function tl(A,e){let j=-1;for(;++j<e.length;){let t=e[j];Array.isArray(t)?tl(A,t):mE(A,t)}}function mE(A,e){let j;for(j in e)if(el.call(e,j))switch(j){case"canContainEols":{let t=e[j];t&&A[j].push(...t);break}case"transforms":{let t=e[j];t&&A[j].push(...t);break}case"enter":case"exit":{let t=e[j];t&&Object.assign(A[j],t);break}}}function jl(A,e){throw A?new Error("Cannot close `"+A.type+"` ("+aj({start:A.start,end:A.end})+"): a different token (`"+e.type+"`, "+aj({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+aj({start:e.start,end:e.end})+") is still open")}function jr(A){let e=this;e.parser=j;function j(t){return fn(t,{...e.data("settings"),...A,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function rl(A,e){let j={type:"element",tagName:"blockquote",properties:{},children:A.wrap(A.all(e),!0)};return A.patch(e,j),A.applyData(e,j)}function nl(A,e){let j={type:"element",tagName:"br",properties:{},children:[]};return A.patch(e,j),[A.applyData(e,j),{type:"text",value:`
`}]}function ol(A,e){let j=e.value?e.value+`
`:"",t={};e.lang&&(t.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:t,children:[{type:"text",value:j}]};return e.meta&&(r.data={meta:e.meta}),A.patch(e,r),r=A.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},A.patch(e,r),r}function il(A,e){let j={type:"element",tagName:"del",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function al(A,e){let j={type:"element",tagName:"em",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function sl(A,e){let j=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",t=String(e.identifier).toUpperCase(),r=xA(t.toLowerCase()),o=A.footnoteOrder.indexOf(t),n,i=A.footnoteCounts.get(t);i===void 0?(i=0,A.footnoteOrder.push(t),n=A.footnoteOrder.length):n=o+1,i+=1,A.footnoteCounts.set(t,i);let a={type:"element",tagName:"a",properties:{href:"#"+j+"fn-"+r,id:j+"fnref-"+r+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(n)}]};A.patch(e,a);let s={type:"element",tagName:"sup",properties:{},children:[a]};return A.patch(e,s),A.applyData(e,s)}function ll(A,e){let j={type:"element",tagName:"h"+e.depth,properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function kl(A,e){if(A.options.allowDangerousHtml){let j={type:"raw",value:e.value};return A.patch(e,j),A.applyData(e,j)}}function er(A,e){let j=e.referenceType,t="]";if(j==="collapsed"?t+="[]":j==="full"&&(t+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+t}];let r=A.all(e),o=r[0];o&&o.type==="text"?o.value="["+o.value:r.unshift({type:"text",value:"["});let n=r[r.length-1];return n&&n.type==="text"?n.value+=t:r.push({type:"text",value:t}),r}function cl(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return er(A,e);let r={src:xA(t.url||""),alt:e.alt};t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"img",properties:r,children:[]};return A.patch(e,o),A.applyData(e,o)}function ul(A,e){let j={src:xA(e.url)};e.alt!==null&&e.alt!==void 0&&(j.alt=e.alt),e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"img",properties:j,children:[]};return A.patch(e,t),A.applyData(e,t)}function $l(A,e){let j={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};A.patch(e,j);let t={type:"element",tagName:"code",properties:{},children:[j]};return A.patch(e,t),A.applyData(e,t)}function dl(A,e){let j=String(e.identifier).toUpperCase(),t=A.definitionById.get(j);if(!t)return er(A,e);let r={href:xA(t.url||"")};t.title!==null&&t.title!==void 0&&(r.title=t.title);let o={type:"element",tagName:"a",properties:r,children:A.all(e)};return A.patch(e,o),A.applyData(e,o)}function El(A,e){let j={href:xA(e.url)};e.title!==null&&e.title!==void 0&&(j.title=e.title);let t={type:"element",tagName:"a",properties:j,children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function Bl(A,e,j){let t=A.all(e),r=j?fE(j):pl(e),o={},n=[];if(typeof e.checked=="boolean"){let l=t[0],k;l&&l.type==="element"&&l.tagName==="p"?k=l:(k={type:"element",tagName:"p",properties:{},children:[]},t.unshift(k)),k.children.length>0&&k.children.unshift({type:"text",value:" "}),k.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),o.className=["task-list-item"]}let i=-1;for(;++i<t.length;){let l=t[i];(r||i!==0||l.type!=="element"||l.tagName!=="p")&&n.push({type:"text",value:`
`}),l.type==="element"&&l.tagName==="p"&&!r?n.push(...l.children):n.push(l)}let a=t[t.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&n.push({type:"text",value:`
`});let s={type:"element",tagName:"li",properties:o,children:n};return A.patch(e,s),A.applyData(e,s)}function fE(A){let e=!1;if(A.type==="list"){e=A.spread||!1;let j=A.children,t=-1;for(;!e&&++t<j.length;)e=pl(j[t])}return e}function pl(A){let e=A.spread;return e??A.children.length>1}function ml(A,e){let j={},t=A.all(e),r=-1;for(typeof e.start=="number"&&e.start!==1&&(j.start=e.start);++r<t.length;){let n=t[r];if(n.type==="element"&&n.tagName==="li"&&n.properties&&Array.isArray(n.properties.className)&&n.properties.className.includes("task-list-item")){j.className=["contains-task-list"];break}}let o={type:"element",tagName:e.ordered?"ol":"ul",properties:j,children:A.wrap(t,!0)};return A.patch(e,o),A.applyData(e,o)}function fl(A,e){let j={type:"element",tagName:"p",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function Gl(A,e){let j={type:"root",children:A.wrap(A.all(e))};return A.patch(e,j),A.applyData(e,j)}function Fl(A,e){let j={type:"element",tagName:"strong",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}var tr=Rl("end"),rr=Rl("start");function Rl(A){return e;function e(j){let t=j&&j.position&&j.position[A]||{};if(typeof t.line=="number"&&t.line>0&&typeof t.column=="number"&&t.column>0)return{line:t.line,column:t.column,offset:typeof t.offset=="number"&&t.offset>-1?t.offset:void 0}}}function Gn(A){let e=rr(A),j=tr(A);if(e&&j)return{start:e,end:j}}function Il(A,e){let j=A.all(e),t=j.shift(),r=[];if(t){let n={type:"element",tagName:"thead",properties:{},children:A.wrap([t],!0)};A.patch(e.children[0],n),r.push(n)}if(j.length>0){let n={type:"element",tagName:"tbody",properties:{},children:A.wrap(j,!0)},i=rr(e.children[1]),a=tr(e.children[e.children.length-1]);i&&a&&(n.position={start:i,end:a}),r.push(n)}let o={type:"element",tagName:"table",properties:{},children:A.wrap(r,!0)};return A.patch(e,o),A.applyData(e,o)}function gl(A,e,j){let t=j?j.children:void 0,o=(t?t.indexOf(e):1)===0?"th":"td",n=j&&j.type==="table"?j.align:void 0,i=n?n.length:e.children.length,a=-1,s=[];for(;++a<i;){let k=e.children[a],c={},u=n?n[a]:void 0;u&&(c.align=u);let $={type:"element",tagName:o,properties:c,children:[]};k&&($.children=A.all(k),A.patch(k,$),$=A.applyData(k,$)),s.push($)}let l={type:"element",tagName:"tr",properties:{},children:A.wrap(s,!0)};return A.patch(e,l),A.applyData(e,l)}function hl(A,e){let j={type:"element",tagName:"td",properties:{},children:A.all(e)};return A.patch(e,j),A.applyData(e,j)}function bl(A,e){let j={type:"text",value:fo(String(e.value))};return A.patch(e,j),A.applyData(e,j)}function _l(A,e){let j={type:"element",tagName:"hr",properties:{},children:[]};return A.patch(e,j),A.applyData(e,j)}var Sl={blockquote:rl,break:nl,code:ol,delete:il,emphasis:al,footnoteReference:sl,heading:ll,html:kl,imageReference:cl,image:ul,inlineCode:$l,linkReference:dl,link:El,listItem:Bl,list:ml,paragraph:fl,root:Gl,strong:Fl,table:Il,tableCell:hl,tableRow:gl,text:bl,thematicBreak:_l,toml:nr,yaml:nr,definition:nr,footnoteDefinition:nr};function nr(){}var yl=typeof self=="object"?self:globalThis,GE=(A,e)=>{let j=(r,o)=>(A.set(o,r),r),t=r=>{if(A.has(r))return A.get(r);let[o,n]=e[r];switch(o){case 0:case-1:return j(n,r);case 1:{let i=j([],r);for(let a of n)i.push(t(a));return i}case 2:{let i=j({},r);for(let[a,s]of n)i[t(a)]=t(s);return i}case 3:return j(new Date(n),r);case 4:{let{source:i,flags:a}=n;return j(new RegExp(i,a),r)}case 5:{let i=j(new Map,r);for(let[a,s]of n)i.set(t(a),t(s));return i}case 6:{let i=j(new Set,r);for(let a of n)i.add(t(a));return i}case 7:{let{name:i,message:a}=n;return j(new yl[i](a),r)}case 8:return j(BigInt(n),r);case"BigInt":return j(Object(BigInt(n)),r)}return j(new yl[o](n),r)};return t},gn=A=>GE(new Map,A)(0);var ee="",{toString:FE}={},{keys:RE}=Object,Ve=A=>{let e=typeof A;if(e!=="object"||!A)return[0,e];let j=FE.call(A).slice(8,-1);switch(j){case"Array":return[1,ee];case"Object":return[2,ee];case"Date":return[3,ee];case"RegExp":return[4,ee];case"Map":return[5,ee];case"Set":return[6,ee]}return j.includes("Array")?[1,j]:j.includes("Error")?[7,j]:[2,j]},lr=([A,e])=>A===0&&(e==="function"||e==="symbol"),IE=(A,e,j,t)=>{let r=(n,i)=>{let a=t.push(n)-1;return j.set(i,a),a},o=n=>{if(j.has(n))return j.get(n);let[i,a]=Ve(n);switch(i){case 0:{let l=n;switch(a){case"bigint":i=8,l=n.toString();break;case"function":case"symbol":if(A)throw new TypeError("unable to serialize "+a);l=null;break;case"undefined":return r([-1],n)}return r([i,l],n)}case 1:{if(a)return r([a,[...n]],n);let l=[],k=r([i,l],n);for(let c of n)l.push(o(c));return k}case 2:{if(a)switch(a){case"BigInt":return r([a,n.toString()],n);case"Boolean":case"Number":case"String":return r([a,n.valueOf()],n)}if(e&&"toJSON"in n)return o(n.toJSON());let l=[],k=r([i,l],n);for(let c of RE(n))(A||!lr(Ve(n[c])))&&l.push([o(c),o(n[c])]);return k}case 3:return r([i,n.toISOString()],n);case 4:{let{source:l,flags:k}=n;return r([i,{source:l,flags:k}],n)}case 5:{let l=[],k=r([i,l],n);for(let[c,u]of n)(A||!(lr(Ve(c))||lr(Ve(u))))&&l.push([o(c),o(u)]);return k}case 6:{let l=[],k=r([i,l],n);for(let c of n)(A||!lr(Ve(c)))&&l.push(o(c));return k}}let{message:s}=n;return r([i,{name:a,message:s}],n)};return o},hn=(A,{json:e,lossy:j}={})=>{let t=[];return IE(!(e||j),!!e,new Map,t)(A),t};var te=typeof structuredClone=="function"?(A,e)=>e&&("json"in e||"lossy"in e)?gn(hn(A,e)):structuredClone(A):(A,e)=>gn(hn(A,e));function gE(A,e){let j=[{type:"text",value:"\u21A9"}];return e>1&&j.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),j}function hE(A,e){return"Back to reference "+(A+1)+(e>1?"-"+e:"")}function Ml(A){let e=typeof A.options.clobberPrefix=="string"?A.options.clobberPrefix:"user-content-",j=A.options.footnoteBackContent||gE,t=A.options.footnoteBackLabel||hE,r=A.options.footnoteLabel||"Footnotes",o=A.options.footnoteLabelTagName||"h2",n=A.options.footnoteLabelProperties||{className:["sr-only"]},i=[],a=-1;for(;++a<A.footnoteOrder.length;){let s=A.footnoteById.get(A.footnoteOrder[a]);if(!s)continue;let l=A.all(s),k=String(s.identifier).toUpperCase(),c=xA(k.toLowerCase()),u=0,$=[],E=A.footnoteCounts.get(k);for(;E!==void 0&&++u<=E;){$.length>0&&$.push({type:"text",value:" "});let f=typeof j=="string"?j:j(a,u);typeof f=="string"&&(f={type:"text",value:f}),$.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof t=="string"?t:t(a,u),className:["data-footnote-backref"]},children:Array.isArray(f)?f:[f]})}let m=l[l.length-1];if(m&&m.type==="element"&&m.tagName==="p"){let f=m.children[m.children.length-1];f&&f.type==="text"?f.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...$)}else l.push(...$);let d={type:"element",tagName:"li",properties:{id:e+"fn-"+c},children:A.wrap(l,!0)};A.patch(s,d),i.push(d)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:o,properties:{...te(n),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:A.wrap(i,!0)},{type:"text",value:`
`}]}}var bn={}.hasOwnProperty,bE={};function Dl(A,e){let j=e||bE,t=new Map,r=new Map,o=new Map,n={...Sl,...j.handlers},i={all:s,applyData:SE,definitionById:t,footnoteById:r,footnoteCounts:o,footnoteOrder:[],handlers:n,one:a,options:j,patch:_E,wrap:ME};return tt(A,function(l){if(l.type==="definition"||l.type==="footnoteDefinition"){let k=l.type==="definition"?t:r,c=String(l.identifier).toUpperCase();k.has(c)||k.set(c,l)}}),i;function a(l,k){let c=l.type,u=i.handlers[c];if(bn.call(i.handlers,c)&&u)return u(i,l,k);if(i.options.passThrough&&i.options.passThrough.includes(c)){if("children"in l){let{children:E,...m}=l,d=te(m);return d.children=i.all(l),d}return te(l)}return(i.options.unknownHandler||yE)(i,l,k)}function s(l){let k=[];if("children"in l){let c=l.children,u=-1;for(;++u<c.length;){let $=i.one(c[u],l);if($){if(u&&c[u-1].type==="break"&&(!Array.isArray($)&&$.type==="text"&&($.value=Cl($.value)),!Array.isArray($)&&$.type==="element")){let E=$.children[0];E&&E.type==="text"&&(E.value=Cl(E.value))}Array.isArray($)?k.push(...$):k.push($)}}}return k}}function _E(A,e){A.position&&(e.position=Gn(A))}function SE(A,e){let j=e;if(A&&A.data){let t=A.data.hName,r=A.data.hChildren,o=A.data.hProperties;if(typeof t=="string")if(j.type==="element")j.tagName=t;else{let n="children"in j?j.children:[j];j={type:"element",tagName:t,properties:{},children:n}}j.type==="element"&&o&&Object.assign(j.properties,te(o)),"children"in j&&j.children&&r!==null&&r!==void 0&&(j.children=r)}return j}function yE(A,e){let j=e.data||{},t="value"in e&&!(bn.call(j,"hProperties")||bn.call(j,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:A.all(e)};return A.patch(e,t),A.applyData(e,t)}function ME(A,e){let j=[],t=-1;for(e&&j.push({type:"text",value:`
`});++t<A.length;)t&&j.push({type:"text",value:`
`}),j.push(A[t]);return e&&A.length>0&&j.push({type:"text",value:`
`}),j}function Cl(A){let e=0,j=A.charCodeAt(e);for(;j===9||j===32;)e++,j=A.charCodeAt(e);return A.slice(e)}function kr(A,e){let j=Dl(A,e),t=j.one(A,void 0),r=Ml(j),o=Array.isArray(t)?{type:"root",children:t}:t||{type:"root",children:[]};return r&&("children"in o,o.children.push({type:"text",value:`
`},r)),o}function cr(A,e){return A&&"run"in A?async function(j,t){let r=kr(j,{file:t,...e});await A.run(r,t)}:function(j,t){return kr(j,{file:t,...A||e})}}function ur(A){let e=this;e.compiler=j;function j(t){return _6(t,{...e.data("settings"),...A,extensions:e.data("toMarkdownExtensions")||[]})}}function _n(A){if(A)throw A}var Er=pr(Ll(),1);function Xe(A){if(typeof A!="object"||A===null)return!1;let e=Object.getPrototypeOf(A);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in A)&&!(Symbol.iterator in A)}function Sn(){let A=[],e={run:j,use:t};return e;function j(...r){let o=-1,n=r.pop();if(typeof n!="function")throw new TypeError("Expected function as last argument, not "+n);i(null,...r);function i(a,...s){let l=A[++o],k=-1;if(a){n(a);return}for(;++k<r.length;)(s[k]===null||s[k]===void 0)&&(s[k]=r[k]);r=s,l?Kl(l,i)(...s):n(null,...s)}}function t(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return A.push(r),e}}function Kl(A,e){let j;return t;function t(...n){let i=A.length>n.length,a;i&&n.push(r);try{a=A.apply(this,n)}catch(s){let l=s;if(i&&j)throw l;return r(l)}i||(a&&a.then&&typeof a.then=="function"?a.then(o,r):a instanceof Error?r(a):o(a))}function r(n,...i){j||(j=!0,e(n,...i))}function o(n){r(null,n)}}var Jl=function(A){let t=this.constructor.prototype,r=t[A],o=function(){return r.apply(o,arguments)};return Object.setPrototypeOf(o,t),o};var CE={}.hasOwnProperty,Dn=class A extends Jl{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Sn()}copy(){let e=new A,j=-1;for(;++j<this.attachers.length;){let t=this.attachers[j];e.use(...t)}return e.data((0,Er.default)(!0,{},this.namespace)),e}data(e,j){return typeof e=="string"?arguments.length===2?(Cn("data",this.frozen),this.namespace[e]=j,this):CE.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Cn("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;let e=this;for(;++this.freezeIndex<this.attachers.length;){let[j,...t]=this.attachers[this.freezeIndex];if(t[0]===!1)continue;t[0]===!0&&(t[0]=void 0);let r=j.call(e,...t);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();let j=dr(e),t=this.parser||this.Parser;return yn("parse",t),t(String(j),j)}process(e,j){let t=this;return this.freeze(),yn("process",this.parser||this.Parser),Mn("process",this.compiler||this.Compiler),j?r(void 0,j):new Promise(r);function r(o,n){let i=dr(e),a=t.parse(i);t.run(a,i,function(l,k,c){if(l||!k||!c)return s(l);let u=k,$=t.stringify(u,c);OE($)?c.value=$:c.result=$,s(l,c)});function s(l,k){l||!k?n(l):o?o(k):j(void 0,k)}}}processSync(e){let j=!1,t;return this.freeze(),yn("processSync",this.parser||this.Parser),Mn("processSync",this.compiler||this.Compiler),this.process(e,r),Ql("processSync","process",j),t;function r(o,n){j=!0,_n(o),t=n}}run(e,j,t){Hl(e),this.freeze();let r=this.transformers;return!t&&typeof j=="function"&&(t=j,j=void 0),t?o(void 0,t):new Promise(o);function o(n,i){let a=dr(j);r.run(e,a,s);function s(l,k,c){let u=k||e;l?i(l):n?n(u):t(void 0,u,c)}}}runSync(e,j){let t=!1,r;return this.run(e,j,o),Ql("runSync","run",t),r;function o(n,i){_n(n),r=i,t=!0}}stringify(e,j){this.freeze();let t=dr(j),r=this.compiler||this.Compiler;return Mn("stringify",r),Hl(e),r(e,t)}use(e,...j){let t=this.attachers,r=this.namespace;if(Cn("use",this.frozen),e!=null)if(typeof e=="function")a(e,j);else if(typeof e=="object")Array.isArray(e)?i(e):n(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function o(s){if(typeof s=="function")a(s,[]);else if(typeof s=="object")if(Array.isArray(s)){let[l,...k]=s;a(l,k)}else n(s);else throw new TypeError("Expected usable value, not `"+s+"`")}function n(s){if(!("plugins"in s)&&!("settings"in s))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(s.plugins),s.settings&&(r.settings=(0,Er.default)(!0,r.settings,s.settings))}function i(s){let l=-1;if(s!=null)if(Array.isArray(s))for(;++l<s.length;){let k=s[l];o(k)}else throw new TypeError("Expected a list of plugins, not `"+s+"`")}function a(s,l){let k=-1,c=-1;for(;++k<t.length;)if(t[k][0]===s){c=k;break}if(c===-1)t.push([s,...l]);else if(l.length>0){let[u,...$]=l,E=t[c][1];Xe(E)&&Xe(u)&&(u=(0,Er.default)(!0,E,u)),t[c]=[s,u,...$]}}}},Br=new Dn().freeze();function yn(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `parser`")}function Mn(A,e){if(typeof e!="function")throw new TypeError("Cannot `"+A+"` without `compiler`")}function Cn(A,e){if(e)throw new Error("Cannot call `"+A+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Hl(A){if(!Xe(A)||typeof A.type!="string")throw new TypeError("Expected node, got `"+A+"`")}function Ql(A,e,j){if(!j)throw new Error("`"+A+"` finished async. Use `"+e+"` instead")}function dr(A){return DE(A)?A:new he(A)}function DE(A){return!!(A&&typeof A=="object"&&"message"in A&&"messages"in A)}function OE(A){return typeof A=="string"||xE(A)}function xE(A){return!!(A&&typeof A=="object"&&"byteLength"in A&&"byteOffset"in A)}var vE=/^(#{1,6})\s+(.+)$/m,PE=/\*\*(.*?)\*\*/,TE=/\*(.*?)\*/,wE=/^\s*[-*+]\s+(.+)$/m,qE=/^\s*(\d+)\.\s+(.+)$/m,NE=/^>\s+(.+)$/m,LE=/\[([^\]]+)\]\((https?:\/\/[^)]+)\)/,KE=/`([^`]+)`/,JE=/```[\s\S]*?```/,HE=/^\s*\|(.+\|)+\s*$/m,QE=/~~(.*?)~~/,UE=/^\s*[-*+]\s+\[[ x]\]\s+\S/m,VE=/^(-{3,}|_{3,})\s*$/m,XE=/!\[([^\]]*)\]\((https?:\/\/[^)]+)\)/,zE=/<(https?:\/\/[^>]+)>/;function bM(A){return!A||A.length===0?!1:[vE,PE,TE,wE,qE,NE,LE,KE,JE,HE,QE,UE,VE,XE,zE].some(j=>j.test(A))}function WE(A){return Br().use(jr).use(Nt).use(Je).use(cr,{handlers:{break:function(j,t){let r={type:"element",tagName:"br",properties:{},children:[]};return j.patch(t,r),[j.applyData(t,r)]}}}).use(qt).processSync(A).toString()}function _M(A,e){let j=WE(A),t=document.createElement("div");return t.innerHTML=j,mo.fromSchema(e).parseSlice(t,{preserveWhitespace:!0})}function SM(A,e,j){let t={},r;for(r in j.nodes){let a=j.nodes[r].spec.toMarkdown;t[r]=(...s)=>a(...s,e)}let o={},n;for(n in j.marks){let a=j.marks[n].spec.toMarkdown;o[n]=(...s)=>a(...s,e)}let i=Io(A,{schema:j,nodeHandlers:t,markHandlers:o});return Br().use(Je).use(ur,{handlers:{text(...a){let[s]=a;return s.data?.avoidEscaping?s.value:jj.text(...a)}},bullet:"-",emphasis:"_"}).stringify(i)}function OM({stackElement:A,tree:e}){return A?e.getNodeWithTrait(A.type==="temporary"?A.collectionId:e.getParent(A.itemId)?.id,et):null}function xM({treeStore:A,contentManagementStore:e,stackElement:j}){if(!j)return null;if(j.type==="existing")return A.tree.getNodeWithTrait(j.itemId,ke);if(j.type==="temporary")return e.temporaryItemCache.get(j.itemId)??null;Bj(j)}function vM(A,e=[]){let j=A.stores.selectionStore.ids.length===1?A.stores.selectionStore.ids.at(0):void 0,t=ZE(A,e),r=t.at(0),o=A.tree.getNodeWithTrait(j,ke);if(o){if(!r)return[{itemId:o.id,type:"existing"}];if(r.type==="existing")return r.itemId===o.id?t:(I(t.length===1,"Must dismiss overlay stack before changing selection"),[{itemId:o.id,type:"existing"}]);if(r.type==="temporary")throw new Error("Must save temporary item stack before selecting a collection item");Bj(r)}if(!r||r.type==="temporary")return t;if(r.type==="existing")return A.stores.chromeStore.mainView!==2?t:(I(t.length===1,"Must dismiss overlay stack before de-selecting collection item"),[]);Bj(r)}function ZE(A,e){let j=[];for(let t=0;t<e.length;t++){let r=e[t];if(!r)continue;if(r.type==="temporary"&&A.tree.has(r.itemId)&&(r={type:"existing",itemId:r.itemId}),!AB(A,r))break;j.push(r),t>0&&I(r.type==="existing"||!!r.saveAction,"Temporary items in the stack must have saveAction, except when they are the first")}return j}function AB(A,e){if(e.type==="temporary")return I(!A.tree.has(e.itemId),"Temporary stack element must not exist in the tree. It should be turned existing before passing it to validateOverlayStackElement."),A.tree.has(e.collectionId)&&A.stores.contentManagementStore.temporaryItemCache.has(e.itemId);if(e.type==="existing")return A.tree.has(e.itemId);Bj(e)}function TM(A,e){let j=e.getItemIds(A.id);if(j)return j[0]}export{la as a,ka as b,EA as c,he as d,rs as e,uc as f,c6 as g,as as h,ss as i,TM as j,Ba as k,Z0 as l,pa as m,tB as n,Ui as o,Vi as p,rB as q,sj as r,np as s,Qj as t,op as u,Ga as v,be as w,fp as x,bk as y,Gp as z,_k as A,Sk as B,Wr as C,Fa as D,Fp as E,Ra as F,Rp as G,j6 as H,e6 as I,t6 as J,xk as K,Gm as L,GB as M,FB as N,ja as O,za as P,Ac as Q,jc as R,ta as S,u6 as T,pc as U,ks as V,fc as W,ra as X,cs as Y,us as Z,Ic as _,d6 as $,gc as aa,RF as ba,PF as ca,bc as da,_c as ea,Bs as fa,bj as ga,Nt as ha,jr as ia,cr as ja,Br as ka,bM as la,WE as ma,_M as na,SM as oa,OM as pa,xM as qa,vM as ra,ZE as sa};
//# sourceMappingURL=https://app.framerstatic.com/chunk-FDLLIFYZ.mjs.map
